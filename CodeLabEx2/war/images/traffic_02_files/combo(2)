var wrappedFn = function () {
if(NeoConfig.fix_date&&(navigator.userAgent.indexOf("Chrome")>0)){var oldDate=Date,statted={},version=navigator.userAgent,goodMethods=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","toDateString","toGMTString","toISOString","toJSON","toLocaleDateString","toLocaleString","toLocaleTimeString","toString","toTimeString","toUTCString","valueOf"],badMethods=["setDate","setFullYear","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"];try{version=version.substr(version.indexOf("Chrome"));version=version.split(" ")[0];version=version.split("/")[1];}catch(e){version="unknown";}Date=function(){if(!this instanceof Date){return oldDate();}var E,H,D,G=this,C=100,B=arguments;switch(B.length){case 0:E=new oldDate();break;case 1:E=new oldDate(B[0]);break;case 2:B[2]=1;default:E=new oldDate(B[0],B[1],B[2],B[3]||0,B[4]||0,B[5]||0,B[6]||0);break;}D=0;while(H=goodMethods[D++]){G[H]=F(H);}D=0;while(H=badMethods[D++]){G[H]=A(H);}G.setHours=function(P,M,S,J){try{return E.setHours.apply(E,arguments);}catch(O){stat("setHours");M=M||0;S=S||0;J=J||0;var T=E.getHours(),K=E.getMinutes(),N=E.getSeconds(),I=E.getMilliseconds(),L=((T*60+K)*60+N)*1000+I,R=((P*60+M)*60+S)*1000+J,Q=R-L;E=new Date(E.getTime()+Q);return E.getTime();}};function F(I){return function(){return E[I].apply(E,arguments);};}function A(K){var J=E[K],I=100;return function(){try{return J.apply(E,arguments);}catch(L){if(!I){stat("too_many_"+K);throw L;}I--;stat(K);E=new oldDate(E.getTime());return G[K].apply(G,arguments);}};}};Date.parse=function(A){return oldDate.parse(A);};Date.now=function(){return oldDate.now();};Date.UTC=function(){return oldDate.UTC.apply(oldDate,arguments);};function stat(B){if(!statted[B]){statted[B]=1;var A=new XMLHttpRequest();A.open("POST","stat");A.send('{"page":"date_exception","key":"'+B+"_"+version+'"}');}}}

(function(){var A=YUI.use;YUI.use=YUI.prototype.use=function(){var E,D,H=this,F=0,I=H.Env,G=I._used,C=I._attached,K=I._loader,J=Array.prototype.slice.call(arguments,0),L=J.pop();B&&B(H);if(typeof L!="function"){J.push(L);L=0;}while(D=J[F++]){if(!G[D]||!C[D]){return A.apply(this,arguments);}}if(L){L.call(H,H,{success:true});}};function B(C){try{var D,K,H,M,F=0,J=C.Get.script,L=window.location.search.substring(1).split("&"),G={"all":1,"404":2,"fastfailure":3,"failure":4,"timeout":5,"fasttimeout":6};B=0;for(;F<L.length;F++){D=L[F].split("=");if(D[0]=="modfailure"&&D.length==2){H=K=G[D[1].toLowerCase()];}}if(K){C.Get.script=function(N,O){return E.call(this,J,N,O);};}}catch(I){}function E(P,N,Q){if(typeof N=="string"){N=[N];}for(O=0;O<N.length;O++){if(N[O].search(/combo(.php)?\?/)>0){M=1;}}if(M){if(K==1){if(++H>6){H=2;}}switch(H){case 2:for(var O=0;O<N.length;O++){N[O]=N[O].replace(/combo(.php)?\?/,"nocombo?");}break;case 3:Q.timeOut=20;case 4:setTimeout(function(){Q.onFailure.call(Q.context,{win:window,data:Q});},Q.timeout/2);return;case 5:setTimeout(function(){Q.onTimeout.call(Q.context,{win:window,data:Q});},Q.timeOut);return;case 6:Q.timeout=10;break;}}return P.call(this,N,Q);}}})();

YUI.add("comms-log4js",function(F){var C=F.namespace("comms"),D={},E={ajax:B};C.log4js={getLogger:function(I,J,H,K){I=I||"[default]";J=J||1000;var G=D[I];if(!G){G=D[I]=A(I,J);}H&&G.useAppender(H,K);return G;},register:function(H,G){E[H]=G;}};function A(J,K){var I=[],L=0,H=0,G={};return{useAppender:function(P,O){var M,Q,N=G[P];if(!N){if(N=E[P]){O=N(this,O,J);}N=G[P]=O;N.refresh&&N.refresh();}return N;},log:function(P){var M,N=0,O=I[H++]={msg:P,id:++L};if(!this.noDate){O.ts=new Date;}if(H>=K){H=0;}for(M in G){G[M].notify(O);}},getEntries:function(){I=I.concat(I.splice(0,H));H=I.length;if(H>=K){H=0;}return I;}};}function B(K,J){J=J||{};var I=J.url||"logger",G=J.include,H=J.exclude,L=J.maxCount||5;G=G&&G.split(",")||[];H=H&&H.split(",")||[];return{notify:function(S){var R,N,U,O=G.length,T=S.msg,Q=0;N=P(G);U=P(H);if(L&&(N||(!O&&!U))){M(S);}function P(V){for(;Q<V.length;Q++){R=V[Q];if(R=="*"||(T.indexOf(R)!=-1)){return 1;}}}}};function M(N){var P=N.msg,O=new XMLHttpRequest();if(!--L){P="[MAX_ERROR_LOG_COUNT_REACHED] "+P;}O.open("POST",I);O.send(P);}}},"1.0");

YUI.add("launch-utils",function(F){var E=F.log,B=F.comms.log4js.getLogger,A=B("ylogLogger",1000),C=F.namespace("common.Utils");F.log=YUI.prototype.log=function(G){A.log(G);E.apply(this,arguments);};C.traceMsg=function D(H,G){C.startConsole(G);A.log(H);};C.startConsole=function(G){G&&F.use("comms-log4js-appenders-console",function(){A.useAppender("console").show();});};C.netError=function(G){if(NeoConfig.log_error_yapache==1){B("netLogger",1,"ajax").log(G);}};},"1.0",{requires:["comms-log4js"]});

YUI.add("mail-modules",function(B){var D={"ac-widget":{"path":"contacts/autocomplete/acWidget_4859.js","requires":["overlay","node-event-simulate","comms-ui-autocomplete-plugin","comms-ui-autocomplete","contacts-api-utils","contacts-api","filter-contacts","common-utils","comms-intl-bidihighlight","contacts-smartcontacts-api"]},"common-net-crossframe":{"path":"common/net/crossframe_4859.js","requires":["common-utils"]},"common-net-diag":{"path":"common/net/diag_4859.js","requires":["common-net-session","rocket-stats","common-utils"]},"common-net-error":{"path":"common/net/error_4859.js","requires":["common-net-error-base","common-net-errorevent","common-net-sessionmgr","common-ui-dialog-helper","json-stringify","rocket-stats","common-persist-user-data"]},"common-net-error-base":{"path":"common/net/error-base_4859.js","requires":["common-utils","common-user-session"]},"common-net-errorevent":{"path":"common/net/errorevent_4859.js"},"common-net-securecascade":{"path":"common/net/securecascade_4859.js","requires":["common-net-crossframe","json","common-net-session"]},"common-net-session":{"path":"common/net/session_4859.js","requires":["event-custom","common-utils"]},"common-net-sessionflash":{"path":"common/net/sessionflash_4859.js","requires":["json","event-custom","common-utils","io-xdr"]},"common-net-sessionmgr":{"path":"common/net/sessionmgr_4859.js","requires":["event-custom-base","common-net-session","common-net-error-base","rocket-stats","json-parse"]},"common-net-sessionxdr":{"path":"common/net/sessionxdr_4859.js","requires":["json","common-net-crossframe","event-custom","common-utils"]},"common-persist-cookie-data":{"path":"common/persist/cookieData_4859.js","requires":["cookie","attribute","common-persist-neo-data"]},"common-persist-neo-data":{"path":"common/persist/neoData_4859.js","requires":["attribute"]},"common-persist-user-data":{"path":"common/persist/userData_4859.js","requires":["attribute","mail-net-transport","json","common-utils"]},"common-ui-bidi-textentry":{"path":"common/ui/bidi/bidi-textentry_4859.js","requires":["plugin","event-valuechange","common-ui-intl-bidi","common-ui-node-setdir"]},"common-ui-contentwidget":{"path":"common/ui/contentwidget/contentwidget_4859.js","requires":["event-key"]},"common-ui-dd":{"path":"common/ui/dd/dd_4859.js","requires":["node","common-utils"]},"common-ui-diagpanel":{"path":"common/ui/contentwidget/diagpanel_4859.js","requires":["common-utils"]},"common-ui-dialog-helper":{"path":"common/ui/dialoghelper/dialoghelper_4859.js","requires":["common-utils","modal_css","comms-ui-dialog-base","_shared_module_offscreen_bin_modal","_shared_module_offscreen_bin_modal_btn_ok"]},"common-ui-editor-autobidi":{"path":"common/ui/bidi/editor-autobidi_4859.js","requires":["editor-base","selection","common-ui-intl-bidi"]},"common-ui-intl-bidi":{"path":"common/ui/bidi/intl-bidi_4859.js"},"common-ui-listview":{"path":"common/ui/listview/listview_4859.js","requires":["base-base","node","event-focus"]},"common-ui-listview-ext":{"path":"common/ui/listview/listview-ext_4859.js","requires":["common-ui-listview"]},"common-ui-lozengeDD":{"path":"common/ui/lozenge/lozenge-DD_4859.js","requires":["common-ui-dd","common-utils"]},"common-ui-menu-helper":{"path":"common/ui/menuhelper/menuhelper_4859.js","requires":["_shared_module_offscreen_bin_menus_loading"]},"common-ui-node-setdir":{"path":"common/ui/bidi/node-setdir_4859.js","requires":["classnamemanager","node-base","node-style"]},"common-ui-notification":{"path":"common/ui/notifications/notification_4859.js","requires":["common-utils","mail-ui-common-string-utils"]},"common-ui-tabs-base":{"path":"common/ui/tabview/tabview_4859.js","requires":["minty_module_tabs_tab_removable","comms-ui-nodefocus-base","common-utils"]},"common-ui-tabs-overflow":{"path":"common/ui/tabview/taboverflow_4859.js","requires":["common-ui-menu-helper","_shared_module_offscreen_bin_inbox"]},"common-ui-toolbar-base":{"path":"common/ui/toolbar/toolbar_4859.js","requires":["attribute","event-custom-base","common-utils","comms-ui-nodefocus-base"]},"common-ui-virtuallist-base":{"path":"common/ui/virtuallist/virtuallist_4859.js","requires":["common-utils"]},"common-user-session":{"path":"common/user/session_4859.js","requires":["common-persist-cookie-data","common-utils"]},"common-utils":{"path":"common/utils/utils_4859.js","requires":["querystring-parse-simple"]},"common-utils-apihook":{"path":"common/utils/apihook_4859.js","requires":["common-utils","rocket-stats"]},"common-utils-error":{"path":"common/utils/error_4859.js","requires":["comms-log4js","comms-utils-stack-tracer","info-collector"]},"common-utils-jp":{"path":"common/utils/utils-jp_4859.js"},"common-utils-stats":{"path":"common/utils/stats_4859.js","requires":["rocket-stats"]},"comms-aop-tracer":{"path":"comms/shared/src/aop/aspects/tracer_4859.js","requires":["comms-log4js","comms-log4js-appenders-traceconsole"]},"comms-aop-weaver":{"path":"comms/shared/src/aop/weaver_4859.js"},"comms-bidi-textentry":{"path":"comms/shared/src/bidi-textentry/js/bidi-textentry_4859.js","requires":["plugin","event-valuechange","comms-intl-bidi","comms-node-setdir"]},"comms-editor-autobidi":{"path":"comms/shared/src/editor-autobidi/js/editor-autobidi_4859.js","requires":["editor-base","selection","comms-intl-bidi"]},"comms-intl-bidi":{"path":"comms/shared/src/intl-bidi/js/intl-bidi_4859.js"},"comms-intl-bidihighlight":{"path":"comms/shared/src/intl-bidihighlight/js/intl-bidihighlight_4859.js"},"comms-log4js":{"path":"comms/shared/src/log4js/log4js_4859.js"},"comms-log4js-appenders-console":{"path":"comms/shared/src/log4js/console_4859.js","requires":["comms-log4js"]},"comms-log4js-appenders-traceconsole":{"path":"comms/shared/src/log4js/traceconsole_4859.js","requires":["comms-log4js"]},"comms-lozenge":{"path":"comms/shared/src/lozenge/js/lozenge_4859.js","requires":["node","widget","substitute","comms-utils"]},"comms-lozenge-address":{"path":"comms/shared/src/lozenge-address/js/lozenge-address_4859.js","requires":["base-build","comms-lozenge"]},"comms-lozenge-edit":{"path":"comms/shared/src/lozenge-edit/js/lozenge-edit_4859.js","requires":["base-build","comms-lozenge"]},"comms-node-setdir":{"path":"comms/shared/src/node-setdir/js/node-setdir_4859.js","requires":["classnamemanager","node-base","node-style"]},"comms-ui-autocomplete":{"path":"comms/shared/src/autocomplete/js/autocomplete-widget_4859.js","requires":["overlay","comms-ui-autocomplete-plugin","node-event-simulate"]},"comms-ui-autocomplete-plugin":{"path":"comms/shared/src/autocomplete/js/autocomplete-plugin_4859.js","requires":["node","plugin","event-valuechange","event-key"]},"comms-ui-clipboard-plugin":{"path":"comms/shared/src/clipboard/js/clipboard-plugin_4859.js","requires":["node","plugin","substitute"]},"comms-ui-dialog-base":{"path":"comms/shared/src/ui/dialog/js/dialog_4859.js","requires":["overlay"]},"comms-ui-editable-overlay-plugin":{"path":"comms/shared/src/editable/js/editable-overlay-plugin_4859.js","requires":["comms-ui-editable-plugin","comms-utils"]},"comms-ui-editable-plugin":{"path":"comms/shared/src/editable/js/editable-plugin_4859.js","requires":["node","plugin"]},"comms-ui-lozenge":{"path":"comms/shared/src/lozengeOld/js/hLozenge_4859.js","requires":["comms-ui-lozenge_css","common-utils","comms-utils","node"]},"comms-ui-menu-base":{"path":"comms/shared/src/ui/menu/js/menu_4859.js"},"comms-ui-model":{"path":"comms/shared/src/ui/model/js/model_4859.js","requires":["json"]},"comms-ui-nodefocus":{"path":"comms/shared/src/ui/nodefocus/js/nodefocus_4859.js","requires":["plugin","node","event-key"]},"comms-ui-nodefocus-base":{"path":"comms/shared/src/ui/nodefocus/js/base_4859.js","requires":["plugin","node","event-key"]},"comms-ui-store-javascript":{"path":"comms/shared/src/ui/model/js/stores/javascript-store_4859.js","requires":["comms-ui-model","json"]},"comms-utils":{"path":"comms/shared/src/utils/js/utils_4859.js"},"comms-utils-stack-tracer":{"path":"comms/shared/src/utils/js/stack-tracer_4859.js"},"contacts-api":{"path":"comms/shared/src/contacts-api/api_4859.js","requires":["contacts-api-adapter","contacts-api-config","contacts-api-cache","contacts-api-utils"]},"contacts-api-adapter":{"path":"comms/shared/src/contacts-api/api-adapter_4859.js","requires":["contacts-api-io","contacts-api-cache","contacts-api-urigenerator","contacts-api-config","json","common-utils","rocket-stats"]},"contacts-api-cache":{"path":"comms/shared/src/contacts-api/api-cache_4859.js","requires":["contacts-api-config","common-utils-stats"]},"contacts-api-config":{"path":"comms/shared/src/contacts-api/api-config_4859.js","requires":["attribute"]},"contacts-api-io":{"path":"comms/shared/src/contacts-api/io_4859.js","requires":["contacts-api-urigenerator","json"]},"contacts-api-urigenerator":{"path":"comms/shared/src/contacts-api/urigenerator_4859.js"},"contacts-api-utils":{"path":"comms/shared/src/contacts-api/api-utils_4859.js","requires":["contacts-api-cache","contacts-api","common-utils-stats"]},"contacts-smartcontacts-api":{"path":"contacts/autocomplete/smartcontacts-api_4859.js","requires":["io-base"]},"contacts-ui-addcontact-add":{"path":"comms/shared/src/addContact/js/addcontactdialogadd_4859.js","requires":["node-event-simulate","common-utils","_shared_module_offscreen_bin_contacts_modal_kiosk_add_modal_kiosk_addcontact"]},"contacts-ui-addcontact-confirm":{"path":"comms/shared/src/addContact/js/addcontactconfirm_4859.js","requires":["common-utils","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_bd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_ft","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_hd","_shared_module_contact_card_confirm","_shared_module_contact_fragments_dl_email","_shared_module_contact_fragments_dl_yim","_shared_module_contact_fragments_dl_mobile","_shared_module_contact_fragments_photo","mod-contact-card_css"]},"contacts-ui-addcontact-controller":{"path":"comms/shared/src/addContact/js/add-contact-controller_4859.js","requires":["array-extras","comms-ui-dialog-base","contacts-api","contacts-ui-addcontact-add","contacts-ui-addcontact-confirm","profile-api","profile-api-config"]},"contacts-ui-addcontactdialog":{"path":"comms/shared/src/addContact/js/addcontactdialog_4859.js","requires":["array-extras","comms-ui-dialog-base","contacts-api","contacts-ui-addcontact-add","contacts-ui-addcontact-confirm","modal_css","forms_css","comms-utils"]},"contacts-ui-choosecontactdialog":{"path":"contacts/ui/choosecontactdialog/choosecontactdialog_4859.js","requires":["async-queue","node-event-simulate","comms-ui-dialog-base","common-utils","contacts-api-utils","contacts-api-config","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_modal_kiosk_choosecontact","lists_css","modal_css","mod-contacts_css","mod-contact-chooser_css","comms-intl-bidi"]},"contacts-ui-contact-popup":{"path":"contacts/ui/contactpopup/contact-popup_4859.js","requires":["overlay","common-utils","contacts-api-utils","mod-contact-card_css","_shared_module_contact_card_email_rollup","comms-utils","swfdetect","mail-common-hidef-profiles","common-ui-menu-helper","_shared_module_offscreen_bin_contacts_menu_contact_compact_compose"]},"contacts-ui-contactsevents":{"path":"contacts/ui/contactseventstranslator/contactsEvents_4859.js"},"contacts-ui-contactseventstranslator":{"path":"contacts/ui/contactseventstranslator/contactsEventsTranslator_4859.js","requires":["contacts-ui-contactsevents","contacts-ui-contactsview"]},"contacts-ui-contactsview":{"path":"contacts/ui/contactsview/contactsview_4859.js","requires":["common-ui-contentwidget","node-event-simulate"]},"contacts-ui-createlistdialog":{"path":"comms/shared/src/createList/js/createlistdialog_4859.js","requires":["common-ui-listview","array-extras","comms-ui-dialog-base","contacts-api","contacts-api-utils","contacts-ui-createlistdialog-view","contacts-ui-createlistdialog-confirm","modal_css","forms_css"]},"contacts-ui-createlistdialog-confirm":{"path":"comms/shared/src/createList/js/createlistconfirm_4859.js","requires":["node-event-simulate","common-utils","template-renderer","comms-intl-bidi"]},"contacts-ui-createlistdialog-view":{"path":"comms/shared/src/createList/js/createlistview_4859.js","requires":["node-event-simulate","common-utils","mu__shared_module_offscreen_bin_contacts_modal_kiosk_add_list_modal_kiosk_addlist","template-renderer","comms-bidi-textentry"]},"filter-contacts":{"path":"contacts/autocomplete/filtercontacts_4859.js","requires":["contacts-api-utils","contacts-api"]},"gx-ui-galaxyview-base":{"path":"galaxy/ui/galaxyview/galaxyview_4859.js","requires":["mail-ui-basewidget"]},"gx-ui-updates-base":{"path":"galaxy/ui/updates/updates_4859.js","requires":["common-utils","common-ui-toolbar-base","minty_module_shell_navigation_updates_rollup","minty_module_toolbar_updates","mail-ui-basewidget","rocket-stats","gx_utils"]},"gx-ui-updates-videoRenderer":{"path":"galaxy/ui/videoRenderer/videoRenderer_4859.js","requires":["node","gx_utils"]},"gx_YOS":{"path":"galaxy/ui/YOS/gx_YOS_4859.js","requires":["gx_utils","json"]},"gx_bootstrap":{"path":"galaxy/ui/bootstrap/bootstrap_4859.js","requires":["node-base"]},"gx_cue":{"path":"galaxy/ui/cue/gx_cue_4859.js","requires":["node","event","anim","gx_utils","ult_wrapper"]},"gx_cue_mini_nux":{"path":"galaxy/ui/cue/gx_cue_mini_nux_4859.js","requires":["node","event","anim","gx_utils","ult_wrapper"]},"gx_messages":{"path":"galaxy/ui/messages/gx_messages_4859.js","requires":["node","gx_utils","json-parse","ult_wrapper","rocket-stats"]},"gx_news":{"path":"galaxy/ui/news/gx_news_4859.js","requires":["node","anim","json","gx_utils","rocket-stats"]},"gx_profiledata":{"path":"galaxy/ui/profiledata/gx_profiledata_4859.js","requires":["node","json","gx_utils"]},"gx_status":{"path":"galaxy/ui/sharebox/gx_status_4859.js","requires":["node","event","anim","json","gx_utils","ult_wrapper","comms-ui-menu-base","common-ui-menu-helper","comms-bidi-textentry"]},"gx_utils":{"path":"galaxy/ui/utils/gx_utils_4859.js","requires":["node","common-net-sessionmgr"]},"info-collector":{"path":"mail/debug/info-collector_4859.js","requires":["io"]},"launch-utils":{"path":"common/launch/utils_4859.js","requires":["comms-log4js"]},"mail-common-cachewarmer":{"path":"mail/common/cachewarmer_4859.js","requires":["async-queue","loader","common-net-session","mail-ui-messagelist-base","mail-controller-messages"]},"mail-common-downloader-v1":{"path":"mail/common/downloader_v1_4859.js","requires":["common-utils","mail-controller-messages","_shared_module_offscreen_bin_modal_attach_download_rollup","common-ui-dialog-helper","comms-ui-dialog-base","rocket-stats"]},"mail-common-downloader-v2":{"path":"mail/common/downloader_v2_4859.js","requires":["common-utils","mail-controller-messages","common-ui-dialog-helper","comms-ui-dialog-base","rocket-stats","datatype"]},"mail-common-hidef-profiles":{"path":"mail/common/hidef_profiles_4859.js","requires":["common-net-session"]},"mail-common-inline-edit":{"path":"mail/common/edit-control_4859.js"},"mail-common-lowbandwidth":{"path":"mail/common/lowbandwidth_4859.js","requires":["node","rocket-stats"]},"mail-common-pixiedust":{"path":"mail/common/pixiedust_4859.js"},"mail-common-precache-ranking":{"path":"mail/common/precache-ranking_4859.js","requires":["mail-ui-messagelist-base"]},"mail-common-precache-unread":{"path":"mail/common/precache-unread_4859.js","requires":["mail-ui-messagelist-base"]},"mail-controller-base":{"path":"mail/controller/base_4859.js","requires":["mail-net-transport","common-net-error-base","common-utils-apihook","rocket-stats"]},"mail-controller-compose":{"path":"mail/controller/composectrl_4859.js","requires":["mail-controller-base","mail-model-compose","common-persist-user-data","mail-persist-meta-data","mail-ui-common-fonts","_shared_module_compose_reply"]},"mail-controller-compose-text":{"path":"mail/controller/composetext_4859.js","requires":["common-persist-user-data","mail-controller-compose"]},"mail-controller-conversations":{"path":"mail/controller/conversation_4859.js","requires":["launch-utils","rocket-stats","mail-controller-base","mail-controller-folders","common-persist-user-data","mail-model-convstore","mail-model-datastore"]},"mail-controller-conversations-ops":{"path":"mail/controller/conversationsops_4859.js","requires":["rocket-stats","mail-controller-base","mail-model-convstore","json-stringify"]},"mail-controller-folders":{"path":"mail/controller/folders_4859.js","requires":["rocket-stats","mail-model-datastore","mail-controller-base","common-persist-user-data"]},"mail-controller-messages":{"path":"mail/controller/messages_4859.js","requires":["launch-utils","rocket-stats","mail-controller-base","mail-controller-folders","common-persist-user-data"]},"mail-controller-messages-ops":{"path":"mail/controller/messagesops_4859.js","requires":["rocket-stats","mail-controller-base","mail-model-datastore","json-stringify"]},"mail-controller-mrd":{"path":"mail/controller/mrd_4859.js","requires":["common-utils","mail-ui-shortcuts"]},"mail-controller-processbody":{"path":"mail/controller/processbody_4859.js","requires":["common-utils","common-utils-stats"]},"mail-controller-sendconfirm":{"path":"mail/controller/sendconfirm_4859.js","requires":["mail-controller-base","mail-model-send","contacts-api-utils","contacts-api","mail-controller-messages-ops","rocket-stats","common-utils-stats"]},"mail-controller-spellcheck":{"path":"mail/controller/spellcheck_4859.js","requires":["mail-controller-base","mail-model-compose","common-net-sessionmgr","common-persist-user-data","json-parse"]},"mail-debug":{"path":"mail/debug/debug_4859.js","requires":["comms-log4js","comms-log4js-appenders-console","info-collector","common-net-diag","_shared_module_offscreen_bin_menus_debug"]},"mail-error":{"path":"mail/controller/error_4859.js","requires":["common-net-error","mail-errormap","rocket-stats","json-stringify","_shared_module_offscreen_bin_modal_launch_error_rollup"]},"mail-errormap":{"path":"mail/controller/errormap_4859.js","requires":["json-stringify","common-net-error"]},"mail-model-compose":{"path":"mail/model/composemodel_4859.js","requires":["base","common-persist-user-data"]},"mail-model-convstore":{"path":"mail/model/convstore_4859.js","requires":["common-utils"]},"mail-model-datastore":{"path":"mail/model/datastore_4859.js","requires":["common-utils","json-stringify"]},"mail-model-send":{"path":"mail/model/sendmodel_4859.js","requires":["base"]},"mail-net-ETP":{"path":"mail/net/etp_4859.js"},"mail-net-diag":{"path":"mail/net/diag_4859.js","requires":["common-net-diag","json-stringify","json-parse"]},"mail-net-queue":{"path":"mail/net/queue_4859.js","requires":["mail-net-transport"]},"mail-net-transport":{"path":"mail/net/transport_4859.js","requires":["common-net-sessionmgr","json-stringify","common-persist-neo-data"]},"mail-persist-meta-data":{"path":"mail/persist/metaData_4859.js","requires":["attribute","mail-net-transport"]},"mail-persist-user-preferences":{"path":"mail/persist/userPreferences_4859.js","requires":["attribute","mail-net-transport","json"]},"mail-service-uploader":{"path":"mail/common/uploader_4859.js","requires":["_shared_module_compose","mail-controller-compose","mail-model-compose","rocket-stats","common-utils","swfdetect"]},"mail-service-uploader-form":{"path":"mail/common/uploader_form_4859.js","requires":["mail-service-uploader"]},"mail-service-uploader-yui":{"path":"mail/common/uploader_yui_4859.js","requires":["mail-service-uploader","uploader","event","event-base"]},"mail-track":{"path":"common/utils/track_4859.js"},"mail-ui-accordion-base-jp":{"path":"mail/ui/accordion/accordion-jp_4859.js","requires":["mail-modules","mail-templates","anim","common-utils-error","minty_module_jp_accordion_title"]},"mail-ui-accounts":{"path":"mail/ui/accounts/accounts_4859.js","requires":["common-utils","common-persist-user-data"]},"mail-ui-actions-marker":{"path":"mail/ui/actions/marker_4859.js","requires":["event","comms-aop-tracer"]},"mail-ui-ad-upsell-dialog":{"path":"mail/ui/darla/adUpsellDialog_4859.js","requires":["mail-persist-meta-data","common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_upsell_rollup","modal_css"]},"mail-ui-advancedSearchController":{"path":"mail/ui/msearch/advancedSearch/advancedSearchController_4859.js","requires":["common-utils","mail-ui-advancedSearchView","plugin","ac-widget","filter-contacts","forms_css","autocomplete_css","_shared_module_offscreen_bin_compose","comms-utils"]},"mail-ui-advancedSearchView":{"path":"mail/ui/msearch/advancedSearch/advancedSearchView_4859.js","requires":["common-utils","_shared_module_search_empty_rollup","attribute-base","event-base"]},"mail-ui-attachment-filetype":{"path":"mail/ui/attachments/filetype_4859.js"},"mail-ui-authorview-base":{"path":"mail/ui/composeview/authorview_4859.js","requires":["mail-controller-base","mail-controller-compose","mail-ui-composeview-base","mail-service-uploader","_shared_module_compose_title"]},"mail-ui-basewidget":{"path":"mail/ui/basewidget/basewidget_4859.js","requires":["common-ui-contentwidget","mail-ui-navkeys"]},"mail-ui-bulk-progress":{"path":"mail/ui/msearch/utils/bulkProgress_4859.js","requires":["attachments_css","common-ui-dialog-helper","_shared_module_offscreen_bin_progress_bar","mail-ui-basewidget"]},"mail-ui-button-ctxt":{"path":"mail/ui/buttonctxt/buttonctxt_4859.js","requires":["common-ui-toolbar-base","mail-ui-messagelist-base"]},"mail-ui-cache-mgr":{"path":"mail/ui/search/cachemgr_4859.js","requires":["mail-model-datastore"]},"mail-ui-common-calendar-jp":{"path":"mail/ui/common/calendar-jp_4859.js","requires":["common-utils","common-net-sessionmgr","comms-ui-dialog-base"]},"mail-ui-common-fonts":{"path":"mail/ui/common/fonts_4859.js","requires":["mail-persist-meta-data"]},"mail-ui-common-string-utils":{"path":"mail/ui/common/stringUtils_4859.js","requires":["common-utils"]},"mail-ui-composeview-attach":{"path":"mail/ui/composeview/compose-attach_4859.js","requires":["rocket-stats"]},"mail-ui-composeview-base":{"path":"mail/ui/composeview/compose-base_4859.js","requires":["mail-ui-messagepane-utils","comms-ui-lozenge","forms_css","rte_css","attachments_css","autocomplete_css","mod-stationery_css","mod-compose_css","mail-ui-composeview-attach","editor-base","editor-para","editor-br","node","stylesheet","mail-controller-compose","mail-controller-compose-text","mail-model-compose","contacts-api-utils","contacts-api","filter-contacts","plugin","ac-widget","comms-bidi-textentry","comms-editor-autobidi","comms-intl-bidi","editor-bidi","_shared_module_compose","_shared_module_toolbar_compose","_shared_module_compose_message_header","_shared_module_compose_loading","_shared_module_offscreen_bin_compose","_shared_module_offscreen_bin_compose_menu_spellcheck","_shared_module_offscreen_bin_compose_modal_cancel_compose","_shared_module_rte_well_content_format","_shared_module_rte_well_content_emoticons","_shared_module_rte_well_content_attachments","_shared_module_rte_well_tabs_compose","common-persist-user-data","mail-persist-meta-data","common-ui-toolbar-base","_shared_module_offscreen_bin_compose_menu_list","_shared_module_offscreen_bin_compose_menu_text_align","rocket-stats","comms-utils"]},"mail-ui-composeview-spellcheck":{"path":"mail/ui/composeview/compose-spellcheck_4859.js","requires":["node","plugin","mail-controller-compose","mail-controller-spellcheck","menus_css","comms-ui-menu-base","common-ui-menu-helper","_shared_module_offscreen_bin_compose_menu_spell_langs"]},"mail-ui-convcompose-header":{"path":"mail/ui/mailcompose/conv/convcompose-header_4859.js","requires":["mail-ui-mailcompose-base-header"]},"mail-ui-convevents":{"path":"mail/ui/mailview/conv/convevents_4859.js","requires":["mail-controller-conversations","mail-controller-conversations-ops","mail-model-convstore","mail-ui-mailevents"]},"mail-ui-convlist-base":{"path":"mail/ui/maillist/conv/convlist_4859.js","requires":["mail-ui-maillist","mail-ui-maillist-model","mail-ui-maillist-view","mail-controller-conversations","mail-ui-listview-controls"]},"mail-ui-convpane-base":{"path":"mail/ui/mailpane/conv/convpane_4859.js","requires":["_shared_module_thread_thread_pane","minty_module_comm_modes","common-utils","mail-model-datastore","mail-controller-messages","mail-controller-conversations","mail-ui-mailpane-base","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils","mail-model-convstore"]},"mail-ui-convpane-bind":{"path":"mail/ui/mailpane/conv/bind_4859.js"},"mail-ui-convpane-error":{"path":"mail/ui/mailpane/conv/error_4859.js","requires":["common-utils","_shared_module_thread_thread_display_rollup","mail-ui-pane-utils"]},"mail-ui-convpane-profiles":{"path":"mail/ui/mailpane/conv/convpaneprofiles_4859.js","requires":["mail-ui-messagepane-base","mail-ui-messagepane-read","common-net-session","common-utils-stats","_shared_module_updates_ycw","mail-common-hidef-profiles","mail-ui-profileutils"]},"mail-ui-convpane-read":{"path":"mail/ui/mailpane/conv/convpaneread_4859.js","requires":["common-persist-user-data","mail-persist-meta-data","mail-ui-messagepane-warnings","_shared_module_thread_thread_display_rollup","mail-ui-mailpane-read","contacts-api","contacts-api-utils","common-utils-stats","mail-ui-messagepane-utils","attachments_css","mod-conversation-history_css","mail-ui-attachment-filetype","mail-ui-common-fonts","common-ui-tabs-base","mail-ui-pane-utils"]},"mail-ui-convview-base":{"path":"mail/ui/mailview/conv/convview_4859.js","requires":["common-ui-contentwidget","common-ui-toolbar-base","mail-ui-mailview-base","mail-ui-convlist-base","mail-ui-convpane-base","minty_module_toolbar_inbox_default_thread_rollup","dom-screen","mail-ui-common-string-utils"]},"mail-ui-darla":{"path":"mail/ui/darla/neodarla_4859.js","requires":["node-base","darla-base","rocket-stats"]},"mail-ui-dmsearch-controller":{"path":"mail/ui/dmsearch/dmsearchController_4859.js","requires":["event-base","mail-ui-dmsearch-view","mail-ui-dmsearch-model"]},"mail-ui-dmsearch-model":{"path":"mail/ui/dmsearch/dmsearchModel_4859.js","requires":["common-net-sessionmgr"]},"mail-ui-dmsearch-view":{"path":"mail/ui/dmsearch/dmsearchView_4859.js","requires":["node-base","node-event-delegate","attribute-base","event-base","minty_module_list_view_ad_search"]},"mail-ui-empty-search":{"path":"mail/ui/search/emptysearch_4859.js","requires":["common-utils","_shared_module_search_empty_rollup","plugin","ac-widget","filter-contacts","forms_css","autocomplete_css","_shared_module_offscreen_bin_compose","comms-utils"]},"mail-ui-factory-base":{"path":"mail/ui/factory/factory_4859.js"},"mail-ui-folderevents":{"path":"mail/ui/foldersview/folderevents_4859.js","requires":["common-utils","mail-controller-folders","common-ui-dialog-helper","comms-bidi-textentry"]},"mail-ui-foldersview-base":{"path":"mail/ui/foldersview/foldersview_4859.js","requires":["common-utils","rocket-stats","mail-controller-folders","attribute","node","mail-persist-meta-data","common-persist-user-data","mail-ui-accounts"]},"mail-ui-foldersview-bind":{"path":"mail/ui/foldersview/bind_4859.js"},"mail-ui-fullcompose":{"path":"mail/ui/mailcompose/message/composeview_4859.js","requires":["mail-ui-mailcompose","mail-ui-messagepane-utils","forms_css","rte_css","attachments_css","mod-stationery_css","mod-compose_css","mail-ui-composeview-attach","editor-base","editor-para","editor-br","node","stylesheet","mail-controller-compose-text","mail-model-compose","contacts-api-utils","contacts-api","filter-contacts","plugin","comms-bidi-textentry","comms-editor-autobidi","comms-intl-bidi","editor-bidi","_shared_module_compose","_shared_module_toolbar_compose","_shared_module_compose_loading","_shared_module_offscreen_bin_compose","_shared_module_offscreen_bin_compose_menu_spellcheck","_shared_module_offscreen_bin_compose_modal_cancel_compose","_shared_module_rte_well_content_format","_shared_module_rte_well_content_emoticons","_shared_module_rte_well_content_attachments","_shared_module_rte_well_tabs_compose","common-ui-toolbar-base","_shared_module_offscreen_bin_compose_menu_list","_shared_module_offscreen_bin_compose_menu_text_align"]},"mail-ui-header":{"path":"mail/ui/header/header_4859.js","requires":["mail-ui-header-base","mail-ui-header-utils","common-utils","common-persist-user-data"]},"mail-ui-header-base":{"path":"mail/ui/header/header_base_4859.js"},"mail-ui-header-utils":{"path":"mail/ui/header/headerUtils_4859.js","requires":["common-utils","common-persist-user-data"]},"mail-ui-inboxmenu-base":{"path":"mail/ui/inboxmenu/inboxmenu_4859.js","requires":["common-utils","menus_css"]},"mail-ui-inlinecompose":{"path":"mail/ui/mailcompose/conv/convcompose_4859.js","requires":["mail-ui-convcompose-header","mail-ui-mailcompose","widget","mail-service-uploader","mail-ui-composeview-attach","editor","editor-para","editor-br","_shared_module_send_confirm_captcha","rte_css","mod-compose_css"]},"mail-ui-itemlist-base":{"path":"mail/ui/search/itemlist_4859.js","requires":["datatype-date","mail-controller-folders","mail-controller-messages","mail-ui-common-string-utils","attachments_css","mail-ui-attachment-filetype","mail-ui-searchutils","_shared_module_search_rollup"]},"mail-ui-leftcolumn-contactmenu-base-jp":{"path":"mail/ui/inboxmenu/leftcolumn-contactmenu-jp_4859.js","requires":["mail-modules","mail-templates","common-utils","menus_css","common-ui-menu-helper","contacts-api-utils","_shared_module_offscreen_bin_menus_jp_contact"]},"mail-ui-list-mgr":{"path":"mail/ui/msearch/model/listmgr_4859.js"},"mail-ui-listview-controls":{"path":"mail/ui/maillist/base/listview-controls_4859.js"},"mail-ui-mailSearchController":{"path":"mail/ui/msearch/mailSearchController_4859.js","requires":["json","mail-ui-basewidget","mail-ui-searchutils","mail-ui-search-model","mail-ui-list-mgr"]},"mail-ui-mailcompose":{"path":"mail/ui/mailcompose/base/mailcompose_4859.js","requires":["autocomplete_css","common-persist-user-data","mail-persist-meta-data","_shared_module_compose_message_header","mail-controller-compose","mail-ui-mailcompose-base-header","rocket-stats","comms-utils"]},"mail-ui-mailcompose-base-header":{"path":"mail/ui/mailcompose/base/mailcompose-header_4859.js","requires":["comms-ui-lozenge","ac-widget","_shared_module_offscreen_bin_compose","mail-controller-compose","mail-controller-compose-text","contacts-api","_shared_module_compose_message_header"]},"mail-ui-mailevents":{"path":"mail/ui/mailview/base/mailevents_4859.js","requires":["mail-controller-messages","mail-controller-messages-ops","common-utils","common-ui-tabs-base","mail-model-datastore","comms-utils"]},"mail-ui-maillist":{"path":"mail/ui/maillist/base/maillist_4859.js","requires":["common-ui-contentwidget","mail-controller-folders","common-persist-user-data","mail-ui-common-string-utils","mail-ui-accounts","mail-model-datastore","rocket-stats"]},"mail-ui-maillist-listview":{"path":"mail/ui/maillist/base/maillist-listview_4859.js","requires":["mail-ui-messagelist-base"]},"mail-ui-maillist-model":{"path":"mail/ui/maillist/base/maillistmodel_4859.js","requires":["common-ui-listview"]},"mail-ui-maillist-view":{"path":"mail/ui/maillist/base/maillistview_4859.js","requires":["common-ui-listview"]},"mail-ui-mailmarkup-base":{"path":"mail/ui/mailview/base/markup_4859.js","requires":["node"]},"mail-ui-mailpane-base":{"path":"mail/ui/mailpane/base/mailpane_4859.js","requires":["_shared_module_message_pane","_shared_module_thread_thread_pane","minty_module_comm_modes","common-utils","mail-model-datastore","mail-controller-messages","mail-ui-basewidget","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils"]},"mail-ui-mailpane-next-prev":{"path":"mail/ui/mailpane/base/mailnextprevious_4859.js","requires":["mail-ui-common-string-utils","common-utils","common-utils-stats"]},"mail-ui-mailpane-read":{"path":"mail/ui/mailpane/base/mailread_4859.js","requires":["mail-ui-common-string-utils","common-utils","common-utils-stats"]},"mail-ui-mailuibind-base":{"path":"mail/ui/mailview/base/uibind_4859.js","requires":["node"]},"mail-ui-mailview-base":{"path":"mail/ui/mailview/base/mailview_4859.js","requires":["mail-ui-basewidget","common-persist-user-data","mail-ui-messagepane-utils","mail-model-datastore","common-utils","node-event-simulate"]},"mail-ui-message-encodings":{"path":"mail/ui/messagesview/message-encodings_4859.js","requires":["common-utils"]},"mail-ui-message-timedalertdialog":{"path":"mail/ui/messagesview/message-timedalertdialogs_4859.js","requires":["mail-modules","mail-templates","common-utils","common-ui-dialog-helper"]},"mail-ui-messageaction":{"path":"mail/ui/msearch/model/messageactions_4859.js","requires":["mail-controller-messages","mail-controller-messages-ops","common-utils","mail-model-datastore"]},"mail-ui-messageevents":{"path":"mail/ui/messagesview/messageevents_4859.js","requires":["mail-controller-messages","mail-controller-messages-ops","common-utils","common-ui-tabs-base","mail-model-datastore","comms-utils"]},"mail-ui-messageeventsnew":{"path":"mail/ui/mailview/message/messageevents_4859.js","requires":["mail-controller-messages","mail-controller-messages-ops","mail-model-datastore","mail-ui-mailevents"]},"mail-ui-messagelist-base":{"path":"mail/ui/messagelist/messagelist_4859.js","requires":["common-ui-contentwidget","mail-controller-folders","mail-controller-messages","common-persist-user-data","mail-ui-common-string-utils","rocket-stats","mail-model-datastore","mail-ui-accounts"]},"mail-ui-messagelist-listview":{"path":"mail/ui/messagelist/messagelist-listview_4859.js","requires":["mail-ui-messagelist-base"]},"mail-ui-messagepane-base":{"path":"mail/ui/mailpane/message/messagepane_4859.js","requires":["_shared_module_message_pane","minty_module_comm_modes","common-utils","mail-model-datastore","mail-controller-messages","mail-ui-mailpane-base","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils"]},"mail-ui-messagepane-bind":{"path":"mail/ui/mailpane/message/bind_4859.js"},"mail-ui-messagepane-error":{"path":"mail/ui/mailpane/message/error_4859.js","requires":["common-utils","_shared_module_message_display_rollup"]},"mail-ui-messagepane-next-prev":{"path":"mail/ui/mailpane/message/nextprevious_4859.js","requires":["mail-ui-common-string-utils","mail-ui-messagepane-base","mail-ui-mailpane-next-prev","mail-model-datastore","mail-controller-messages","mail-ui-messagelist-base","common-utils","common-utils-stats"]},"mail-ui-messagepane-profiles":{"path":"mail/ui/messagepane/messagepaneprofiles_4859.js","requires":["mail-ui-messagepane-base","mail-ui-messagepane-read","common-net-session","common-utils-stats","_shared_module_updates_ycw","mail-common-hidef-profiles"]},"mail-ui-messagepane-read":{"path":"mail/ui/mailpane/message/messagepaneread_4859.js","requires":["common-persist-user-data","mail-persist-meta-data","mail-ui-messagepane-warnings","_shared_module_message_display_rollup","mail-ui-mailpane-read","contacts-api","contacts-api-utils","common-utils-stats","mail-ui-messagepane-utils","attachments_css","mod-conversation-history_css","mail-ui-attachment-filetype","mail-ui-common-fonts","common-ui-tabs-base"]},"mail-ui-messagepane-utils":{"path":"mail/ui/messagepane/utils_4859.js","requires":["common-utils-stats","mail-ui-messagepane-utils-shared"]},"mail-ui-messagepane-utils-shared":{"path":"mail/ui/messagepane/shared_4859.js"},"mail-ui-messagepane-warnings":{"path":"mail/ui/messagepane/warnings_4859.js","requires":["common-utils"]},"mail-ui-messagepreview":{"path":"mail/ui/mailpane/message/preview_4859.js","requires":["common-utils","mail-model-datastore","mail-controller-messages","_shared_module_offscreen_bin_modal_preview_rollup"]},"mail-ui-messagesview-base":{"path":"mail/ui/mailview/message/messagesview_4859.js","requires":["common-ui-contentwidget","common-ui-toolbar-base","mail-ui-mailview-base","mail-ui-messagelist-base","mail-ui-messagepane-base","minty_module_toolbar_inbox_default_rollup","minty_module_toolbar_inbox_default_thread_rollup","dom-screen","mail-ui-common-string-utils"]},"mail-ui-messagesview-dd":{"path":"mail/ui/messagesview/messagesview-dd_4859.js","requires":["mail-model-datastore","common-utils","node-base","common-ui-dd"]},"mail-ui-messagesview-quickfilter":{"path":"mail/ui/messagesview/quickfilter_4859.js","requires":["common-utils","common-persist-user-data","mail-model-datastore","forms_css","_shared_module_offscreen_bin_modal_quick_filters","common-ui-dialog-helper","mail-controller-messages-ops","mail-ui-common-string-utils"]},"mail-ui-messagesview-resize":{"path":"mail/ui/messagesview/messagesview-resize_4859.js","requires":["common-persist-cookie-data","stylesheet","node","common-ui-dd","common-persist-user-data"]},"mail-ui-messagesview-vertical":{"path":"mail/ui/messagesview/vertical_4859.js","requires":["mail-ui-messagesview-resize"]},"mail-ui-messenger":{"path":"mail/ui/messenger/messenger_4859.js","requires":["common-utils","swfdetect"]},"mail-ui-msgpane-profiles":{"path":"mail/ui/mailpane/message/messagepaneprofiles_4859.js","requires":["mail-ui-messagepane-base","mail-ui-messagepane-read","common-net-session","common-utils-stats","_shared_module_updates_ycw","mail-common-hidef-profiles","mail-ui-profileutils"]},"mail-ui-navkeys":{"path":"mail/ui/navkeys/navkeys_4859.js","requires":["mail-controller-folders"]},"mail-ui-oviheader":{"path":"mail/ui/header/oviheader_4859.js","requires":["common-utils","node"]},"mail-ui-pane-utils":{"path":"mail/ui/mailpane/base/paneutils_4859.js","requires":["mail-controller-messages","common-utils","mail-persist-meta-data"]},"mail-ui-print":{"path":"mail/ui/print/print_4859.js","requires":["mail-controller-messages","_shared_module_offscreen_bin_print_print_rollup"]},"mail-ui-profileutils":{"path":"mail/ui/mailpane/base/profileutils_4859.js","requires":["common-net-session","common-utils","common-utils-stats","_shared_module_updates_ycw","mail-common-hidef-profiles"]},"mail-ui-search-base":{"path":"mail/ui/search/search_4859.js","requires":["mail-ui-cache-mgr","mail-ui-basewidget","mail-ui-searchutils","common-ui-toolbar-base"]},"mail-ui-search-model":{"path":"mail/ui/msearch/model/msws_4859.js","requires":["mail-ui-searchutils","json","rocket-stats","mail-ui-common-string-utils"]},"mail-ui-search-refinements":{"path":"mail/ui/search/refinements_4859.js","requires":["common-utils","_shared_module_shell_navigation_search_rollup","_shared_module_search_not_narrowed","mail-ui-common-string-utils"]},"mail-ui-searchGroupsController":{"path":"mail/ui/msearch/searchGroups/searchGroupsController_4859.js","requires":["common-utils","mail-ui-searchGroupsView"]},"mail-ui-searchGroupsView":{"path":"mail/ui/msearch/searchGroups/searchGroupsView_4859.js","requires":["common-utils","_shared_module_shell_navigation_search_rollup","mail-ui-common-string-utils"]},"mail-ui-searchListController":{"path":"mail/ui/msearch/searchList/searchListController_4859.js","requires":["common-utils","mail-ui-searchListView"]},"mail-ui-searchListView":{"path":"mail/ui/msearch/searchList/searchListView_4859.js","requires":["stylesheet","search_css","datatype-date","mail-controller-folders","mail-controller-messages","mail-ui-common-string-utils","attachments_css","mail-ui-attachment-filetype","mail-ui-searchutils"]},"mail-ui-searchbar":{"path":"mail/ui/msearch/searchbar_4859.js","requires":["common-utils","node-pluginhost","comms-bidi-textentry"]},"mail-ui-searchdesc":{"path":"mail/ui/msearch/searchdesc_4859.js"},"mail-ui-searchutils":{"path":"mail/ui/msearch/utils/searchUtils_4859.js","requires":["common-ui-dialog-helper"]},"mail-ui-sendconfirm-capthcaut":{"path":"mail/ui/sendconfirm/captchaut_4859.js","requires":["captcha_css"]},"mail-ui-sendconfirmview-base":{"path":"mail/ui/sendconfirm/sendconfirm-base_4859.js","requires":["common-utils","_shared_module_send_confirm_rollup","mail-controller-sendconfirm","_shared_module_send_confirm_recipients_rollup","minty_module_toolbar_inbox_sent_msg_rollup","minty_module_toolbar_inbox_sent_msg_thread_rollup","_shared_module_send_confirm_captcha_blocked","comms-lozenge-address","comms-ui-lozenge","mail-ui-searchbar","mail-ui-sendconfirm-capthcaut"]},"mail-ui-shortcuts":{"path":"mail/ui/shortcuts/shortcuts_4859.js","requires":["common-utils","mail-ui-messagepane-utils"]},"mail-ui-shortcuts-dialog":{"path":"mail/ui/shortcuts/shortcutsdialog_4859.js","requires":["common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_shortcuts_rollup","modal_css"]},"mail-ui-themes":{"path":"mail/ui/themes/themes_4859.js","requires":["common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_colors_rollup","minty_module_static_themes_js","json-parse","modal_css","options-pages_css"]},"mail-ui-themes-jp":{"path":"mail/ui/themes/themes-jp_4859.js","requires":["common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_colors_rollup","modal_css","options-pages_css"]},"mail-ui-toolbarController":{"path":"mail/ui/msearch/toolbar/toolbarController_4859.js","requires":["common-utils","minty_module_toolbar_inbox_search_rollup","minty_module_toolbar_inbox_search_thread_rollup","contacts-api","contacts-api-utils"]},"mail-ui-workspace-base":{"path":"mail/ui/workspace/workspace_4859.js","requires":["mail-modules","mail-templates","mail-ui-foldersview-base","common-ui-tabs-base","mail-ui-messagesview-base","mail-ui-convview-base","common-ui-toolbar-base","mail-ui-searchbar","gx-ui-galaxyview-base","common-utils-stats","mail-ui-common-string-utils"]},"mail-ui-workspace-ext":{"path":"mail/ui/workspace/workspace-ext_4859.js","requires":["mail-ui-workspace-base"]},"mail-ui-workspace-horizontal-slider":{"path":"mail/ui/workspace/workspacehslider_4859.js","requires":["node-base","common-persist-cookie-data","common-ui-dd"]},"om-api-appdata":{"path":"om/api/appdata_4859.js","requires":["om-common-apiutils"]},"om-api-conv":{"path":"om/api/conv_4859.js","requires":["om-controller-openapi","om-common-apiutils","om-common-errors","om-common-constants"]},"om-api-event":{"path":"om/api/event_4859.js","requires":["om-common-apiutils"]},"om-api-mail":{"path":"om/api/mail_4859.js","requires":["mail-ui-authorview-base","common-ui-dialog-helper","mail-model-send","mail-controller-compose","mail-controller-sendconfirm","_shared_module_send_confirm_captcha","mail-ui-sendconfirm-capthcaut","om-common-apiutils"]},"om-api-menu":{"path":"om/api/menu_4859.js","requires":["om-common-apiutils","_shared_module_offscreen_bin_menus_openmail_extension"]},"om-api-message":{"path":"om/api/message_4859.js","requires":["om-controller-openapi","om-common-apiutils","om-common-errors","om-common-constants"]},"om-api-neo":{"path":"om/api/neo_4859.js","requires":["om-common-apiutils","om-common-errors","om-common-constants"]},"om-api-social":{"path":"om/api/social_4859.js","requires":["array-extras","gx_utils","querystring","om-common-net-session","mail-ui-workspace-base","om-common-apiutils","om-common-errors","om-common-constants"]},"om-common-apiutils":{"path":"om/common/utils/apiutils_4859.js","requires":["om-common-errors","om-common-constants"]},"om-common-constants":{"path":"om/common/constants/om_public_constants_4859.js"},"om-common-errors":{"path":"om/common/constants/om_public_errors_4859.js"},"om-common-net-session":{"path":"om/common/net/session_4859.js","requires":["event-custom","common-utils","common-net-session","common-net-sessionmgr","om-common-utils"]},"om-common-utils":{"path":"om/common/utils/utils_4859.js","requires":["common-utils"]},"om-controller-addremoveapp":{"path":"om/controller/addremoveapp_4859.js","requires":["om-controller-base","om-common-utils","common-utils","om-common-net-session","om-model-datastore","om-controller-applicationlist","rocket-stats"]},"om-controller-applicationlist":{"path":"om/controller/applicationlist_4859.js","requires":["om-controller-base","om-common-net-session","om-model-datastore","rocket-stats"]},"om-controller-base":{"path":"om/controller/base_4859.js"},"om-controller-compose":{"path":"om/controller/compose_4859.js","requires":["om-controller-base","om-controller-views","om-ui-composeview","om-controller-compose-events","om-controller-internalapi","rocket-stats","om-common-utils","common-utils-stats"]},"om-controller-compose-events":{"path":"om/controller/compose-events_4859.js","requires":["om-common-utils","om-controller-base"]},"om-controller-crossframe":{"path":"om/controller/crossframe_4859.js","requires":["om-controller-base","om-common-utils","om-controller-openapi","omCrossframe","rocket-stats"]},"om-controller-internalapi":{"path":"om/controller/internalapi_4859.js","requires":["om-controller-base","om-common-utils","om-common-apiutils","om-model-datastore","om-controller-openapi","rocket-stats","om-api-appdata","om-api-menu","om-api-event","om-api-message"]},"om-controller-messageread":{"path":"om/controller/messageread_4859.js","requires":["om-controller-base","om-common-utils","async-queue","mail-controller-messages","common-utils-stats"]},"om-controller-openapi":{"path":"om/controller/openapi_4859.js","requires":["om-controller-base","om-controller-webservice","om-common-constants","om-common-net-session","om-common-utils","om-model-datastore","om-common-errors","common-net-sessionmgr","common-utils","json","rocket-stats"]},"om-controller-views":{"path":"om/controller/views_4859.js","requires":["common-utils","om-controller-base","om-common-utils","om-model-datastore","om-controller-crossframe","om-common-errors","querystring-stringify-simple"]},"om-controller-views-other":{"path":"om/controller/views-other_4859.js","requires":["om-controller-views"]},"om-controller-webservice":{"path":"om/controller/webservice_4859.js","requires":["om-controller-base","om-model-datastore","om-common-errors","om-common-utils","common-utils","_shared_module_open_mail_webservice_container"]},"om-model-datastore":{"path":"om/model/datastore_4859.js","requires":["array-extras"]},"om-ui-applicationlist-base":{"path":"om/ui/applicationlist/applicationlist_4859.js","requires":["common-utils","_shared_module_open_mail_application_list","om-model-datastore","om-controller-applicationlist","om-controller-views","_shared_module_open_mail_application_list_menu","common-persist-cookie-data"]},"om-ui-applicationlistmenu-base":{"path":"om/ui/applicationlist/applicationlistmenu_4859.js","requires":["common-utils","_shared_module_open_mail_application_list_menu"]},"om-ui-composeview":{"path":"om/ui/composeview/composeview_4859.js","requires":["mail-ui-composeview-base"]},"om-ui-convpane-base":{"path":"om/ui/mailpane/convpane_4859.js","requires":["mail-ui-convpane-base","mail-controller-messages","json-stringify","om-model-datastore","om-controller-messageread","om-controller-views","common-utils-stats","rocket-stats"]},"om-ui-messagepane-base":{"path":"om/ui/mailpane/messagepane_4859.js","requires":["mail-ui-messagepane-base","mail-controller-messages","json-stringify","om-model-datastore","om-controller-messageread","om-controller-views","common-utils-stats","rocket-stats"]},"om-ui-messagepane-sandbox-controller":{"path":"om/ui/mailpane/sandbox/controller_4859.js","requires":["mail-ui-messagepane-utils-shared","om-ui-sandbox-utils","om-ui-sandbox-view","om-ui-sandbox-datastore","om-ui-sandbox-messageread"]},"om-ui-sandbox-datastore":{"path":"om/ui/mailpane/sandbox/datastore_4859.js","requires":["om-ui-sandbox-view"]},"om-ui-sandbox-messageread":{"path":"om/ui/mailpane/sandbox/messageread_4859.js","requires":["om-ui-sandbox-datastore"]},"om-ui-sandbox-utils":{"path":"om/ui/mailpane/sandbox/utils_4859.js"},"om-ui-sandbox-view":{"path":"om/ui/mailpane/sandbox/view_4859.js","requires":["base-base","mail-ui-messagepane-utils-shared","om-ui-sandbox-utils","om-ui-sandbox-messageread"]},"om-ui-sendconfirm":{"path":"om/ui/sendconfirm/sendconfirm_4859.js","requires":["mail-ui-sendconfirmview-base"]},"om-ui-views-dialog":{"path":"om/ui/views/dialog/dialog_4859.js","requires":["om-ui-views-simple","_shared_module_open_mail_application_dialog"]},"om-ui-views-folderpane":{"path":"om/ui/views/folderpane/folderpane_4859.js","requires":["om-ui-views-simple"]},"om-ui-views-hidden":{"path":"om/ui/views/hidden/hidden_4859.js","requires":["om-ui-views-simple","_shared_module_open_mail_application_hidden"]},"om-ui-views-lightbox":{"path":"om/ui/views/lightbox/lightbox_4859.js","requires":["om-ui-views-simple","_shared_module_open_mail_application_lightbox"]},"om-ui-views-overlay":{"path":"om/ui/views/overlay/overlay_4859.js","requires":["om-ui-views-simple","om-common-utils","_shared_module_open_mail_application_overlay"]},"om-ui-views-panel":{"path":"om/ui/views/panel/panel_4859.js","requires":["om-ui-views-simple","_shared_module_open_mail_application_panel"]},"om-ui-views-pod":{"path":"om/ui/views/pod/pod_4859.js","requires":["om-ui-views-simple","_shared_module_open_mail_application_pod"]},"om-ui-views-simple":{"path":"om/ui/views/simple/simple_4859.js","requires":["base-base","node","common-utils","common-utils-stats","_shared_module_open_mail_application_simple"]},"om-ui-views-tab":{"path":"om/ui/views/tab/tab_4859.js","requires":["common-utils","_shared_module_open_mail_application_content","om-ui-views-simple"]},"om-ui-workspace-base":{"path":"om/ui/workspace/workspace_4859.js","requires":["mail-ui-factory-base","om-model-datastore","om-ui-applicationlist-base","om-ui-messagepane-base"]},"options-ui-mailoptionsview":{"path":"mail/ui/optionsview/optionsview_4859.js","requires":["common-ui-contentwidget"]},"pods-location-acwidget":{"path":"hydra/pods/location-acwidget_4859.js","requires":["comms-ui-autocomplete","json","pods_generic"]},"pods_app":{"path":"hydra/pods/app_4859.js","requires":["pods_generic"]},"pods_birthday":{"path":"hydra/pods/birthday_4859.js","requires":["pods_generic"]},"pods_calendar":{"path":"hydra/pods/calendar_4859.js","requires":["pods_generic"]},"pods_generic":{"path":"hydra/pods/generic_4859.js","requires":["node","event","json-parse","common-net-session","rocket-stats"]},"pods_localnews":{"path":"hydra/pods/localnews_4859.js","requires":["pods_generic"]},"pods_news":{"path":"hydra/pods/news_4859.js","requires":["pods_generic"]},"pods_ruefc":{"path":"hydra/pods/ruefc_4859.js","requires":["pods_generic","mail-model-datastore"]},"pods_weather":{"path":"hydra/pods/weather_4859.js","requires":["pods_generic"]},"profile-api":{"path":"comms/shared/src/profile-api/js/api_4859.js","requires":["profile-api-config"]},"profile-api-config":{"path":"comms/shared/src/profile-api/js/api-config_4859.js","requires":["attribute"]},"rocket-stats":{"path":"comms/shared/src/rocketstats/js/src/rocketstats_4859.js"},"scrum-board":{"path":"comms/shared/tools/scrumBoard/scrumBoard_4859.js","requires":["bugzilla-table","node","json","substitute","dd-ddm-drop","dd-proxy","dd-drop","dd-delegate"]},"template-renderer":{"path":"comms/shared/src/utils/js/template-renderer_4859.js"},"themes-img-snowing":{"path":"theme/img-snowing/img-snowing_4859.js","requires":["stylesheet"]},"themes-img-ufo":{"path":"theme/img-ufo/ufo_4859.js","requires":["stylesheet"]},"themes-img-water":{"path":"theme/img-water/img-water_4859.js","requires":["stylesheet"]},"themes-img-ydog":{"path":"theme/img-ydog/ydog_4859.js","requires":["stylesheet"]},"tracer":{"path":"mail/debug/tracer_4859.js","requires":["comms-aop-weaver","comms-aop-tracer","mail-ui-actions-marker"]},"ult-track":{"path":"common/utils/ultTrack_4859.js","requires":["ult_wrapper"]},"ult-tracker":{"path":"common/utils/ultTracker_4859.js","requires":["ult_wrapper"]},"ult_wrapper":{"path":"common/utils/ult_4859.js"}};
var C={"postlaunch":["common-utils-error","mail-common-cachewarmer","mail-error","mail-errormap","mail-ui-inboxmenu-base","mail-ui-folderevents","mail-ui-oviheader","mail-ui-messenger","mail-ui-print","mail-ui-themes","mail-ui-shortcuts-dialog","mail-ui-ad-upsell-dialog","gx-ui-updates-base","gx_utils","gx_YOS","gx_cue","gx_messages","gx_profiledata","gx_status","gx_news","gx_cue_mini_nux","om-api-social","common-ui-menu-helper","common-ui-notification","common-ui-tabs-overflow","mail-ui-workspace-ext","mail-ui-foldersview-bind","mail-ui-messagesview-quickfilter","options-ui-mailoptionsview"],"compose":["mail-common-downloader-v1","mail-common-downloader-v2","mail-controller-compose","mail-controller-compose-text","mail-controller-spellcheck","mail-ui-authorview-base","mail-ui-composeview-attach","mail-ui-inlinecompose","mail-ui-mailcompose","mail-ui-composeview-base","mail-ui-fullcompose","mail-ui-mailcompose-base-header","mail-ui-convcompose-header","mail-ui-composeview-spellcheck","mail-ui-messageevents","mail-ui-messageeventsnew","mail-ui-convevents","mail-ui-mailevents","mail-ui-messagepane-next-prev","mail-ui-messagepane-bind","mail-ui-message-encodings","mail-ui-messagepreview","mail-ui-sendconfirmview-base","mail-service-uploader","mail-service-uploader-yui","mail-service-uploader-form","mail-ui-empty-search","mail-ui-sendconfirm-capthcaut","mail-ui-convpane-read","comms-ui-lozenge","comms-utils","ac-widget","common-ui-menu-helper","mail-ui-mailpane-next-prev","comms-lozenge-address","comms-lozenge","mail-ui-pane-utils"],"contacts":["contacts-ui-addcontact-add","contacts-ui-addcontact-confirm","contacts-ui-addcontactdialog","contacts-ui-choosecontactdialog","contacts-ui-contact-popup","contacts-ui-createlistdialog","contacts-ui-createlistdialog-view","contacts-ui-createlistdialog-confirm","contacts-ui-addcontact-controller","comms-utils","common-ui-menu-helper"],"openmail":["om-controller-addremoveapp","om-controller-compose","om-controller-internalapi","om-ui-views-lightbox","om-ui-messagepane-sandbox-controller","om-ui-sandbox-messageread","om-ui-sandbox-datastore","om-ui-sandbox-view","om-ui-sandbox-utils","om-api-mail","om-ui-composeview","om-ui-sendconfirm","mail-ui-composeview-base","comms-ui-lozenge","comms-utils","mail-ui-composeview-attach","mail-controller-compose","mail-controller-compose-text","ac-widget","om-api-message","mail-ui-authorview-base","mail-service-uploader","mail-ui-sendconfirm-capthcaut","mail-ui-sendconfirmview-base","comms-lozenge-address","comms-lozenge"],"search":["mail-ui-search-refinements","mail-ui-itemlist-base","mail-ui-search-base","mail-ui-searchutils","mail-ui-bulk-progress","mail-ui-search-model","mail-ui-mailSearchController","mail-ui-searchListController","mail-ui-searchListView","mail-ui-advancedSearchController","mail-ui-advancedSearchView","mail-ui-searchGroupsController","mail-ui-dmsearch-controller","mail-ui-dmsearch-model","mail-ui-searchGroupsView","ac-widget","comms-utils"],"postlaunch_jp":["mail-ui-workspace-base-jp","mail-ui-accordion-base-jp","mail-ui-message-timedalertdialog-jp","contacts-ui-addcontact-add-jp","mail-ui-folderevents-jp","mail-ui-leftcolumn-contactmenu-base-jp","mail-ui-common-calendar-jp","mail-ui-themes-jp","contacts-ui-addcontact-add","mail-ui-folderevents","common-ui-menu-helper"],"compose_jp":["mail-ui-composeview-base-jp","mail-ui-sendconfirmview-base-jp","mail-common-ybox-uploader-jp"],"subcompose":["mail-ui-authorview-base","ac-widget","comms-lozenge","comms-ui-lozenge","comms-utils","comms-lozenge-address","comms-lozenge-edit","comms-ui-editable-overlay-plugin","mail-model-send","mail-controller-compose","mail-controller-sendconfirm","mail-ui-composeview-base","mail-ui-composeview-attach","mail-controller-compose-text","mail-service-uploader"]};var P={"postlaunch_strings":{"path":"intl/js/postlaunch/lang_"+NeoConfig.lang+NeoConfig.buildSuffix+".js"},"compose_strings":{"path":"intl/js/compose/lang_"+NeoConfig.lang+NeoConfig.buildSuffix+".js","requires":["postlaunch_strings","subcompose_strings"]},"contacts_strings":{"path":"intl/js/contacts/lang_"+NeoConfig.lang+NeoConfig.buildSuffix+".js","requires":["postlaunch_strings","subcompose_strings"]},"openmail_strings":{"path":"intl/js/openmail/lang_"+NeoConfig.lang+NeoConfig.buildSuffix+".js","requires":["postlaunch_strings","subcompose_strings"]},"search_strings":{"path":"intl/js/search/lang_"+NeoConfig.lang+NeoConfig.buildSuffix+".js","requires":["postlaunch_strings","subcompose_strings"]},"postlaunch_jp_strings":{"path":"intl/js/postlaunch_jp/lang_"+NeoConfig.lang+NeoConfig.buildSuffix+".js","requires":["postlaunch_strings","subcompose_strings"]},"compose_jp_strings":{"path":"intl/js/compose_jp/lang_"+NeoConfig.lang+NeoConfig.buildSuffix+".js","requires":["postlaunch_strings","subcompose_strings"]},"subcompose_strings":{"path":"intl/js/subcompose/lang_"+NeoConfig.lang+NeoConfig.buildSuffix+".js","requires":["postlaunch_strings"]}};B.mix(D,P);for(var G in C){var H=C[G];for(var O=0;O<H.length;O++){var J=H[O];var T=D[J];if(T){if(!T.requires){T.requires=[];}T.requires.push(G+"_strings");}}}M();function M(){var Z,Y,V,a;if(NeoConfig.convMods){for(var X in NeoConfig.convMods){V=X.split("$");Z=NeoConfig.convMods[X];Y=D[V[1]];if(Y&&Z){if(V[0]=="PATH"){Y["path"]=Z;}else{if(V[0]=="REQ"){a=Z.split("$");if(a[0]===""){Y["requires"].push(a[1]);}else{for(var W=0;W<Y["requires"].length;W++){if(Y["requires"][W]==a[0]){Y["requires"][W]=a[1];break;}}}}}}}}}var F,L="",N=0,K=0,E=1,A=0,I=NeoConfig.reducedUrlLength||255,U=NeoConfig.urlLength||2000,R={mail:{name:"mail",comboBase:YUI_config.groups.mailMods.comboBase,root:YUI_config.groups.mailMods.root,base:YUI_config.groups.mailMods.base,combine:true,modules:D,origin:NeoConfig.originPath}};S();function S(){(A++>2)&&(A<7)&&E++;F=(NeoConfig.yloaderTimeout||7500)*E;if(NeoConfig.low_bandwidth){F=F*2+2;}}function Q(){var Z,c,X,f,b,g,V,e=NeoConfig.retryOriginPerc,Y=0,W=[],d=window,a=d.globals||{};d.globals=a;Z=a.failures={};e||(e===0)||(e=101);
V=Math.random()*100<e;return c=function(i,l,o,j){var w,y,u=i.Env,s=YUI.Env.mods,n=u._loader,p=n.moduleInfo,x=n.groups,h=i.common.Utils.rocketstats;m.errorFn=1;j=i.clone(j);q(j);if(w&&w.type=="js"&&!w.noRegister){Z[w.name]=Z[w.name]||0;Z[w.name]++;h.stat("loader","modfailure_"+w.name+"_"+e+"_"+V);if(!L){L=w.name;K++;}N++;if(U==I){(F<61000)&&(F*=2);}else{w=0;}U=I;y={timeout:F,maxURLLength:U};i._config(y);if(w){V?v(w,t):t(2);return;}}t(Y++<5?1:2);function m(){r("edge");S();try{l&&l.apply(this,arguments);}catch(z){}k(0,1);}function r(z){L&&h.stat("loader",z+"success_"+L+"_"+K);N&&h.stat("loader",z+"retries"+"_"+e+"_"+V,N);L="";N=0;}function k(AA,z){if(g&&(z==2)){b=g+10000-new Date().getTime();if(b>0){X=X||setTimeout(k,b);}if(X){return;}}else{X&&(z==1)&&clearTimeout(X);X=0;}setTimeout(function(){g=new Date().getTime();if(f=W.shift()){f.Y.use.apply(f.Y,f.a);}},0);}function t(z){(l&&l.errorFn)?j.push(l):j.push(m);W.push({Y:i,a:j});k(0,z);}function q(){var AA,z,AB=0;while(AA=j[AB++]){if(!s[AA]){w=p[AA];w||h.stat("loader","nomodinfo_"+AA);if(w){if(w.type=="js"){if(!w.noRegister){return;}z=w;YUI.add(AA);}z=z||w;}}}w=z;}function v(AD,AA){var AF,AG,z,AC,AH=AD.fullpath,AB=AD.name,AE=F/4;if(!AH){if(AG=x[AD.group]){if(!(AF=AG.origin)){h.stat("loader","no_origin_"+AD.group);if((AF=AG.root)&&(AF.indexOf("nq/")==0)){AF="neo/"+AF.substring(3);}if(AF.indexOf("f=/n/")==0){AF="neo/"+AF.substring(5);}if(AF.length<3){h.stat("loader","invalid_origin_"+AB);AA(2);return;}}}else{AF="yui3/build/";}AH=location.protocol+"//"+location.host+"/"+AF+AD.path;}if(i.UA.webkit){AH+="?.rand="+new Date().getTime();}z={autopurge:true,timeout:AE,onSuccess:function(){if(!AC&&s[AB]){AC=1;r("origin");AA(1);}else{this.onFailure();}},onFailure:function(){if(!AC){AC=1;AA(2);}}};z.onTimeout=z.onFailure;i.Get.script(AH,z);}};}delete B.Env._loader.rollups;B._config({requireRegistration:true,loadErrorFn:Q(),timeout:F,maxURLLength:U,groups:R});},"1.0.0");

YUI.add("mail-templates",function(B){var A={mailTmpl:{name:"mailTmpl",comboBase:YUI_config.groups.mailMods.comboBase,root:YUI_config.groups.mailMods.root+"templates/js/",base:YUI_config.groups.mailMods.base+"templates/js/",combine:true,modules:{"_shared_module_carousel_carousel":{"path":"_shared/module/carousel/carousel_4859.js","requires":["_shared_module_carousel_carousel_item","_shared_module_carousel_carousel_stationery_item"]},"_shared_module_carousel_carousel_item":{"path":"_shared/module/carousel/carousel-item_4859.js"},"_shared_module_carousel_carousel_stationery_item":{"path":"_shared/module/carousel/carousel-stationery-item_4859.js"},"_shared_module_compose":{"path":"_shared/module/compose_4859.js","requires":["_shared_module_compose_message_header","_shared_module_rte_well","_shared_module_compose_message_body"]},"_shared_module_compose_loading":{"path":"_shared/module/compose/loading_4859.js"},"_shared_module_compose_message_body":{"path":"_shared/module/compose/message-body_4859.js","requires":["_shared_module_message_loading_error"]},"_shared_module_compose_message_header":{"path":"_shared/module/compose/message-header_4859.js"},"_shared_module_compose_reply":{"path":"_shared/module/compose/reply_4859.js"},"_shared_module_compose_title":{"path":"_shared/module/compose/title_4859.js"},"_shared_module_contact_card_confirm":{"path":"_shared/module/contact/card-confirm_4859.js","requires":["_shared_module_contact_fragments_photo","_shared_module_contact_fragments_activity","_shared_module_contact_fragments_name","_shared_module_contact_fragments_info"]},"_shared_module_contact_card_email":{"path":"_shared/module/contact/card-email_4859.js","requires":["_shared_module_contact_fragments_dl_email"]},"_shared_module_contact_card_email_rollup":{"path":"_shared/module/contact/card-email_rollup_4859.js"},"_shared_module_contact_card_lg":{"path":"_shared/module/contact/card-lg_4859.js","requires":["_shared_module_contact_fragments_activity","_shared_module_contact_fragments_follow","_shared_module_contact_fragments_photo","_shared_module_contact_fragments_name","_shared_module_contact_fragments_info"]},"_shared_module_contact_card_md":{"path":"_shared/module/contact/card-md_4859.js","requires":["_shared_module_contact_fragments_activity","_shared_module_contact_fragments_photo","_shared_module_contact_fragments_name","_shared_module_contact_fragments_info","_shared_module_contact_fragments_follow"]},"_shared_module_contact_card_sm":{"path":"_shared/module/contact/card-sm_4859.js","requires":["_shared_module_contact_fragments_activity","_shared_module_contact_fragments_photo","_shared_module_contact_fragments_name","_shared_module_contact_fragments_info","_shared_module_contact_fragments_follow"]},"_shared_module_contact_fragments_activity":{"path":"_shared/module/contact/fragments/activity_4859.js"},"_shared_module_contact_fragments_dl_email":{"path":"_shared/module/contact/fragments/dl/email_4859.js"},"_shared_module_contact_fragments_dl_mobile":{"path":"_shared/module/contact/fragments/dl/mobile_4859.js"},"_shared_module_contact_fragments_dl_yim":{"path":"_shared/module/contact/fragments/dl/yim_4859.js"},"_shared_module_contact_fragments_follow":{"path":"_shared/module/contact/fragments/follow_4859.js"},"_shared_module_contact_fragments_info":{"path":"_shared/module/contact/fragments/info_4859.js","requires":["_shared_module_contact_fragments_dl_email","_shared_module_contact_fragments_dl_yim","_shared_module_contact_fragments_dl_mobile"]},"_shared_module_contact_fragments_name":{"path":"_shared/module/contact/fragments/name_4859.js"},"_shared_module_contact_fragments_photo":{"path":"_shared/module/contact/fragments/photo_4859.js"},"_shared_module_contacts_list_jp_contact":{"path":"_shared/module/contacts-list/jp/contact_4859.js"},"_shared_module_contacts_list_jp_contacts_list":{"path":"_shared/module/contacts-list/jp/contacts-list_4859.js"},"_shared_module_conversation_fragments_conversation_history":{"path":"_shared/module/conversation/fragments/conversation-history_4859.js","requires":["_shared_module_conversation_fragments_conversation_timestamp","_shared_module_conversation_fragments_history"]},"_shared_module_conversation_fragments_conversation_timestamp":{"path":"_shared/module/conversation/fragments/conversation-timestamp_4859.js"},"_shared_module_conversation_fragments_history":{"path":"_shared/module/conversation/fragments/history_4859.js","requires":["_shared_module_conversation_fragments_msg"]},"_shared_module_conversation_fragments_msg":{"path":"_shared/module/conversation/fragments/msg_4859.js"},"_shared_module_folder_empty_rollup":{"path":"_shared/module/folder-empty_rollup_4859.js"},"_shared_module_message_attachments":{"path":"_shared/module/message/attachments_4859.js"},"_shared_module_message_blocked":{"path":"_shared/module/message/blocked_4859.js"},"_shared_module_message_display":{"path":"_shared/module/message-display_4859.js","requires":["_shared_module_message_blocked","_shared_module_message_inlineattachment","_shared_module_conversation_fragments_conversation_history","_shared_module_message_loading_error","_shared_module_message_truncated","_shared_module_message_photos","_shared_module_message_attachments","_shared_module_message_header"]},"_shared_module_message_display_jp_rollup":{"path":"_shared/module/message-display-jp_rollup_4859.js"},"_shared_module_message_display_rollup":{"path":"_shared/module/message-display_rollup_4859.js"},"_shared_module_message_header":{"path":"_shared/module/message-header_4859.js","requires":["_shared_module_message_header_attachments","_shared_module_message_header_from","_shared_module_message_header_to","_shared_module_message_header_cc","_shared_module_message_header_bcc","_shared_module_message_header_participants","_shared_module_message_header_with","_shared_module_updates_ycw"]},"_shared_module_message_header_attachments":{"path":"_shared/module/message-header/attachments_4859.js"},"_shared_module_message_header_bcc":{"path":"_shared/module/message-header/bcc_4859.js"},"_shared_module_message_header_cc":{"path":"_shared/module/message-header/cc_4859.js"},"_shared_module_message_header_from":{"path":"_shared/module/message-header/from_4859.js"},"_shared_module_message_header_participants":{"path":"_shared/module/message-header/participants_4859.js"},"_shared_module_message_header_to":{"path":"_shared/module/message-header/to_4859.js"},"_shared_module_message_header_with":{"path":"_shared/module/message-header/with_4859.js"},"_shared_module_message_inlineattachment":{"path":"_shared/module/message/inlineattachment_4859.js"},"_shared_module_message_list_rollup":{"path":"_shared/module/message-list_rollup_4859.js"},"_shared_module_message_list_threaded_rollup":{"path":"_shared/module/message-list-threaded_rollup_4859.js"},"_shared_module_message_loading_error":{"path":"_shared/module/message/loading-error_4859.js"},"_shared_module_message_norton_logo":{"path":"_shared/module/message/norton-logo_4859.js"},"_shared_module_message_pane":{"path":"_shared/module/message-pane_4859.js","requires":["_shared_module_message_prompt","minty_module_comm_modes","_shared_module_message_display"]},"_shared_module_message_photos":{"path":"_shared/module/message/photos_4859.js"},"_shared_module_message_prompt":{"path":"_shared/module/message/prompt_4859.js"},"_shared_module_message_truncated":{"path":"_shared/module/message/truncated_4859.js"},"_shared_module_offscreen_bin_compose":{"path":"_shared/module/offscreen-bin/compose_4859.js"},"_shared_module_offscreen_bin_compose_jp_menu_spell_langs":{"path":"_shared/module/offscreen-bin/compose/jp/menu-spell-langs_4859.js"},"_shared_module_offscreen_bin_compose_menu_color_picker":{"path":"_shared/module/offscreen-bin/compose/menu-color-picker_4859.js"},"_shared_module_offscreen_bin_compose_menu_list":{"path":"_shared/module/offscreen-bin/compose/menu-list_4859.js"},"_shared_module_offscreen_bin_compose_menu_spell_langs":{"path":"_shared/module/offscreen-bin/compose/menu-spell-langs_4859.js"},"_shared_module_offscreen_bin_compose_menu_spellcheck":{"path":"_shared/module/offscreen-bin/compose/menu-spellcheck_4859.js"},"_shared_module_offscreen_bin_compose_menu_text_align":{"path":"_shared/module/offscreen-bin/compose/menu-text-align_4859.js"},"_shared_module_offscreen_bin_compose_modal_cancel_compose":{"path":"_shared/module/offscreen-bin/compose/modal-cancel-compose_4859.js","requires":["_shared_module_offscreen_bin_modal_close_icon"]},"_shared_module_offscreen_bin_compose_modal_check_spelling":{"path":"_shared/module/offscreen-bin/compose/modal-check-spelling_4859.js","requires":["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btn_ok"]},"_shared_module_offscreen_bin_compose_modal_check_spelling_rollup":{"path":"_shared/module/offscreen-bin/compose/modal-check-spelling_rollup_4859.js"},"_shared_module_offscreen_bin_contacts_lists_create_list_confirmation":{"path":"_shared/module/offscreen-bin/contacts/lists/create-list-confirmation_4859.js","requires":["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btn_done","_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btn_done","_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btn_done","_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btn_ok"]},"_shared_module_offscreen_bin_contacts_menu_contact_compact_compose":{"path":"_shared/module/offscreen-bin/contacts/menu-contact-compact-compose_4859.js","requires":["_shared_module_contact_fragments_photo","_shared_module_contact_fragments_name"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_bd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontact-bd_4859.js","requires":["minty_module_contacts_edit_error","minty_module_contacts_edit_name","minty_module_contacts_edit_basics_emails","minty_module_contacts_edit_basics_ims","minty_module_contacts_edit_basics_phones"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_ft":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontact-ft_4859.js","requires":["_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_hd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontact-hd_4859.js","requires":["_shared_module_offscreen_bin_modal_close_icon"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_bd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontactconfirm-bd_4859.js","requires":["_shared_module_contact_card_confirm"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_ft":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontactconfirm-ft_4859.js","requires":["_shared_module_offscreen_bin_modal_btn_done"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_hd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontactconfirm-hd_4859.js","requires":["_shared_module_offscreen_bin_modal_close_icon"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_jp_fragments_modal_kiosk_addcontact_bd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/jp/fragments/modal-kiosk-addcontact-bd_4859.js","requires":["minty_module_contacts_edit_error","minty_module_contacts_edit_name","minty_module_contacts_edit_basics_jp_emails","minty_module_contacts_edit_basics_jp_ims"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_jp_modal_kiosk_addcontact":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/jp/modal-kiosk-addcontact_4859.js","requires":["_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_hd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_jp_fragments_modal_kiosk_addcontact_bd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_ft"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_count":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add-list/fragments/addlist-count_4859.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_filter":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add-list/fragments/addlist-filter_4859.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_pane_bd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add-list/fragments/addlist-pane-bd_4859.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_pane_hd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add-list/fragments/addlist-pane-hd_4859.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_pane_loading":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add-list/fragments/addlist-pane-loading_4859.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_pane_name":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add-list/fragments/addlist-pane-name_4859.js","requires":["_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_pane_name_error"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_pane_name_error":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add-list/fragments/addlist-pane-name-error_4859.js","requires":["_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_pane_name_error_strings"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_pane_name_error_strings":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add-list/fragments/addlist-pane-name-error-strings_4859.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_modal_kiosk_addlist_bd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add-list/fragments/modal-kiosk-addlist-bd_4859.js","requires":["_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_choose_filter","_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_pane_hd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_pane_bd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_pane_loading","_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_pane_name","_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_addlist_count","_shared_module_offscreen_bin_modal_toast_saving"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_modal_kiosk_addlist_ft":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add-list/fragments/modal-kiosk-addlist-ft_4859.js","requires":["_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_modal_kiosk_addlist_hd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add-list/fragments/modal-kiosk-addlist-hd_4859.js","requires":["_shared_module_offscreen_bin_modal_close_icon"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_modal_kiosk_addlist":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add-list/modal-kiosk-addlist_4859.js","requires":["_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_modal_kiosk_addlist_hd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_modal_kiosk_addlist_bd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_list_fragments_modal_kiosk_addlist_ft"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_add_modal_kiosk_addcontact":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-add/modal-kiosk-addcontact_4859.js","requires":["_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_hd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_bd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_ft"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_count":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-count_4859.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_filter":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-filter_4859.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_look_for":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-look-for_4859.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-pane_4859.js","requires":["_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_hd","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_bd"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_bd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-pane-bd_4859.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_hd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-pane-hd_4859.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_loading":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-pane-loading_4859.js"},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_bd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/modal-kiosk-choosecontact-bd_4859.js","requires":["_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_filter","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_look_for","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_loading","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_count"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_ft":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/modal-kiosk-choosecontact-ft_4859.js","requires":["_shared_module_offscreen_bin_modal_btn_done","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_hd":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/modal-kiosk-choosecontact-hd_4859.js","requires":["_shared_module_offscreen_bin_modal_close_icon"]},"_shared_module_offscreen_bin_contacts_modal_kiosk_choose_modal_kiosk_choosecontact":{"path":"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/modal-kiosk-choosecontact_4859.js","requires":["_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_hd","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_bd","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_ft"]},"_shared_module_offscreen_bin_inbox":{"path":"_shared/module/offscreen-bin/inbox_4859.js","requires":["_shared_module_offscreen_bin_menus_actions","_shared_module_offscreen_bin_menus_thread_list","_shared_module_offscreen_bin_menus_msg_actions","_shared_module_offscreen_bin_menus_compose","_shared_module_offscreen_bin_modal_attach_download","_shared_module_offscreen_bin_menus_tab_overflow","_shared_module_offscreen_bin_modal_set_encodings","_shared_module_offscreen_bin_menus_conv_actions","_shared_module_offscreen_bin_menus_bubble_actions","_shared_module_offscreen_bin_menus_conv_reply","_shared_module_offscreen_bin_menus_message_list_preview","_shared_module_offscreen_bin_menus_message_list_switcher","_shared_module_offscreen_bin_menus_message_list_sortby","_shared_module_offscreen_bin_menus_message_list_cbox_select","_shared_module_offscreen_bin_menus_message_list_count","_shared_module_offscreen_bin_menus_thread_item_options"]},"_shared_module_offscreen_bin_jp_cal_allday":{"path":"_shared/module/offscreen-bin/jp/cal-allday_4859.js"},"_shared_module_offscreen_bin_jp_cal_day":{"path":"_shared/module/offscreen-bin/jp/cal-day_4859.js"},"_shared_module_offscreen_bin_jp_cal_hour":{"path":"_shared/module/offscreen-bin/jp/cal-hour_4859.js"},"_shared_module_offscreen_bin_jp_cal_limit":{"path":"_shared/module/offscreen-bin/jp/cal-limit_4859.js","requires":["_shared_module_offscreen_bin_jp_cal_year","_shared_module_offscreen_bin_jp_cal_month","_shared_module_offscreen_bin_jp_cal_day","_shared_module_offscreen_bin_jp_cal_year","_shared_module_offscreen_bin_jp_cal_month","_shared_module_offscreen_bin_jp_cal_day"]},"_shared_module_offscreen_bin_jp_cal_minute":{"path":"_shared/module/offscreen-bin/jp/cal-minute_4859.js"},"_shared_module_offscreen_bin_jp_cal_month":{"path":"_shared/module/offscreen-bin/jp/cal-month_4859.js"},"_shared_module_offscreen_bin_jp_cal_task_status":{"path":"_shared/module/offscreen-bin/jp/cal-task-status_4859.js"},"_shared_module_offscreen_bin_jp_cal_term_hour":{"path":"_shared/module/offscreen-bin/jp/cal-term-hour_4859.js"},"_shared_module_offscreen_bin_jp_cal_term_minute":{"path":"_shared/module/offscreen-bin/jp/cal-term-minute_4859.js"},"_shared_module_offscreen_bin_jp_cal_year":{"path":"_shared/module/offscreen-bin/jp/cal-year_4859.js"},"_shared_module_offscreen_bin_jp_glass":{"path":"_shared/module/offscreen-bin/jp/glass_4859.js"},"_shared_module_offscreen_bin_jp_modal_attach_download_rollup":{"path":"_shared/module/offscreen-bin/jp/modal-attach-download_rollup_4859.js"},"_shared_module_offscreen_bin_jp_modal_event":{"path":"_shared/module/offscreen-bin/jp/modal-event_4859.js","requires":["_shared_module_offscreen_bin_modal_btn_save","_shared_module_offscreen_bin_modal_btn_delete","_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_jp_cal_year","_shared_module_offscreen_bin_jp_cal_month","_shared_module_offscreen_bin_jp_cal_day","_shared_module_offscreen_bin_jp_cal_hour","_shared_module_offscreen_bin_jp_cal_minute","_shared_module_offscreen_bin_jp_cal_allday","_shared_module_offscreen_bin_jp_cal_term_hour","_shared_module_offscreen_bin_jp_cal_term_minute","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_jp_modal_kiosk_mail_preview_rollup":{"path":"_shared/module/offscreen-bin/jp/modal-kiosk-mail-preview_rollup_4859.js"},"_shared_module_offscreen_bin_jp_modal_set_encodings":{"path":"_shared/module/offscreen-bin/jp/modal-set-encodings_4859.js","requires":["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btns_done_cancel"]},"_shared_module_offscreen_bin_jp_modal_task":{"path":"_shared/module/offscreen-bin/jp/modal-task_4859.js","requires":["_shared_module_offscreen_bin_jp_cal_limit","_shared_module_offscreen_bin_modal_btn_save","_shared_module_offscreen_bin_modal_btn_delete","_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_jp_cal_task_status","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_menus_actions":{"path":"_shared/module/offscreen-bin/menus/actions_4859.js"},"_shared_module_offscreen_bin_menus_att_external_links":{"path":"_shared/module/offscreen-bin/menus/att-external-links_4859.js"},"_shared_module_offscreen_bin_menus_bubble_actions":{"path":"_shared/module/offscreen-bin/menus/bubble-actions_4859.js"},"_shared_module_offscreen_bin_menus_compose":{"path":"_shared/module/offscreen-bin/menus/compose_4859.js"},"_shared_module_offscreen_bin_menus_compose_attach":{"path":"_shared/module/offscreen-bin/menus/compose-attach_4859.js"},"_shared_module_offscreen_bin_menus_compose_rollup":{"path":"_shared/module/offscreen-bin/menus/compose_rollup_4859.js"},"_shared_module_offscreen_bin_menus_conv_actions":{"path":"_shared/module/offscreen-bin/menus/conv-actions_4859.js"},"_shared_module_offscreen_bin_menus_conv_reply":{"path":"_shared/module/offscreen-bin/menus/conv-reply_4859.js"},"_shared_module_offscreen_bin_menus_debug":{"path":"_shared/module/offscreen-bin/menus/debug_4859.js"},"_shared_module_offscreen_bin_menus_external_links":{"path":"_shared/module/offscreen-bin/menus/external-links_4859.js"},"_shared_module_offscreen_bin_menus_help":{"path":"_shared/module/offscreen-bin/menus/help_4859.js"},"_shared_module_offscreen_bin_menus_jp_contact":{"path":"_shared/module/offscreen-bin/menus/jp/contact_4859.js"},"_shared_module_offscreen_bin_menus_jp_option":{"path":"_shared/module/offscreen-bin/menus/jp/option_4859.js"},"_shared_module_offscreen_bin_menus_loading":{"path":"_shared/module/offscreen-bin/menus/loading_4859.js"},"_shared_module_offscreen_bin_menus_message_list_cbox_select":{"path":"_shared/module/offscreen-bin/menus/message-list-cbox-select_4859.js"},"_shared_module_offscreen_bin_menus_message_list_count":{"path":"_shared/module/offscreen-bin/menus/message-list-count_4859.js"},"_shared_module_offscreen_bin_menus_message_list_preview":{"path":"_shared/module/offscreen-bin/menus/message-list-preview_4859.js"},"_shared_module_offscreen_bin_menus_message_list_sortby":{"path":"_shared/module/offscreen-bin/menus/message-list-sortby_4859.js"},"_shared_module_offscreen_bin_menus_message_list_switcher":{"path":"_shared/module/offscreen-bin/menus/message-list-switcher_4859.js"},"_shared_module_offscreen_bin_menus_msg_actions":{"path":"_shared/module/offscreen-bin/menus/msg-actions_4859.js"},"_shared_module_offscreen_bin_menus_mts_external_links":{"path":"_shared/module/offscreen-bin/menus/mts-external-links_4859.js"},"_shared_module_offscreen_bin_menus_openmail_extension":{"path":"_shared/module/offscreen-bin/menus/openmail-extension_4859.js"},"_shared_module_offscreen_bin_menus_options":{"path":"_shared/module/offscreen-bin/menus/options_4859.js"},"_shared_module_offscreen_bin_menus_ovi_account":{"path":"_shared/module/offscreen-bin/menus/ovi-account_4859.js"},"_shared_module_offscreen_bin_menus_ovi_support":{"path":"_shared/module/offscreen-bin/menus/ovi-support_4859.js"},"_shared_module_offscreen_bin_menus_sbc_external_links":{"path":"_shared/module/offscreen-bin/menus/sbc-external-links_4859.js"},"_shared_module_offscreen_bin_menus_tab_overflow":{"path":"_shared/module/offscreen-bin/menus/tab-overflow_4859.js"},"_shared_module_offscreen_bin_menus_thread_list":{"path":"_shared/module/offscreen-bin/menus/thread-list_4859.js"},"_shared_module_offscreen_bin_menus_uh_account":{"path":"_shared/module/offscreen-bin/menus/uh-account_4859.js"},"_shared_module_offscreen_bin_modal":{"path":"_shared/module/offscreen-bin/modal_4859.js","requires":["_shared_module_offscreen_bin_modal_close_icon"]},"_shared_module_offscreen_bin_modal_attach_download":{"path":"_shared/module/offscreen-bin/modal-attach-download_4859.js","requires":["_shared_module_offscreen_bin_modal_close_icon","_shared_module_message_norton_logo","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_modal_attach_download_rollup":{"path":"_shared/module/offscreen-bin/modal-attach-download_rollup_4859.js"},"_shared_module_offscreen_bin_modal_btn_cancel":{"path":"_shared/module/offscreen-bin/modal-btn-cancel_4859.js"},"_shared_module_offscreen_bin_modal_btn_continue":{"path":"_shared/module/offscreen-bin/modal-btn-continue_4859.js"},"_shared_module_offscreen_bin_modal_btn_delete":{"path":"_shared/module/offscreen-bin/modal-btn-delete_4859.js"},"_shared_module_offscreen_bin_modal_btn_done":{"path":"_shared/module/offscreen-bin/modal-btn-done_4859.js"},"_shared_module_offscreen_bin_modal_btn_generic":{"path":"_shared/module/offscreen-bin/modal-btn-generic_4859.js"},"_shared_module_offscreen_bin_modal_btn_ok":{"path":"_shared/module/offscreen-bin/modal-btn-ok_4859.js"},"_shared_module_offscreen_bin_modal_btn_save":{"path":"_shared/module/offscreen-bin/modal-btn-save_4859.js"},"_shared_module_offscreen_bin_modal_btns_done_cancel":{"path":"_shared/module/offscreen-bin/modal-btns-done-cancel_4859.js","requires":["_shared_module_offscreen_bin_modal_btn_done","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_modal_btns_ok_cancel":{"path":"_shared/module/offscreen-bin/modal-btns-ok-cancel_4859.js","requires":["_shared_module_offscreen_bin_modal_btn_ok","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_modal_close_icon":{"path":"_shared/module/offscreen-bin/modal-close-icon_4859.js"},"_shared_module_offscreen_bin_modal_colors_rollup":{"path":"_shared/module/offscreen-bin/modal-colors_rollup_4859.js"},"_shared_module_offscreen_bin_modal_kiosk_mail_preview_rollup":{"path":"_shared/module/offscreen-bin/modal-kiosk-mail-preview_rollup_4859.js"},"_shared_module_offscreen_bin_modal_launch_error_rollup":{"path":"_shared/module/offscreen-bin/modal-launch-error_rollup_4859.js"},"_shared_module_offscreen_bin_modal_preview_rollup":{"path":"_shared/module/offscreen-bin/modal-preview_rollup_4859.js"},"_shared_module_offscreen_bin_modal_quick_filters":{"path":"_shared/module/offscreen-bin/modal-quick-filters_4859.js","requires":["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btn_save","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_offscreen_bin_modal_set_encodings":{"path":"_shared/module/offscreen-bin/modal-set-encodings_4859.js","requires":["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btns_done_cancel"]},"_shared_module_offscreen_bin_modal_shortcuts_rollup":{"path":"_shared/module/offscreen-bin/modal-shortcuts_rollup_4859.js"},"_shared_module_offscreen_bin_modal_toast_saving":{"path":"_shared/module/offscreen-bin/modal-toast-saving_4859.js"},"_shared_module_offscreen_bin_modal_upsell_rollup":{"path":"_shared/module/offscreen-bin/modal-upsell_rollup_4859.js"},"_shared_module_offscreen_bin_print_print_rollup":{"path":"_shared/module/offscreen-bin/print/print_rollup_4859.js"},"_shared_module_offscreen_bin_progress_bar":{"path":"_shared/module/offscreen-bin/progress-bar_4859.js"},"_shared_module_offscreen_bin_renamer":{"path":"_shared/module/offscreen-bin/renamer_4859.js"},"_shared_module_offscreen_bin_shell_navigation_newfolder_body_rollup":{"path":"_shared/module/offscreen-bin/shell-navigation/newfolder/body_rollup_4859.js"},"_shared_module_offscreen_bin_shell_navigation_newfolder_header_rollup":{"path":"_shared/module/offscreen-bin/shell-navigation/newfolder/header_rollup_4859.js"},"_shared_module_open_mail_application_content":{"path":"_shared/module/open-mail/application-content_4859.js"},"_shared_module_open_mail_application_dialog":{"path":"_shared/module/open-mail/application-dialog_4859.js"},"_shared_module_open_mail_application_hidden":{"path":"_shared/module/open-mail/application-hidden_4859.js"},"_shared_module_open_mail_application_lightbox":{"path":"_shared/module/open-mail/application-lightbox_4859.js"},"_shared_module_open_mail_application_list":{"path":"_shared/module/open-mail/application-list_4859.js"},"_shared_module_open_mail_application_list_menu":{"path":"_shared/module/open-mail/application-list-menu_4859.js"},"_shared_module_open_mail_application_messagepane":{"path":"_shared/module/open-mail/application-messagepane_4859.js"},"_shared_module_open_mail_application_overlay":{"path":"_shared/module/open-mail/application-overlay_4859.js"},"_shared_module_open_mail_application_panel":{"path":"_shared/module/open-mail/application-panel_4859.js"},"_shared_module_open_mail_application_pod":{"path":"_shared/module/open-mail/application-pod_4859.js"},"_shared_module_open_mail_application_simple":{"path":"_shared/module/open-mail/application-simple_4859.js"},"_shared_module_open_mail_legal_dialog":{"path":"_shared/module/open-mail/legal-dialog_4859.js"},"_shared_module_open_mail_webservice_container":{"path":"_shared/module/open-mail/webservice-container_4859.js"},"_shared_module_rte_well":{"path":"_shared/module/rte-well_4859.js","requires":["_shared_module_rte_well_tabs_compose","_shared_module_rte_well_tabs_conversation","_shared_module_rte_well_tabs_sms","_shared_module_rte_well_content_emoticons","_shared_module_rte_well_content_format","_shared_module_rte_well_content_rich_text_switch","_shared_module_rte_well_content_attachments"]},"_shared_module_rte_well_content_attach_item":{"path":"_shared/module/rte-well/content/attach-item_4859.js"},"_shared_module_rte_well_content_attachments":{"path":"_shared/module/rte-well/content/attachments_4859.js","requires":["_shared_module_rte_well_content_attach_item","_shared_module_rte_well_content_file_count"]},"_shared_module_rte_well_content_emoticons":{"path":"_shared/module/rte-well/content/emoticons_4859.js"},"_shared_module_rte_well_content_file_count":{"path":"_shared/module/rte-well/content/file-count_4859.js","requires":["_shared_module_message_norton_logo"]},"_shared_module_rte_well_content_format":{"path":"_shared/module/rte-well/content/format_4859.js"},"_shared_module_rte_well_content_jp_emoticons":{"path":"_shared/module/rte-well/content/jp/emoticons_4859.js"},"_shared_module_rte_well_content_rich_text_switch":{"path":"_shared/module/rte-well/content/rich-text-switch_4859.js"},"_shared_module_rte_well_content_stationery":{"path":"_shared/module/rte-well/content/stationery_4859.js","requires":["_shared_module_carousel_carousel"]},"_shared_module_rte_well_tabs_compose":{"path":"_shared/module/rte-well/tabs/compose_4859.js"},"_shared_module_rte_well_tabs_conversation":{"path":"_shared/module/rte-well/tabs/conversation_4859.js"},"_shared_module_rte_well_tabs_sms":{"path":"_shared/module/rte-well/tabs/sms_4859.js"},"_shared_module_search_empty_rollup":{"path":"_shared/module/search-empty_rollup_4859.js"},"_shared_module_search_non_snippet_rollup":{"path":"_shared/module/search-non-snippet_rollup_4859.js"},"_shared_module_search_not_narrowed":{"path":"_shared/module/search/not-narrowed_4859.js"},"_shared_module_search_rollup":{"path":"_shared/module/search_rollup_4859.js"},"_shared_module_search_simple_rollup":{"path":"_shared/module/search-simple_rollup_4859.js"},"_shared_module_send_confirm_captcha":{"path":"_shared/module/send-confirm/captcha_4859.js","requires":["_shared_module_offscreen_bin_modal_btn_continue","_shared_module_offscreen_bin_modal_btn_cancel"]},"_shared_module_send_confirm_captcha_blocked":{"path":"_shared/module/send-confirm/captcha-blocked_4859.js"},"_shared_module_send_confirm_jp_captcha_rollup":{"path":"_shared/module/send-confirm/jp/captcha_rollup_4859.js"},"_shared_module_send_confirm_recipients_rollup":{"path":"_shared/module/send-confirm/recipients_rollup_4859.js"},"_shared_module_send_confirm_rollup":{"path":"_shared/module/send-confirm_rollup_4859.js"},"_shared_module_shell_navigation_search_rollup":{"path":"_shared/module/shell-navigation/search_rollup_4859.js"},"_shared_module_thread_loading_error":{"path":"_shared/module/thread/loading-error_4859.js"},"_shared_module_thread_thread_display":{"path":"_shared/module/thread/thread-display_4859.js","requires":["_shared_module_thread_loading_error","_shared_module_thread_thread_item_header","_shared_module_thread_thread_item_body","_shared_module_thread_thread_header"]},"_shared_module_thread_thread_display_rollup":{"path":"_shared/module/thread/thread-display_rollup_4859.js"},"_shared_module_thread_thread_header":{"path":"_shared/module/thread/thread-header_4859.js"},"_shared_module_thread_thread_item_attachments":{"path":"_shared/module/thread/thread-item/attachments_4859.js","requires":["_shared_module_message_photos","_shared_module_message_attachments"]},"_shared_module_thread_thread_item_body":{"path":"_shared/module/thread/thread-item/body_4859.js","requires":["_shared_module_message_blocked","_shared_module_message_loading_error","_shared_module_thread_thread_item_attachments","_shared_module_rte_well_content_attach_item"]},"_shared_module_thread_thread_item_header":{"path":"_shared/module/thread/thread-item/header_4859.js"},"_shared_module_thread_thread_pane":{"path":"_shared/module/thread/thread-pane_4859.js","requires":["_shared_module_message_prompt","minty_module_comm_modes","_shared_module_thread_thread_display"]},"_shared_module_toolbar_compose":{"path":"_shared/module/toolbar/compose_4859.js"},"_shared_module_toolbar_jp_compose":{"path":"_shared/module/toolbar/jp/compose_4859.js"},"_shared_module_updates_ycw":{"path":"_shared/module/updates/ycw_4859.js"},"_shared_module_whats_new_pod_rollup":{"path":"_shared/module/whats-new/pod_rollup_4859.js"},"minty_module_comm_modes":{"path":"minty/module/comm-modes_4859.js"},"minty_module_contacts_edit_basics_emails":{"path":"minty/module/contacts/edit/basics/emails_4859.js","requires":["minty_module_contacts_edit_select_lists_emails"]},"minty_module_contacts_edit_basics_ims":{"path":"minty/module/contacts/edit/basics/ims_4859.js","requires":["minty_module_contacts_edit_select_lists_ims"]},"minty_module_contacts_edit_basics_jp_emails":{"path":"minty/module/contacts/edit/basics/jp/emails_4859.js"},"minty_module_contacts_edit_basics_jp_ims":{"path":"minty/module/contacts/edit/basics/jp/ims_4859.js"},"minty_module_contacts_edit_basics_phones":{"path":"minty/module/contacts/edit/basics/phones_4859.js","requires":["minty_module_contacts_edit_select_lists_phones"]},"minty_module_contacts_edit_error":{"path":"minty/module/contacts/edit/error_4859.js"},"minty_module_contacts_edit_name":{"path":"minty/module/contacts/edit/name_4859.js"},"minty_module_contacts_edit_select_lists_emails":{"path":"minty/module/contacts/edit/select-lists/emails_4859.js"},"minty_module_contacts_edit_select_lists_ims":{"path":"minty/module/contacts/edit/select-lists/ims_4859.js"},"minty_module_contacts_edit_select_lists_phones":{"path":"minty/module/contacts/edit/select-lists/phones_4859.js"},"minty_module_jp_accordion_title":{"path":"minty/module/jp/accordion-title_4859.js"},"minty_module_jp_alert_mbox_alert":{"path":"minty/module/jp/alert-mbox-alert_4859.js"},"minty_module_jp_alert_mbox_error":{"path":"minty/module/jp/alert-mbox-error_4859.js"},"minty_module_jp_alert_mbox_slimfast":{"path":"minty/module/jp/alert-mbox-slimfast_4859.js"},"minty_module_jp_dummy_header":{"path":"minty/module/jp/dummy-header_4859.js"},"minty_module_jp_quota":{"path":"minty/module/jp/quota_4859.js"},"minty_module_jp_truncate":{"path":"minty/module/jp/truncate_4859.js"},"minty_module_jp_unread_message_folderlist":{"path":"minty/module/jp/unread-message-folderlist_4859.js"},"minty_module_list_view_ad_search":{"path":"minty/module/list-view-ad/search_4859.js"},"minty_module_shell_navigation_updates_rollup":{"path":"minty/module/shell-navigation/updates_rollup_4859.js"},"minty_module_static_themes_js":{"path":"minty/module/static/themes-js_4859.js"},"minty_module_tabs_tab_removable":{"path":"minty/module/tabs/tab-removable_4859.js"},"minty_module_toolbar_fragments_message_filter":{"path":"minty/module/toolbar/fragments/message-filter_4859.js"},"minty_module_toolbar_inbox":{"path":"minty/module/toolbar/inbox_4859.js"},"minty_module_toolbar_inbox_conversation_rollup":{"path":"minty/module/toolbar/inbox/conversation_rollup_4859.js"},"minty_module_toolbar_inbox_conversation_thread_rollup":{"path":"minty/module/toolbar/inbox/conversation-thread_rollup_4859.js"},"minty_module_toolbar_inbox_default_rollup":{"path":"minty/module/toolbar/inbox/default_rollup_4859.js"},"minty_module_toolbar_inbox_default_thread_rollup":{"path":"minty/module/toolbar/inbox/default-thread_rollup_4859.js"},"minty_module_toolbar_inbox_drafts_rollup":{"path":"minty/module/toolbar/inbox/drafts_rollup_4859.js"},"minty_module_toolbar_inbox_drafts_thread_rollup":{"path":"minty/module/toolbar/inbox/drafts-thread_rollup_4859.js"},"minty_module_toolbar_inbox_jp_default_rollup":{"path":"minty/module/toolbar/inbox/jp/default_rollup_4859.js"},"minty_module_toolbar_inbox_jp_drafts_rollup":{"path":"minty/module/toolbar/inbox/jp/drafts_rollup_4859.js"},"minty_module_toolbar_inbox_jp_message":{"path":"minty/module/toolbar/inbox/jp/message_4859.js"},"minty_module_toolbar_inbox_jp_search_rollup":{"path":"minty/module/toolbar/inbox/jp/search_rollup_4859.js"},"minty_module_toolbar_inbox_jp_sent_rollup":{"path":"minty/module/toolbar/inbox/jp/sent_rollup_4859.js"},"minty_module_toolbar_inbox_jp_spam_rollup":{"path":"minty/module/toolbar/inbox/jp/spam_rollup_4859.js"},"minty_module_toolbar_inbox_message":{"path":"minty/module/toolbar/inbox/message_4859.js"},"minty_module_toolbar_inbox_message_thread":{"path":"minty/module/toolbar/inbox/message-thread_4859.js","requires":["minty_module_toolbar_fragments_message_filter"]},"minty_module_toolbar_inbox_search_rollup":{"path":"minty/module/toolbar/inbox/search_rollup_4859.js"},"minty_module_toolbar_inbox_search_thread_rollup":{"path":"minty/module/toolbar/inbox/search-thread_rollup_4859.js"},"minty_module_toolbar_inbox_sent_msg_rollup":{"path":"minty/module/toolbar/inbox/sent-msg_rollup_4859.js"},"minty_module_toolbar_inbox_sent_msg_thread_rollup":{"path":"minty/module/toolbar/inbox/sent-msg-thread_rollup_4859.js"},"minty_module_toolbar_inbox_sent_rollup":{"path":"minty/module/toolbar/inbox/sent_rollup_4859.js"},"minty_module_toolbar_inbox_sent_thread_rollup":{"path":"minty/module/toolbar/inbox/sent-thread_rollup_4859.js"},"minty_module_toolbar_inbox_spam_rollup":{"path":"minty/module/toolbar/inbox/spam_rollup_4859.js"},"minty_module_toolbar_inbox_spam_thread_rollup":{"path":"minty/module/toolbar/inbox/spam-thread_rollup_4859.js"},"minty_module_toolbar_updates":{"path":"minty/module/toolbar/updates_4859.js"}}}};
if(B.Env._loader){B.Env._loader._config({groups:A});}else{B._config({groups:A});}},"1.0.0");

YUI.add("common-net-diag",function(A){A.namespace("common.net");A.common.net.Diag=function(){var U=A.common,V=U.Utils,O=U.net.Status,S={},Y={},K={},Z,B=NeoConfig.chkStaleReq||30000,E,W=V.traceMsg,J=V.rocketstats,N='<span style="font-weight:bold">',T="</span>";function I(){return new Date().getTime();}function G(b){function a(){var d,c;if((d=S[b])&&!d.end){c=I()-d.start;if(c>B){d.stale=true;W(["Session stale : ",b,":",d.key,"stale for",c," ms"].join(" "));P("stalecheck");}}}A.later(B,null,a);}function X(b,a){if(!Y[b]){Y[b]=[];}Y[b].push(a);}function D(){var c,b=arguments[0],e=Y["net:"+b],d="",a="",f,g=[];for(c=1;c<arguments.length;c++){g.push(arguments[c]);}for(c=0;e&&c<e.length;c++){if(f=e[c].apply(null,g)){d+=(f.log&&(f.log+";"))||"";a+=(f.dbgui&&(f.dbgui+";"))||"";}}return{log:d,dbgui:a};}function M(c,h,a){var g=c.id,e=D("start",c,h,a),b=h.method||((h.service||"")+c.request.url.match(/\/[^\/]*\?+/)),d=e.log,f=e.dbgui||"";S[g]={id:g,key:b,desc:[f],start:c.start||I(),args:h&&h.args};P("start");G(g);W(["net [start] id:",g,b,"desc:",f,d].join(" "));}function C(a,g){var c=S[a.id],e=D("complete",a,g),f=e.dbgui,d="",b=e.log||"";if(c){c.end=a.end||I();g.method&&F("net","RespTime_"+g.method,d=(c.end-c.start));f.length&&c.desc.push(f);}P("complete");W(["net [complete] id:",c.id,c.key,"time :",d,b].join(" "));}function H(b,d,a){var c=S[b.id];if(c){c.end=b.end||I();c.aborted=true;c.timedout=a;P("abort");W(["net [aborted] id: "+b.id,"timeout: ",a,c?(c.end-c.start):-1,D("abort",b,d,a).log].join(" "));}}function R(c,b){var a=b.status,h=c.id,f=D("end",c,b),e=S[h],g=f.dbgui,d=f.log;if(e){g.length&&e.desc.push(g);P("done");if(a!=O.abort&&O!=O.xhr){W(["net [done] id:"+h,"total: "+(e.end?e.end-e.start:-1),"msecs http: "+b.status,d].join(" "));}}}function F(){J&&J.stat.apply(J,arguments);}function P(g){if(Z){var k='<span style="color:red">Open sessions : </span>',e=0,l,m,c,d,f,j=[],b=[],a=[],h,n;for(m in S){n=S[m];n.done=n.end||n.abort;if(n.done){b.push(m);}else{a.push(m);}}while(b.length&&((b.length+a.length)>10)){delete S[b[0]];b.shift();}for(m in S){n=S[m];d=(n.stale&&('<span style="color:red">'+(!n.end?"STALE":(n.aborted?(n.timedout?"TIMEDOUT":"ABORTED"):"DONE"))+"</span>"))||(!n.end&&"OPEN");l=["<br/>","[",n.id,"]",'<span style="color:blue">'+n.key+"</span>",d||"",n.desc.join("<br/>"),n.end?["<br/>client :",N,(n.end-n.start),T,"ms"].join(" "):""].join(" ");j.push(l);}j.reverse();Z.setBody(k+a.length+j.join(""));}}function Q(){if(Z){return;}A.use("common-ui-diagpanel",function(){Z=new A.common.ui.DiagPanel({},function(){Z=null;});P("panelopen");});}A.on("net:start",M);A.on("net:complete",C);A.on("net:abort",H);A.on("net:end",R);var L={addLogger:X,showSessions:Q,addStat:F};return L;}();},"1.0.0",{requires:["common-net-session","rocket-stats","common-utils"]});

YUI.add("common-net-session",function(C){C.namespace("common.net");var E=C.Lang,a=C.common.Utils,c=C.common.net,T=c.Status={},G=0,b=C.config.win||window,B=typeof XMLHttpRequest!=="undefined",j=(C.config&&C.config.net)?C.config.net.XMLHttpRequest:window.XMLHttpRequest,V,f="GET",N,L=[],M="net:exc",h="net:start",S="net:complete",g="net:abort",i="net:end",I="net:idle",e=0;function d(k){try{C.fire.apply(C,k);}catch(Y){a.assert(0);C.use("common-utils-error",function(){a.error.report("netsession error",Y,1,1);});}}function O(){return new Date().getTime();}function H(){try{return B?new j:new ActiveXObject("Microsoft.XMLHTTP");}catch(Y){}return;}function Q(Y){if(Y._timeoutid){b.clearTimeout(Y._timeoutid);Y._timeoutid=V;}}function U(Y){try{var k=Y._conn;if(k&&B){k.onreadystatechange=V;}}catch(l){}Y._conn=V;}function K(Y,m,l){var n,k=Y.match(/\?([\w\W])*/);k=k&&k[0]?(k[0].length>1?"&":""):"?";n=X(m,l);return[Y,n.length?k:"",n].join("");}function X(m,n){var s,r,o,q,Y,p,k=[],l=W(m,n);for(s in m){p=l[s];Y=p?encodeURIComponent(s):s;r=m[s];if(E.isArray(r)){for(o=0,q=r.length;o<q;o++){k.push([Y,p?encodeURIComponent(r[o]):r[o]].join("="));}}else{k.push([Y,p?encodeURIComponent(m[s]):m[s]].join("="));}}return k.join("&");}function W(m,l){if(E.isObject(l)){return l;}var k={},Y;if(l!==false){for(Y in m){k[Y]=1;}}return k;}function R(m){if(E.isString(m)){var l=this.responseHeaders,k=m.toLowerCase(),Y;for(Y in l){if(Y.toLowerCase()==k){return l[Y];}}}return V;}function J(u){function o(y,w){var z=w;try{z=l[y];}catch(x){}return z;}var n,v={},p=0,s,Y,l=u._conn,m=l.status==1223,k,r,q;try{n={status:m?204:l.status,statusText:m?"No Content":o("statusText",""),callback:u._callback,request:u.request,responseHeaders:"",allHeadersText:"",getResponseHeader:R,responseText:o("responseText"),responseXML:o("responseXML"),id:u.id};k=l.getAllResponseHeaders();q=k.split("\n");s=q.length;while(s--){r=q[p++];Y=r.indexOf(":");if(Y!=-1){v[r.substring(0,Y)]=r.substring(Y+2);}}n.responseHeaders=v;n.allHeadersText=k;}catch(t){}return n;}function D(r,Y,o){var n,l=r._conn,m,k="unknown",q=o&&(o.name==M)&&o.code,p=-1;try{if(Y){m=Y.timeout?T.timeout:T.abort;k="abort";}else{if(l){p=l.readyState;}if(p<=3){m=q;k="readyState."+p;}else{n=J(r);}}}catch(q){}if(!n){n={status:m||T.xhr,statusText:k,responseText:(o&&o.message)||V,callback:r._callback,request:r.request,getResponseHeader:R,id:r.id};}return n;}function P(Y){a.assert(Y._conn.readyState);if(Y._conn.readyState===4){Q(Y);Y.end=O();d([S,Y,Y._callback]);F(Y);}}function A(k,m,o){function l(){d([i,k,m]);U(k);m=V;e--;if(!e){d([I,1]);}}var Y=k._callback||{},n=o?Y.success:Y.failure;n?n.call(Y.scope,k,m,l):l();}function F(Y,n){var l=0,k,p,m=Y._conn;try{l=(m&&m.status)||0;}catch(o){a.assert(0);}p=!n&&(l>=200&&l<300||l==1223);k=p?J(Y):D(Y,n);A(Y,k,p);}c.Session=function(k,q,Y,n,m,p){var o=this,l;Y=Y?Y.toUpperCase():f;l=Y==f;o.request={url:k,urlparams:(l?n||{}:{}),post:(!l?n:V),mthd:Y,enc:W(n,m),headers:{}};o._callback=q;if(!p&&p!==0){o.id=G;}else{o.id=p;}++G;};var Z=c.Session;Z.formatQueryParams=X;Z.suspendRequests=function(Y){N=Y;};Z.resumeRequests=function(){N=V;while(L.length){L[0].send();L.splice(0,1);}};Z.isIdle=function(){return e==0;};Z.prototype={_callback:{},_conn:V,tries:0,_timeoutid:V,start:0,end:0,addUrlParam:function(Y,m,l){var k=this.request,n=k.urlparams;n[Y]=m;if(l!==false){k.enc[Y]=1;}},send:function(){var m=this,l=m.request,r=m._callback||{},p=l.mthd,Y=l.url,s,q,o,k;if(N){L.push(m);return;}m.abort();try{m.tries++;Y=K(Y,l.urlparams,l.enc);if(!r.cache&&Y.indexOf("&r=")==-1){Y+=((Y.indexOf("?")==-1)?"?":"&")+"r="+(l.rand=(new Date()).getTime());}if(Y.length>=2048){throw {name:M,code:T.maxsize};}m._conn=H();s=m._conn;q=l.post;l.postdata=q=E.isFunction(q)?q():q;s.open(p,Y,true);m.applyHeaders();s.onreadystatechange=function(){if(m._conn){P(m);}};o=r.timeout;if(o){m._timeoutid=b.setTimeout(function(){m.abort(true);},o);}m.end=0;m.start=O();d([h,m,r,Y]);s.send(q||"");if(!e){d([I,0]);}e++;}catch(n){k=D(m,V,n);b.setTimeout(function(){A(m,k);},0);}},setHeader:function(Y,k){this.request.headers[Y]=k;},getHeaders:function(){var Y=[],l,k=this.request.headers;for(l in k){Y.push([l,k[l]].join("="));}return Y.join(";");},applyHeaders:function(){var m,l=this,Y=l._conn,k=l.request.headers;if(Y){a.assert(!a.isEmpty(k));for(m in k){Y.setRequestHeader(m,k[m]);}if(C.config&&C.config.net){Y.setRequestHeader("Cookie",C.config.net.cookie);}}},abort:function(Y){var l,k=this._conn;if(k){l=this;if(k.readyState!==4&&k.readyState!==0){Q(l);U(l);k.abort();d([g,l,l._callback,Y]);F(l,{timeout:Y});}}}};C.mix(T,{timeout:-1,xhr:-2,maxsize:-3,abort:-4});},"1.0.0",{requires:["event-custom","common-utils"]});

YUI.add("common-net-sessionmgr",function(B){var A=B.common.net;A.SessionMgr=function(){var U=A.Session,G=B.Lang,E=B.JSON,S=A.Error,K=NeoConfig.wssid,P,M=[],C="net:success",H="net:failure",Z="net:suspended",D="net:resumed";function R(f,d,b,a,c){var e;if(f){e={code:f,message:d,detail:b,host:c,subcode:a};}return e;}function N(b){var a=b.responseText||"",c;a=a.replace(/<!--?(.*)?-->[\r\n]*$/,"");try{b.body=E.parse(a);}catch(d){c=S.parse;b.fault=R(c,(d.message||"")+" Response parse failed.",{respTxt:a});}}function W(a,b){var c=J.validate[a];if(c){c(b);}else{b.body=b.responseXML||b.responseText;}}function T(d,f){var c,b=0,e,a=f.callback;c=S.getErrType(d,f);if(c){if(c==S.conn){b=2;}e=c==S.abort||c==S.timeout||c==S.login||c.indexOf(S.send)==0;f.fault={code:c};}else{W(a.responseType,f);}if(a.formatter){a.formatter(d,f);}a.retries=e?0:(G.isNumber(a.retries)?a.retries:b);}function Y(d){var c=d.allHeadersText||"",b=d.responseText,a;if(c.indexOf("Content-Type: text/html")>-1||((/^<html/i.test(b)||/^<!doctype html/i.test(b))&&(/<\/html>[\s]*$/i.test(b)||/<\/html>[\s]*[\r\n]*<!--?(.*)?-->[\r\n]*$/i.test(b)))){if(/<\/html>[\s]*$/i.test(b)){a="External";}else{if(/<\/html>[\s]*[\r\n]*<!--?(.*)?-->[\r\n]*$/i.test(b)){a="Internal";}else{a="Unknown";}}return a;}}function L(a){a.fault=R(S.unknown);}function Q(b){function a(){var c=this;c.success=c.failure=F;c.scope=J;}a.prototype=b;a.prototype.constructor=a;return new a();}function O(a){return a.constructor.prototype;}function F(f,i,d){var b=i,m=i.callback,n,j=i.status,g,h,k,a;function c(){if(a=n&&n.failure){a.call(h,b,g,f);}d();X();}try{T(f,b);if(b.fault&&(f.tries<=m.retries)){B.later(500,null,function(){f.send();});return true;}if(j!=200&&!b.fault){L(b);}n=b.callback=O(m);if(n){g=n.args;h=n.scope;}if(!b.fault){B.fire(C,b);k=n&&n.success;if(k){k.call(h,b,g,f);d();X();}}else{if(j==A.Status.abort){c();}else{B.fire(H,f,b);S._handle(f,b,c);}}}catch(l){}}function I(a){M.push(a);}function X(){if(!P&&M.length){var a=M.shift();if(a&&a.send){a.send();}else{X();}}}function V(d,c){var g=c.data||"",a,h={},b,f=null,e;c=c||{};a=c.on||{};g=c.data||"";b=c.method||"GET";h.service=c.service;h.scope=c.context;h.timeout=c.timeout;h.args=c.args;if(a.success){h.success=function(i,j){a.success(0,i,j);};}if(a.failure){h.failure=function(i,j){a.failure(0,i,j);};}h.responseType=c.responseType||"json";h.suppressCodes=c.suppressCodes||["*"];e=(G.isUndefined(c.sync))?true:!c.sync;return J.request(d,g,h,b,f,e);}var J={request:function(a,c,i,h,d,g){var b,e,f;i=i||{};if(!i.args){i.args={};}f=Q(i);if(NeoConfig.disableFullSSL&&NeoConfig.userOptedIntoSSL&&!NeoConfig.isFullSSL&&(a.indexOf("/ws/mail")>-1||a.indexOf("/showMessage")>-1||a.indexOf("/mailsearch/v2/search")>-1)){if(a.indexOf("?")>-1){a+="&ssl=ignore";}else{a+="?ssl=ignore";}}b=new A.Session(a,f,h,c,d);b.setHeader("Content-Type","application/"+(f.responseType||"json"));if(K&&!i.suppressWssid){b.addUrlParam("wssid",K,false);}b.callbackData=i.args;if(g){if(P||M.length){I(b);}else{b.send();}}else{e=b.send;b.send=function(){var j=this;j.send=e;if(P||M.length){I(j);}else{e.apply(j);}};}return b;},requestProxy:V,formatQueryParams:function(b,a){return U.formatQueryParams(b,a);},getWssid:function(){return K;},setWssid:function(c){K=c;for(var b=0,a=M.length;b<a;b++){M[b].addUrlParam("wssid",K,false);}},makeFaultObject:R,validate:{"json":N},isHtml:Y,suspend:function(a){P=a;B.fire(Z,a);},resume:function(){P=0;X();B.fire(D);},queue:I,_qsize:function(){return M.length;},_qclear:function(){M=[];},pingTest:function(){B.common.Utils.rocketstats.stat("net","pingTest");}};return J;}();},"1.0.0",{requires:["event-custom-base","common-net-session","common-net-error-base","rocket-stats","json-parse"]});

YUI.add("common-net-error-base",function(B){B.namespace("common.net");var D=B.common,C=D.net,J=D.Utils,A="HTTPError.",I=C.Error=C.Error||{},G=[502,900,12007,12029,12030,12031,13030,0],E=I.handler=[];function F(K){for(var L=0;L<G.length;L++){if(K==G[L]){return true;}}}function H(L,K){K=K&&K.replace(/<br\/>/g,"\n").replace(/<p\/>/g,"\n");K&&window.alert(K);L&&L();}B.mix(I,{base:A,conn:A+"conn",ydod:A+"999",abort:"abort",timeout:"timeout",unknown:"unknown",login:"login",loginfail:"loginfail",parse:"parse",send:"xhrsend",wssid:"invalidwssid",isHttp:function(K){return/^HTTPError/.test(K);},isConn:function(K){return K=="HTTPError.conn";},isUnexpected:function(K,L){return(!F(K)&&I.isHttp(L)&&(K!=2)&&(K!=999)&&(K!=302));},getErrType:function(M,O){var L=O.status,N=C.Status,K,P;if(L!=200&&L!=500){if(L==N.xhr||L==N.maxsize){K=I.send+"."+O.statusText;}else{if(L==N.abort){K=I.abort;}else{if(L==N.timeout){K=I.timeout;}else{if(M.tries==1){P=(L==0||L==302)&&!D.UserSession.same();}K=P?I.login:(F(L)?I.conn:A+L);O.status=P?401:(L==0?13030:L);}}}}return K;},_fireHandlers:function(){arguments[arguments.length-1]();},_handle:function(){var K=arguments;B.use("common-net-error",function(){I._fireHandlers.apply(I,K);});},onError:function(L,M){var K;J.assert(L);if(M){if((K=B.Array.indexOf(E,L))!=-1){E.splice(K,1);}}else{E.push(L);K=1;}return(K>=0);},show:H,showAlert:H});},"1.0.0",{requires:["common-utils","common-user-session"]});

YUI.add("common-net-error",function(D){var L=3,c=D.common,a=c.UserSession,b=c.net,R=c.Utils,h=b.Session,V=b.SessionMgr,d=b.Status,j=b.Error,T=j.handler,k=R.substitute,I=c.persist.UserData,C=c.ui&&c.ui.DialogHelper,f=document.location.href,Q=k(strings.str_cfg_url_yahoo_relogin,null,null,null,strings),M=R.rocketstats,X,S={},i,N,F=null;function B(l,Y,o,n,m){n=n||{};D.mix(n,{hd:o||k(strings["str_error_title"],null,null,null,strings),bd:(m?Y:'<div class="dlg-error">'+Y+"</div>")});if(Y){R.assert(C);if(C){C.alert(n,{ok:{handler:l}});}else{j.showAlert(l,Y,o,n);}}else{l&&l();}}function G(l,n,Y,o,m){m=m||{};D.mix(m,{hd:o||k(strings["str_error_title"],null,null,null,strings),bd:'<div class="dlg-error">'+Y+"</div>"});if(Y){R.assert(C);if(C){C.confirm(m,{ok:{handler:l},cancel:{handler:n}});}else{j.showAlert(l,Y,o,m);}}else{l&&l();}}function e(n,Y,t){if(F){V.queue(n);return true;}var s,m=n.id,r,l=S[m]||0,q=Y.fault,o=n.status;function u(w){var v=w&&w.callback;if(w.id==m||(v&&!v.suppressWssid)){delete S[m];D.unsubscribe(s);}}try{if(l==0){s=D.on("net:success",u);}S[m]=++l;if(l==L){q.code=j.wssid;q.message=["wssid net :",V.getWssid(),"resp :",t].join(" ");U({msg:strings.str_error_wstoken,stat:"BadWssid"});return;}else{if(l>=L){M.stat("net","Reload_BadWssid_ignore",null,true);return true;}}if(t){r=a.getState();if(!r.newuser){V.setWssid(t);n.addUrlParam("wssid",t,false);n.send();}else{E();}}}catch(p){}return !!t;}function U(n){var m=n||{},Y=m.url||f,l=m.stat;l&&M.stat("net","Reload_"+l,null,true);B(function(){D.later(0,null,function(){if(Y){window.location=Y;}else{window.location.reload();}});},m.msg,0,{hideClose:true});}function Z(m){var Y,l=m.request;if(l.mthd=="GET"){Y=V.request(l.url,V.formatQueryParams(l.urlparams,l.enc),m.callback,"POST",l.enc);Y.send();return true;}return;}function H(m){var Y,n="us",l=m&&['"',strings["str_cfg_url_arc_help"]+"?token=",m,"&.intl=",n,"&property=abuse_ops",'"'].join("");Y=["<p class=userMessage >",strings["str_error_ydod_error"],".<br/>",l?strings["str_error_ydod_token_link"].replace("{linkURL}",l):"","</p>"].join("");B(null,Y,strings["str_error_ydod_title"]);}function E(){U({msg:k(strings.str_error_reload_user_change,{username:I.get("userSendPref.loggedInAlias")},null,null,strings),stat:"UserChange"});}window.reloginCallback=function(){F&&F.destroy();N=F=null;if(a.getState().newuser){D.later(0,null,E);}else{a.update();if(X){U({url:X,stat:"HostCorrection"});}else{V.resume();}}};function J(m,o,Y){if(F){m&&V.queue(m);return true;}function q(){if(N){N.close();}N=window.open(l,"_blank",NeoConfig.loginParams||"height=650,width=850,resizable,scrollbars=yes");}var s=o||{},l=Q+f.replace(/[^\/]+([?#]+|$)/,"relogin?"),r=k(strings.str_error_title,null,null,null,strings),p=s.stat||(m&&m.request.url.replace(/http:\/\/[^\/]*/,"")),n={hd:r,bd:'<div class="dlg-error">'+(s.msg||strings.str_error_relogin)+"</div>",suppressActive:true,maskId:"opaque-overlay",noScroll:true,hideClose:true,disableEsc:true};if(m&&m.id==i){R.assert(0,"cyclic login");if(Y&&Y.fault){Y.fault.code=j.loginfail;}M.stat("net","ReloginCyclic_"+p);R.netError("net:ReloginCyclic_"+[D.JSON.stringify(m.request),Y.responseText,m.id,i].join(" : "));return false;}X=s.url;R.assert(C);M.stat("net","Relogin_"+(p||"unk"));R.netError("net:Relogin"+[D.JSON.stringify(m.request),Y.responseText,m.id,i].join(" : "));if(C){C.alert(n,{ok:{handler:q,stopDestroy:true,text:strings.str_error_signin}},function(t){F=t;V.suspend("relogin");i=(m&&m.id)||-1;m&&V.queue(m);});}return true;}function P(Y,o,n){var l=o.responseHeaders,m=o.responseText||strings["str_error_Connect"];if(Y==302&&l&&l.Location){window.open(l.Location);}else{if(!n){W(Y,o,{message:m});}}}function W(m,p,q){function n(s,u){var t,r={success:function(w){u(w.responseText);},failure:function(){u(R.escapeHtml(s));},suppressCodes:["*"],timeout:10000},v="content="+encodeURIComponent(s)+"&restrictOff=true";t=V.request("/om/yiv/om_yiv.php",v,r,"POST");t.setHeader("Content-length",v.length);t.setHeader("Connection","close");t.send();}function l(u){var r,t=j.isConn(o),v=(q&&q.title&&k(q.title,null,null,null,strings))||k(strings["str_error_"+(t?"UnexpectedTitle":"MailErrorTitle")],p),s=s||strings["str_error_"+(t?"Connect":"MailUnexpectedResponse")];r=[k(s,null,null,null,strings)];u&&r.push("<div>"+u+"</div>");r=r.join("");B(null,r,v,(r.length>1000)&&{modal_classes:"lg",focusedNode:".default"},true);}var Y=q&&q.message,o=p.fault.code;if(j.isUnexpected(m,o)&&V.isHtml(p)){n(p.responseText,l);}else{l();}}function K(l){var Y=l.match(/[\&\?(amp;)>]wssid=([^<\&}\"]+)/i)||l.match(/^wssid=([^<\&}\"]+)/i)||l.match(/<WSSID>([\w\W]+)<\/WSSID>/i);return(Y&&Y[1]);}function O(n,l,m){var Y,o;for(Y=0;l&&Y<l.length;Y++){o=l[Y];if(o=="*"||m(o)){return false;}}for(Y=0;n&&Y<n.length;Y++){o=n[Y];if(o=="*"||m(o)){return true;}}}function g(u,p,n,l,r,s){var v=l.callback||{},Y,x,o,t=l.fault,m=t&&t.code,w=j.isConn(m),q=O(v.suppressCodes,v.exceptCodes,function(y){return p==y;});switch(p){case 402:Y=e(n,l,r);break;case 401:Y=J(n,r,l);s=false;break;case 310:Y=U(r);break;case 999:if(!q){H(r);}break;case d.maxsize:Y=Z(l);break;case d.abort:break;case 302:case 13030:P(p,l,q);break;case d.xhr:x=true;default:if(!q){W(p,l,r);}break;}if(s&&!Y){o=w?"E_HTTPConnect":(x?"E_XHR":"E_HTTP");M.stat("net",o);M.stat("net",[o,(v.service||"service"),(v.method||"method"),p,m].join("_"));}u.done(Y);}function A(p,m,l,o,r,n){var Y=o||l.status,q=r||(Y==402?K(l.responseText):(Y==999?null:l));g(p,Y,m,l,q,n);}j._fireHandlers=function(){var n,Y,m,o=new b.ErrorEvent(arguments,A,j),l=[o];for(n=0,Y=arguments.length-1;n<Y;n++){l.push(arguments[n]);}for(n=0;n<T.length;n++){if(o.isdone()||(m=T[n].apply(this,l))){break;}}if(!(o.isdone()||m===o.asyncval)){o.callDefault(null,null,1);}};D.mix(j,{relogin:J,show:B,showConfirm:G,suppress:O,_handle:function(){j._fireHandlers.apply(j,arguments);},_parseWssid:K},true);},"1.0.0",{requires:["common-net-error-base","common-net-errorevent","common-net-sessionmgr","common-ui-dialog-helper","json-stringify","rocket-stats","common-persist-user-data"]});


YUI.add("common-net-errorevent",function(C){C.namespace("common.net");var B=C.common.net;var A=function(D,F,E){var G=this;G.args=D;G._def=function(H){if(F){F.apply(E,H);}else{G.done();}};};A.prototype={async:function(D){var E=this;if(!E.timer){E.timer=C.later(NeoConfig.timerErrEv||10000,null,function(){if(!E.isdone()){if(D){D();}else{E.callDefault(null,null,1);}}});}return -1;},asyncval:-1,callDefault:function(H,I,G){var F,D,E,J=this;if(!J._h){E=J.args;D=[J];for(F=0;F<E.length-1;F++){D.push(E[F]);}D.push(H);D.push(I);D.push(!!G);J._def(D);}},isdone:function(){return this._h;},done:function(D){var E,F=this;F.timer&&F.timer.cancel();if(!F._h){F._h=true;F.retry=D;if(!D){E=F.args;E[E.length-1]();}}}};B.ErrorEvent=A;},"1.0.0",{requires:[]});

YUI.add("common-persist-neo-data",function(B){var A=B.namespace("common.persist");function C(D){var E={cookieDomain:{writeOnce:true},cookiePath:{writeOnce:true},cookieID:{writeOnce:true},servername:{writeOnce:true},farm:{writeOnce:true},wssid:{writeOnce:true},neoguid:{writeOnce:true},hasAds:{writeOnce:true},om:{writeOnce:true},global_url_base:{writeOnce:true},extraURLArgs:{writeOnce:true},mailnetQueue:{writeOnce:true}};this.addAttrs(E,D);}B.augment(C,B.Attribute);A.NeoData=new C(window.NeoConfig);},"1.0.0",{requires:["attribute"]});

YUI.add("common-persist-cookie-data",function(F){var E=F.namespace("common.persist");var G=E.NeoData;E.Cookies=[];var D="YM.NEO_"+G.get("cookieID");function B(H){H=H||D;if(E.Cookies[H]){return E.Cookies[H];}E.Cookies[H]=new A(H);return E.Cookies[H];}function C(H){H=H||D;F.Cookie.remove(H,{domain:G.get("cookieDomain"),path:G.get("cookiePath")});if(E.Cookies[H]){delete E.Cookies[H];}}function A(H){this.name=H;if(F.Cookie.get(this.name)===null){if(this.name!="T"&&this.name!="Y"){F.Cookie.set(this.name,"",this.getCookieArgs());}}else{var I=G.get("cookiePath");if(I&&I.length>2&&I[I.length-1]=="/"){I=I.slice(0,I.length-1);F.Cookie.remove(H,{domain:G.get("cookieDomain"),path:I});}}}A.prototype.getCookieArgs=function(){return{expires:new Date((new Date()).getTime()+(90*24*60*60*1000)),domain:G.get("cookieDomain"),path:G.get("cookiePath")};};A.prototype.set=function(H,I){return F.Cookie.setSub(this.name,H,I,this.getCookieArgs());};A.prototype.get=function(H){return F.Cookie.getSub(this.name,H,this.getCookieArgs());};A.prototype.remove=function(H){return F.Cookie.removeSub(this.name,H);};F.augment(A,F.Attribute);E.getCookie=B;E.removeCookie=C;if(NeoConfig.intl==="jp"){F.use("common-persist-cookie-data-jp",function(H){E.Cookie=E.CookieJp;E.getCookie=E.getCookieJp;E.removeCookie=E.removeCookieJp;});}},"1.0.0",{requires:["cookie","attribute","common-persist-neo-data"]});

YUI.add("common-persist-user-data",function(A){A.namespace("common.persist");function H(J){this.attributeConfig={userFeaturePref:{},userUIPref:{},userSpamPref:{},userVacationPref:{},userSendPref:{},userPopPref:{},externalAccounts:{},disposableAddresses:{},aliases:{},otherYahooMboxes:{},blockedAddresses:{},switches:{},parentalControls:{},filters:{},loaded:{value:false}};this.addAttrs(this.attributeConfig,J);if(J){this.set("loaded",true);}else{this.load();}}H.prototype.load=function(K){var J,L=this;A.mail.net.Transport.request("GetUserData",{bidiDetection:NeoConfig.bidi},{success:function(M){M=M.body.result.data;for(J in M){L.set(J,M[J]);}L.set("loaded",true);if(K){A.fire("uData:change",M);}},failure:function(){}},true);};H.prototype.update=function(J){if(A.mail.ui.Workspace){A.mail.ui.Workspace.moUpdate(J);}};H.prototype.saveOne=function(N){var J,M,L,K,P={},O=this.get(N);M=N.split(".");L=M.length-1;K=P;for(J=0;J<L;J++){K[M[J]]={};K=K[M[J]];}K[M[J]]=O;this.saveRequest(P);};H.prototype.save=function(){var M={},K,J,L=["userFeaturePref","userUIPref","userSpamPref","userVacationPref","userSendPref","userPopPref","blockedAddresses","switches","aliases"];for(J in L){K=L[J];if(K==="aliases"){M.alias=this.get("aliases.alias");}else{if(K==="userPopPref"){if(this.get(K+".popSetupEligible")){M[K]=this.get(K);}}else{M[K]=this.get(K);}}}this.saveRequest(M);};H.prototype.saveRequest=function(J){A.mail.net.Transport.request("SetUserData",{setdata:J},{success:function(){},failure:function(){}},true);};H.prototype.knownAddresses=null;function I(S){var R={},M=S.get("userSendPref.defaultFromAddress").toLowerCase(),O=S.get("externalAccounts.extAccount")||[],K=S.get("aliases.alias")||[],N=S.get("disposableAddresses").deaName||[],L=function(U){var T=U.address;if(T&&T!==""){R[T.toLowerCase()]=1;}},Q="Change",P="knownAddress|";function J(){S.knownAddresses=null;S.detach(P+"*");}R[M]=1;A.Array.each(O,L);A.Array.each(K,L);A.Array.each(N,L);S.after(P+"userSendPref"+Q,J);S.after(P+"externalAccounts"+Q,J);S.after(P+"aliases"+Q,J);S.after(P+"disposableAddresses"+Q,J);return R;}H.prototype.isUsersEmailAddress=function(J){var K=this;if(!K.knownAddresses){K.knownAddresses=I(K);}return K.knownAddresses[J.toLowerCase()];};A.augment(H,A.Attribute);if(NeoConfig.userDataObj){var F=NeoConfig.userDataObj.userSendPref,G=NeoConfig.userDataObj.externalAccounts,D=A.common.Utils.unescapeHtml;if(F){F.defaultFromName=D(F.defaultFromName);}if(G){var C=G.extAccount;if(C){var E=0,B=C.length;for(;E<B;E++){C[E].fromName=D(C[E].fromName);C[E].username=D(C[E].username);}}}}A.common.persist.UserData=new H(NeoConfig.userDataObj);},"1.0.0",{requires:["attribute","mail-net-transport","json","common-utils"]});

YUI.add("common-ui-tabs-base",function(E){var A=E.Node.one,C=E.Node.create,D=E.Lang;var B=new function(){var H=this,V="div.tabs ul",f="#shellcontent",S="active",M,a,g,L=[],m,Q=E.ui.Templates.minty_module_tabs_tab_removable.base,U=E.common.Utils.substitute,Y=E.common.Utils.unescapeHtml,K=E.common.Utils.removeHtml,G=0,F=E.config.win||window,W=[219,221],l,P=20,T=70,k="hidden",J,n;var X=function(AB){var AL=this,u=E.guid(),AB=AB||{},AE=AB.label||"",y=AB.url||"#",AK=AB.content||"",x=AB.widget,AA=AB.closeCallback,AF=AB.forcePane,AN=AB.yTabEl||C(U(Q,{tab_url:y,tab_id:u,tab_label:AE},null,null,strings)),v=AN.one("a"),AD=AB.yTabContentEl||C('<div style="visibility:hidden;'+(G?"display:none;":"")+'" '+(!G&&E.UA.webkit?'class = "offscreen"':"")+">"+AK+"</div>"),AJ={},AP,AI=E.one('#main[role="tabpanel"]');if(AB.yTabEl){u=AB.yTabEl.one("a").get("id");}if(AD&&AB.inactive){AD.setStyle("visibility","hidden");s(AD,false);AD.removeClass("hidden");}if(x){x.render(AD);}this.cfg=AB;this.elTab=AN;this.invisible=AB.invisible;this.reuse=AB.reuse;this.widget=x;this.elContent=AD;this.noDefault=AB.noDefault?true:false;this.allowFullpage=!AB.forcePane;this.userClose=false;AL.addTabEl();if(!AB.yTabContentEl){g.appendChild(AD);}v.setAttrs({tabIndex:-1,"aria-selected":false});function AG(AS){var AQ=AS.newVal;if(AQ===1){if(!AL.widget&&AB.init){AS.halt(true);D.later(0,AL,function(){AB.init(AL,function(){if(AL.widget){AL.widget.render(AD);AL.set("active",1);}});});return;}if(M){if(!AS.forceActive&&(M!=AL)&&!q(M)){AS.preventDefault();E.fire("tab:askDeactivate",{newtab:AL,oldtab:M,opts:{noScroll:AS.noScroll}});return;}M.set("active",0,{opts:{reactivate:(M==AL)}});}r(AS.noScroll);M=AL;AN.addClass(S);v.setAttrs({"aria-selected":true,tabIndex:0});try{AI.set("aria-labelledby",v.get("id"));}catch(AR){}j(AL);if(E.UA.ie){if(!AP&&AD.getStyle("visibility")=="hidden"){AD.setStyle("visibility","visible");AP=1;}AD.setStyle("display","block");if(!G){t(1);}}else{AD.setStyle("visibility","visible");s(AD,true);}E.fire("tabChange",AL.widget);}else{if(AQ===0){E.fire("tabBlur",{widget:AL.widget});if(E.UA.ie){if(!G){t();}AD.setStyle("display","none");}else{AD.setStyle("visibility","hidden");s(AD,false);}AN.removeClass(S);v.setAttrs({"aria-selected":false,tabIndex:-1});}}}function AC(AQ){AL.userClose=(AQ.newVal===1)&&AQ.noScroll;}function AM(AQ){if(AQ.newVal===1){h(AL);AN.hide();AD.hide();}}function t(AS){var AV,AU,AT,AR=AL.widget?AL.widget.scrolling||[]:[],AQ=AR.length;for(AT=0;AT<AQ;AT++){AV=AR[AT];AU=AD.test(AV)?AD:AD.one(AV);if(AU){AU=E.Node.getDOMNode(AU);if(AS){if(AJ[AV]>0){AU.scrollTop=AJ[AV];}}else{AJ[AV]=AU.scrollTop;}}}}function r(AQ){if(G&&!AQ){E.UA.ie?setTimeout(function(){F.scrollTo(0,0);},0):F.scrollTo(0,0);}}function s(AR,AQ){if(G){AR.setStyle("display",AQ?"block":"none");}else{if(E.UA.webkit){AQ?AR.removeClass("offscreen"):AR.addClass("offscreen");}}}function AO(AQ){var AR=AN.one("a#"+u+" b")||AN.one("a.uc b")||AN.one("a#"+u)||AN.one("a.uc");if(AR&&D.trim(AR.get("text"))!=D.trim(AQ)){AR.setContent(AQ);var AS=AN.one("a#"+u)||AN.one("a.uc");titleUpdate=Y(K(AQ));AS.setAttribute("title",titleUpdate);p(0,100);}AE=AQ;}function i(AR){var AQ=AN.one("a#"+u)||AN.one("a.uc");AQ&&AQ.setAttribute("dir",AR);}function AH(AR){var AQ=AL.userClose;AL.userClose=false;if(AR===1){if(AL.reuse){AL.invisible=true;}else{AL.detachDarla();}AN.one(".close-tab").simulate("click");h(AL,{noScroll:AQ});AN.remove(!AL.reuse);if(!AL.reuse){AD.remove(true);}p(0,1000);}}AN.on("keydown",function(AQ){if(AQ.keyCode=="13"){AL.set("active",1);}});AN.on("keydown",function(AR){if(AR.keyCode=="9"){M=O();}if(M.get("id")===2){var AQ=E.one("#toolbar");AQ.addClass("hidden");}});AN.on("mousedown",function(AQ){if(AL.get("active")!=1){AL.set("active",1,{noScroll:true});}AQ.preventDefault();},AL);AN.on("click",function(AQ){AQ.preventDefault();});var z=AN.one("span");if(z){z.on("mousedown",AA||function(AQ){AL.set("close",1,{noScroll:true});AQ.halt();});}E.augment(AL,E.Attribute);AL.after("closeChange",function(){if(!this.reuse){AL.detachAll();}});AL.before("activeChange",AG);AL.before("closeChange",AC);AL.on("unloadingChange",AM);E.mix(AL,{widget:x});AL.addAttrs({id:{value:u},close:{setter:AH},title:{setter:AO},direction:{setter:i}});};X.prototype.addTabEl=function(){var i=this;if(!i.invisible&&!i.cfg.yTabEl){i.elTab.setStyle("visibility","hidden");a.insert(i.elTab,l);setTimeout(function(){i.elTab.setStyle("visibility","visible");},10);}};X.prototype.attachDarla=function(){var i=this;if(!i.darlaEvent&&i.widget){i.darlaEvent=i.widget.on("darlaEvent",function(r){r.beaconOnly=!i.get("active");E.fire("darlaEvent",r);});}};X.prototype.detachDarla=function(){var i=this;i.darlaEvent&&i.darlaEvent.detach();i.darlaEvent=null;};function o(){a=A(V);g=A(f);a.plug(E.comms.ui.NodeFocusBase,{descendants:"a",keys:{next:"39",previous:"37"}});l=a.one(".tab-overflow");l.once("click",function(i){E.use("common-ui-tabs-overflow");i.preventDefault();});E.on("windowresize",function(){p(1);});E.on("pagemodeChange",function(i){c(i);});E.on("tabview:handleKeyDown",I);E.on("key",I,document,"down:"+W.join("+ctrl,")+"+ctrl",H);E.on("key",I,document,"down:"+W.join("+meta,")+"+meta",H);}function N(r,s){var i;if(r.tab){r.tab.addTabEl();r.tab.set("title",r.label);}s.label=r.label;i=O();s.prevTabId=i?i.get("id"):-1;s.attachDarla();L.push(s);if(!r.yTabEl){p(0,((E.UA.ie==8||E.UA.ie==7)?100:0));}a.fire("refresh");s.fire("tab:add",{cfg:r,tab:s});}function d(i){return new X(i);}function h(u,z){var AA=0,v,y,t=u.get("id"),s,x=u.get("active"),r,AB=u.prevTabId;z=z||{};while(v=L[AA++]){s=v.get("id");if(t===s){H.tabs=L=L.slice(0,AA-1).concat(L.slice(AA));AA--;continue;}if(x&&(s==AB)){r=v;}}if(x){if(!r){y=L.length-1;while(y>0){if(L[y]&&L[y].noDefault){y--;}else{break;}}}if(r||L[y]){(r||L[y]).set("active",1,{noScroll:z.noScroll,forceActive:true});}else{L[0].set("active",1,{noScroll:z.noScroll,forceActive:true});}}a.fire("refresh");}function e(r){var s=L.length;while(s--){w=L[s].widget||{};if(r(w,L[s])){return L[s];}}}function R(x,AA){var z,y=L,s=AA?-1:y.length,u=AA?y.length-1:0,r=AA?-1:1,v=y.length,t;
for(t=u;t!=s;t+=r){if(x(y[t])){break;}}}function q(i){return(!i||!i.widget||!i.widget.get||i.widget.get("canDeactivate"));}function O(){var s,r;for(r=L.length;r--;){s=L[r];if(s&&s.get("active")){return s;}}}function b(){var s,r;for(r=L.length;r--;){s=L[r];if(s&&s.get("active")){return r;}}return -1;}function I(u){var t=u.keyCode,s=u.metaKey,r=u.ctrlKey;function i(x){var v=b();if(v!=-1){v=v+(x?-1:1);if(v<0){v=L.length-1;}else{if(v>=L.length){v=0;}}}else{v=0;}u.halt();if(L[v]){L[v].set("active",1);}}switch(t){case 219:if((s||r)&&!u.shiftKey&&!u.altKey){i(true);}break;case 221:if((s||r)&&!u.shiftKey&&!u.altKey){i(false);}break;}}function Z(){o();}function c(r){var i=O();G=r;if(i){j(i);}}function j(s){var r=E.one("body"),t=G&&s.allowFullpage?"fullpage":"panescroll",i=r.hasClass("panescroll")?"panescroll":r.hasClass("fullpage")?"fullpage":"none";if(t!==i){if(i=="none"){E.one("body").addClass(t);}else{E.one("body").replaceClass(i,t);}}}function p(i,r){r=r||0;if(J){J.cancel();}J=D.later(r,this,function(){J=0;E.use("stylesheet",function(AA){var s=160,u=110;if(!m){var z=AA.one("div.tabs"),t=z.all("li").size()-1,y=AA.one(".nav-bar").get("clientWidth"),v=parseInt(z.getStyle("paddingLeft"))+parseInt(z.getStyle("paddingRight"))+10+P,x=parseInt(Math.min((y-v)/t,160))-1;m={"tabCount":t,"totalPadding":v,"workingWidth":y-v,"width":x};}else{m.tabCount=L.length;if(i){m.workingWidth=AA.one(".nav-bar").get("clientWidth")-m.totalPadding;}m.width=parseInt(Math.min(m.workingWidth/m.tabCount,s))-1;if(m.width<=u){l.removeClass(k);}else{l.addClass(k);}}AA.StyleSheet("TR").set(".nav-bar .tabs li",{maxWidth:m.width+"px"});AA.mail.Tabs.maxTabsReached=(m.width<T||(AA.UA.ie==7&&L.length>14))?1:0;});});}E.augment(H,E.Attribute);E.mix(H,{render:Z,createTab:d,addTab:N,removeTab:h,setPageMode:c,tabs:L,getTab:e,iterateTabs:R,getActiveTab:O,getActiveTabIndex:b,canDeactivateTab:q});}();E.namespace("mail");E.mail.Tabs=B;},"1.0.0",{requires:["minty_module_tabs_tab_removable","comms-ui-nodefocus-base","common-utils"]});

YUI.add("common-ui-toolbar-base",function(G){G.Node.DOM_EVENTS.beforedeactivate=1;var A=strings["str_msg-view_btn_hidepreview"],D=strings["str_msg-view_btn_showpreview"],C;G.augment(E,G.Attribute);function E(J){var Q=this,O=0,S,U,H,T;J=J||{};S=J.root;U=J.template;H=J.menu;Q.root=S;Q.addAttrs({content:{value:S,getter:M},close:{setter:P},active:{}});if(S){K();V();}function V(){S.all(".btn a").each(function(W){W.setAttribute("role","button");});S.all(".menu a").each(function(W){W.setAttribute("aria-haspopup","true");});S.all(".btn a i").each(function(W){W.setAttribute("role","presentation");});}function I(W){var X=S?S.one("#btn-togglepreview a"):0;if(X){X.setContent(W?A:D);}}function M(){if(!S&&U){S=G.Node.create(G.common.Utils.substitute(U,0,0,0,strings));Q.root=S;Q.set("content",S);V();}if(!O){K();}return S||"&nbsp;";}function K(){if(S){G.on("toolbar:ui-automation",N);S.delegate("mousedown",function(X){if(G.UA.ie&&G.UA.ie<=8){document.activeElement&&G.one(document.activeElement).once("beforedeactivate",function(Y){Y.preventDefault();});}else{X.preventDefault();}},".btn a");S.on("click",function(a){a.preventDefault();if(!C){var b=G.common.Utils.getDataAction(a),Y=b.action,X=b.node,Z=a.target;R(Y,X,Z,a);C=setTimeout(function(){C=0;},300);}});Q.on("activeChange",function(X){if(X.newVal){G.fire("toolbar:refresh");}});var W=S?S.one("#btn-togglepreview a"):0;if(W){T=G.on("ws:previewChange",I);}O=1;}}function N(Y,W){var X;if(Q.get("active")&&Y=="menu"){X=S.one("#btn-"+W);if(X){if(!X.menu){R(Y,X);}else{if(X.menu.show&&Q.buttonEnabled({root:S,node:X})){Q.setNodeButtonMenu({node:X});X.menu.show();}}}}}function R(Y,X,Z,W){if(Y){if(Y=="menu"&&H&&Q.buttonEnabled({root:S,node:X})){if(!(X.menu)){G.use("common-ui-menu-helper",function(b){var a=b.common.ui.MenuHelper;a.createLoadingMenu(X);H.template.call(this,X.get("id"),function(){L(X);});});}(X.get("id")=="btn-actions"||X.get("id")=="btn-msg-actions")&&G.fire("darlaEvent",{action:"action_menu"});}else{Q.fire("itemSelected",{dataAction:Y,item:Z,rawEvent:W});}}}function L(W){G.use("common-ui-menu-helper",function(b){var a=W.get("id").replace("btn-","menu-"),Z=b.one("#"+a),X=b.common.ui.MenuHelper;X.create(W,{menu:Z,button_enabled:function(){return Q.buttonEnabled({root:S,node:W});},keys:function(Y){H.keys.call(this,Z,Y);},enterAccel:function(Y){H.enterAccel.call(this,Y);}},function(){var Y;Z.on("menuSelected",function(c){Q.fire("itemSelected",{dataAction:c.dataAction,item:c.item});});Z.on("menu:state",function(c){if(c.state=="show"&&Q.buttonEnabled({root:S,node:W})){Q.setNodeButtonMenu({node:W});W.addClass("pressed");}else{W.removeClass("pressed");}});W.addClass("pressed");Y=Q.on("activeChange",function(c){if(!c.newVal){W.menu&&W.menu.hide();W.unplug(b.Plugin.Menu);Y.detach();}});Q.setNodeButtonMenu({node:W});});});}function P(W){if(W){if(T){T.detach();}Q.detachAll();}}}function B(H){return true;}G.mix(E.prototype,{buttonEnabled:B,setNodeButtonMenu:B});G.namespace("mail.ui").Toolbar=E;var F=function(){var H=G.one("#toolbar");if(H){H.plug(G.comms.ui.NodeFocusBase,{descendants:"span.btn a",keys:{next:"39",previous:"37"}});G.on("toolbar:refresh",function(){H.fire("refresh");});}};G.mail.ui.ToolbarContainer=new F;},"1.0.0",{requires:["attribute","event-custom-base","common-utils","comms-ui-nodefocus-base"]});

YUI.add("common-ui-contentwidget",function(A){var C=0;var B=function(){},E={"input":1,"textarea":1,"select":1};var I=null;var G=function(J){if(J&&J.hasAttribute){try{if(!J.hasAttribute("tabIndex")){J.setAttribute("tabIndex","0");}}catch(K){}}return J;};var F=function(Q,K,P){var R=Q?Q.split(","):[],M=R?R.length:0,J,N={},O,L;for(J=0;J<M;J++){O=R[J].split("+");L=O[1];O=O[0];N[O]=1;if(L){P.push(R[J]);}else{K.push(O);}if(O>=48&&O<=57){K.push(parseInt(O)+48);}}if(N["46"]){K.push("8");}};var D=function(){var J=this;J.accelKeyHandle=[];J.accelLocalKeyHandle=[];A.augment(J,A.Attribute);J.addAttrs({"active":{setter:J._active},"asleep":{setter:J._asleep},"reuse":{},"close":{setter:J._close},"contentToolbar":{setter:J._setContentToolbar},"parentNode":{},"rootNode":{setter:J._setRoot},"focus":{setter:J._setFocus},"dirty":{getter:J._getDirty},"children":{setter:J._setChildren,value:[]},"focusNode":{setter:G},"canClose":{value:1},"canDeactivate":{value:true,getter:J._getCanDeactivate},"title":{},"navToolbar":{},"navKeys":{},"charCodes":{},"localCharCodes":{},"handleKeysLocally":{}},null,true);J._evt={};J.before("closeChange",function(K){if(K.newVal&&!J.get("canClose")){K.halt(true);}if(K.newVal&&J.get("reuse")){K.halt(true);J.set("asleep",1);}if(K.newVal&&J.get("active")&&!J.get("reuse")&&J.get("canClose")){K.halt(true);if(J._evt["deactivateB4Close"]){A.detach(J._evt["deactivateB4Close"]);}J._evt.deactivateB4Close=J.after("activeChange",function(L){J.set("close",1);});J.set("active",0);}});J.on(["closeChange","asleepChange","reuseChange","activeChange"],function(R){var L=R.attrName,K=R.newVal,Q=R.type,O=0,P=J.get("children").length,N,M;N=function(){if(O==P&&J.get(L+"Flag")){if(M){if(J._evtAfterAction){A.detach(J._evtAfterAction);}J._evtAfterAction=J.after(Q,function(){J.set(L+"Flag",0);});J.set(L,K);}else{J.set(L+"Flag",0);}}};J.set(L+"Flag",1);J._iterateChildren(function(S){if(S.get(L)!=K){if(S._myActionEvt){A.detach(S._myActionEvt);}S._myActionEvt=S.after(Q,function(){O++;N();});S.set(L,K);}else{O++;}},J);if(J.get(L+"Flag")&&P&&P!=O){M=1;R.halt(true);return;}});J.after("closeChange",function(){if(!J.isChild){setTimeout(function(){A.bind(J.ondestroy,J);J.detachAll();J.ondestroy();},500);}});J.after("activeChange",function(L){if(L.newVal){var K=J.get("contentToolbar");J.set("contentToolbar",K?K:"");K=J.get("navToolbar");if(K){J.set("navToolbar",K);}J.set("navKeys",J.get("navKeys"));}});};var H=function(O){var K=this.NAME,J=false;C--;if(A.Lang.isString(O)&&O.length>1){K=O;}try{var N=this;for(var L in N){if(N.hasOwnProperty(L)){if(N[L] instanceof A.Node){}N[L]=null;}}L=null;N=null;J=true;}catch(M){}K=null;return J;};A.mix(D.prototype,{keyHandle:null,localKeyHandle:null,accelKeyHandle:null,accelLocalKeyHandle:null,bound:null,ondestroy:function(){H.apply(this,arguments);},_iterateChildren:function(K){var N=this,M=N.get("children"),J=M.length,L;for(L=0;L<J;L++){child=M[L];K.call(N,child,L);}},_active:function(L){var M=this,K=M.get("contentToolbar"),J;if(L){if(!M.isContained){I=M;}if(!M.get("active")){setTimeout(function(){if(M.get("active")){if(window.bktest2){}M._bindToKeys();}},0);}if(!M.isContained){M._focus();}J=M.get("asleep");if(!M.isContained&&(J==1||J==2)){M.set("asleep",0);}}else{if(!M.isContained){I=null;}if(!M.isContained){M._blur();}M._detach();}K&&K.set("active",L);},_setFocus:function(J){var K=this;J?K._focus(J):K._blur(J);},_focus:function(K){var N,M=this,L=M.get("focusNode"),J;if((A.UA.gecko>=2)&&(J=document.activeElement)){J.blur();}if(L){try{N=M.onFocus(L);}catch(K){N=false;}if(!N){try{if(L){L.focus();}}catch(K){}}}},_blur:function(J){var L=this,K=L.get("focusNode");if(K&&K.blur){try{K.blur();}catch(J){}}},_close:function(J){if(J==1){this._detach();}},_asleep:function(J){if(J>=1&&!this.isContained&&this.get("active")!=0){this.set("active",0);}},_handleKeyDown:function(O){var J=false;try{var L=O.keyCode,N=O.target,K=N?N.get("tagName").toLowerCase():"";var M=N.get("type")&&(N.get("type").toLowerCase()==="text"||N.get("type").toLowerCase()==="textarea");if(O.ctrlKey||O.metaKey||O.altKey||!(K in E)||!M){if(A.UA.os=="macintosh"&&L==8){O.charCode=46;O.keyCode=46;}if(L>=96&&L<=105){O.charCode=L-48;O.keyCode=L-48;}J=this.onKeyDown(O);}}catch(O){J=false;}if(J){O.halt();return false;}return J;},_setRoot:function(J){var K=this;if(J){if(!K.get("focusNode")){K.set("focusNode",J);}else{G(J);}if(K.get("active")){K._bindToKeys(J);}}},_bindToKeys:function(L){var M,P,O=this,S=O.get("charCodes"),K=O.get("localCharCodes"),Q=O.get("handleKeysLocally"),L=L||O.get("rootNode");if(O.bound){return;}if(S&&(!Q||L)){var N=[],R=[],J=Q?(L||document):document;F(S,N,R);if(N.length){O.keyHandle=A.on("key",O._handleKeyDown,J,("down:"+N.join(",")),O);O.bound=1;}P=R?R.length:0;for(M=0;M<P;M++){O.accelKeyHandle.push(A.on("key",O._handleKeyDown,J,("down:"+R[M]),O));O.bound=1;}}if(K&&L){var N=[],R=[];F(K,N,R);if(N.length){O.localKeyHandle=A.on("key",O._handleKeyDown,L,("down:"+N.join(",")),O);O.bound=1;}P=R?R.length:0;for(M=0;M<P;M++){O.accelLocalKeyHandle.push(A.on("key",O._handleKeyDown,L,("down:"+R[M]),O));O.bound=1;}}},_nest:function(K){var J=this;K.isContained=1;K.after(["asleepChange","activeChange","closeChange"],function(M){var N=M.attrName,L=M.newVal,O=0,P=J.get("children").length;J._iterateChildren(function(Q){if((K==Q)||Q.get(N)){O++;}if(O==P&&J.get(N+"Flag")!=1){J.set(N,L);}});if(N=="close"){setTimeout(function(){A.bind(K.ondestroy,K);K.detachAll();K.ondestroy();},500);}},J);K.on(["titleChange","focusNodeChange","dirtyChange"],function(L){if(L.oldVal!=L.newVal){J.set(L.attrName,L.newVal);}},J);},_setContentToolbar:function(J){var K=this.get("contentToolbar");if(K!=J){K&&K.set("active",0);J&&J.set("active",1);}return J;},_setChildren:function(L){var K=0,J=L?L.length:0,O,M=[],N=this;for(K;K<J;K++){O=L[K];if(O&&O instanceof D){O.isChild=true;N._nest(O);M.push(O);}}return M;},_detach:function(){var L=this,J=L.accelKeyHandle.length;if(L.keyHandle){L.keyHandle.detach();}if(L.localKeyHandle){L.localKeyHandle.detach();}for(var K=0;
K<J;K++){L.accelKeyHandle[K].detach();}L.accelKeyHandle=[];J=L.accelLocalKeyHandle.length;for(K=0;K<J;K++){L.accelLocalKeyHandle[K].detach();}L.accelLocalKeyHandle=[];L.bound=0;J=null;},_getDirty:function(){var J=this;return J.isDirty&&J.isDirty();},_getCanDeactivate:function(){return true;},render:B,onKeyDown:B,onFocus:B,isDirty:function(){return false;},NAME:"ContentWidget"});A.namespace("common.ui").ContentWidget=D;},"1.0.0",{requires:["event-key"]});

YUI.add("comms-ui-nodefocus-base",function(A){function B(C){B.superclass.constructor.apply(this,arguments);}A.extend(B,A.Plugin.Base,{initializer:function(D){var E=this,F,I,K,H=E.get("host"),C=A.comms.ui,J=C.NodeFocus;if(J){H.plug(J,D);}else{K=[D.keys.next,D.keys.previous];function G(L){F.detach();I.detach();A.use("comms-ui-nodefocus",function(){H.unplug(C.NodeFocusBase);H.plug(C.NodeFocus,D);H.nodeFocus.onKeyDown(L);});}F=A.on("key",G,H,"down:"+K.join(","),E);I=A.on("nodeFocus:load",G,E);}}});B.NAME="NodeFocusBase";B.NS="nodeFocusBase";A.on("keydown",function(C){C.keyCode==9&&A.fire("nodeFocus:load",C);});A.namespace("comms.ui").NodeFocusBase=B;},"1.0.0",{requires:["plugin","node","event-key"]});

YUI.add("minty_module_tabs_tab_removable",function(A){A.namespace("ui.Templates");A.ui.Templates.minty_module_tabs_tab_removable={base:'<li role="presentation" class="removable"><a data-action="navigate" href="{{tab_url}}" role="tab" id="{{tab_id}}" title="{{tab_label}}"><b>{{tab_label}}</b></a><span class="close-tab" data-action="close-tab" title="{{str_tabs_close_attr}}">{{str_tabs_close}}</span></li>'};},"1.0.0");

YUI.add("mail-ui-accounts",function(F){var C=NeoConfig,B=F.common.Utils.substitute,A=F.common.persist.UserData;function D(){var M,L,U,I,K,O,Q,P,T,S=strings.str_cfg_tog_accnt_user_color||NeoConfig.userColorIndicParam,G=C.extAccountColors,R=G.length,N=F.Lang.trim(A.get("userSendPref.defaultFromName"))||A.get("userSendPref.defaultFromAddress"),H=(A.get("externalAccounts")||{}).extAccount,J=H?H.length:0;P={Inbox:{id:"Inbox",color:"ypurple",name:N,pretty_name:N,check_mbox:B(strings.str_nav_left_checkmail_account_attr,{mailbox_pretty_name:N})}};for(M=0,L=0;M<J;++M){U=H[M];T=null;if(S){Q=U.colorIndicator;if(C.colorIndicatorsStr[Q]){T=C.colorIndicatorsStr[Q];}else{Q=U.colorIndicator?U.colorIndicator:"";if(Q>0){T=C.colorIndicators[Q];}}}K=U.server?F.Lang.trim(U.server):null;O=U.username&&K?U.username+"@"+K:null;if(O){I="data-mboxid"+L;N=F.Lang.trim(U.accountName)||U.address;P[I]={id:I,color:T||G[L%R],name:U.address,pretty_name:N,check_mbox:B(strings.str_nav_left_checkmail_account_attr,{mailbox_pretty_name:N}),server_addr:O};if(T){P[I].user_color=T;}++L;}}if(L===0){P=null;}return P;}function E(){var H,N,S,K,O,Q,L,G=C.colorIndicators,R=strings.str_cfg_tog_accnt_user_color||NeoConfig.userColorIndicParam,J={},P=D(),I=(A.get("aliases")||{}).alias||[],M=(A.get("disposableAddresses")||{}).deaName||[];if(strings.str_cfg_tog_msgListColorIndic||C.showExtAccountsParam>1){if(P){for(H in P){S=P[H];O=S.server_addr;L=R?S.user_color:S.color;if(O&&L){J[O]=S.color;}}}if(R){I=I.concat(M);N=I.length;for(H=0;H<N;++H){S=I[H];Q=S.colorIndicator?S.colorIndicator-0:0;if(Q>0){J[S.address]=C.colorIndicators[Q];}}}}return J;}F.namespace("mail.ui");F.mail.ui.Accounts={buildExtAccountList:D,buildAccountList:E};},"1.0.0",{requires:["common-utils","common-persist-user-data"]});

YUI.add("mail-ui-foldersview-base",function(B){var L=B.Node.one,D=B.Node.all,C=NeoConfig,I=C.folderListTmpl,Q=B.common.Utils,P=Q.rocketstats.stat,A=B.mail.common,M=Q.substitute,G=strings.str_nav_left_checking_mail,O=strings.str_nav_inbox,R=strings.str_tabs_inbox,E=C.mailboxes,F=!(C.pfm&&C.pfm.count),H="knownAddress|externalAccountsChange",J=B.common.persist.UserData,K="mail-ui-foldersview-bind";B.Node.DOM_EVENTS.beforedeactivate=1;var N=new function(){var AE="#system-folders",Z="#custom-folders",t="#smart-folders",g="#nav-smart-folders",z="a[role=option]",d=AE+" "+z+", "+Z+" "+z,l='a[tabindex="0"]',V=this,o="selected",W="has-unread",f="hasnomsg",T="hasmultimsg",p={"in":"Inbox",chats:"%40C%40Chats",drafts:"Draft",sent:"Sent",folder:"%40B%40Bulk",spam:"%40B%40Bulk",trash:"Trash"},Y={Inbox:"str_tabs_inbox",Draft:"str_tabs_drafts",Sent:"str_tabs_sent","%40B%40Bulk":"str_tabs_spam","%40C%40Chats":"str_tabs_conversations",Trash:"str_tabs_trash"},AB=(Neo&&Neo.fid)||"",AA,u=false,y=B.mail.Controller.Folders,S=B.Lang,v=null,X,AD=null;function a(AG){if(u){return L('li[data-vfid="'+AG+'"]');}return L("li[data-fid='"+AG+"']");}function j(){var AG={fid:{value:{fid:"",name:"",checkMail:false,mailboxId:"",extraParams:null,smartFolder:false,forceRefresh:false},setter:function(AI){var AL,AH,AJ=AI.fid,AR=AI.checkMail,AM=AI.mailboxId,AP=AI.extraParams,AT=AI.forceRefresh,AN,AK,AO=false,AQ,AS=false;u=AI.smartFolder;if((AJ===AB&&AJ===p["in"]&&!u)||AR){if(AD===null){U(AM);AN=AM;if(AM&&AM!==""&&AM!=="Inbox"){AN=E&&E[AM]?E[AM].name:"";}if(((AQ=B.common.persist.UserData.get("externalAccounts"))||{}).extAccount&&AN===""){AD=y.refresh({},{success:function(){q();B.later(0,null,function(){y.refresh({accountId:AN},{},"checkmail");});},failure:q,timeout:30000},"checkmail");}else{AD=y.refresh({accountId:AN},{success:q,failure:q,timeout:30000},"checkmail");}P("folders","checkmailmanual_"+(AQ?"ext":"noext"));}}if(AJ!==AB||u||AT){AO=u&&!AT;if(AO){u=false;}AL=a(AB);if(AO){u=true;}AS=u&&AT;if(AS){u=false;}AH=a(AJ);if(AL){AL.removeClass(o);AL.one("a").setAttrs({tabIndex:-1,"aria-selected":false});}if(AH){if((AK=AH.ancestor("ul").one(l))){AK&&AK.set("tabIndex",-1);}AH.addClass(o);AH.one("a").setAttrs({tabIndex:0,"aria-selected":true});}b();AB=AJ;return AI;}},lazyAdd:true},isCheckingMail:{value:false},active:{value:false}};V.addAttrs(AG);}function w(AH,AG){return function(AI){if(!AG){AI.preventDefault();}B.use(K,function(AJ){AJ.mail.FoldersView[AH](AI);});};}function AC(){var AM=L("#shellnavigation"),AL,AI,AK=B.mail.persist.MetaData,AG=L(AE),AJ=L(Z),AN=L(t),AH=L(g);AM.delegate("keydown",w("upDownNavigation",true),d);L("#btn-newfolder").on("click",w("newFolderClick"));AM.delegate("mousedown",function(AO){if(!this.hasClass("selected")&&AO.button===1&&!AO.ctrlKey){if(B.UA.ie&&B.UA.ie<=8){document.activeElement&&L(document.activeElement).once("beforedeactivate",function(AP){AP.preventDefault();});}else{AO.preventDefault();}}},"li, h2 span[role=button], h2 .btn input");AG.on("contextmenu",w("contextClick"),V);AG.delegate("click",w("checkMailClick"),"input.check-mail");AG.delegate("keydown",w("sysFoldersKeyDown",true),"li");AJ.delegate("keydown",w("usrFoldersKeyDown",true),"li");AG.delegate("click",w("emptyFolderOnClick"),"li a span.btn");AG.delegate("click",function(AO){AO.smartFolder=u;w("sysFoldersClick")(AO);},"li");if(AJ){AI=AK.after("neoChanged",function(){var AO=true,AP=L(Z+"-nav");if(AK.get("neo.pref.folderState")){AP.replaceClass("collapsed","expanded");}else{AP.replaceClass("expanded","collapsed");AO=false;}AP.one(".label").set("aria-expanded",AO);AK.detach(AI);});AJ.delegate("click",function(AO){AO.fid=AB;AO.smartFolder=u;w("usrFoldersClick")(AO);},"li");AJ.on("contextmenu",w("usrFoldersContextClick"));AL=L(Z+"-btn");AL.on("click",w("onLabelClick",true));AL.on("keydown",function(AO){if(AO.keyCode===13){w("onLabelClick")(AO);}});}if(AN){AN.all("a").each(function(AO){AO.set("href","#");});AN.delegate("click",function(AP){AP.preventDefault();var AO=AP.currentTarget;if(AO.hasClass("emails-contacts")){B.fire("openRUEFCInbox");}else{if(AO.hasClass("btn-apps")){B.fire("om:appclick",AP);}}u=true;},"li");AN.on("contextmenu",function(AO){});}AH&&AH.on("click",function(AQ){var AP=AQ.currentTarget,AO=AP.get("parentNode");if(AO.hasClass("expanded")){AO.removeClass("expanded");AO.addClass("collapsed");}else{if(AO.hasClass("collapsed")){AO.removeClass("collapsed");AO.addClass("expanded");}}});B.common.persist.UserData.after(H,function(AO){if(strings.str_cfg_tog_renderExternalAccounts||C.showExtAccountsParam){B.mail.FoldersView.renderMailboxes();}});AG.all("a").each(function(AO){AO.set("href","#");});B.on("key",function(AO){D("input.check-mail").each(function(){if(this.contains(AO.currentTarget)||this.compareTo(AO.currentTarget)){AO.stopPropagation();}});},AM,"",V);B.on("foldersview:resetFocus",function(AP){var AO=a(AP);AO=AO&&AO.one("a");AO&&AO.focus();});}function c(){var AG=D("li.inbox-sub");if(AG){AG.remove();}E=B.mail.ui.Accounts.buildExtAccountList();if(E){Neo.drawMailboxes(E);}}function i(AJ,AI){var AG=C.grayoutEnabled&&B.mail.ui.ContextButton,AH;if(AG&&AI){AH=a(AI);if(!AG.folderActionEnabled(AJ.dataAction,AH)){return;}}B.use("mail-ui-folderevents",function(AK){AK.mail.ui.FolderEvents.handle(AJ,(AI||AB));});}function b(){var AH=L(AE),AI=L(Z),AG;if(!AH.one(l)&&(AG=AH.one(z))){AG.set("tabIndex",0);}if(!AI.one(l)&&(AG=AI.one(z))){AG.set("tabIndex",0);}}function x(){var AH=L(AE),AI=L(Z),AJ=L("doc").get("activeElement"),AG=-1;if(AH.contains(AJ)||AI.contains(AJ)){AG=B.all(d).indexOf(AJ);}return AG;}function k(AJ){var AI=B.all(d),AH=AI.item(AJ),AG;if(!AH){AG=AJ+1;if(AG>AI.size()){AG=AJ-1;}AH=AI.item(AG);}if(AH){AH.set("tabIndex",0);AH.focus();}}function r(){var AG=L(Z+"-btn");AC();b();if(AG){AG.set("aria-expanded",L(Z+"-nav").hasClass("expanded"));}}function h(AI){var AH="Inbox",AG=strings[Y[AH]];B.fire("checkmail:before");V.set("isCheckingMail",true);if(u){V.set("fid",{fid:AH,name:strings[Y[AH]],checkMail:true,mailboxId:AI,smartFolder:u,forceRefresh:true});
}else{V.set("fid",{fid:AH,name:strings[Y[AH]],checkMail:true,mailboxId:AI});}}function U(AI){var AH,AG=L(AE);if(!AI||AI===""||!E){AG.all("#Inbox i, li.inbox-sub i").setContent(strings.str_nav_left_checking_mail);AG.all("li input.check-mail").addClass("loading");}else{if(E){AH=AG.one('li.inbox-sub i[data-mboxid="'+AI+'"]');if(AH){AH.setContent(strings.str_nav_left_checking_mail);}AH=AG.one('li.inbox-sub input[data-mboxid="'+AI+'"]');if(AH){AH.addClass("loading");}}}B.fire("checkmail:clicked");}function q(){var AJ,AI,AH,AG=L(AE);AG.one("#Inbox i").setContent(O);AG.all("li input.check-mail").removeClass("loading");if(E){for(AJ in E){AI=E[AJ];AH=AG.one('li.inbox-sub i[data-mboxid="'+AJ+'"]');if(AH){AH.setContent(AI.pretty_name||AI.server_addr);}}}B.fire("checkmail:succeeded");V.set("isCheckingMail",false);AD=null;}function m(AM){var AI=AM.folderInfo.fid,AJ=AI==="Draft",AH=AI==="%40C%40Chats",AL=(AJ||AH)?AM.total:AM.unread,AG="{{str_nav_inbox_unread_attr}}",AN={},AK;if(AJ){AG=(AL==1)?"{{str_nav_draft_attr}}":"{{str_nav_drafts_attr}}";}else{if(AH){AG=(AL==1)?"{{str_nav_conv_attr}}":"{{str_nav_convs_attr}}";}}AK=a(AI);if(AK){if(AM.isSystem===false||(!AJ&&AI!=="Sent")){if(AM.unread>0){AK.addClass(W);}else{AK.removeClass(W);}}}AK=AK&&AK.one(".unread-count");if(AK&&S.isNumber(AL)){if(AL<0){AL=0;}AK.set("innerHTML",AL||"");AN.inbox_unread_cnt=AL;if(AH){AN.conv_cnt=AL;}AK.set("title",M(AG,AN,null,null,C.strings));}}function n(AL){var AH=AL.folderInfo.fid,AK=a(AH);AK=AK&&AK.one("a");if(AK){var AG=AK.get("title"),AJ=AL.total,AI=AJ==1?"str_email_cnt_one":"str_email_cnt_multi",AM="{{str_nav_folder_email_cnt}}",AN={total_cnt:AJ,email_str:strings[AI]};switch(AH){case"Draft":AM=(AJ==1)?"{{str_nav_draft_attr}}":"{{str_nav_drafts_attr}}";AN.inbox_unread_cnt=AJ;break;case"%40C%40Chats":AM=(AJ==1)?"{{str_nav_conv_attr}}":"{{str_nav_convs_attr}}";AN.conv_cnt=AJ;break;}if(u){AM="{{str_nav_email_from_ctcts_attr}}";AN.email_ctcts_cnt=AJ;}AK.set("title",M(AM,AN,null,null,strings));}}function AF(AJ){var AM="",AN,AH,AK,AI,AO=L(Z),AP=x(),AL=AJ.length;Neo&&Neo.sortFolders(AJ);for(AK=0;AK<AL;AK++){AH=AJ[AK];AI=AH.folderInfo.fid;if(AA===AI){AN=AH.folderInfo.name;}if(!AH.isSystem){var AG={name:AH.folderInfo.name,fid:AI,unread_cnt:AH.unread||"",total_cnt:AH.total,inbox_unread_cnt:AH.unread||"",isSelected:(AB==AI)?o:"",email_str:(AH.total==1?C.strings.str_email_cnt_one:C.strings.str_email_cnt_multi)};if(NeoConfig.bidi&&AH.folderInfo.dir){AG.name=(AH.folderInfo.dir=="rtl"?"\u202B":"\u202A")+AG.name+"\u202C";}if(!AH.unread){AG.has_unread="";}AM+=M(I.folders,AG,null,null,C.strings,I);}else{if(AI==="Inbox"){X=AH.unread;}n(AH);m(AH);}}s();AO.setContent(AM?AM:"");if(AP>=0){k(AP);}else{b();}AA&&V.set("fid",{fid:AA,name:AN});AA=null;}function e(AG,AH){if(AG){if("show"==AH&&!AG.hasClass("selected")){AG.addClass("cntxtmenu");}else{if("hide"==AH){AG.removeClass("cntxtmenu");}}}}function s(){var AH=(C.userDataObj&&C.userDataObj.otherYahooMboxes&&C.userDataObj.otherYahooMboxes.otherYahooMboxesTotal)?"userSendPref.defaultID":"userSendPref.loggedInAlias";var AG=J.get(AH);B.config.doc.title=(X>0)?M("{{str_page_title_unread}}",{unread_cnt:X,title:AG},null,null,strings):M("{{str_page_title}}",{title:AG},null,null,strings);v=null;}B.on("ds:folder:change",function(AO,AL,AP,AM){var AG,AK,AI,AJ,AH,AN;if(AM==="launch"){for(AK in AL){AG=AL[AK];AI=AG.folderInfo.fid;if(AI==="Inbox"){X=AG.unread;}if(C.grayoutEnabled&&!AG.total){AJ=a(AI);AJ.replaceClass(T,f);}}s();return;}if(!AO){AF(AL,AM=="ruefc");}else{for(AK in AP){AG=AL[AK];AI=AG.folderInfo.fid;if(AM=="ruefc"){AG.folderInfo.name=strings.str_nav_email_from_ctcts;AH=B.mail.ui.common.StringUtils.getSystemFolderName(AI,AG.folderInfo.name,true,true);AN=B.mail.ui.Workspace.getFolderContent();if(NeoConfig.bidi){AH=AN.widget.msgList.getFolderNameBidi(AH,AG.folderInfo.dir,AG.total);}else{AH+="  <i>("+AG.total+")</i>";}AN.set("title",AH);}if(S.isNumber(AP[AK].unread)||AI==="Draft"){m(AG,AM=="ruefc");if(AI==="Inbox"){X+=AG.unread-AO[AK].unread;s();}}if(AG.total!=AO[AK].total){n(AG,AM=="ruefc");}if(C.grayoutEnabled){AJ=a(AI,AM=="ruefc");if(AG.total>0){AJ.replaceClass(f,T);}else{AJ.replaceClass(T,f);}}}}});B.on("ds:folder:add",function(AG,AH){if(AH!="move"&&AH!="qf_folder"){AA=AG.folderInfo.fid;}});B.on("ds:folder:remove",function(AG){if(AG.folderInfo.fid===V.get("fid").fid){AA="Inbox";}});B.on("ds:folder:rename",function(AH,AG){if(AH.folderInfo.fid===V.get("fid").fid){AA=AG.folderInfo.fid;}});B.on("checkmail:pressed",function(AG){var AH=AG?"":"Inbox";h(AH);});B.on("newfolder:pressed",function(){i({dataAction:"folder-new"},null);});B.on("#custom-folders.li:keydown",function(AK){var AJ=AK.currentTarget.getAttribute("data-fid"),AI=AK.keyCode===69&&AJ&&C.emptyFolders?"folder-empty":"folder-rename",AH=B.UA.os,AG=(AH=="windows"||AH=="win");if((AG&&AK.shiftKey&&AK.keyCode==121)||(!AG&&AK.ctrlKey&&AK.shiftKey&&AK.altKey&&AK.keyCode==77)){AK.preventDefault();Q.simulateContextMenu(AK.target);}else{i({dataAction:AI,target:AK.currentTarget},AJ);}});B.on("#system-folders.li:keydown",function(AK){var AL={"%40B%40Bulk":"folder-empty-spam",Trash:"folder-empty-trash"},AJ=AK.currentTarget.getAttribute("data-fid"),AI,AH=B.UA.os,AG=(AH=="windows"||AH=="win");if(AK.keyCode===69&&AJ){AI=AL[AJ]||(C.emptyFolders&&"folder-empty");if(AI){i({dataAction:AI,restoreFocus:1,target:AK.currentTarget},AJ);}}else{if((AG&&AK.shiftKey&&AK.keyCode==121)||(!AG&&AK.ctrlKey&&AK.shiftKey&&AK.altKey&&AK.keyCode==77)){AK.preventDefault();Q.simulateContextMenu(AK.target);}}});B.after("tabChange",function(){if(null===v){v=B.later(1000,null,s,null,false);}});B.augment(V,B.Attribute);j();B.mix(V,{render:r,renderMailboxes:c,checkMail:h,handleFolderActions:i,updateTitle:s});};B.namespace("mail");B.mail.FoldersView=N;},"1.0.0",{requires:["common-utils","rocket-stats","mail-controller-folders","attribute","node","mail-persist-meta-data","common-persist-user-data","mail-ui-accounts"]});

YUI.add("mail-persist-user-preferences",function(D){D.namespace("mail.persist");var B,C=["userFeaturePrefs","userUIPrefs","userSpamPrefs","userSendPrefs","switches","livewordsPrefs","popForwardPrefs"];function A(E){this.attributeConfig={userFeaturePrefs:{},userUIPrefs:{value:{displayPersonalFolders:NeoConfig.expandPF,expandExtAccounts:NeoConfig.expandEA}},userSpamPrefs:{},userSendPrefs:{},switches:{},livewordsPrefs:{},popForwardPrefs:{},loaded:{value:false}};this.addAttrs(this.attributeConfig,E);if(E){this.set("loaded",true);}else{this.load();}}A.prototype.load=function(){var E=this;D.mail.net.Transport.request("GetUserPreferences",{},{success:function(F){var H=F.body.result["userPrefs"];for(var G in H){E.set(G,H[G]);}E.set("loaded",true);},failure:function(){}},true);};A.prototype.save=function(){var G={},F,E;for(E=0;E<C.length;E++){F=C[E];G[F]=this.get(F);}this.saveRequest(G);};A.prototype.saveRequest=function(E){D.mail.net.Transport.request("SetUserPreferences",{setprefs:E},{success:function(){},failure:function(){}},true);};A.prototype.afterSettingsChange=function(){if(this.get("loaded")){this.save();}};D.augment(A,D.Attribute);D.mail.persist.UserPreferences=new A();if(NeoConfig.intl!=="jp"){for(B=0;B<C.length;B++){D.mail.persist.UserPreferences.after(C[B]+"Change",D.mail.persist.UserPreferences.afterSettingsChange);}}},"1.0.0",{requires:["attribute","mail-net-transport","json"]});

YUI.add("mail-persist-meta-data",function(H){var F,G,C,A;H.namespace("mail.persist");function B(){this.addAttr("_save",{value:true});this.addAttr("_timer",{});}B.prototype.wait=function(){this.set("_save",false);};B.prototype.resume=function(){this.set("_save",true);};B.prototype.parse=function(K,J){var I;J+=K.name;if(K.meta&&K.meta.length>0){this._set(J,{});J+=".";for(I=0;I<K.meta.length;I++){if(K.meta[I].meta){this.parse(K.meta[I].meta,J);}this.parse(K.meta[I],J);}}else{if(K.value){this._set(J,K.value);}}};B.prototype.make_cascade=function(K,I){var J;for(J in K){if(typeof K[J]==="object"){I.push({name:J,meta:[]});this.make_cascade(K[J],I[I.length-1].meta);}else{I.push({name:J,value:K[J]});}}};B.prototype.cascade_dump=function(){var M=[],I,K,L,J=this.getAttrs();for(I in J){if(I.match(/^_/)){continue;}K=J[I];L={name:I};if(typeof K==="object"){L.meta=[];this.make_cascade(K,L.meta);}else{L.value=K;}M.push(L);}return{meta:M};};B.prototype.load=function(){var I=this;H.mail.net.Transport.request("GetMetaData",{},{success:function(K){var J=K.body.result.meta,L,M;for(L=0;L<J.length;L++){M=J[L];if(!I.attrAdded(M.name)){I.addAttr(M.name);}I.wait();I.parse(M,"");I.resume();}H.fire("metaDataLoadComplete");},failure:function(){}},true);};B.prototype.update=function(){};B.prototype.save=function(){this.set("_save",true);H.mail.net.Transport.request("SetMetaData",this.cascade_dump(),{success:function(){},failure:function(){}},true);};B.prototype.set=function(K,N){var M,L,J,I=H.Attribute.prototype.set;if(K.indexOf(".")>0){M=K.split(".");for(J=0;J<M.length;J++){if(L){L+="."+M[J];}else{L=M[J];}if(!this.get(L)){if(L===K){I.apply(this,[K,N]);}else{I.apply(this,[L,{}]);}}else{if(L===K){I.apply(this,[K,N]);}}}}else{I.apply(this,[K,N]);}};H.augment(B,H.Attribute);F=new B();if(typeof NeoConfig.metaDataObj!=="undefined"&&NeoConfig.metaDataObj){A=NeoConfig.metaDataObj;for(C=0;C<A.length;C++){G=A[C];F.addAttr(G.name,{});F.parse(G,"");}}else{F.load();}if(!F.attrAdded("neo")){F.addAttr("neo",{pref:{}});}if(!F.get("neo.pref")){F.set("neo",{pref:{}});}function E(){if(this.get("_save")){if(this.get("_timer")){this.get("_timer").cancel();}this.set("_timer",H.later(5000,this,"save"));}}function D(){if(this.get("_save")){this.save();}}F.after("neoChange",E,F);F.after("cgChange",D,F);H.mail.persist.MetaData=F;},"1.0.0",{requires:["attribute","mail-net-transport"]});

YUI.add("mail-ui-workspace-base",function(A){var U=A.Node,K=U.create,B=A.common.Utils,P=B.substitute,N=B.escapeHtml,Q=B.unescapeHtml,J=B.loadDarlaAndExecute,R=A.config.win||window,C=R.Neo||0,T,G=NeoConfig,H=!(G.pfm&&G.pfm.count),E=0,W=false,S=["_shared_module_compose","_shared_module_toolbar_compose","_shared_module_compose_message_header","_shared_module_offscreen_bin_compose","_shared_module_offscreen_bin_compose_menu_color_picker","_shared_module_offscreen_bin_compose_menu_spellcheck","_shared_module_offscreen_bin_compose_modal_cancel_compose","_shared_module_offscreen_bin_compose_menu_spell_langs","_shared_module_compose_reply","mail-ui-authorview-base"],F="%40B%40Bulk",O,D,M=false;if(NeoConfig.bidi){S.push("comms-intl-bidihighlight");}if(NeoConfig.om){S.push("om-controller-compose");}A.Node.prototype.focus=function(){try{this._node.focus();}catch(X){}};function I(){var X=arguments;A.use("rocket-stats",function(){B.rocketstats.stat.apply(0,X);});}function V(Y){var X=Y||function(){};if(!G.hydra&&NeoConfig.intl!=="jp"){A.use("gx_bootstrap",X);}}A.namespace("mail.ui");A.mail.ui.Workspace=new function(){var j=this,AB=A.mail,l=AB.FoldersView,Al=AB.ui.Toolbar,Aw=AB.Controller,f=Aw.Folders,AI=AB.Tabs,Ay,AN,Aq,AX="#toolbar",AP=".switcher",b=".commontasks",AJ,Ar,A1,w,g,Ah,x,An,AZ,AV;A.once("ds:msg:change",function(){AZ=1;});function Ab(){if(M){J(function(A8){A8.fire("renderPrefetchedAd",{action:((M.isFolderEmpty&&M.goTo==1)?D+"_empty":D)});},false);M=false;}}function Ai(BD){var A9=[(NeoConfig.hasConv||NeoConfig.hasConvRelease)?"minty_module_toolbar_inbox_message_thread":"minty_module_toolbar_inbox_message","common-ui-menu-helper"],BC=(E==1),BB=G.hasGalaxy&&!BC,A8,BA;G.hasConv?A9.push("mail-ui-convpane-read"):A9.push("mail-ui-messagepane-read");if(NeoConfig.notification){A9.push("common-ui-notification");}BD.once("securecascade:ready",function(){if(G.secure_cascade=="1"&&G.secure_cascade_flash!=1){j.set("cascadeReady",true);I("launch","secureCascadeLoad");}if(!BD.Lang.isUndefined(G.om)){A9.push("om-controller-views","_shared_module_open_mail_application_messagepane","om-ui-views-simple","om-ui-views-hidden","om-controller-internalapi");if(NeoConfig.hasIM){A9.push("om-ui-views-folderpane");}}if(G.cw){A9.push("mail-common-cachewarmer");}BA=(Math.random()<G.preCacheChampThreshold)?"mail-common-precache-ranking":"mail-common-precache-unread";if(G.fullPage){A9.push("common-ui-listview-ext");}if(NeoConfig.bidi){A9.push("comms-intl-bidi");}if(BB&&!G.hydra){BD.galaxy&&BD.galaxy.isRushMore&&A9.push("gx_profiledata");A9.push("gx_messages");}if(G.themeJSModule!=="false"){A9.push(G.themeJSModule);}A9.push(BA,"mail-ui-workspace-horizontal-slider","contacts-api-config","contacts-ui-contactseventstranslator","mail-error",function(BJ){if(G.prefetchAd&&(G.prefetchAdType==2)){Ab();}if(G.themeJSModule!=="false"){BJ.mail.ui.themes[G.themeJSModule].init();}var BI,BH=BJ.one("#rail-resize-hori");if(BH){BI=new BJ.mail.ui.WorkspaceHSlider();}var BG=BJ.mail.common,BE=BG&&BG.cachewarmer,BF;if(BE){BE.setupLaunch(BC);BC&&!H++&&(BF=2000)&&BE.addInboxPreFetching();BE.addCompose(BF,!BF);if(!BF){BE.addDelay(5000);BE.addInboxPreFetching();BE.add(function(){H=1;});}BE.warmUp("pixiedust",["mail-common-pixiedust"]);BE.run();}if(G.uh2Enabled){YUI().use("uh2-base","substitute","node-focusmanager","querystring-stringify",function(){G.setFinished&&G.setFinished("uh2");if(NeoConfig.isBizmail){BJ.fire("change:username");}});if(G.hasUh2Notification){BJ.Lang.later(9000,null,function(){BJ.use("uh2-notification-base",function(){var BK=NeoConfig.isInternalIP&&window.location.href.match(/&rtb_extra=1/)||window.location.href.match(/\?rtb_extra=1/);BK&&((new Image()).src="/neo/rtbeacon.gif?uh2_done=1");});});}}if(window.location.search.indexOf("qa=1")>0){I("launch","flushStat",null,true);}});BD.Lang.later(0,null,function(){BD.use.apply(BD,A9);});j.presetMsgs();j.set("postLoadFired",1);BD.fire("ws:postLoad");});if(G.secure_cascade=="1"&&G.secure_cascade_flash!=1){A8=document.getElementById("secureCascade");A8.src=G.secure_cascade_source;I("launch","secureCascade");}else{BD.fire("securecascade:ready");}if(G.secure_cascade_flash==1){I("launch","secureCascadeFlash");}}function c(){var A8,A9=NeoGV.statQueue;for(A8=0;A8<A9.length;A8++){I(A9[A8].name,A9[A8].well);}NeoGV.statQueue=[];}function Aa(BC,BB){var BD,A8=B.parseQueryString(),A9;c();D="launch_welcome"+(G.hydra?"_hydra":"")+((NeoConfig.low_bandwidth)?"_low":((NeoConfig.ssl_launch||NeoConfig.isFullSSL)?"_ssl":""));L();A.namespace("contacts");A.contacts.clientConfig={requestFn:A.common.net.SessionMgr.requestProxy,guid:G.neoguid,wspath:G.socdirProxyPath,view:["compact"],out:strings.str_cfg_tog_contact_field,sort:"asc",sortfields:strings.str_cfg_tog_contact_sortfields,fieldsToProcess:["name","nickname","email"]};if(G.strings){strings.str_ctrl=G.strings.str_ctrl;strings.str_enter=G.strings.str_enter;strings.str_ctrl_shift=G.strings.str_ctrl_shift;strings.str_ctrl_alt=G.strings.str_ctrl_alt;strings.str_right_click=G.strings.str_right_click;}if(C.ff3dot5&&G.fullPage){A.one("#main").setStyle("position","relative");}function BA(){var BF=false,BN=false,BE;if(!A1){AL();}A.mail.Tabs.setPageMode(G.fullPage);var BJ=A.one(AX),BQ,BI,BL,BM,BO;if(!AJ&&BJ){AJ=new Al({root:BJ.one(AP),menu:{template:function(BS,BR){A.use("mail-ui-inboxmenu-base",function(BT){BT.mail.ui.InboxMenu.insert(BS,BR);});},keys:function(BS,BR){A.use("mail-ui-inboxmenu-base",function(BT){BR(BT.mail.ui.InboxMenu.getValidKeys(BS));});},enterAccel:function(BR){A.use("mail-ui-inboxmenu-base",function(BS){BR(BS.mail.ui.InboxMenu.getEnterAccel());});}}});AJ.on("itemSelected",AA);T.originalNav=AJ;Ar=BJ.one(b);}var BP=function(){if(C.msgHdrStack.length){var BR=A.one("#tablist .messagetabs.active a"),BS=0,BU=[],BW,BT,BV=false;BI="Inbox";if(BR){BT=parseInt(BR.getAttribute("tabindex"));}A.all("#tablist .messagetabs").each(function(BX){BS=parseInt(BX.one("a").getAttribute("tabindex"));var BY="div#shellcontent #messageid"+BS;BX.remove();BW=A.mail.model.DataStore.Messages.toMessage(BI,C.msgHdrStack[BS]);
if(BS==BT){BV=[BW,BY];}else{BU.push([BW,BY]);}});if(BV){BU.push(BV);BC=2;if(NeoConfig.hasGalaxy){V();}}if(BU){setTimeout(function(){var BX,BY=A.mail.Tabs.getActiveTab();for(BX in BU){A.fire("openMessage",{fid:BI,msg:BU[BX][0]},A.bind(function(Ba){try{A.one(Ba).remove();}catch(BZ){}},null,BU[BX][1]));}BY&&BY.set("active",1);},10);}}};if(!BB&&BC==0){if(A.one("#tabinbox").get("parentNode").hasClass("active")){BC=1;V();}BP();}else{if(BC==1){BP();}}if(BC==1){D=(G.low_bandwidth)?"launch_inbox_low":((G.ssl_launch||NeoConfig.isFullSSL)?"launch_inbox_ssl":"launch_inbox");}else{V();}if(NeoConfig.intl!=="jp"){if(!AN){A.use("gx-ui-galaxyview-base",function(BT){BL=new Al({root:null});BM=new BT.gx.ui.GalaxyView({contentToolbar:BL});BO={yTabEl:BT.one("#tabwhatsnew").get("parentNode"),yTabContentEl:BT.one("#galaxyPageContainer"),label:"WHAT'S NEW",widget:BM,sync:true,inactive:(BC!=0)};AN=AF(BO);BD=1;var BS=false;var BR=function(){var BU=G.hydra?"hydra=1":"galaxy=1";C.async("GET","whatsnew?"+BU+"&mode=data&ncrumb="+G.ncrumb+G.extraURLArgs,{success:function(BV){BC=0;if(!BS){C.exec(BV.responseText);}if(G.userAdLocations.LREC){var BW=BT.one("#slot_LREC");BW&&BW.setStyle("display","");}!G.noDarla&&J(function(BX){BM.fire("darlaEvent",{action:(G.hydra)?"welcome_hydra":"welcome_gx",refreshAds:true});},false);V(function(BX){BX.galaxy.loadRushmoreImages();});BT.fire("galaxyLoaded");},chunked:function(BV){C.exec(BV);BS=true;}});};j.fetchWhatsNew=BR;if(G.isMPWelcomeLaunch){BR();}BM.after("activeChange",function(BU){if(BU.newVal){if(BU.newVal==1&&BC!=0){BR();}else{BM.fire("darlaEvent",{action:(G.hydra)?"welcome_hydra":"welcome_gx"});}}});});}}else{BL=new Al({root:null});A.use("mail-ui-whatsnew-base-jp",function(BR){BM=new BR.mail.ui.WhatsNewView({contentToolbar:BL});});BO={yTabEl:A.one("#tabwhatsnew").get("parentNode"),yTabContentEl:A.one("#galaxyPageContainer"),label:"WHAT'S NEW",content:A.one("#shellcontent").get("innerHTML"),widget:BM,inactive:(BC==1)};AF(BO);if(NeoConfig.userAdLocations.LREC){BE=A.one("#slot_LREC");BE&&BE.setStyle("display","");}BM.after("activeChange",function(BR){if(BR.newVal){A.fire("jpwhatsnew:active");BM.fire("darlaEvent",{action:"welcome_gx"});}});}if(!Ay){var BK,BH;A.fire("Y.mail.ui.Workspace:switchToInbox:start");BI=(C&&C.fid)||"Inbox";BH={fid:BI,dontBind:AZ};if(NeoConfig.hasConv){BQ=new A.mail.ui.ConvView(BH);}else{BQ=new A.mail.ui.MessagesView(BH);}BN=BQ.isEmpty(BI);BQ.once("renderComplete",function(){j.fire("initComplete",BK);});BO={label:BI,widget:BQ};BK=A.one("#inboxcontainer");if(BK){BO.yTabEl=A.one("#tabinbox").get("parentNode");BO.yTabContentEl=BK;BO.inactive=(BC!=1);BO.sync=true;l.set("active",!BO.inactive);}Ay=AF(BO);Ay.widget.set("loaded",1);if(Ay){Ay.on("activeChange",function(BR){l.set("active",BR.newVal);});if(NeoConfig.hasReadTabPool){Ay.once("activeChange",function(BR){setTimeout(function(){AM.check();},0);});}BD=1;A.fire("Y.mail.ui.Workspace:switchToInbox:complete");}}if(strings.str_cfg_tog_prefetch_contacts){AT(true);}var BG=(BQ&&BQ.get("active"))?BQ:BM;if(!BF&&!G.isMPWelcomeLaunch&&(G.hasGalaxy||BC==1)&&BG){M={isFolderEmpty:BN,goTo:BC};}if(!G.noDarla){if(!BF){if(M){if(G.prefetchAd){(G.prefetchAdType==1)&&Ab();}else{J(function(){BG.fire("darlaEvent",{action:((BN&&BC==1)?D+"_empty":D)});},false);}}}else{if(NeoConfig.intl==="jp"){J(function(){BM.fire("darlaEvent",{action:D});},false);}}}if(!Aq&&G.contactsTabEnabled){BO={yTabEl:A.one("#tabcontacts").get("parentNode"),label:"Contacts",noDefault:true,inactive:true,forcePane:true,sync:true,init:function(BS,BR){A.use("contacts-ui-contactsview",function(BU){var BT=BU.contacts.ui.getContactsViewInstance();BT.type="contactstab";Az(BT,BS);BS.widget=BT;BU.contacts.ui.ContactsView.contactsTab=BS;BR();});}};Aq=AF(BO);}}B.startConsole(A8.ylog);BA();w=A.one("#main").get("winWidth");if(G.secure_cascade=="1"&&G.secure_cascade_flash!=1){j.set("cascadeReady",false);}else{j.set("cascadeReady",true);}E=BC;if(G.mrd&&G.mrd.action){callFromLaunch=true;e(null,true);}if(C.openCompose){A.fire("newMessage");}return BD;}function AY(A8,BA){var BB=A.one("#paneshell");var A9=strings.str_tog_loadRTLCss?"right":"left";if(BA){A8.set("shellcontentOffset",BB.one("#shellcontent").getStyle(A9));BB.one("#shellcontent").setStyle(A9,"0");BB.addClass("withoutshellnavigation");}else{BB.one("#shellcontent").setStyle(A9,A8.get("shellcontentOffset"));BB.removeClass("withoutshellnavigation");}}function A7(A8,A9){if(A9){A.one("#shellnavigation").all(".items").addClass("hidden");}else{A.one("#shellnavigation").all(".items").removeClass("hidden");}}function u(A8,A9){if(A9){A.one("#paneshell").addClass("withouttoolbar");}else{A.one("#paneshell").removeClass("withouttoolbar");}}function k(A8){var BB=A.one(AX),A9,BA;if(AJ&&A8.newVal){A9=AJ.get("content");A9&&A9.remove();BA=A8.newVal;BA=BA?BA.get("content")||"":"";BA&&BB.insert(BA,0);BB.hasClass("hidden")&&BB.removeClass("hidden");AJ&&AJ.set("active",0);AJ=A8.newVal;AJ&&AJ.set("active",1);}}function Av(A9){if(Ar&&A9.target.get("active")){var A8=A9.prevVal,BA=A9.newVal,BB=BA?BA.get("content")||"":"";if(BB!=Ah){if(BB&&BB.one&&(NeoConfig.isInternal!="1"||!NeoConfig.hasConv)){var BC=BB.one(".report_bug");if(BC){BC.remove();}}Ar.empty();Ar.setContent(BB);A8&&A8.set("active",0);Ah=BB;BA&&BA.set("active",1);}}}function AG(BB,BC){if(!BB||!BB.fid){return;}var A9=new B.Stopwatch("FolderView"),BD=NeoConfig.bidi,BE=BB.extraParams||(BB.smartFolder&&BB.forceRefresh),A8=BB.smartFolder&&!BB.forceRefresh,BA=BB.fid;if(!W){W=true;D=(G.low_bandwidth)?"launch_inbox_low":((G.ssl_launch||NeoConfig.isFullSSL)?"launch_inbox_ssl":"launch_inbox");}f.get(BA,{success:function(BP){BB=BP;var BI=BB.folderInfo.fid,BF=BB.folderInfo.name,BJ=A.mail.ui.common.StringUtils.getSystemFolderName(BI,BF,true,A8),BN,BG=G.roundTrip,BS,BK=window.rt_LogTime;if(BC){BS=l.get("fid");if(BS&&BS.fid!==BI){l.set("fid",{fid:BI,name:BF,checkMail:false});}}else{if(Ay){if(NeoConfig.hasConv){var BR=Ay.widget.msgList.get("fid");var BT=BR!=F;var BM=BI!=F;if(BT!=BM){BB.forceRefresh=true;
if(BM&&!BE){BE=BB.forceRefresh;}var BL={fid:BI,dontBind:true};var BQ=BM?new A.mail.ui.ConvView(BL):new A.mail.ui.MessagesView(BL),BH=Ao(Ay.widget,{label:BI,widget:BQ,removeOldWidget:true,sync:true});Ay=BH;}}BN=(Ay.widget.msgList.get("fid")==BI);if(BD){BJ=Ay.widget.msgList.getFolderNameBidi(BJ,BB.folderInfo.dir,BB.total);}else{BJ+="  <i>("+BB.total+")</i>";}Ay.set("title",BJ);Ay.widget.msgList.set("extraParams",BE);Ay.widget.msgList.set("fid",BI);Ay.set("active",1,{noScroll:BN});}else{Aa(1);if(BD){BJ=Ay.widget.msgList.getFolderNameBidi(BJ,BB.folderInfo.dir);}else{BJ+="  <i>("+BB.total+")</i>";}Ay.set("title",BJ);}C.fid=BI;function BO(){if(BA===C.fid){if(BG&&BK){if(BG.t3){BK("t3",BG.t3,true);delete BG.t3;}if(BG.t4){BK("t4",BG.t4,true);delete BG.t4;}}A9&&A9.stop();}}if(!Ay.widget.handledInitialRender){BO();Ay.widget.handledInitialRender=true;}Ay.widget.once("renderComplete",BO);}}});}function AA(A9){var A8=A9?A9.dataAction:0;switch(A8){case"compose":A.fire("newMessage",{noScroll:true});A.fire("globalUltBeaconEvent",{action:"compose_new_nav_toolbar"});break;case"new-conv":A.use("mail-ui-messenger",function(BA){BA.mail.ui.Messenger.showErrorDialog();});break;}}function AL(){var A8=G.neoJsHeader.module,A9=G.neoJsHeader.headerClass;A.Lang.later(0,null,function(){l.render();});AI.render();A.mail.ui.SearchBar.render();if(NeoConfig.intl!=="jp"){A.Lang.later(0,null,function(){A.use(A8,function(BA){BA.mail.ui[A9].render();});});}Y();A1=1;j.fire("renderComplete");}function Ag(){var A8;A8="%0AURL: "+escape(window.location.host);A8+="%0AYID: "+escape(NeoConfig.loginId);A8+="%0ABrowser: "+escape(A.UA.ie?"IE"+A.UA.ie:(A.UA.safari?"Safari"+A.UA.safari:(A.UA.chrome?"Chrome"+A.UA.chrome:(A.UA.gecko?"Firefox"+A.UA.gecko:"unknown"))));A8+="%0AUser Agent: "+escape(navigator.userAgent);A8+="%0AIP: "+escape(NeoConfig.ipAddress);A8+="%0Afarm: "+escape(NeoConfig.farm);A8+="%0ABuild Number: "+escape(NeoConfig.buildNumber);A8+="%0ABuild Type: "+escape(NeoConfig.buildType);A8+="%0AIntl: "+escape(NeoConfig.intl);A8+="%0Asid: "+escape(NeoConfig.cookieID);A8+="%0AScreen resolution: "+escape(screen.width)+"x"+escape(screen.height);return A8;}function Y(){A.one("#toolbar").delegate("click",function(BB){BB.halt();var BC=BB.target.getAttribute("desc"),BD,BA;BD=Ag();BA="http://bug.corp.yahoo.com/enter_bug.cgi?assigned_to=mail-conversations-triage%40yahoo-inc.com&bug_severity=normal&bug_status=NEW&bugtype=Defect&component=Conversations&contenttypeselection=text%2Fplain&estimated_time=0.0&form_name=enter_bug&keywords=&maketemplate=Remember%20values%20as%20bookmarkable%20template&material_to_version=0&product=Mail%20Neo&production=0&qa_contact=alam%40yahoo-inc.com&short_desc="+BC+"&comment="+BD+"";window.open(BA,"new");},".report_bug a");l.on("fidChange",function(BD){var BF=BD.prevVal||{},BE=BF.fid,BB=BD.newVal.fid,BA=BD.newVal.smartFolder||BF.smartFolder;if(BB==="Inbox"){I("workspace","folderSwitchToInbox");}else{I("workspace","folderSwitchFromInbox");}B.assert(BB.search("_")==-1);if(Ay){var BC=BE;if(!BC){BC=(C&&C.fid)||"Inbox";}(BB!=BC||(BB==BC&&BA))&&Ay.widget.set("loaded",0);}AG(BD.newVal);});A.on("openMessage",Ak);A.on("openConv",Ac);var A9=A2;if(NeoConfig.enableMSWS||(window.location.href.match(/&msws=1/)||window.location.href.match(/\?msws=1/))){A9=A0;if(window.location.href.match(/&msws=0/)||window.location.href.match(/\?msws=0/)){A9=A2;}}A.on("search:input",A9);if(NeoConfig.intl!=="jp"){A.on("globalUltBeaconEvent",function(BA){A.use("ult-track",function(BB){BB.fire("ultBeaconEvent",BA);});});}A.on("newMessage",AH);A.on("editMessage",d);A.on("openOptions",X);A.on("updateDataStore",z);A.on("openInbox",function(){l.set("fid",{fid:"Inbox",name:strings.str_tabs_inbox});});A.on("openRUEFCInbox",function(){l.set("fid",{fid:"Inbox",extraParams:{maxMessagesToScanForContacts:G.msgsToScanContacts||2000},smartFolder:true,name:strings.str_nav_email_from_ctcts});});A.on("openContacts",AO);A.on("openFolder",AG);if(G.fullPage){A.on("ws:fpMsgWidth",A6);A.on("darla:res",Aj);}A.on("tab:askDeactivate",AW);A.one("#tabinbox").once("mousedown",function(BC){if(W){return;}BC.halt(true);var BD=(C&&C.fid)?{fid:C.fid,name:BC.currentTarget.get("text")}:{fid:"Inbox",name:strings.str_tabs_inbox},BB=A.mail.common,BA=BB&&BB.cachewarmer;l.set("fid",BD);BA&&!H++&&BA.preFetchMessages("Inbox",null,100);D=(G.low_bandwidth)?"launch_inbox_low":((G.ssl_launch||NeoConfig.isFullSSL)?"launch_inbox_ssl":"launch_inbox");});var A8=A.one("#signout");if(A8){A8.on("click",function(BA){A.fire("signout");BA.preventDefault();});A.on("signout",s);}A.on("addContact",t);A.on("mrd:launch",e);A.on("update:view",Ae);if(G.fullPage){A.on("windowresize",y);A.on("uData:change",Ap);A.after("tabChange",i);A.on("tabBlur",As);}window.onbeforeunload=Af;window._TBCD=v;if(NeoConfig.intl==="jp"){A.use("mail-ui-workspace-base-jp",function(BA){BA.mail.ui.WorkspaceJp.bindUI();});}}function y(){if(G.fullPage){C.resizeFullpage();Au();}}function p(){if(G.launchMsgPrefetch==1&&G.prefetchObj&&G.prefetchObj.result){for(var A8 in NeoConfig.prefetchObj.result.message){A.mail.Controller.Messages._preset({fid:"Inbox",msgObj:NeoConfig.prefetchObj.result.message[A8]});}}}function Ap(A9){var BA=(AV<50)?NeoConfig.minPageSize:((AV>200)?200:AV),A8=(A9&&A9.userUIPref)?A9.userUIPref.messagesPerPage:0,BB=(A8<50)?NeoConfig.minPageSize:((A8>200)?200:A8);if(BA!=BB){q();}}function q(){A.use("common-ui-dialog-helper",function(A9){var A8=strings.str_modal_pagination_change.replace("{{str_branding_mail}}",strings.str_branding_mail);A9.common.ui.DialogHelper.alert({hd:strings.str_modal_pagination_change_title,bd:A8,hideClose:true,disableEsc:true},{ok:{handler:function(){r(true);}}});});}function i(A8){if(A8){var A9=A8.get("scrollWidth");if(A9){h(A9);}}}function As(A9){if(!A9){return;}var A8=A9.widget?A9.widget.get("scrollWidth"):0;if(NeoConfig.userAdLocations.SKY==="true"&&NeoConfig.fullPage&&A8>0&&A.one("body").hasClass("withoutad")){A9.widget.set("scrollWidth",null,{reset:true});}Ax(null);}function A6(A8){h(A8&&A8.newVal);
}function Aj(A8){if(!A8){return;}if(A8.lowRes){a();}else{AD();}}function h(A8){var A9=A.one("#main").get("offsetWidth"),BA=A.one("#shellnavigation").get("offsetWidth")+A8;if(BA>A9){Ax(BA);}else{if(BA<A9){Ax(null);}}}function AD(){var A8=A.mail.Tabs.getActiveTab();if(A8&&A8.widget&&A8.widget.get("scrollWidth")){Ax(null);A8.widget.set("scrollWidth",null,{reset:true});}}function a(){var BC,BA,BB,A9;var A8=A.mail.Tabs.getActiveTab();if(A8&&A8.widget){BC=A8.widget.get("scrollWidth");if(!BC){Ax(null);}else{A9=A.one("#main").get("winWidth");BA=A.one("#shellnavigation").get("offsetWidth");BB=BC+BA+A.one("#theAd").get("offsetWidth");if(A9>BB){Ax(null);}}}}function Au(){var A8;if(w&&A.one("#main")&&A.one("#shellnavigation")&&A.one("#theAd")){A8=A.one("#main").get("winWidth");if(g){if(A8>w){a();}}else{if(A8<w){AD();}}w=A8;}}function Ax(A9){var A8=A.one("#main");g=A9;if(A9){A8.setStyle("width",A9+"px");}else{A8.setStyle("width",null);}}function e(A9,A8){A.use("mail-controller-mrd",function(BA){if(BA.mail.Controller.MRD){if(A8){BA.mail.Controller.MRD.handleLaunch();}else{BA.mail.Controller.MRD.handleClick(A9);}}});}function v(A8){if(A8){A.use("mail-controller-mrd",function(A9){A9.mail.Controller.MRD.handleToolbar(A8);});}}function AO(A8){A.fire("Y.mail.ui.Workspace:openContacts:start");A.use("contacts-ui-contactsview",function(BA){var A9=BA.contacts.ui.getContactsViewInstance(A8);A9.updateConfig(A8);Aq.set("active",1);});}function t(BA,BB,A9,A8){if(BA==BB){BA="";}A.use("contacts-ui-addcontactdialog","common-net-sessionmgr",function(){var BC=new A.contacts.ui.AddContactDialog[(A9||A8)?"editDialog":"createDialog"](A8?A8:(A9?{fields:A9}:{name:N(BA),email:N(BB)}),{requestFn:A.common.net.SessionMgr.requestProxy,disableBuddyAdd:strings.str_cfg_tog_disableBuddyAdd,guid:G.neoguid,wspath:G.socdirProxyPath,composeFn:function(BE){var BD={cbfn:function(BF){var BG=BF.get("header");BG.to=[{email:BE||""}];BF.set("header",BG);}};AH(BD);}});});}function X(A8){if(strings.str_cfg_tog_classic_option){var A9="/ym/Options";if(A8&&A8.params&&A8.params.section==="spam"){A9="/ym/spamoptions";}A.use("common-ui-dialog-helper",function(BA){BA.common.ui.DialogHelper.alert({hd:strings.str_conv_btn_view_conv_options,bd:strings.str_modal_option_attention},{ok:{handler:function(){window.open(A9,"new");}}});});return;}A.use("options-ui-mailoptionsview",function(BD){var BA,BB;if(NeoConfig.enableNewMO&&A8&&A8.params&&A8.params.section&&A8.params.section=="spam"){A8.params.section="general";}if(BD.mail.ui.optionsTab!=null){if(A8&&A8.params&&A8.params.section&&(BA=document.getElementById("moIframeTab"))){try{if(!NeoConfig.enableNewMO){BA.contentWindow.MailOptions.showTab(A8.params.section);}else{BD.fire("openMOTab",{page:A8.params.section});}}catch(BC){}}BD.mail.ui.optionsTab.set("active",1);}else{A8=(typeof A8!=="undefined")?A8:{};AF({label:strings.str_tabs_options,forcePane:true,widget:new BD.options.ui.getOptionsViewInstance(A8.params||{}),acwHandler:function(BE){BD.mail.ui.optionsTab=BE.tab;}});}});}function A0(BF){if(strings.str_cfg_tog_mailSearchEnabled!==undefined&&strings.str_cfg_tog_mailSearchEnabled===false){return false;}var BE,BC,BG,BB,BA,A9,BD;if(BF.query!==undefined){BF.query=(typeof BF.query==="string")?{keyword:BF.query}:BF.query;}var A8=new B.Stopwatch("Search","start");BF.stopWatchRT=A8;A.use("mail-ui-mailSearchController",function(BH){if(BH.mail.ui.searchTab!=null&&!(window.location.href.match(/&multi=1/)||window.location.href.match(/\?multi=1/))){BC=BH.mail.ui.searchTab;BE=BC.widget;BE.set("query",BF.query);BE.set("customTitle",BF.customTitle);BE.set("stopWatchRT",A8);BE.sync();if(!BC.get("active")){BC.set("active",1);}}else{BF.fid="%40S%40Search";AF({label:strings.str_tabs_search,widget:new BH.mail.ui.Search(BF),acwHandler:function(BI){BH.mail.ui.searchTab=BI.tab;BH.mail.ui.searchTab.widget.sync();}});}});}function A2(BG){if(strings.str_cfg_tog_mailSearchEnabled!==undefined&&strings.str_cfg_tog_mailSearchEnabled===false){return false;}var BE=BG.query,BA;if(typeof BE==="object"){return false;}if(A.Lang.trim(BE)!=""){BA=A.Lang.trim(BE).replace(/([\~|\`|\@|\#|\$|\%|\^|\&|\*|\_|\-|\+|\,|\.|\/|\\|\;|\?|\[|\]|\\|\{|\}|\||\(|\)|\"|\'|\!|<|>])/g,"");if(BA==""){A.use("mail-ui-searchutils",function(BI){BI.mail.ui.SearchUtils.showAlert("SearchPuncError");});return false;}}var BF,BC,BH,BB,A9,A8,BD;A.use("mail-ui-search-base",function(BJ){if(BG.query!==undefined){BG.query=Q(N(BJ.Lang.trim(BG.query)));}var BI=new B.Stopwatch("Search","start");BG.stopWatchRT=BI;if(BG.newSearch==true){A9=BJ.one("body");A8=A9.one("#main");BD=A8.one("#shellnavigation");BB=BD&&BD.all("div.search-nav");BB&&BB.remove();}if(BJ.mail.ui.searchTab!=null){BC=BJ.mail.ui.searchTab;BF=BC.widget;if(BG.total){BF.set("refinementMax",BG.total);}BF.set("getRefinement",BG.getRefinement);BF.set("query",BG.query);BF.set("isRefinement",BG.isRefinement);BF.set("stopWatchRT",BI);BF.sync();if(!BC.get("active")){BC.set("active",1);}BC.set("title",strings.str_tabs_search+(BG.query.length>0?": "+N(BG.query):""));}else{BG.fid="%40S%40Search";BH=BG.query.length>0?": "+N(BG.query):"";AF({label:strings.str_tabs_search+BH,widget:new BJ.mail.ui.Search(BG),acwHandler:function(BK){BJ.mail.ui.searchTab=BK.tab;BJ.mail.ui.searchTab.widget.sync();if(!BD){A9=BJ.one("body");A8=A9.one("#main");BD=A8.one("#shellnavigation");}BD&&BD.all(".items").addClass("hidden");BJ.fire("MailSearch:start");}});}});}function AH(BB,BC){if(!BC){var A8=AI.getActiveTab();if(!AI.canDeactivateTab(A8)){A4(A8,function(){AH(BB,true);});return;}}var BA=new B.Stopwatch("Compose","start");A.fire("Y.mail.ui.Workspace:composeMessage:start");BB=BB||{};if(BB.cdo&&!BB.cdo.get("passive")){AE(BB,BA);}var A9=[].concat(S);A9.push(function(BD){BA.start(1,"initView");window.UploaderService=window.UploaderService||BD.mail.UploaderService;if(!BB.forceNew){var BG,BK,BI=AI.tabs;for(BG=0;BG<AI.tabs.length;BG++){BK=BI[BG].widget;if(BK&&BK.type&&BK.type=="author"){if(BK.matchOrigin(BB)&&!BK.get("dirty")&&!BK.isSaved()){BD.Lang.later(0,0,function(){BI[BG].set("active",1,{noScroll:BB.noScroll});
});BA.stop("ComposeInTab");return;}}}}var BE=new BD.mail.ui.AuthorView(),BF=null,BN=strings.str_tabs_compose,BH=BB.action,BJ=BB.widget,BM=BJ&&BJ.msgPane,BL;BA.action=BH;BB.stopwatch=BA;BL=BB.oMsg&&BB.oMsg.header&&BB.oMsg.header.subject;BE.initCompose(BB);if(BB.oMsg&&BB.oMsg.header){BN=N(Q(BB.oMsg.header.subject));}if(BJ){if(!BB.hasMsgList&&(BH=="reply_all"||BH=="reply_sender"||BH=="forward")&&BM&&NeoConfig.send_confirm_nav_enabled){BE.backToMessageTab=function(BP){var BO=function(){if(BP=="back-to-message"){BM.message.header.subject=BL;}BM.set("title",null);BF=Ao(BE,{label:N(Q(BL)),widget:BJ,sync:true,reusePreviousWidget:1});BF.set("active",1);};BM.set("asleep",0);BM.set("visible",1);if(BP=="next"||BP=="prev"){BD.use("mail-ui-messagepane-next-prev",function(){BM&&BM.stepMessage(BP,BO,0,0,1);});}else{BO();}};}BF=Ao(BJ,{label:BN,widget:BE,sync:true,preservePreviousWidget:NeoConfig.send_confirm_nav_enabled});}BE.subview.once("renderComplete",function(){BA.stop();});if(!BF){BF=AF({label:BN,widget:BE,forcePane:false,sync:true,noScroll:BB.noScroll});if(!BF){return;}}BE.bindComposeView();BD.fire("Y.mail.ui.Workspace:composeMessage:complete");if(BB.callFromLaunch){!G.noDarla&&J(function(BO){BO.fire("darlaEvent",{action:(NeoConfig.low_bandwidth)?"launch_compose_low":((NeoConfig.ssl_launch||NeoConfig.isFullSSL)?"launch_compose_ssl":"launch_compose")});},false);}});AT();BA.start(1,"moduleLoad");A.use.apply(A,A9);}function AT(A8){A.use("contacts-api","contacts-api-utils",function(BB){var A9=BB.contacts,BA=A9.utils,BC=A9.api;if(!BA.areContactsLoaded()){if(A8){BB.Lang.later(0,null,function(){BC.load();});}else{BC.load();}}});}function d(BA){var A9=new B.Stopwatch("Compose","start");BA=BA||{};AE(BA,A9);var A8=[].concat(S);A8.push(function(BE){A9.start(1,"initView");window.UploaderService=window.UploaderService||BE.mail.UploaderService;var BC=AI.getTab(function(BF){return BF.type&&BF.type==="author"&&BF.matchOrigin(BA);});if(BC){BC.set("active",1,{noScroll:BA.noScroll});}else{var BD=new BE.mail.ui.AuthorView();A9.action=BA.action;BA.stopwatch=A9;BD.initCompose(BA,true);var BB=strings.str_tabs_compose;if(BA.oMsg&&BA.oMsg.header&&BA.oMsg.header.subject&&BA.oMsg.header.subject!=""){BB=N(Q(BA.oMsg.header.subject));}BD.subview.once("renderComplete",function(){A9.stop();});BC=AF({label:BB,widget:BD,noScroll:BA.noScroll,acwHandler:function(BF){BD.bindComposeView();}});}});A9.start(1,"moduleLoad");A.use.apply(A,A8);}function AE(A9,A8){if(A9.oMsg&&A9.fid){A8.CMGStart=new Date();A.mail.Controller.Messages.get({fid:A9.fid,msg:A9.oMsg,ovparams:{truncateAt:null}},{success:function(BB,BA){if(!A8.CMGEnd){A8.CMGEnd=new Date();BA&&BA.respProps&&(A8.wasCached=BA.respProps.wasCached);}},failure:function(){}});}}if(NeoConfig.hasReadTabPool){var AM=function(){this.pool=[];};AM.prototype.create=function(){var A9,A8=AU({invisible:true,reuse:true,acwHandler:Z});A9={msgList:0,asleep:1,reuse:1};if(NeoConfig.hasConv){A8.widget=new A.mail.ui.ConvView(A9);}else{A8.widget=new A.mail.ui.MessagesView(A9);}A8.widget.render(A8.elContent);Az(A8.widget,A8);this.add(A8,NeoConfig.hasConv);};AM.prototype.add=function(A8,A9){if(A9===NeoConfig.hasConv&&A8.reuse){this.pool.push(A8);}};AM.prototype.get=function(A9){var A8=this.pool;return(A9===NeoConfig.hasConv&&A8.length>0)?A8.splice(0,1)[0]:null;};AM.prototype.check=function(){if(this.pool.length==0){this.create();}};AM=new AM();A.on("readpool:check",function(){AM.check();});}function Ad(BF,BG,A8){A8.start(1,"GetTabCB");var BC=A.mail.model.DataStore.Messages.getPermMidPart,BE=BF.msgPane&&BF.msgPane.get("message"),BA=(BE&&BE.message&&BE.message.mid)||"",BD=BA&&BF.msgPane.fullView&&BC(BG.mid)==BC(BA);if(BE&&BF.msgPane.fullView&&!BA){var A9=NeoConfig.loginId;try{A9+=":"+BE.fid;A9+=":"+BE.message.header.receivedDate;}catch(BB){A9+=":MISSING MESSAGE BODY";}B.error.report("MissingMidError in hasMsgTab for YID:FID:REC_DATE"+A9,"MessageRead",1);I("messageread","openMessageGetTabIssue");}if(BD){BF.msgPane.markAsRead&&BF.msgPane.markAsRead();}return BD;}function A3(A9,BC,A8){A8.start(1,"GetTabCB");var BE=A.mail.model.ConvStore.Conversations.getPermCidPart,BA=A9.msgPane&&A9.msgPane.get("message"),BD=(BA&&BA.message&&BA.message.cid)||"",BB=BD&&A9.msgPane.fullView&&BE(BC.cid)==BE(BD);if(BA&&A9.msgPane.fullView&&!BD){I("convread","openConvGetTabIssue");}return BB;}function n(BW,Bc){try{var BO=BW.msg,A9=BW.fid,BX=A.one("#"+A9),BP=BW.sortCol||0,BY=BW.query||0,BJ=BW.index||0,BG=BW.noScroll,BA=50,BU=BW.arrMsgSeq||0,BZ=(BU&&BU.length)||0,Be=(BJ-BA>0)?BJ-BA:0,BF=(BU&&(((BJ+BA)<BZ)?BJ+BA:BZ))||null,BQ=(BU&&BU.slice(Be,BF))||0,BD=B.Stopwatch,BL=BW.isConv?BD.get("ConvInPreview"):BD.get("MsgInPreview"),BC=null,BN=false,Ba=BW.callFromLaunch?BW.callFromLaunch:false,BM=G.om&&G.om.isSandboxEnabled,Bd=BM&&G.om&&G.om.isMsgReadAppRTB,BE,BK,BB=function(){if(Ba){J(function(Bh){BL.start(1,"TabDarlaEvent");Bh.fire("darlaEvent",{action:(NeoConfig.low_bandwidth)?"launch_message_low":((NeoConfig.ssl_launch||NeoConfig.isFullSSL)?"launch_message_ssl":"launch_message")});},false);}},Bf,A8,Bg,BV,BI,BR,BT=BW.isConv?"cid":"mid",BS=BW.isConv?"convread":"messageread";if(typeof BO==="string"){BO=BW.isConv?{cid:BO}:{mid:BO};}if(BO&&!BO[BT]){return;}BL=new BD("MsgInTab");BL[BT]=BO[BT];if(A9==="%40S%40Search"){Bg=BO.fid?BO.fid:BO.sourceFolderInfo.fid;}else{if(A9==="Inbox"){if(!BX.hasClass("selected")){BX.addClass("selected");}}}BN=(A9==="%40S%40Search"&&Bg==="Draft");if(!BW.isConv&&(A9==="Draft"||BN)){A.fire("editMessage",{oMsg:BO,fid:(BN?Bg:A9),action:"edit",enableRetry:(BN?true:false),noScroll:BG});return;}BC=BW.isConv?AI.getTab(function(Bh){return A3(Bh,BO,BL);}):AI.getTab(function(Bh){return Ad(Bh,BO,BL);});if(BC){BC.set("active",1,{noScroll:BG});if(G.hasConv){BC.widget&&BC.widget.refreshMessage&&BC.widget.refreshMessage(BW);}return;}AT();BL.start(1,"NewView");if(NeoConfig.hasReadTabPool&&!BW.isConv){BC=AM.get(BW.isConv);}if(BC){BC.invisible=0;Bf=BC.widget;A8=Bf.msgPane;Bf.fid=A8.fid=A9;Bf.stopwatch=A8.stopwatch=BL;A8.sortedColumn=BP;A8.searchQuery=BY;
A8.arrMessageSequence=BQ;Bf.callFromLaunch=Ba;BL.start(1,"preload");A8.preload(BO);}else{BK={msgList:0,fid:A9,message:BO,neighbors:BW.neighbors,sortedColumn:BP,searchQuery:BY,arrMessageSequence:BQ,callFromLaunch:Ba,stopwatch:BL};if(BW.isConv){Bf=new A.mail.ui.ConvView(BK);}else{Bf=new A.mail.ui.MessagesView(BK);}A8=Bf.msgPane;}if(BC){Bf.set("asleep",0);BC.once("closeChange",function(Bh){if(Bh.newVal==1&&NeoConfig.hasReadTabPool&&!BW.isConv){AM.add(BC,BW.isConv);}});BV=1;}Bf.once("renderComplete",function(){if(!Bd){AQ(BL,Bf,A8);}I(BS,"tabbedMessageRead");BB();Bc&&Bc();if(NeoConfig.hasReadTabPool&&!BW.isConv){setTimeout(function(){AM.check();},0);}});if(Bd){BE=A.later(3000,null,AQ,[BL,Bf,A8]);A8.once("msgReadAppComplete",function(){BE.cancel();AQ(BL,Bf,A8);});}BL.start(1,"EscapeMessageSubject");BI=BW.isConv?BO.subject||strings["str_msg-view_tab_no_subject"]:(BO.header&&BO.header.subject)||BO.subject||strings["str_msg-view_tab_no_subject"];BI=N(Q(BI));if(NeoConfig.bidi){BR=BW.isConv?BO.subjectDir||"":(BO.header&&BO.header.subjectDir)||BO.subjectDir||"";if(BR==""&&A.Intl.detectDirection){BR=A.Intl.detectDirection(BI);}}BL.start(1,"AddCW");var BH={label:BI,widget:Bf,noScroll:BG};if(NeoConfig.hasConv){BH.forcePane=true;}if(BC){BH.tab=BC;}else{BH.acwHandler=Z;}BH.acwHandlerArgs={stopwatch:BL,sboxEnabled:BM,msgPane:A8,fid:A9,message:BO,neighbors:BW.neighbors,usedTabPool:BV,isConv:BW.isConv};BC=AF(BH);if(NeoConfig.bidi){BC.set("direction",BR);}}catch(Bb){I(BS,"openMessageError");A.use("common-utils-error",function(){B.error.report("openMessageError",Bb,1,1,1);});}}function Ac(A9,A8){A9=A9||{};A9.isConv=1;n(A9,A8);}function Ak(A9,A8){A9=A9||{};A9.isConv=0;n(A9,A8);}function Z(BA){var A8=BA.cfg.acwHandlerArgs,A9=A8.isConv?"convread":"messageread";A8.stopwatch.start(1,"TabCallFromLaunch");A8.stopwatch.title=(A8.isConv?"ConvInTab":"MsgInTab")+" Stopwatch (sandbox "+(A8.sboxEnabled?"enabled":"disabled")+")\n";if(A8.isConv){A8.stopwatch.start(1,"PostOpenConv");}else{A8.stopwatch.start(1,"PostOpenMessage");}if(A8.usedTabPool){try{A8.msgPane.set("message",{fid:A8.fid,message:A8.message,neighbors:A8.neighbors});}catch(BA){I(A9,"openMsgSetMsgError");}}}function At(A8){var A9=0;if(A8.widget&&(A8.widget.type=="omtab")){return 1;}if(!AI.maxTabsReached&&(!NeoConfig.maxOpenTabs||(AI.tabs.length<NeoConfig.maxOpenTabs))){return 1;}AI.iterateTabs(function(BB){var BA=BB.widget;if(BA&&BA.type&&((BA.type=="messagepane")||(BA.type=="omtab"))){A9++;}return false;});A.use("common-ui-dialog-helper","_shared_module_offscreen_bin_modal_btn_generic",function(BA){setTimeout(function(){var BB={hd:strings.str_modal_too_many_tabs_title,bd:strings.str_modal_too_many_tabs_note,modal_classes:"lg"};if(A9>0){BB.ft=B.substitute(BA.ui.Templates._shared_module_offscreen_bin_modal_btn_generic.base,0,0,0,{btnID:"ok","default":"default",btnLabel:strings.str_modal_too_many_tabs_close_auto})+B.substitute(BA.ui.Templates._shared_module_offscreen_bin_modal_btn_generic.base,0,0,0,{btnID:"cancel",btnLabel:strings.str_modal_too_many_tabs_close_manual});BA.common.ui.DialogHelper.createCommon(BB,{ok:{handler:function(){AS();}}});}else{BA.common.ui.DialogHelper.alert(BB);}I("TABS","max_opened");},0);});return false;}function AW(A8){if(!A8){return;}if(A8.oldtab===A.mail.ui.optionsTab){A.fire("tab:deactivateOptionsTab",{newtab:A8.newtab,oldtab:A8.oldtab,opts:{noScroll:A8.opts.noScroll}});}else{A4(A8.oldtab,function(){A8.opts.forceActive=true;A8.newtab.set("active",1,A8.opts);});}}function A4(A8,A9){A.use("common-ui-dialog-helper",function(BA){setTimeout(function(){var BB={hd:strings["str_modal_tabdeactivate_title"],bd:strings["str_modal_tabdeactivate_body"]};BA.common.ui.DialogHelper.confirm(BB,{ok:{handler:A9},cancel:{}});},0);});}function AU(A8){try{var A9=AI.createTab(A8);A9.on("tab:add",o);if(A8.acwHandler){A9.on("tab:add",A8.acwHandler);}}catch(BA){I("workspace","createTabError");}return A9;}function A5(A8){var BA=A8.tab||AU(A8),BB=A8.widget,A9=BB&&BB.type;try{AI.addTab(A8,BA);}catch(BC){I("workspace",("addTabError"+(A9||"")));}return BA;}function o(BC){var A8=BC.cfg,BA=BC.tab,BB=A8.widget,A9=BB&&BB.type;if(!BA.reuse){Az(A8.widget,BA);}if(!A8.inactive){try{BA.set("active",1,{noScroll:A8.noScroll,forceActive:true});}catch(BC){I("workspace",("tabActiveError"+(A9||"")));}}}function AF(BA){var A9,BB=0;if(!At(BA)){return null;}if(!BA.sync){var A8=AI.getActiveTab();if(!AI.canDeactivateTab(A8)){if(A8===A.mail.ui.optionsTab){A.fire("tab:deactivateOptionsTab",{newTab:true,addtab:function(){A5(BA);}});}else{A4(A8,function(){A5(BA);});}return null;}}return A5(BA);}function Az(A9,BC){try{if(A9){var BA=[],BB=A9.type;BC.detachWidget&&BC.detachWidget();function BD(BF){var BG=BF.currentTarget&&BF.currentTarget.widget&&BF.currentTarget.widget.msgPane&&BF.currentTarget.widget.msgPane.message;if(A9.get("hideToolbar")){u(A9,BF.newVal);}if(A9.get("hideNavbar")){AY(A9,BF.newVal);}if(A9.get("clearNavbar")){A7(A9,BF.newVal);}if(A9.set&&A9.get("active")!=BF.newVal){A9.set("active",BF.newVal,{opts:BF.opts});}NeoConfig.msgrData=NeoConfig.msgrData||{};NeoConfig.msgrData.message=(BG&&BG.fid=="%40C%40Chats")?BG:null;}if(!A9.get("navToolbar")){A9.set("navToolbar",T.originalNav);}if(BC.activeChangeHandle){BC.activeChangeHandle.detach();}BC.activeChangeHandle=BC.after("activeChange",BD);BA.push(BC.on("closeChange",function(BF){if(BF.newVal&&A9.get&&!A9.get("canClose")&&!BC.reuse){BF.halt(true);BC.fire("closeHalted");}}));function A8(BF){if(BF.newVal&&A9.set){if(BC.reuse){A9.set("asleep",2);}else{if(A9.type=="omtab"){return;}BC.detachWidget();A9.set("close",1);}}}BA.push(BC.on("closeChange",A8));if(A9.on){BA.push(A9.on("navToolbarChange",k));BA.push(A9.on("contentToolbarChange",Av));BA.push(A9.on("titleChange",function(BF){BC.set("title",BF.newVal);}));BA.push(A9.on("closeChange",function(BF){if(BF.newVal){BC.detachWidget();BC.set("close",1,{noScroll:BF.noScroll});}}));BA.push(A9.after("activeChange",function(BF){if(BF.newVal&&!BC.get("active")){BC.set("active",1);}}));BA.push(A9.on("asleepChange",function(BF){(BF.newVal==1)&&BC.set("close",1);
}));if(G.bidi){BA.push(A9.on("directionChange",function(BF){BC.set("direction",BF.newVal);}));}BA.push(A9.on("navKeysChange",function(BF){j.set("navKeys",BF.newVal);}));}BC.evtHandles=BA;BC.detachWidget=function(){var BH,BG=BC.evtHandles,BF=BG.length,BI;for(BI=0;BI<BF;BI++){BH=BG[BI];BH&&BH.detach();BG[BI]=null;}BC.evtHandles=[];};}}catch(BE){I("workspace",("bindTabError"+(BB||"")));}}function Ao(BB,BE){var BA,A8=AI.tabs,BC,BD,A9;A9=A8.length;while(A9--){BA=A8[A9];if(BA.widget&&BA.widget==BB){BA.detachWidget&&BA.detachWidget();BA.reuse=0;BA.detachDarla();BB.set("asleep",3);BB.set("reuse",0);BB.set("visible",0);if(BE.reusePreviousWidget&&BA.previousWidget){BA.widget=BA.previousWidget;BC=BA.widget.get("rootNode");BC&&BC.removeClass("hidden");}else{BA.widget=BE.widget;}BD=BA.widget;if(BE.preservePreviousWidget){BA.previousWidget=BB;BC=BB.get("rootNode");BC&&BC.addClass("hidden");}else{BB.set("close",1);if(BE.removeOldWidget){BA.elContent.get("children").remove();}BA.previousWidget=null;}BD.set("asleep",0);BD.set("reuse",0);o({widget:BD,cfg:BE,tab:BA});BD.set("visible",1);BD.set("active",1);BD.render(BA.elContent);BA.attachDarla();return BA;}}return null;}function Am(A8){if(A8!=j.get("navKeys")){if(x){x.detach();}if(A8){x=A.on("key",A8.onKeyDown,A.one("document"),("down:"+A8.charCodes.join(",")),j);if(A.UA.os=="macintosh"&&A.UA.gecko){A.on("key",A8.onKeyPress,A.one("document"),"press:63",j);}}}}function AS(){AI.iterateTabs(function(A9){var A8=A9.widget;if(A8&&A8.type&&((A8.type=="messagepane")||((A8.type=="omtab")&&A8.get("canClose")))){A9.set("close",1);}return false;},true);}function AC(A8){if(typeof(A8)==="string"&&A8!=""&&(location.href.indexOf("fullpage")==-1)){var A9=(A8=="1")?0:1;if(G.fullPage!==A9){q();return;}}r();}function z(A8){AV=A.common.persist.UserData.get("userUIPref.messagesPerPage");A8.modifiedObjs.userdata&&A.common.persist.UserData.load(true);A8.modifiedObjs.metadata&&A.mail.persist.MetaData.load();(typeof(A8.msgPaneVisible)!="undefined")&&Ay.widget.previewPaneUIChange(A8.msgPaneVisible);}function r(BA){if(BA){try{var A9=window.location.href.split("#")[0],BE=(A9.indexOf("?")!=-1),BB=(A9.indexOf(".rand")!=-1),BC=".rand="+(Math.round(Math.random()*1000000000)),A8="";if(BB){A8=A9.replace(/\.rand\=([\d]+)/g,BC);}else{A8=(BE)?A9+"&"+BC:A9+"?"+BC;}window.location.href=A8;return;}catch(BD){}window.location.reload();}else{AV=A.common.persist.UserData.get("userUIPref.messagesPerPage");A.common.persist.UserData.load(true);A.mail.persist.MetaData.load();}}function Ae(A8){A.use("mail-ui-workspace-ext",function(){j._switchView(A8);});}function AK(){return Ay;}function AR(BC,A9){var A8=A.mail.Tabs.tabs,BF,BB=0,BE=0,BA,BD;for(BF=0;BF<A8.length;BF++){BA=A8[BF].widget;if(BA&&BA.type&&BA.type=="author"){if(BA.get("dirty")&&BA.get("dirty")!=="ForceClose"){BB++;}if(BC&&(BD=BA.composeView)){if(!BD.canWeClose(A9)){return -1;}}}}return BB;}function m(A9){var A8=A.mail.Tabs.tabs,BC,BA,BB,BF=0,BE=function(BH,BG){BG.detach("compose:saveFail",BD);BG.dirty=false;BF--;if(BF==0){A9&&A9({failure:-1});}},BD=function(BH,BG){BG.detach("compose:saveSuccess",BE);BG.dirty=true;A9&&A9({failure:1});};for(BC=0;BC<A8.length;BC++){BA=A8[BC].widget;if(BA&&BA.type&&BA.type=="author"){if(BA.get("dirty")&&BA.get("dirty")!=="ForceClose"&&(BB=BA.composeView)){BF++;BB.once("compose:saveSuccess",BE,null,BB);BB.once("compose:saveFail",BD,null,BB);BB._invokeSaveDraft({auto:true});BB.dirty="ForceClose";}}}if(BF==0){A9&&A9({failure:-1});}}function Af(BE){var BD,BA=0,BF,A8=AI.tabs,BC,A9;if(BD=window.onBeforeUnloadBizMail){BD();return;}try{BA=AR();}catch(BB){}if(BA){BF=strings.str_error_ComposeNavigateAway;}if(BF&&BA){if(window.event){window.event.returnValue=BF;}if(BE&&BE.returnValue){BE.returnValue=BF;}return BF;}}function s(){setTimeout(function(){try{if(NeoConfig.isBizmail){A.Cookie.remove("YM.BM",{path:"/",domain:"yahoo.com"});}window.location.href=P(strings.str_cfg_url_signout,{},null,null,strings);}catch(A8){}},100);}function AQ(A8,A9,BA){A8&&A8.stop();A9&&delete A9.stopwatch;BA&&delete BA.stopwatch;}A.augment(j,A.Attribute);j.addAttrs({navKeys:{setter:Am}});A.mix(j,{addContentWidget:AF,init:Aa,processStatQueue:c,postLoad:Ai,render:AL,moUpdate:AC,presetMsgs:p,refreshPersistData:r,getFolderContent:AK,getComposeDirtyCount:AR,saveComposeDraft:m});}();T=A.mail.ui.Workspace;function L(){var X=1;window.onerror=function(Z,a,Y){I("Window.error","unhandled_exception");if(NeoConfig.log_error_yapache==1){if(X){X=0;A.use("common-utils-error",function(b){X=1;B.error.report("[msg: "+Z+"] [file: "+a+"] [line#: "+Y+"] ","UNHANDLED_EXCEPTION",1,0,1);});}}};}},"1.0.0",{requires:["mail-modules","mail-templates","mail-ui-foldersview-base","common-ui-tabs-base","mail-ui-messagesview-base","mail-ui-convview-base","common-ui-toolbar-base","mail-ui-searchbar","gx-ui-galaxyview-base","common-utils-stats","mail-ui-common-string-utils"]});

YUI.add("mail-ui-factory-base",function(G){G.namespace("mail.ui");var C=G.mail.ui.Factory={},E={};function D(L){var K=G,I,J,M=L.split("."),H=M.length;for(J=0;J<H;J++){if(J==H-1){I=M[J];}else{K=K[M[J]];}}return[K,I];}function B(L,J){if(!L||!J){return;}var I=D(L),K=I[0],H=I[1],M;if(K[H]&&K[H]!=J){if(!(L in E)){E[L]=K[H];}M=K[H];K[H]=J;F(L,J,M);}}function A(L){if(L&&L in E){var J=D(L),K=J[0],H=J[1],M,I;M=K[H];K[H]=E[L];I=K[H];if(I!=M){F(L,I,M);}}}function F(I,H,J){C.fire("uifactory:change",{ns:I,newCtor:H,oldCtor:J});}G.augment(C,G.EventTarget);G.mix(C,{register:B,unregister:A});},"1.0.0");

YUI.add("mail-ui-basewidget",function(B){var A=function(){A.superclass.constructor.call(this);this.set("navKeys",B.mail.ui.navKeys);};B.extend(A,B.common.ui.ContentWidget);A.prototype.NAME="BaseWidget";B.namespace("mail.ui").BaseWidget=A;},"1.0.0",{requires:["common-ui-contentwidget","mail-ui-navkeys"]});

YUI.add("mail-ui-header",function(A){var E=A.common.Utils.substitute,D=A.Node.create,B=A.common.persist.UserData,F=A.common.Utils,G=A.mail.ui.headerUtils,H=NeoConfig&&NeoConfig.uh2Enabled,C={"default":"_shared_module_offscreen_bin_menus_external_links","mts":"_shared_module_offscreen_bin_menus_mts_external_links","sbc":"_shared_module_offscreen_bin_menus_sbc_external_links"};var I=function(){};A.extend(I,A.mail.ui.HeaderBase);A.mix(I.prototype,{omModifiedHeaderMenuFlag:false,omMenuObj:{},omModifiedOptionsMenuFlag:false,omOptionsMenuObj:{},render:function(){var Q=this,O;if(H){A.on("menu:config",Q.setUh2MenuConfig,Q);A.on("search:config",Q.setOMSearch);A.on("change:username",Q.setUh2Username);A.on("click",function(){A.fire("signout");},"#yuhead-me-signout");var L=false,M=false;A.Global.on("ucs:userMenuShow",function(f){var d=this;if((d.omModifiedHeaderMenuFlag||!L)){var k=new A.EventTarget();k.publish("ucs:userMenuItems",{broadcast:2,emitFacade:true});var b=[];var Z=[],W,c,Y=true;if(d.omMenuObj&&d.omMenuObj.length){for(var a=0;a<d.omMenuObj.length;a++){c=d.omMenuObj[a];if(c["icon"]["class"]!="signout"&&c["data_action"].search("offline")==-1){W={menuText:c.label,actionType:"customEvent",actionData:c.data_action,icon:c.icon["class"].substr(5),isActive:c.selected};Z.push(W);if(Y&&c.selected){Y=false;}}}b.push(Z);for(var a=0;a<d.omMenuObj.length;a++){c=d.omMenuObj[a];if(c["icon"]["class"]=="signout"||c["data_action"].search("offline")>-1){var h=[{menuText:c.label,actionType:"customEvent",actionData:c.data_action,isDisabled:Y}];b.push(h);}}}if(NeoConfig.userDataObj&&NeoConfig.userDataObj.otherYahooMboxes&&NeoConfig.userDataObj.otherYahooMboxes.otherYahooMboxesTotal){var X=NeoConfig.userDataObj.otherYahooMboxes.otherYahooMboxesTotal,g=NeoConfig.userDataObj.otherYahooMboxes.yMbox,j=[];for(var a=0;a<X;a++){var h={menuText:g[a].email,actionType:"customEvent",actionData:"bizmail|"+a,highlightDisable:true,isDisabled:false};j.push(h);}b.push(j);}k.fire("ucs:userMenuItems",{"menuGroups":b,reset:true});L=true;d.omModifiedHeaderMenuFlag=false;}},Q);A.Global.on("ucs:userMenuItemClick",function(X){var W=X.actionData.split("|");G.handleUHMenus({dataAction:W[0],uh2Args:W});});A.Global.once("ucs:helpMenuShow",function(W){Q.setUh2Dropdown(Q,"_shared_module_offscreen_bin_menus_help",G.getHelpMenuObj,"ucs:helpMenuItems");});A.Global.on("ucs:helpMenuItemClick",function(W){switch(W.actionData){case"newfeature":case"blog":case"help":A.fire("darlaEvent",{action:"help_dd_click_"+W.actionData});break;case"link":break;default:G.handleUHMenus({dataAction:W.actionData});}});A.Global.once("ucs:helpDebugMenuShow",function(W){A.use("mail-debug",function(Z){Q.setUh2Dropdown(Q,"_shared_module_offscreen_bin_menus_debug",Z.mail.Debug.getDebugMenuObj,"ucs:helpDebugMenuItems");if(NeoConfig.isInternalIP!==1){var X=Z.one("#yuhead-help-panel");X.removeChild(X._node.lastChild);}});});A.Global.on("ucs:helpDebugMenuItemClick",function(W){A.use("mail-debug",function(X){X.mail.Debug.handleDebugOption({dataAction:W.actionData});});});A.Global.on("ucs:utilityMenuShow",function(W){if(Q.omModifiedOptionsMenuFlag||!M){Q.setUh2Dropdown(Q,"_shared_module_offscreen_bin_menus_options",G.getOptionsMenuObj,"ucs:utilityMenuItems",{omOptionsMenuObj:Q.omOptionsMenuObj});Q.omModifiedOptionsMenuFlag=false;M=true;}});A.Global.on("ucs:utilityMenuItemClick",function(W){G.handleUHMenus({dataAction:W.actionData});});A.Global.on("ucs:logoDebug",function(W){G.showDialogBox({altKey:true,preventDefault:function(){}});});if(NeoConfig.isBizmail=="1"){var J=A.one("#yuhead-me-signout");if(J){J.on("click",function(){A.Cookie.remove("YM.BM",{path:"/",domain:"yahoo.com"});});}}}else{if(A.one("#greeting")){var S=(NeoConfig.isBizmail=="1")?F.escapeHtml(B.get("userSendPref.defaultFromAddress")):F.escapeHtml(B.get("userSendPref.defaultFromName"));if(S){var U=S.split(" "),V=B.get("userSendPref.loggedInAlias"),R=A.one("#greeting").get("innerHTML"),P=U.length;if(P>0){O=U.splice(0,P>1?P-1:P);if(strings.str_tog_showFirstAsFriendlyName){R=R.replace(V,O.join(" "));}else{R=R.replace(V,U[0]);}A.one("#greeting").set("innerHTML",R);}}}A.once("click",Q.showHelpMenu,"#btn-help",Q);A.once("click",Q.showHeaderMenu,"#btn-uh-account",Q);A.once("click",Q.showOptionsMenu,"#btn-options",Q);if(A.one("#btn-external-links")){var K=NeoConfig.partnerType;var T=(K)?C[K]:C["default"],N="#menu-"+((K)?K+"-":"")+"external-links";A.once("click",Q.showExternalLinksMenu,"#btn-external-links",Q,T,"#btn-external-links",N);}A.on("click",G.showDialogBox,"#ymail-image",Q);A.on("menu:config",Q.setHeaderMenuConfig,Q);if(strings.str_cfg_tog_showMobilizer){A.on("click",Q.showMobilizer,"#mobilizer",Q);}}this.rendered=1;A.fire("header:rendered");},setOMSearch:function(K){var J=ucs.UhSearchInterface.setVertSearchBtnText;if(!K.mode||K.mode==="default"){J(strings.str_uh_searchmail);}else{J(K.searchLabel);}},setUh2Username:function(){if(NeoConfig.isBizmail){var J=F.escapeHtml(B.get("userSendPref.defaultFromAddress"));A.Lang.later(0,null,function(){var K=new A.EventTarget();K.publish("ucs:userNameChange",{broadcast:2,emitFacade:true});K.fire("ucs:userNameChange",{username:J});});}},setUh2MenuConfig:function(K,J,L){var L=L||this;switch(K.id){case"btn-uh-account":L.omModifiedHeaderMenuFlag=true;L.omMenuObj=J;L.setUh2OpiStatus(K.icon["class"].substr(5));break;case"btn-options":L.omModifiedOptionsMenuFlag=true;L.omOptionsMenuObj=J;break;}},setUh2OpiStatus:function(J){var K=new A.EventTarget();K.name="ucs";K.publish("ucs:opiUpdateStatus",{broadcast:2,emitFacade:true});K.fire("ucs:opiUpdateStatus",{"opiStatus":J});},setUh2Dropdown:function(N,M,K,L,J){J=J||{};A.use(M,function(S){var P=S.ui.Templates[M],R=K(P,J),O=E(P.base,R,{},null,strings);var T=N.getMenuGroupsFromMarkup(O);var Q=new S.EventTarget();Q.publish(L,{broadcast:2,emitFacade:true});Q.fire(L,{menuGroups:T,reset:true});});},getMenuGroupsFromMarkup:function(Y){var M=/<ul(.*?)<\/ul>/gm,Q=/<li(.*?)<\/li>/gm,L=/data-action=(.)(.*?)\1.*?>\s*<a\s*href=(.)(.*?)\3\s*title=(.)(.*?)\5\s*>(.*?)<\/a>/,R=/data-action=(.)(.*?)\1.*?>\s*<a\s*href=(.)(.*?)\3\s*>(.*?)<\/a>/,P,Z,T,U,W,S=[];
while(P=M.exec(Y)){U=P[0];var N=[];while(Z=Q.exec(U)){W=Z[0];T=L.exec(W)||R.exec(W);if(T){var O=T[2],K=T[4],V=((T.length==8)&&T[6])||"",X=T[T.length-1],J={menuText:X};switch(O){case"newfeature":case"blog":case"help":case"link":J.actionType="link";J.url=K;J.target="_blank";break;default:J.actionType="customEvent";break;}J.actionData=O;N.push(J);}}!A.common.Utils.isEmpty(N)&&S.push(N);}return S;},showHelpMenu:function(K){function J(L){L.preventDefault();}J(K);A.use("common-ui-menu-helper",function(N){var L=N.one("#btn-help"),M=N.common.ui.MenuHelper;M.createLoadingMenu(L);N.use("comms-ui-menu-base","_shared_module_offscreen_bin_menus_help",function(U){U.on("click",J,"#btn-help");var T,Q,R=U.ui.Templates._shared_module_offscreen_bin_menus_help,S=G.getHelpMenuObj(R),P=E(R.base,S,{},null,strings);function O(V){U.fire("darlaEvent",{action:"help_dd_click"});if((V.ctrlKey||V.metaKey)&&V.shiftKey){U.use("mail-debug",function(W){W.mail._debugMenu(O);});}else{if(T){Q.call(T);}else{L.menu=null;M.create(L,{menu:P,cbafter:1},function(){T=L.menu;Q=T.show;T.show=O;U.one("#menu-help").on("menuSelected",G.handleUHMenus,G);});}}}O(K);});});},showOptionsMenu:function(K){var L=this;function J(M){M.preventDefault();}J(K);A.use("common-ui-menu-helper",function(O){var M=O.one("#btn-options"),N=O.common.ui.MenuHelper;N.createLoadingMenu(M);O.use("_shared_module_offscreen_bin_menus_options",function(T){T.on("click",J,"#btn-options");var S,Q,R=T.ui.Templates._shared_module_offscreen_bin_menus_options;function P(X){T.fire("darlaEvent",{action:"help_dd_click"});if(S){if(L.omModifiedOptionsMenuFlag){var W=G.getOptionsMenuObj(R,{omOptionsMenuObj:L.omOptionsMenuObj}),U=E(R.base,W,0,0,strings),V=S.getMenuNode();V.setContent(T.Node.create(U).get("innerHTML"));L.omModifiedOptionsMenuFlag=false;S.setAriaAttrs(V);}Q.call(S);}else{var W=G.getOptionsMenuObj(R,{omOptionsMenuObj:L.omOptionsMenuObj}),U=E(R.base,W,0,0,strings);M.menu=null;N.create(M,{menu:U},function(){S=M.menu;Q=S.show;S.show=P;T.one("#menu-options").on("menuSelected",G.handleUHMenus);});}}P(K);});});},showHeaderMenu:function(K){var L=this;function J(M){M.preventDefault();}J(K);A.use("common-ui-menu-helper",function(O){var M=O.one("#btn-uh-account"),N=O.common.ui.MenuHelper;N.createLoadingMenu(M);O.use("comms-ui-menu-base","_shared_module_offscreen_bin_menus_uh_account",function(P){P.on("click",J,"#btn-uh-account");var V,Q,R,X,S,T=P.ui.Templates._shared_module_offscreen_bin_menus_uh_account;S={email_id:function(){if(NeoConfig.userDataObj&&NeoConfig.userDataObj.otherYahooMboxes&&NeoConfig.userDataObj.otherYahooMboxes.otherYahooMboxesTotal){return B.get("userSendPref.defaultID");}return B.get("userSendPref.loggedInAlias");},opi:function(){return"";},bizmail:function(){if(NeoConfig.userDataObj&&NeoConfig.userDataObj.otherYahooMboxes&&NeoConfig.userDataObj.otherYahooMboxes.otherYahooMboxesTotal){return E(T.bizmail,null,S,null,strings);}return false;},bizmail_items:function(){var Y="",c=NeoConfig.userDataObj.otherYahooMboxes.otherYahooMboxesTotal,b=NeoConfig.userDataObj.otherYahooMboxes.yMbox,Z,a;for(a=0;a<c;a++){Z={"label":b[a].email,"data_index":""+a};Y+=E(T.bizmail_items,null,null,null,Z);}return Y;}};X=E(T.base,T,S,null,strings);R=D(X);P.one("body").append(R);M.before("mousedown",W);function U(){if(L.omModifiedHeaderMenuFlag){var Z=R.one(".opi"),Y=R.all(".opi_signout");if(Z){Z.remove();}if(Y){Y.remove();}R.insert(L.createOpiMenu(L),R.one("ul"));if(M.menu){M.menu.setAriaAttrs(R);}L.omModifiedHeaderMenuFlag=false;W();}if(Q){V.call(Q);}else{M.menu=null;P.common.ui.MenuHelper.create(M,{menu:R},function(){Q=M.menu;V=Q.show;Q.show=U;P.one("#menu-uh-account").on("menuSelected",G.handleUHMenus,G);});}}function W(){var Z=R.one(".opi .active"),a=R.one(".opi_signout li"),Y;if(a){Y=a.one("a");if(Z){a.removeClass("disabled");Y.removeAttribute("aria-disabled");}else{a.addClass("disabled");Y.set("aria-disabled",true);}}}U(K);});});},showExternalLinksMenu:function(L,K,N,M){function J(O){O.preventDefault();}J(L);A.use("comms-ui-menu-base","common-ui-menu-helper",K,function(V){V.on("click",J,N);var U,S,R=V.one(N),P,T,Q;if(N==="#btn-external-links"){T=V.ui.Templates[K];Q={is_bizmail:function(W){return(NeoConfig.isBizmail=="1")?E(W.is_bizmail,null,null,null,strings):"";}};}P=E(T.base,T,Q,null,strings);function O(){if(U){S.call(U);}else{R.menu=null;V.common.ui.MenuHelper.create(R,{menu:P},function(){U=R.menu;S=U.show;U.show=O;V.one(M).on("menuSelected",G.handleUHMenus);});}}O(L);});},showMobilizer:function(J){J.preventDefault();A.use("mobilizer",function(){YMobilizer.load({app:"mail.new",lang:NeoConfig.lang,proxy:NeoConfig.launch_protocol+window.location.host+"/neo/mobilizer_proxy.html"});});},setHeaderMenuConfig:function(K,J,L){var L=L||this;switch(K.id){case"btn-uh-account":L.omModifiedHeaderMenuFlag=true;L.omMenuObj=J;L.updateHeaderOpiIcon(K.icon["class"]);break;case"btn-options":L.omModifiedOptionsMenuFlag=true;L.omOptionsMenuObj=J;break;}},createOpiMenu:function(N){var K;var L=N.omMenuObj.length,M=A.ui.Templates._shared_module_offscreen_bin_menus_uh_account,J={opi_items:function(){var Q=[];for(var P=0;P<L;P++){var O=N.omMenuObj[P];if(O["icon"]["class"]!="signout"&&O["data_action"].search("offline")==-1){Q.push(E(M.opi_items,{"data_action":O["data_action"],"opi_class":O["icon"]["class"],"selected":O["selected"]?"active":"","checked":O["selected"]?"true":"false","label":O["label"]||""},null,null,strings));}}return Q.join("");},opi_signout:function(){var Q=[];for(var P=0;P<L;P++){var O=N.omMenuObj[P];if(O["icon"]["class"]=="signout"||O["data_action"].search("offline")>0){Q.push(E(M.opi_signout,{"data_action":O["data_action"],"opi_class":O["icon"]["class"],"selected":O["selected"]?"active":"","label":O["label"]||""},null,null,strings));}}return Q.join("");}};K=E(M.opi,null,J,null,strings);return K;},updateHeaderOpiIcon:function(K){if(K){var J=A.one("#btn-uh-account");J.set("className","opi menu "+K);}}},true);A.namespace("mail.ui.Header");A.mail.ui.Header=new I();A.namespace("test.Header");
A.mix(A.test.Header,{headerObj:A.mail.ui.Header,setUh2MenuConfig:A.mail.ui.Header.setUh2MenuConfig,getOmMenuObj:function(){return A.mail.ui.Header.omMenuObj;},setUh2OpiStatus:A.mail.ui.Header.setUh2OpiStatus,setUh2Dropdown:A.mail.ui.Header.setUh2Dropdown,getMenuGroupsFromMarkup:A.mail.ui.Header.getMenuGroupsFromMarkup,getHelpMenuObj:G.getHelpMenuObj,getOptionsMenuObj:G.getOptionsMenuObj,showHelpMenu:A.mail.ui.Header.showHelpMenu,showOptionsMenu:A.mail.ui.Header.showOptionsMenu,showExternalLinksMenu:A.mail.ui.Header.showExternalLinksMenu,showDialogBox:G.showDialogBox,showMobilizer:A.mail.ui.Header.showMobilizer,handleUHMenus:G.handleUHMenus,setHeaderMenuConfig:A.mail.ui.Header.setHeaderMenuConfig,createOpiMenu:A.mail.ui.Header.createOpiMenu,updateHeaderOpiIcon:A.mail.ui.Header.updateHeaderOpiIcon,optOutredirect:G.optOutredirect,openOptOutDialog:G.openOptOutDialog,switchToBizmailAcct:G.switchToBizmailAcct});},"1.0.0",{requires:["mail-ui-header-base","mail-ui-header-utils","common-utils","common-persist-user-data"]});

YUI.add("mail-ui-header-base",function(A){var B=function(){};B.prototype={render:function(){},bindUI:function(){}};A.namespace("mail.ui.HeaderBase");A.mail.ui.HeaderBase=B;},"1.0.0");

YUI.add("mail-ui-header-utils",function(E){var B=E.common.Utils.substitute,C=E.Node.create,A=E.common.persist.UserData,D=E.common.Utils;var F={getHelpMenuObj:function(G){var H={send_feedback_menu:strings.str_tog_sendFeedbackEnabled?G.send_feedback_menu:"",report_problem_url:NeoConfig.reportURL,report_problem:NeoConfig.strings.reportProblem,upgrade:(strings.str_cfg_tog_mailUpgradeEnabled&&NeoConfig.isBizmail!="1")?G.upgrade:"",ads:strings.str_cfg_tog_aboutOurAdsEnabled?G.ads:"",copyright:strings.str_cfg_tog_disableCopyrightLink?"":G.copyright,blog:strings.str_cfg_tog_mailBlogEnabled?G.blog:"",tos_url:"atos",kbshortCuts:G.kbshortCuts,return_to_original:NeoConfig.hideReturnLink!="1"?G.return_to_original:"",switch_to_full:NeoConfig.low_bandwidth?G.switch_to_full:"",full_mail_url:"/neo/launch?full=1",new_feature_url:NeoConfig.newFeatureURL};H.hide_help_ul=H.send_feedback_menu||H.return_to_original||H.switch_to_full?"":G.hide_help_ul;return H;},getOptionsMenuObj:function(K,G){var J=G.omOptionsMenuObj,L={},H,I={url_minty_options:"#",url:K.url,themes:strings.str_cfg_tog_showThemeOption?K.themes:"",om_options:""};if(J){for(H=0;H<J.length;H++){L={data_action:J[H].data_action,title:J[H].title,label:J[H].label,id:J[H].id};I.om_options+=D.substitute(K.om_options,L,0,0,strings);}}return I;},showDialogBox:function(H){H.preventDefault();if(H.altKey){if(typeof NeoConfig=="undefined"){return;}var G=["Neo Version: \n","Build number: ",NeoConfig.buildNumber,"\n","Build time: ",NeoConfig.buildTime,"\n \n","Hostname: ",NeoConfig.hostName||window.location.hostname];E.use("common-ui-dialog-helper",function(J){var I=J.common.ui.DialogHelper;I.alert({modal_classes:"lg",hd:"Version",bd:"<pre>"+G.join("")+"</pre>"+'<div><img src="http://mail.yimg.com/nq/j/fluffy3.gif" style="height:347px;width:520px;" /></div>'});});}else{yui.fire("openInbox");}},handleUHMenus:function(I,H){var J=H||this;switch(I.dataAction){case"newfeature":case"blog":case"help":E.fire("darlaEvent",{action:"help_dd_click_"+I.dataAction});case"link":break;case"options":E.fire("openOptions",this);break;case"kbshortcuts":E.use("mail-ui-shortcuts-dialog",function(K){K.mail.ui.ShortcutsDialog.show();});break;case"modal":E.use("modal_css",function(){J.openOptOutDialog();});break;case"themes":E.use("mail-ui-themes",function(K){K.mail.ui.Themes.showThemesDialog();});break;case"bizmail":var G=(I.uh2Args&&I.uh2Args[1])||I.item._node.getAttribute("data-index");J.switchToBizmailAcct(G);break;default:if(I.dataAction.match(/^om:(.*):(.*):(.*)$/)){E.use("om-common-utils",function(K){K.om.common.Utils.fireEvent(I.dataAction);});}}},optOutredirect:function(N){var O=N.get("contentBox"),R=O.all("input"),I=O.one("textarea"),J=null,K=[];for(var L=0;L<R.size();L++){J=R.item(L);if(J.get("checked")){K.push(J.getAttribute("id")+"=true");}}J=I;K.push("additionalFeedback="+J.get("value"));var Q="http:";if(NeoConfig.secure_cascade=="1"){Q=NeoConfig.secure_cascade_protocol;}var G=Q+"//"+window.location.host+window.location.pathname;var H=G.indexOf("/",(G.indexOf(window.location.host)+window.location.host.length+2));var P=G.substring(0,H)+"/optOut";K.push("ncrumb="+NeoConfig.ncrumb);if(NeoConfig.secure_cascade_url_param!=""){K.push("ssl="+NeoConfig.secure_cascade_url_param);}P+="?"+K.join("&");try{document.location.replace(P);}catch(M){}},openOptOutDialog:function(){E.use("comms-ui-dialog-base","_shared_module_offscreen_bin_modal_kiosk_mail_preview_rollup",function(J){var I=J.ui.Templates._shared_module_offscreen_bin_modal_kiosk_mail_preview_rollup,G=B(I.base,null,null,null,strings);var H=new J.comms.ui.Dialog({template:G,centered:true,cssPrefix:"modal"});H.get("contentBox").on("click",function(L){var M=J.common.Utils.getDataAction(L),K=M.action;if(K){L.preventDefault();switch(K){case"continue":J.mail.ui.headerUtils.optOutredirect(H);break;case"cancel":H.destroy();break;default:break;}}});H.render().show();});},switchToBizmailAcct:function(J){var L=NeoConfig.userDataObj.otherYahooMboxes.yMbox[J];var I=L.email.split("@");var K=L.isBizmail;var G={domain:I[1],sid:L.sledid,silo:L.silo,account:I[0],farm:L.farm};window.onBeforeUnloadBizMail=function(){if(K){E.Cookie.setSubs("YM.BM",G,{path:"/",domain:".yahoo.com"});}else{E.Cookie.remove("YM.BM",{path:"/",domain:"yahoo.com"});}};var H=(L.url)?L.url:"http://mail.yahoo.com";document.location.replace(H);}};E.namespace("mail.ui.headerUtils");E.mail.ui.headerUtils=F;},"1.0.0",{requires:["common-utils","common-persist-user-data"]});

YUI.add("rocket-stats",function(B){var C,A,E,I,F=B.namespace("common.Utils.rocketstats"),J=[],G;F.stat=function(N,K,M,L){if(!C&&B.one){C=1;B.one(window).on("beforeunload",unloadQ);B.one(window).on("unload",unloadQ);}if(!NeoConfig||(NeoConfig.trackRocketStat==1)){G='{"page":"'+N+'","key":"'+K+'"';if(L!==E){G+=',"intl":"'+L+'"';}if(M!==E){G+=',"value":'+M;}G+="}";J.push(G);H();}};F.intlStat=function(M,K,L){F.stat(M,K,L,true);};function H(){if(J.length>49){clearTimeout(A);D();}else{A=A||setTimeout(D,180000);}}unloadQ=F.unloadQ=function(){if(J[0]){D();start=new Date;while(new Date-start<100){}}};function D(){A=0;if(J[0]){I=new XMLHttpRequest();I.open("POST","stat");I.send(J.join("\n"));J=[];}}},"1.0.0");

YUI.add("gx-ui-galaxyview-base",function(C){C.namespace("gx.ui");var B=function(D){var H=this,G=C.one("#nav-mailboxes"),F=C.one("#custom-folders"),E=C.one("#smart-folders");B.superclass.constructor.call(H);if(D.contentToolbar){H.set("contentToolbar",D.contentToolbar);}C.gx.ui.GalaxyViewObj=H;H.updateFolderTab=function(){if(C.gx.ui.GalaxyViewObj.get("active")===0){var J=G.one("li.selected");var I=G.one("li._selected");if(!J&&F){J=F.one("li.selected");}if(!J&&E){J=E.one("li.selected");}if(!I&&E){I=E.one("li._selected");}if(!I&&F){I=F.one("li._selected");}if(!J&&I){I.replaceClass("_selected","selected");}else{if(I){I.removeClass("_selected");}}}};H.on("activeChange",function(J){if(J.newVal!==0){Neo.fid="";var I=G.one("li.selected"),K=C.one("#gx_messages a")||C.one("#pod_ruefc .pod-empty")||C.one("#pod_ruefc .pod-ruefc");if(!I&&F){I=F.one("li.selected");}if(!I&&E){I=E.one("li.selected");}if(I){I.replaceClass("selected","_selected");}K&&K.focus();if(NeoGV.injectedPods){for(podId in NeoGV.injectedPods){if(NeoGV.injectedPods[podId]){NeoGV.statQueue.push({name:"hydra",well:podId+"_shown"+NeoGV.statSuffix});}}if(NeoGV.statSuffix==="_once"){NeoGV.statSuffix="";}C.mail.ui.Workspace.processStatQueue();}else{NeoGV.nonHydraLaunch=true;}}else{C.later(200,null,H.updateFolderTab,null,false);}});H.scrolling=["#galaxyPageContainer"];};C.extend(B,C.mail.ui.BaseWidget);function A(){return;}C.mix(B.prototype,{NAME:"GalaxyView",render:A});C.gx.ui.GalaxyView=B;},"1.0.0",{requires:["mail-ui-basewidget"]});

YUI.add("mail-common-lowbandwidth",function(F){F.namespace("mail.common");F.namespace("mail.common.LowBandwidth");function C(){F.Node.one("#btn-new").setStyle("display","none");F.Node.one("#main-btn-new").addClass("right");var H=F.Node.all("#msg-preview-media-modes span").each(function(I){if(I.getAttribute("data-action")!="compose"){I.remove(true);}});var G=document.getElementById("%40C%40Chats");if(G){G.className="hidden";}E();B();}function B(H){var G=F.Node.one("#nav-applications");G&&G.setStyle("display","none");}function E(){var G=F.Node.one("#slot_LREC");G&&G.setStyle("display","none");}function D(){var I,G=NeoConfig.theme;var H=G.base+G.root+"neutral/neutral"+G.build+".css";F.Get.css(H,{onSuccess:function(K){var J=I;setTimeout(function(){if(J&&J.purge){J.purge();}I=K;},100);}});}function A(){if(F.Cookie.get("YM.NEO_LITE")===null){var H=F.common.persist.NeoData;var G=new Date();G.setDate(G.getDate()+30);F.Cookie.set("YM.NEO_LITE","1",{path:H.get("cookiePath"),domain:H.get("cookieDomain"),expires:G});}F.common.Utils.rocketstats.stat("launch","SwitchLowBandwidth");}F.mix(F.mail.common.LowBandwidth,{hideFeatures:C,hideAd:E,disableOM:B,changeTheme:D,setLWCookie:A});},"1.0.0",{requires:["node","rocket-stats"]});

YUI.add("om-controller-base",function(C){var A=C.namespace("om.Controller");A.extend=function(D){if(!A[D]){A[D]=C.clone(B);}return A[D];};var B={};},"3.0.0",{requires:[]});

YUI.add("om-controller-applicationlist",function(D){var K=D.om,L=K.Controller,W=L.extend("ApplicationList"),Z=K.common.net.session,b=K.common.Utils,B=K.model.DataStore,T=B.Registry,A=B.ApplicationList,V=D.common.net,P=D.Lang,G=D.common.Utils.rocketstats,F=V.SessionMgr,X=B.APP_FLAGS,R="YahooMailNeoOM";function E(){function Y(e){G.stat("OM","ERR:uninstallCleanup:_onFailure");}if(Math.random()>=(1/100)){return;}var c={crumb:NeoConfig.om.crumb,cleanup:1},d=Z.getBaseCallback("openmail.app.instance.uninstall",null,Y);F.request(Z.getUrlForModule(d.method),c,d,"GET",null,true);}function N(){var c=A.getAll(),Y=B.folderConfigs;B.removeList=b.getDiffList(c,Y);B.updateList=b.getDiffList(Y,c);}function a(){var f=A.getAll(),d=B.folderConfigs,h=B.removeList,c=B.updateList,g,e,Y;if(!f){return;}for(e in h){delete d[h[e]];}for(e in c){for(Y in f){g=f[Y];if(c[e]===g.app){d[g.app]={app:g.app,instance:g.instance,label:g.label,tooltip:g.tooltip||"",image_url:g.image_url||"",status:g.status,count:-1,subFolders:[]};break;}}}}function M(d){var Y={},c=d.split(",");D.Array.each(c,function(e){e=e.split(":");if(e.length===2){Y[e[0]]=e[1];}});return Y;}function O(){if(window.om&&D.Object.getValue(om,["appProfile","data","length"])){D.Array.each(window.om.appProfile.data,function(Y){if(Y.value){B.currentProfile[Y.extensionId+"."+Y.instanceId]=M(Y.value);}});}}function I(){function e(h){var j=(h.fault?h.fault:h.body.error)||{},i=j.code;i=(!i||Z.isHttpError(i))?h.status+"":i;G.stat("OM","ERR:getAppVer:"+i);B.currentVersions=[];S();}function Y(j){var l=j.body?j.body.error:j.fault;if(l){e(j);return;}var n={},h,m,k=j.body.result.data;for(m in k){h=parseInt(k[m].value,10);n[k[m].extensionId+"."+k[m].instanceId]=isNaN(h)?0:h;}B.currentVersions=n;S();}function d(){var l,n,m,k=[],o,h,j="/ws/mailPreferences/v1/jsonrpc";for(l in f){n=f[l].instance.split(".");k.push({key:"_CG_ver",extensionId:n[0],instanceId:n[1]});}m={method:"GetExtensionData",params:[{query:k}],id:"123456789"};o={success:Y,failure:e,responseType:"json",exceptCodes:[401,402,999],suppressCodes:["*"]};h=F.request(j,D.JSON.stringify(m),o,"POST");h.addUrlParam("appid",R);h.send();}var f=A.getAll(),c=D.mail.ui.Workspace.get("cascadeReady"),g;if(!f||f.length===0){return;}if(window.om&&D.Object.getValue(om,["appVersion","data","length"])){g={body:{result:window.om.appVersion}};Y(g);return;}if(c){d();}else{D.once("securecascade:ready",d);}}function Q(c){function h(i){}function l(i){}if(c.length===0){return;}var e,d,j=[],f,k,m,g,Y="/ws/mailPreferences/v1/jsonrpc";for(g in c){e=c[g];d=P.isString(e.value)?e.value:D.JSON.stringify(e.value);j.push({key:"_CG_ver",value:d,extensionId:e.extensionId,instanceId:e.instanceId,version:0,expiration:0});}f={method:"SetExtensionData",params:[{setdata:j}],id:"123456789"};k={success:l,failure:h,responseType:"json",suppressCodes:["*"],exceptCodes:[401,402,999]};m=F.request(Y,D.JSON.stringify(f),k,"POST");m.addUrlParam("appid",R);m.send();}function C(){var g=A.getAll(),h=B.removeList,c=B.updateList,f,e,d,Y;for(d in h){T.del(h[d]);}for(d in c){f=c[d];for(Y in g){e=g[Y];if(f===e.app){T.set(f,e);break;}}}}function H(s){var o=A.getAll(),e=B.ApplicationConfig.getAll(),p={},n={},h,t,q=[],d,y,x,w=[],v=[],k=[],z=NeoConfig.om.isSandboxEnabled,g=T.isSandbox,u,j,AA,l,f,r,m,Y,c;p=b.convertArrayIndex(e,"app");for(t in o){h=o[t].app;x=o[t].instance;if(p[h]){m=B.Loading.isLoading()?D.merge(p[h],o[t]):D.merge(o[t],p[h]);if(P.isString(m.omprofile)){Y=M(m.omprofile);m.omprofile=Y;if(!B.Loading.isLoading()){c=o[t].main_id;x=c?c+"."+x.split(".")[1]:x,B.currentProfile[x]=Y;}}A.set(t,m);n[h]=o[t];}}a();C();for(h in n){x=n[h].instance;d=n[h].version;y=B.currentVersions[x]||0;if(n[h].needsAck){continue;}if(d>y){B.currentVersions[x]=d;x=x.split(".");q.push({value:d,extensionId:x[0],instanceId:x[1]});}else{if(d<y){G.stat("OM","ERR:version_toolarge:"+h);delete n[h];}}}if(q.length>0){Q(q);}for(h in n){if(!T.isSick(h)&&(u=n[h])&&(j=u.config)&&(AA=j.events)&&(!u.needsAck||(u.needsAck&&T.isNoDisclaimer(h)))){if((l=AA.load)&&l.action&&(z||!g(h))){w.push(u);}if(NeoConfig.hydra&&AA.whatsnew){k.push(u);}if(z&&T.isPreload(h)&&(f=AA.message_read)&&(r=f.action)&&r.launch&&r.launch.target_zone&&(r.launch.target_zone=="hidden")){v.push(u);}}}if((w.length>0)||(v.length>0)){D.use("om-controller-views",function(i){for(t in w){b.log("LOAD event: launching '"+w[t].name+"'");L.Views.runActions(w[t],"events","load",null,null,null,null,true);}for(t in k){b.log("WHATSNEW event: launching '"+k[t].name+"'");L.Views.runActions(k[t],"events","whatsnew",null,null,null,null,true);}for(t in v){b.log("ONREAD: PRELOAD: launching '"+v[t].name+"'");L.Views.runActions(v[t],"events","message_read",null,null,null,null,true);}});}if(s&&P.isFunction(s)){s(true);}if(B.Loading.isLoading()){B.Loading.set(false);D.later(5000,this,E);}}function S(m){function v(i){a();D.fire("om:updateFolders");if(m){m(0);}}function k(j){var x=j.body,p,w;if(!x){v(j);return;}for(p in x){try{if(P.isString(x[p].config)){x[p].config=D.JSON.parse(x[p].config);}}catch(w){G.stat("OM","ERR:Config_Invalid:"+x[p].app);x[p].config={};}}B.ApplicationConfig.setAll(x);H();if(m){m(1);}}var o=A.getAll(),Y=B.updateList,t=B.currentVersions,u=false,c=[],l=[],h,e,s,d,g,r,q,n,f;for(r in Y){d=Y[r];for(q in o){s=o[q];if(d===s.app){g=t[s.instance]?t[s.instance]:(s.version?parseInt(s.version):0);c.push(d+"_"+g);u=true;break;}}}c=c.sort();for(r in c){n=c[r].split("_");l.push("app."+n[0]);if(n.length>1){l.push("ver."+n[1]);}}if(u){h=Z.getBaseCallback("openmail.app.list",k,v);h.cache=true;f=[Z.getUrlForModule(h.method),".lang.",NeoConfig.lang,".intl.",NeoConfig.om.intl,".",l.join(".")].join("");D.common.net.SessionMgr.request(f,null,h,"GET",null,true);}else{e={body:[]};k(e);}}function U(){function c(f){a();D.fire("om:updateFolders",undefined,true);}function Y(f){if(!f.body){c(f);return;}if(P.isArray(f.body)){A.setAll(f.body);}else{A.setAll(f.body.apps,f.body.spriteURL);}if(NeoConfig.om&&!NeoConfig.om.isMiMEnabled){var h=A.getAll();for(var g=0;g<h.length;
){if(T.isMessenger(h[g].app)){h.splice(g,1);}else{g++;}}}N();I();O();}var d,e;if(!window.om||!window.om.appData||(P.isArray(window.om.appData)&&!window.om.appData.length)||(window.om.appData.apps&&!window.om.appData.apps.length)){d={"crumb":NeoConfig.om.crumb,".intl":NeoConfig.om.intl,".lang":NeoConfig.lang};e=Z.getBaseCallback("openmail.app.instance.list",Y,c);F.request(Z.getUrlForModule(e.method),d,e,"GET",null,true);}else{Y({body:window.om.appData});}}function J(){B.Loading.set(true);U();}D.mix(W,{loadApplication:J,updateAddRemoveList:N,mergeApplicationConfigs:H,getApplicationConfigs:S,updateFolderConfig:a,parseOmProfile:M},true);},"1.0.0",{requires:["om-controller-base","om-common-net-session","om-model-datastore","rocket-stats"]});

YUI.add("om-common-net-session",function(F){F.namespace("om.common.net");var D=F.common.net,B=D.Error,A=D.SessionMgr,E=F.Lang,C={"100":[100,false,"",2],"200":[100,false,"",2],"201":[100,false,"",2],"202":[100,false,"",2],"203":[100,false,"",2],"300":[100,false,"",2],"301":[100,false,"",2],"302":[100,false,"",2],"400":[100,false,"",2],"401":[100,false,"",2],"408":[100,false,"",2],"409":[100,false,"",2],"410":[100,false,"",2],"500":[100,false,"",2],"503":[100,false,"",2],"504":[100,false,"",2],"506":[100,false,"",2],"507":[100,false,"",2],"510":[100,false,"",2],"600":[100,false,"",2],"604":[100,false,"",2],"1101":[100,false,"",2],"1102":[100,false,"",2],"1201":[100,false,"",2],"1204":[100,false,"",2],"1301":[100,false,"",2],"1303":[100,false,"",2],"1401":[100,false,"",2],"1402":[100,false,"",2],"1403":[100,false,"",2]};F.om.common.net.session=function(){var H={getUrlForModule:function(I){return"/om/api/1.0/"+I;},getBaseCallback:function(L,I,K){var J=H.session,M={service:"om",responseType:"json",formatter:J.formatResponse,success:J.callback,failure:J.callback,method:L,suppressWssid:true,suppressCodes:["*"],suppressLogs:["*"],timeout:5000,args:{success:I,failure:K}};return M;},formatResponse:function(J,K){var L=K.status,N=K.callback,M;switch(L){case 200:break;case 500:var I=K.body;if(I){K.fault=H.makeFault(I.status,I.message,I.context);}else{K.fault=H.makeFault(L.toString(),B.http);}break;default:K.fault=H.makeFault(L.toString(),B.http);}},getErrorMap:function(J,I){if(J==null||I==null||!E.isString(J)||!E.isString(I)){return{};}return C[I]||{};},isHttpError:B.isHttp,makeFault:A.makeFaultObject};H.session={formatResponse:function(I,J){H.formatResponse(I,J);},callback:function(I){if(I.fault){H.session.handleFailure(I);}else{var J=I.callback.args;if(E.isFunction(J.success)){J.success.apply(null,[I,J]);}}},handleFailure:function(N){var K=E.trim(N.getResponseHeader("crumb")),O,I,M;if(K){O=N.request;I=O.url;M=O.urlparams||{};if(O&&I){if(O.mthd=="GET"){M["crumb"]=K;}else{I=O.url.replace(/crumb=([^&]*)/,"crumb="+K);M=O.post;}NeoConfig.om.crumb=K;F.fire(F.om.common.Utils.getEventName("","crumb.update"),{"crumb":K});A.request(I,M,N.callback,O.mthd,O.enc,true);return;}}var P=N.fault||{},T=P.message,R=!P.code||H.isHttpError(P.code)?N.status+"":P.code,L=(P.detail&&P.detail.operation)?P.detail.operation:"",S=H.getErrorMap(T,R),J=S[1]||false,Q=N.callback.args;if(E.isFunction(Q.failure)){Q.failure.apply(null,[N,Q]);}}};function G(N,O,M){if(M.callback&&M.callback.service=="om"){var K,L=M.fault.code,J=M.status,I=!(J==401||J==402||J==302||J==13030);if(L==1401){N.callDefault(402);}return I;}}B.onError(G);return H;}();},"1.0.0",{requires:["event-custom","common-utils","common-net-session","common-net-sessionmgr","om-common-utils"]});

YUI.add("om-common-errors",function(A){A.namespace("om.common.Errors");A.mix(A.om.common.Errors,{ERR_NONE:0,ERR_BAD_ARG:1,ERR_DEPRECATED:2,ERR_DELETED:3,ERR_XFRAME:4,ERR_UNSUPPORTED_BY_HOST:5,ERR_VIEW_NOT_FOUND:1000,ERR_INVALID_TARGET:1001,ERR_VIEW_EXISTS:1002,ERR_NOT_ATTACHMENT_URL:1003,ERR_SET_DATA:1004,ERR_GET_DATA:1005,ERR_KEY_NOT_SET:1006,ERR_KEY_EXPIRED:1007,ERR_KEY_FAILURE:1008,ERR_KEY_INVALID:1009,ERR_REMOVE_DATA:1010,ERR_VALIDATION_FAILURE:2000,ERR_AUTH:3000,ERR_FLASH_REQUIRED:3001,ERR_FLASH_ERR:3002,ERR_FLASH_LAUNCH_ERR:3003,ERR_API_UNAVAILABLE:3004,ERR_UNDEFINED:-1});},"1.0.0");

YUI.add("om-common-utils",function(F){F.namespace("om.common.Utils");var C=F.om.common.Utils,A=F.common.Utils,E=F.Lang;var D=(function(){var G={};return function(H){return G[H]?G[H]:G[H]=C.md5(NeoConfig.om.crumb+H);};})();function B(){var S=0,G="",O=8;function P(U){return T(K(H(U),U.length*O));}function K(j,Z){var k;k=Z>>5;j[k]|=128<<((Z)%32);k=(((Z+64)>>>9)<<4)+14;j[k]=Z;var h=1732584193,g=-271733879,f=-1732584194,e=271733878,W,Y,X,V,U;for(W=0;W<j.length;W+=16){Y=h;X=g;V=f;U=e;h=N(h,g,f,e,j[W+0],7,-680876936);e=N(e,h,g,f,j[W+1],12,-389564586);f=N(f,e,h,g,j[W+2],17,606105819);g=N(g,f,e,h,j[W+3],22,-1044525330);h=N(h,g,f,e,j[W+4],7,-176418897);e=N(e,h,g,f,j[W+5],12,1200080426);f=N(f,e,h,g,j[W+6],17,-1473231341);g=N(g,f,e,h,j[W+7],22,-45705983);h=N(h,g,f,e,j[W+8],7,1770035416);e=N(e,h,g,f,j[W+9],12,-1958414417);f=N(f,e,h,g,j[W+10],17,-42063);g=N(g,f,e,h,j[W+11],22,-1990404162);h=N(h,g,f,e,j[W+12],7,1804603682);e=N(e,h,g,f,j[W+13],12,-40341101);f=N(f,e,h,g,j[W+14],17,-1502002290);g=N(g,f,e,h,j[W+15],22,1236535329);h=J(h,g,f,e,j[W+1],5,-165796510);e=J(e,h,g,f,j[W+6],9,-1069501632);f=J(f,e,h,g,j[W+11],14,643717713);g=J(g,f,e,h,j[W+0],20,-373897302);h=J(h,g,f,e,j[W+5],5,-701558691);e=J(e,h,g,f,j[W+10],9,38016083);f=J(f,e,h,g,j[W+15],14,-660478335);g=J(g,f,e,h,j[W+4],20,-405537848);h=J(h,g,f,e,j[W+9],5,568446438);e=J(e,h,g,f,j[W+14],9,-1019803690);f=J(f,e,h,g,j[W+3],14,-187363961);g=J(g,f,e,h,j[W+8],20,1163531501);h=J(h,g,f,e,j[W+13],5,-1444681467);e=J(e,h,g,f,j[W+2],9,-51403784);f=J(f,e,h,g,j[W+7],14,1735328473);g=J(g,f,e,h,j[W+12],20,-1926607734);h=R(h,g,f,e,j[W+5],4,-378558);e=R(e,h,g,f,j[W+8],11,-2022574463);f=R(f,e,h,g,j[W+11],16,1839030562);g=R(g,f,e,h,j[W+14],23,-35309556);h=R(h,g,f,e,j[W+1],4,-1530992060);e=R(e,h,g,f,j[W+4],11,1272893353);f=R(f,e,h,g,j[W+7],16,-155497632);g=R(g,f,e,h,j[W+10],23,-1094730640);h=R(h,g,f,e,j[W+13],4,681279174);e=R(e,h,g,f,j[W+0],11,-358537222);f=R(f,e,h,g,j[W+3],16,-722521979);g=R(g,f,e,h,j[W+6],23,76029189);h=R(h,g,f,e,j[W+9],4,-640364487);e=R(e,h,g,f,j[W+12],11,-421815835);f=R(f,e,h,g,j[W+15],16,530742520);g=R(g,f,e,h,j[W+2],23,-995338651);h=L(h,g,f,e,j[W+0],6,-198630844);e=L(e,h,g,f,j[W+7],10,1126891415);f=L(f,e,h,g,j[W+14],15,-1416354905);g=L(g,f,e,h,j[W+5],21,-57434055);h=L(h,g,f,e,j[W+12],6,1700485571);e=L(e,h,g,f,j[W+3],10,-1894986606);f=L(f,e,h,g,j[W+10],15,-1051523);g=L(g,f,e,h,j[W+1],21,-2054922799);h=L(h,g,f,e,j[W+8],6,1873313359);e=L(e,h,g,f,j[W+15],10,-30611744);f=L(f,e,h,g,j[W+6],15,-1560198380);g=L(g,f,e,h,j[W+13],21,1309151649);h=L(h,g,f,e,j[W+4],6,-145523070);e=L(e,h,g,f,j[W+11],10,-1120210379);f=L(f,e,h,g,j[W+2],15,718787259);g=L(g,f,e,h,j[W+9],21,-343485551);h=M(h,Y);g=M(g,X);f=M(f,V);e=M(e,U);}return Array(h,g,f,e);}function I(Z,W,V,U,Y,X){return M(Q(M(M(W,Z),M(U,X)),Y),V);}function N(W,V,e,Z,U,Y,X){return I((V&e)|((~V)&Z),W,V,U,Y,X);}function J(W,V,e,Z,U,Y,X){return I((V&Z)|(e&(~Z)),W,V,U,Y,X);}function R(W,V,e,Z,U,Y,X){return I(V^e^Z,W,V,U,Y,X);}function L(W,V,e,Z,U,Y,X){return I(e^(V|(~Z)),W,V,U,Y,X);}function M(U,X){var W=(U&65535)+(X&65535),V=(U>>16)+(X>>16)+(W>>16);return(V<<16)|(W&65535);}function Q(U,V){return(U<<V)|(U>>>(32-V));}function H(X){var W=Array(),V,U=(1<<O)-1;for(V=0;V<X.length*O;V+=O){W[V>>5]|=(X.charCodeAt(V/O)&U)<<(V%32);}return W;}function T(W){var V=S?"0123456789ABCDEF":"0123456789abcdef",X="";for(var U=0;U<W.length*4;U++){X+=V.charAt((W[U>>2]>>((U%4)*8+4))&15)+V.charAt((W[U>>2]>>((U%4)*8))&15);}return X;}return P;}F.mix(C,{getIFrameById:function(G){return F.one(document.getElementById(G));},getEventName:function(I,H,G){if(C.Event.isMailEvent(H)){return H;}switch(H){case"crumb.update":case"folderpane.scroll":case"mail.signout":case"browser.resize":case"themes:change":case"contacts.sendsms":case"contacts.sendim":case"contacts.changed":case"social.statuschanged":case"tab.changed":case"chats.sendim":case"chats.sendsms":case"search.input":return H;case"compose.start":case"compose.sendstart":case"compose.sendcomplete":case"compose.user_event":return H+I;case"message.read":case"subfolder.click":case"sandbox.controller":return H+I.split(".")[0];case"app.jserror":case"data.action":case"message.render":case"message.render.messageflagstatus":case"message.render.handleupdatelozenges":case"message.render.updateheight":case"messageview.resize":case"view.focus":case"view.blur":case"view.resize":case"view.unload":A.assert(G,"viewId is required for '"+H+"' event");H=H+"."+G;}return I+"."+H;},getDiffList:function(J,H){var L=[],K,G=J;if(E.isArray(J)){G={};for(K=J.length-1;K>=0;--K){G[J[K].app]=1;}}if(E.isArray(H)){for(var K=0,I=H.length;K<I;K++){if(!G[H[K].app]){L.push(H[K].app);}}}else{for(K in H){if(!G[H[K].app]){L.push(H[K].app);}}}return L;},Event:{PREFIX:"mail-event:",encodeMailEvent:function(G){return C.Event.PREFIX+G;},isMailEvent:function(G){return(G||"").indexOf(C.Event.PREFIX)==0;}},convertArrayIndex:function(I,H){var G,K,J=[];for(G in I){K=I[G];J[K[H]]=K;}return J;},escapeDots:function(G){return G.replace(/\./g,"\\.");},fireEvent:function(I){var H,G;H=I.match(/^om:(.*):(.*):(.*)$/);G=this.getEventName(H[1],"data.action",H[2]);F.fire(G,{data_action:H[3]});},compareVer:function(I,H){I=I.split(".");H=H.split(".");if(I.length!==3||H.length!==3){A.assert(false);return;}var K=0,J=0;for(var G=0;G<3;G++){K=parseInt(I[G],10);J=parseInt(H[G],10);if(K!==J){return(K>J)?1:-1;}}return 0;},tryProp:function(L,M,I){var K=M.split(".");for(var J=0,G=K.length;J<G;J++){var H=K[J];if(L!==null&&typeof L==="object"&&H in L){L=L[H];}else{return I;}}return L;},getObjSize:function(I){var G=0,H;for(H in I){if(I.hasOwnProperty(H)){G++;}}return G;},getAppSignature:D,md5:B(),onIdle:(function(){var H={};var G=0;return function(J,I){var K=G++;I=I||150;return function(){if(H[K]){H[K].cancel();}H[K]=F.later(I,this,function(){J();});};};})(),LookupList:function(){for(var G=arguments.length;G--;){this[arguments[G]]=1;}},log:(function(){var G=NeoConfig&&NeoConfig.om&&NeoConfig.om.debug,H;return function(I,J){var K;if(G){if(!H){H=F.comms.log4js.getLogger("openMailLogger");
F.use("comms-log4js-appenders-console",function(){H.useAppender("console").show();});}H.log("["+(J||"Openmail")+"] "+I);}};})(),range:function(H,I,G){return Math.max(Math.min(G,I),H);},getImageUrl:function(I,H,G){return NeoConfig.launch_protocol+NeoConfig.om.webcacheHostCom+"/om/image.appid."+I+".type."+H+".v."+G+".intl."+NeoConfig.om.intl+".lang."+NeoConfig.lang;},createLogger:function(G){return function(H){C.log(H,G);};}});},"1.0.0",{requires:["common-utils"]});

YUI.add("om-model-datastore",function(I){I.namespace("om.model");var E=I.om,C=I.Array,H=I.Object,B=I.Lang,D=E.model.DataStore={},G={NEO_SANDBOX:"Message Sandbox",QUICKREPLY:"QuickReply",FLIXY:"Flixy Browse",SHORTCUTS:"Yahoo! Shortcuts"},F={PUBLIC:1,REVOKED:2,HASPUBLISHED:8,DEVELOPER:16,MODIFIED:32,IN_DB:64,OMIT_DISCLAIMER:128,INTERNAL:256,SICK:512,IN_DEVELOPMENT:1024,UDBLESS_INSTALL:2048,CG_HIDDEN:4096,SANDBOXED:8192,SMART_FOLDER:16384,READONLY:32768,PRELOAD:65536,PERMANENT:131072,NO_GALLERY:262144,NO_APPLIST:524288,LARGE_FILER:1048576};I.mix(D,{Loading:(function(){var K=false;function A(L){K=L;if(L===false){I.fire("om:updateFolders",true);I.fire("om:datastoreLoaded",true);}}function J(){return(K===true);}return{set:A,isLoading:J};})(),currentVersions:[],currentProfile:{},updateList:[],removeList:[],folderConfigs:{},wsObject:null,wsCallMap:{},APP_FLAGS:F});I.mix(D,{ApplicationList:(function(){var P=[],Q=null;function O(S,T){P=S;Q=T;I.fire("om:applistupdate");}function R(){return P;}function K(){P={};}function A(S,T){P[S]=T;}function N(S){return P[S];}function J(S){return I.Array.find(P,function(T){return T.app==S;});}function M(T){var S=J(T);return(S&&I.Lang.isNumber(S.version))?S.version:0;}function L(S){delete P[S];}return{setAll:O,getAll:R,delAll:K,set:A,get:N,getByAppId:J,getAppVersion:M,del:L,getSpriteURL:function(){return Q;}};})()});I.mix(D,{ApplicationConfig:(function(){var L={message_read:["header","flags","annotation"],attachment_view:["content_type"]},M=[];function A(O){var P=O&&O.config&&O.config.events,N;if(P&&P.message_read&&(N=P.message_read.match)){if(!N["@attributes"]){N["@attributes"]={};}if(!N["@attributes"].mode){N["@attributes"].mode="or";}C.each(C.filter(L.message_read,function(R){return !!N[R];}),function(R){N[R]=C(N[R]);N[R]=C.filter(C.map(N[R],function(V){var U,T,S;if((U=V.name)){V.name=U.toLowerCase();}if((T=V.regex)){S=/^\/(.*)\/(.*)$/.exec(T);if(!S){return null;}V.regex=new RegExp(S[1],S[2]);}return V;}),function(S){return S!==null;});});}if(P&&P.attachment_view&&(N=P.attachment_view.match)){C.each(L.attachment_view,function(R){N[R]=C(N[R]);});}if(O.settings&&B.isString(O.settings)){try{O.settings=I.JSON.parse(O.settings);}catch(Q){}}return O;}function J(N){M=C.map(N,A);}function K(){return M;}return{MATCH_CATEGORIES:L.message_read,setAll:J,getAll:K};})()});I.mix(D,{Registry:(function(){var X={},N={"3id1k74o3ic9k":1,"3aophcopmae1m":1,"36or471hmce9m":1,"3copmchj36d1m":1,"30db665j3ge9n":1,"32p326himcdpg":1,"3cp9lcoq32dpn":1},c={},e={"_default":function(i,j){return i===j;},"content_type":function(i,j){return i.toLowerCase()===j.toLowerCase();}};function b(i,j){X[i]=j;if(P(i)){c[i]=1;}I.fire("om:register_app",j,i);}function W(i){X=i;}function J(i){return X[i]||null;}function h(){return X;}function L(k,i){var j=X[k];if(j&&j[i]){return j[i];}}function Y(i){delete X[i];if(i in c){delete c[i];}}function S(){X={};}function K(){var l,k,i=false,j=false;for(l in X){k=X[l];if(M(k)){j=true;}else{if(d(k)){i=true;}}if(j&&i){return true;}}return false;}function M(i){var j=I.Object.getValue(i,["config","events","click","action","launch"]);return(j&&j.target_zone=="tab"&&j.context=="http://calendar.yahoo.com")||D.Registry.isInDevelopment(i.app);}function d(i){var j=I.Object.getValue(i,["config","events","click","action","launch"]);return j&&j.target_zone=="window"&&j.view=="http://calendar.yahoo.com/";}function R(){var k,i,j;for(k in X){i=X[k];if(i&&i.config){for(j in i.config.events){if((j==="click-gallery")&&(i.status&F.INTERNAL)){return i;}}}}}function f(){var k,i,j=[];for(k in X){if(V(k)){i=X[k];j.push(i);}}if(j.length>0){if(j.length>1){for(k=0;k<j.length;++k){if(!(j[k].status&F.PUBLIC)){return j[k];}}}return j[0];}}function Z(i){return function(j){if(!B.isObject(j)){j=X[j];}return !!(j&&(j.status&i));};}function O(j){var i=X[j];return i&&i.name||"";}function Q(i){return N[i];}function V(m){var l=X[m],j,k,i;return(l&&l.name===G.NEO_SANDBOX&&(l.status&F.INTERNAL)&&(l.status&F.SANDBOXED)&&!(l.status&F.SICK)&&(j=l.config)&&(k=j.events)&&(i=k.message_render)&&i);}function U(k){var j=X[k],i=j.name;return(i===G.QUICKREPLY||i===G.FLIXY||i===G.SHORTCUTS);}function A(l){var k,i,m,j;return l&&(j=l.config)&&(k=j.events)&&(i=k.message_read)&&(m=i.match);}function P(l){var k=X[l],i,j;return(k&&(i=k.config)&&(j=i.events)&&j.attachment_view);}function g(k){var j,i,l,m=false;if(!B.isObject(k)){I.log("Malformed attachment handler search: "+I.JSON.stringify(k)+"; expected an object","error");return -1;}m=H.some(c,function(n,o){j=X[o];i=j.config.events.attachment_view.match;return H.some(k,function(q,p){if(!(p in i)){return;}l=e[p]||e._default;return C.find(C(q),function(r){return C.find(i[p],function(s){return l(s,r);});});});});return m&&{handlerId:j.app,name:j.name||""};}function a(i){return i.length?"/om/combo/"+i.join("/"):null;}function T(){var r,o,z,q,t,i,v,n=false,m=[],w=[],AA={},x=[],j=[],p=[],y=[],k=[],l=[],s=[],u=D.Registry;H.each(X,function(AB){if(NeoConfig.isFullSSL&&AB.name==G.SHORTCUTS){return;}if(AB.config&&AB.config.events&&AB.config.events.message_read&&AB.config.events.message_read.message_actions&&(r=AB.config.events.message_read.message_actions.enhance_message)){o=AB.app;n=u.isPreload(o)&&!u.isSick(o);p=[];y=[];k=[];l=[];s=[];q=u.isInternal(o)?NeoConfig.om.webcacheHostCom:NeoConfig.om.webcacheHostNet;t=(q.indexOf("yahoo.com")!==-1&&q.indexOf(".corp.")!==-1);z=(q.indexOf(".c.yom.mail.yahoo.")!==-1)?"-":".";if(r.css){i=r.css.path;m=B.isArray(i)?i:[i];C.each(m,function(AC){if(strings&&strings.str_tog_loadRTLCss){AC=AC.replace(/\.css$/,"-rtl.css");}if(AC.match(/http(?:s)?:\/\//)){y.push(AC);}else{(n?j:p).push("f."+AC.replace(/^\/om\/assets\//,""));}});}if(r.js){v=r.js.path;w=B.isArray(v)?v:[v];C.each(w,function(AC){if(AC.match(/http(?:s)?:\/\//)){s.push(AC);}else{(n?k:l).push("f."+AC.replace(/^\/om\/assets\//,""));}});}AA[o]={app:o,name:AB.name,msg_read_data:{preload:n,cssCombo:a(p),css:y,preloadJsCombo:a(k),jsCombo:a(l),js:s,context:{appId:o,instanceId:u.get(o).instance,invokePrefix:NeoConfig.launch_protocol+(t?q:[o,z,q].join(""))}}};
x.push(o);}});return{msgReadAppIdList:x,msgReadAppConfigs:AA,preloadCssCombo:a(j)};}return{set:b,setAll:W,get:J,getAll:h,getProperty:L,del:Y,delAll:S,getGalleryData:R,getSandboxData:f,getAppName:O,getAttachmentHandlerInfo:g,isPublic:Z(F.PUBLIC),isRevoked:Z(F.REVOKED),isInDb:Z(F.IN_DB),isNoDisclaimer:Z(F.OMIT_DISCLAIMER),isInternal:Z(F.INTERNAL),isSick:Z(F.SICK),isInDevelopment:Z(F.IN_DEVELOPMENT),isSmartFolder:Z(F.SMART_FOLDER),isPreload:Z(F.PRELOAD),isPermanent:Z(F.PERMANENT),isNoAppList:Z(F.NO_APPLIST),isLargeFiler:Z(F.LARGE_FILER),isMessenger:Q,isSandbox:V,isMsgReadRtbApp:U,isNewCalendarApp:M,isOldCalendarApp:d,isAttachmentHandler:P,hasMessageReadEvents:A,hasOldAndNewCalendarApps:K,getSandboxMsgReadConfig:T};})()});I.mix(D,{ViewRegistry:(function(){var K={};function A(N,O){K[N]=O;}function L(N){return K[N]||null;}function M(){return K;}function J(N){delete K[N];}return{set:A,get:L,getAll:M,del:J};})()});I.mix(D,{OpenViewLog:(function(){var L={};function A(M,N){L[M]=N;}function K(M){return L[M]||null;}function J(M){delete L[M];}return{set:A,get:K,del:J};})()});I.mix(D,{EventRegistry:(function(){var K={};function A(R,Q,T,P,S){if(!K[T]){K[T]={};}if(!K[T][P]){K[T][P]={};}K[T][P][S]=R;K[T][P][S].listenerFn=Q;}function O(P){return K[P]||null;}function M(Q,P){try{return K[Q][P]||null;}catch(R){return null;}}function N(R,P,Q){try{return K[R][P][Q]||null;}catch(S){return null;}}function L(){return K||null;}function J(R,P,Q){delete K[R][P][Q];var S;for(S in K[R][P]){return;}delete K[R][P];for(S in K[R]){return;}delete K[R];}return{set:A,getByInstId:O,getByViewId:M,getByEventName:N,getAll:L,del:J};})()});I.mix(D,{ApplicationSubFolderList:(function(){var J={};function A(M,N){J[M]=N;}function L(M){return J[M]||null;}function K(M){J[M]=[];}return{set:A,get:L,del:K};})()});I.mix(D,{MessageReadRunList:(function(){var L={};function A(N,O){L[N]=O;}function K(N){return L[N]||null;}function J(N){delete L[N];}function M(){return L;}return{set:A,get:K,del:J,getAll:M};})()});},"1.0.0",{requires:["array-extras"]});

YUI.add("_shared_module_open_mail_application_list",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_open_mail_application_list={base:'<div class="items items-nav items-nav-applications expanded" {{om_hide_app_until_bidi_ready}} data-action="collapsable"> <h2 role="toolbar" aria-labelledby="apps-toggle-btn" id="nav-applications" class="legend"><span id="apps-toggle-btn" role="button" tabindex="0" aria-controls="app-list" aria-expanded="true" class="label">{{str_nav_applications}}</span> <span class="rht"><span class="btn small left right hidden" title="{{str_nav_applications_btn_edit_attr}}"><input class="icon edit" type="button" value="{{str_nav_applications_btn_edit}}"></span></span></h2> <ul id="app-list" class="hidden" role="listbox" aria-labelledby="apps-toggle-btn" aria-describedby="list-instr"> {{application_list}} </ul></div>',application_refresh:'<span class="rht" id="{{app_refblock_id}}"> <span class="btn small left right"><input id="{{app_ref_id}}" type="button" class="icon check-mail" value=" "></span> </span> ',application_count_markup:'<span class="unread-count" title="{{app_folder_count}}">{{app_folder_count}}</span> ',application_count:'<span class="rht"> {{application_count_markup}} </span> ',application_list_subfolder_count:'<span class="rht"> <span class="unread-count" title="{{app_sub_folder_count}}">{{app_sub_folder_count}}</span> </span> ',application_list_subfolder_row:'<li role="presentation" id="{{app_sub_folder_row_id}}"> <a role="option" tabindex="-1" href="#" title="{{app_sub_folder_tooltip}}">{{app_sub_folder_label}} {{application_list_subfolder_count}} </a> </li> ',application_list_subfolder:'<div role="presentation" id="{{app_subfolder_div_id}}"> <ul role="group"> {{application_list_subfolder_row}} </ul> </div> ',application_list:'<li role="presentation" data-action="application" id="{{app_row_id}}" class="btn-apps"> <a id="{{app_row_info_id}}" href="#" role="option" tabindex="-1" title="{{app_name}}"> <i id="{{app_row_name_id}}" style="background:url({{app_icon_url}}){{app_icon_pos}} no-repeat;">{{app_name}}</i> {{application_refresh}} {{application_count}} </a> {{application_list_subfolder}} </li> '};},"1.0.0");

YUI.add("om-ui-workspace-base",function(A){A.namespace("om.ui");A.om.ui.Workspace=new function(){var G=this,D=A.om.model.DataStore.Registry,E=A.om.ui.ApplicationList;function C(H){var J=H.appId,I=H.hiliteAppId,K=H.param;B(J,I,K);}function B(I,H,J){A.use("om-controller-views",function(M){var K,L={};K=I?D.get(I):D.getGalleryData();if(!K){K={app:I};}if(H){L=[H];}else{if(J){L.launchParams=J;}}M.om.Controller.Views.runActions(K,"events","click",true,L);});}function F(){A.on("om:appclicklaunch",B);A.on("om:mrd:gallery",C);A.on("om:mrd:launch",C);}A.augment(G,A.EventTarget);A.augment(G,A.Attribute);F();if(NeoConfig.om.isSandboxEnabled&&A.UA.ie!=7){if(NeoConfig.hasConv){A.use("om-ui-convpane-base",function(H){H.mail.ui.Factory.register("mail.ui.ConvPane",H.om.ui.OMConvPane);});}else{A.use("om-ui-messagepane-base",function(H){H.mail.ui.Factory.register("mail.ui.MessagePane",H.om.ui.OMMessagePane);});}}}();},"1.0.0",{requires:["mail-ui-factory-base","om-model-datastore","om-ui-applicationlist-base","om-ui-messagepane-base"]});

YUI.add("om-ui-applicationlist-base",function(F){var E=F.common.Utils,D=F.Lang,A=E.substitute,C=F.common.persist.getCookie();var B=function(){var X=this,M=F.om,h=M.common.Utils,H=M.model.DataStore,Z=H.ApplicationList,S=H.ApplicationSubFolderList,V=H.Registry,P=H.APP_FLAGS,d=F.ui.Templates._shared_module_open_mail_application_list,L=F.one("#nav-applications"),U=F.one("#app-list"),T=F.one("#smart-folders"),Y="om.applex",K=F.common.Utils.rocketstats,N=M.Controller,g=true,c={appList:function(j){if(j){var p={app_id:"retry",app_status:P.PUBLIC,app_row_id:"_app_retry",app_icon_url:"",app_name:strings["str_om_app_list_retry"]},t=A(d.application_list,p,c);return t.replace(/<img [^>]*>/i,"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;");}var n,q="",u,p,l=Z.getAll(),r=Z.getSpriteURL(),o,m,k=H.Registry.hasOldAndNewCalendarApps();r=W(r);for(n in l){u=l[n];if(typeof u.image_url=="number"){m=u.image_url*16;o=true;}else{m=0;o=false;if(u&&u.image_url){u.image_url=W(u.image_url);}}p={app_id:u.app,app_status:u.status,app_row_id:"_app_"+u.app,app_name:u.label+(!(u.status&P.PUBLIC)?" (Private)":""),app_icon_url:o?r:u.image_url.replace(/<!--IMAGE_TYPE-->/,"icon"),app_icon_pos:(NeoConfig.isRTL?" 100%":" 0px ")+" -"+m+"px",app_row_name_id:"_app_name_"+u.app,app_row_info_id:"_app_info_"+u.app};if(H.Registry.isNoAppList(u)&&H.Registry.isPublic(u)){continue;}if(k&&H.Registry.isOldCalendarApp(u)){continue;}if(NeoConfig.enableSmartFolders&&H.Registry.isSmartFolder(u)){if(T){T.append(A(d.application_list,p,c));}continue;}q+=A(d.application_list,p,c);}return q;},application_refresh:function(j){var l=j.app_id,i,k="";if(!(j.app_status&H.APP_FLAGS.PUBLIC)){i={app_ref_id:"_ref_"+l,app_refblock_id:"_refblock_"+l};k=A(d.application_refresh,i,c);}return k;},application_list_subfolder:function(j){var m=j.app_id,i,k,l="";k=S.get(m);if(k&&k.length>0){i={app_id:m,app_subfolder_div_id:"_sub_container_"+m};l=A(d.application_list_subfolder,i,c);}return l;},application_list_subfolder_row:function(l){var n,p=l.app_id,k,q,m,o="";m=S.get(p);for(n in m){var j=m[n];k={app_sub_folder_row_id:"_sub_"+p+"_"+n,app_sub_folder_label:"- "+j.label,app_sub_folder_tooltip:j.tooltip||j.label,app_sub_folder_count:typeof(j.count)!="undefined"?j.count:null};o+=A(d.application_list_subfolder_row,k,c);}return o;},application_list_subfolder_count:function(j){var l=j.app_sub_folder_count,i,k="";if(l!=null){i={app_sub_folder_count:l};k+=A(d.application_list_subfolder_count,i,c);}return k;},application_count:function(j){var i,l="",k=j.count;if(typeof(k)!="undefined"){i={app_folder_count:k,count:k};l+=A(d.application_count,i,c);}return l;},application_count_markup:function(j){var i,l="",k=j.count;if(typeof(k)!="undefined"){i={app_folder_count:k};l+=A(d.application_count_markup,i,c);}return l;}};function G(l,m){var k,j="subfolder.click",i={};k=H.Registry.get(l).instance;i={app:l,index:m,instance:k};F.fire(h.getEventName(k,j),i);}function J(){var i;if(!U.one('a[tabindex="0"]')&&(i=U.one("a[role=option]"))){i.set("tabIndex",0);}return i;}function b(){var i=F.one("doc").get("activeElement");return(U.contains(i)?U.all("a[role=option]").indexOf(i):-1);}function I(l){var k=U.all("a[role=option]"),j=k.item(l),i;if(!j){i=l+1;if(i>k.size()){i=l-1;}j=k.item(i);}if(j){j.set("tabIndex",0);j.focus();}}function a(){var i=F.one("#apps-toggle-btn");F.on("om:updateFolders",function(n,m){var o=L.ancestor("div"),p=C.get(Y)?C.get(Y):1,l=b();n=n?n:false;if(p==1){o.removeClass("collapsed");o.addClass("expanded");i.set("aria-expanded",true);f(m);g=false;}else{o.removeClass("expanded");o.addClass("collapsed");i.set("aria-expanded",false);if(!n){f(m);}}if(l>=0){I(l);}else{J();}F.one("#nav-applications span.btn").removeClass("hidden");U.removeClass("hidden");});F.on("om:updateSingleFolder",function(q){var x=b(),AA,u,z,o,v,p="";if(u=q.config.label){var y=F.one("#_app_name_"+q.ctx.appid),t;if(y){v=y.getContent();t=v.indexOf("(Private)");p=(t>-1)?v.substring(0,t)+u+" "+v.substring(t):v+u;y.setContent(p);}}var m=F.one("#_app_info_"+q.ctx.appid);if(m){if(z=q.config.tooltip){m.setAttribute("title",z);}else{if(p){m.setAttribute("title",p);}}if(o=q.config.count){var s=F.one("#_refblock_"+q.ctx.appid),r;if(s){r=c.application_count_markup({"count":o});r+=s.getContent();s.setContent(r);}else{r=m.getContent();r+=c.application_count({"count":o});m.setContent(r);}}}if(AA=q.config.subFolders){var w=q.ctx.appid,l,n=F.one("#_sub_container_"+w);if(n){n.get("parentNode").removeChild(n);}S.set(w,AA);e(w);}else{S.del(w);}if(x>=0){I(x);}else{J();}});if(!L){return;}function k(n){var l=L.ancestor("div"),m;if(l){l.toggleClass("collapsed").toggleClass("expanded");if(g){U.set("aria-live","polite");m='<li role="presentation"><span style="padding-left:20px;margin-left:8px;">'+strings["str_om_loading"]+"</span></li>";U.setContent(m);f();g=false;}if(l.hasClass("collapsed")){C.set(Y,0);i.set("aria-expanded",false);F.fire("om:list:collapse");}else{C.set(Y,1);i.set("aria-expanded",true);F.fire("om:list:expand");}}}i.on("click",k);i.on("keydown",function(l){if(l.keyCode===13){k(l);}});U.delegate("keydown",function(r){var s=r.target,t=r.keyCode,l,n,q,p,u,o,m=F.UA.os;if((m=="macintosh")&&(t==8)){t=46;}switch(t){case 38:case 40:r.halt();l=r.container.all("a[role=option]");q=l.indexOf(this);p=r.keyCode===40?q+1:q-1;if((n=l.item(p))){s.set("tabIndex",-1);n.set("tabIndex",0);n.focus();}break;case 46:r.halt();u=s.ancestor("li").get("id");if(u.indexOf("_app_")>=0){u=u.slice(5);if(!(H.Registry.isPermanent(u))){F.use("om-controller-addremoveapp",function(v){N.AddRemoveApp.uninstallApp(u);});}}break;case 121:case 77:o=(m=="windows"||m=="win");if((o&&r.shiftKey&&t==121)||(!o&&r.ctrlKey&&r.shiftKey&&r.altKey&&t==77)){r.preventDefault();E.simulateContextMenu(r.target,false);}break;}},"a[role=option]");U.delegate("click",function(m){var o=m.currentTarget,l,n;m.halt();n=m.currentTarget.getAttribute("id");l=n.slice(5);appData=V.get(l);O(n);R(l);F.fire("om:refreshApp",appData);O(n);},"li input");function j(p){p.halt();var t,v,o,w,u,n,s,q,m,l;
o=(p.currentTarget).one("a");t=(p.currentTarget.getAttribute("id")).slice(5);w=V.get(t);K.stat("OM","APPLIST:clickApp");K.stat("OM","APPLIST:clickApp:"+t);n=w&&w.config;u=n&&n.events;s=u&&u["click"];q=s&&s.action;m=q&&q.launch.target_zone;if(m=="window"){K.stat("OM","APP:INVOKE:"+t);l=t;window.open(q.launch.view,l);p.stopPropagation();return;}var r=(p.target).getAttribute("id");if(r.indexOf("_ref_")>=0){return;}v=t.split("_");if(v.length==1){F.fire("om:appclicklaunch",t);}else{G(v[0],v[1]);}}U.delegate("click",j,"li");F.on("om:appclick",j);U.delegate("contextmenu",function(n){var o=n.currentTarget,m=n.target;if(!o.menu){var l=o.get("id");if(l.indexOf("_app_")>=0){l=l.slice(5);if(!(H.Registry.isPermanent(l))){F.use("om-ui-applicationlistmenu-base","common-ui-menu-helper",function(q,p){q.om.ui.ApplicationListMenu.insert("menu-applist",function(){var r=q.one("#menu-applist");q.common.ui.MenuHelper.create(o,{menu:r,isContext:true,xy:[n.clientX,n.clientY],contextTarget:n.target},function(){r.on("menuSelected",Q,null,l);r.on("menu:state",function(s){if(s.state=="hide"){m&&m.focus();}});});});});}}}n.halt();},"li");L.delegate("click",function(m){var l=V.getGalleryData();if(l&&l.app){F.fire("om:appclicklaunch",l.app);}else{}m.halt();},"input");}function Q(j,i){if(j.dataAction&&j.dataAction=="app-remove"){F.use("om-controller-addremoveapp",function(k){N.AddRemoveApp.uninstallApp(i);});}}function O(j){j="#"+j;var i=F.one(j);if(!i.hasClass("loading")){i.addClass("loading");}else{i.removeClass("loading");}}function R(j){var i=H.Registry.get(j).instance;N.Views.closeApplication(j,i);N.Openapi.upgrade(j,i,null,null,true);}function f(i){if(T){T.all(".btn-apps").remove();}var j=c.appList(i);U.setContent(j);U.setAttrs("aria-live","off");}function e(k){var i=F.one("#_app_"+k),j=c.application_list_subfolder({app_id:k});i.append(j);}function W(i){if(F.Lang.isString(i)&&!i.match(/^https?:\/\/image-/)){return i.replace(/^https?:\/\//,NeoConfig.launch_protocol+"image-");}return i;}a();F.mix(X,{render:f});F.om.Controller.ApplicationList.loadApplication();};F.namespace("om.ui");F.om.ui.ApplicationList=new B();},"1.0.0",{requires:["common-utils","_shared_module_open_mail_application_list","om-model-datastore","om-controller-applicationlist","om-controller-views","_shared_module_open_mail_application_list_menu","common-persist-cookie-data"]});

YUI.add("om-ui-messagepane-base",function(G){var d=G.common.Utils,M=G.om,F=M.model.DataStore,a=F.Registry,J=F.ApplicationConfig,O=M.Controller,i=M.common.Utils,f=NeoConfig.om.isSandboxEnabled,L=NeoConfig.servername,b=d.substitute,A=d.onDemand,N=G.ui.Templates,W=(G.UA.ie&&G.UA.ie<8),B=W?6000:4000,R=500,h=W?11000:6000,U=3,c=0,V=["comms-log4js","common-utils-stats","mail-ui-messagepane-utils-shared","openmail_strings","om-ui-messagepane-sandbox-controller","om-ui-sandbox-view","om-ui-sandbox-datastore","om-ui-sandbox-messageread","om-ui-sandbox-utils","common-utils","mail-ui-messagepane-warnings"],T=["attachments_css","mod-conversation-history_css","mod-shortcuts_css"],K=null,D=null,I=d.rocketstats,g=null,C=null;function Z(Y){i.log(Y,"SANDBOX");}function Q(j,Y){return i.getEventName(j,Y);}G.on("om:msg:registerSandboxController",function(Y){if(!g){Z("Controller registered");g=F.ViewRegistry.get(Y.id);G.fire("readpool:check");}});function E(){var m=["launch_css","vitality_css"],k=[],j;for(var n=0,Y=m.length;n<Y;++n){j=G.one("#"+m[n]);if(j){k.push(j.get("href"));}}return k;}function P(){var Y={isRTL:NeoConfig.isRTL,fullPage:NeoConfig.fullPage,hasConv:NeoConfig.hasConv,ieCompatibleMode:{ie8_ie7compatible:NeoConfig.ieCompatibleMode.ie8_ie7Compatible,ie9_ie8compatible:NeoConfig.ieCompatibleMode.ie9_ie8Compatible}};return{NeoConfig:Y,cssLinks:E(),appConfig:F.Registry.getSandboxMsgReadConfig(),NeoUrlParams:d.parseQueryString()};}G.on("om:msg:getSandboxPostLaunchConfig",function(Y){if(!D){D=P();}O.Openapi.returnAPI(Y,D);});function H(){function Y(l){return l.slice(0,4)=="http";}var k=G.merge(YUI_config.groups.mail_css),j=G.merge((yui.Env._loader||YUI_config).groups.mail);k.modules=G.mix({},k.modules,false,T);j.modules=G.mix({},j.modules,false,V);if(!Y(k.comboBase)){k.comboBase=NeoConfig.launch_protocol+L+k.comboBase;}if(!Y(j.comboBase)){j.comboBase=NeoConfig.launch_protocol+L+j.comboBase;}return{css:k,js:j,strings:strings,mailYUIURL:NeoConfig.yuiURL,mailBase:YUI_config.base,mailComboBase:YUI_config.comboBase,mailLoaderPath:YUI_config.loaderPath,mailModuleRoot:YUI_config.root};}G.on("om:msg:getConf",function(Y){if(!C){C=H();}O.Openapi.returnAPI(Y,{data:C});});function e(Y){if(g&&a.hasMessageReadEvents(Y)){G.fire(Q(g.get("instanceId"),"sandbox.controller"),{cmd:"apprefresh",args:{appConfig:a.getSandboxMsgReadConfig()}});}}G.on("om:refreshApp",e);G.on("om:installApp",e);G.on("om:uninstallApp",e);var S=function(Y,j,k){var l=this;S.superclass.constructor.apply(l,arguments);l.handleContactChanged=G.on("contacts:api:contactChanged",l.updateLozenges,l);if(!f){return;}l.launchStatus="INIT";l.msgRenderTimer=null;l.isSandboxViewReady=false;l.heightUpdateTimer=null;l.sandboxStartTime=null;l.firstRender=1;l.firstMsgDisplayed=false;l.RSstopwatch=null;l.msgReadRtbApps=0;!l.fullView&&G.once("om:msg:registerSandboxController",function(){if(!l.message){l.render();}});l.modifyAttr("scrollWidthActive",{getter:function(){return !l.isSandboxActive();}});};G.extend(S,G.mail.ui.MessagePane);S.prototype.NAME="OMMessagePane";S.prototype.hasOMFlag=function(j,Y){return j.extend&&j.extend.openmail&&j.extend.openmail.flags&&j.extend.openmail.flags[Y];};S.prototype.isSandboxActive=function(){return f&&g&&c<U&&this.launchStatus!=="TIMEOUT";};S.prototype.getEnhancedBody=function(){var k=this,j=k.message,Y=k.isSandboxActive()&&j.extend&&j.extend.openmail&&j.extend.openmail.enhancedBody;return Y||"";};S.prototype.setFullFormatters=function(){var m=this,l=null,j=null,Y=null,k=function(o){var s=o.s||"",q=o.o||0,n=o.f||m.readFormatters,r=o.a||0,p=o.strs||strings;return b(s,q,n,r,p);};if(S.superclass.setFullFormatters){S.superclass.setFullFormatters.apply(m,arguments);l=m.readFormatters.msg_has_attachment;j=m.readFormatters.msg_has_photo_attachment;m.readFormatters.msg_has_photo_attachment=function(){var n=m.message;return m.isSandboxActive()&&(!G.Lang.isUndefined(n.body)&&m.hasOMFlag(n,"suppressAttachments"))?"":j();};m.readFormatters.msg_has_attachment=function(){var n=m.message;return m.isSandboxActive()&&(!G.Lang.isUndefined(n.body)&&m.hasOMFlag(n,"suppressAttachments"))?"":l();};Y=m.readFormatters.msg_blocked;m.readFormatters.msg_blocked=function(){var n=m.message;return(m.isSandboxActive()&&n.extend&&n.extend.openmail&&n.extend.openmail.imgBlocked)?k({s:N._shared_module_message_display_rollup.msg_blocked,o:n}):Y();};}};S.prototype.isPreviewPane=function(){return !this.fullView;};S.prototype.getTotalRetryCount=function(){return c;};S.prototype.createSandbox=function(){var j=this,Y=a.getSandboxData();if(!Y){Z("Sandbox app not found.  Switching to message pane.");return;}j.launchStatus="CREATE";O.Views.runActions(Y,"events","message_render",false,null,null,null,null,null,function(k){j.viewObj=k;j.initSandboxIframe();});};S.prototype.sendSandboxControllerEvent=function(j,Y){if(!this.viewObj){return;}G.fire(Q(this.viewObj.get("instanceId"),"sandbox.controller"),{cmd:j,args:Y});};S.prototype.render=function(Y){var j=this;j.firstActive&&j.firstActive.detach();j.firstActive=null;Y=Y||j.parentNode;if(j.firstRender&&!(Y&&Y.inDoc())){j.firstActive=j.once("activeChange",function(k){if(k.newVal){j.firstRender=0;S.superclass.render.apply(j,[Y]);j.firstActive=null;}});}else{S.superclass.render.apply(j,[Y]);}};S.prototype.scrollWidthReset=function(){var Y=this;S.superclass.scrollWidthReset.apply(Y);if(Y.isSandboxActive()){Y.sendSandboxControllerEvent("resetwidth",{"viewId":Y.viewObj.get("viewId")});}};S.prototype.initSandboxIframe=function(){var m=this,j;if(!m.viewObj){Z("viewObj is not available.  Use default appendMarkup.");S.superclass.appendMarkup.apply(m);return;}if(m.launchStatus=="CREATE"){m.startStopwatch(1,"LoadSandbox");m.sandboxStartTime=new Date();m.RSstopwatch=new d.Stopwatch("LoadSandbox");Z("Waiting for sandbox to register.");j=m.message;if(j){m.message={flags:j.flags,header:j.header,mid:j.mid};}S.superclass.appendMarkup.apply(m);m.message=j;var Y=m.get("parentNode"),l=Y.one(".tripane.content")||Y.one(".message.content"),k=setTimeout(function(){if(m.launchStatus!="TIMEOUT"){Z("TIMEOUT: sandbox failed to register!");
m.launchStatus="TIMEOUT";m.closeSandbox();if(++c===U){G.mail.Controller.Messages.unhook("get",K);}}S.superclass.appendMarkup.apply(m);I.stat("OM","ERR:registerSandbox");},B);l.append(m.viewObj.getMarkup());m.viewObj.initIframe();m.launchStatus="WAIT";m.applyHandler();m.once("sandboxViewReady",function(){m.RSstopwatch&&m.RSstopwatch.stop&&m.RSstopwatch.stop();if(m.sandboxStartTime){window.rt_LogTime&&rt_LogTime("t2",(new Date())-m.sandboxStartTime,true);m.sandboxStartTime=null;}Z("SUCCESS: registered!");m.launchStatus="REGISTERED";clearTimeout(k);m.isSandboxViewReady=true;});m.viewObj.once("load",function(){m.sendSandboxControllerEvent("initsandboxview",{viewId:m.viewObj.get("viewId"),data:{fullView:m.fullView}});});}};S.prototype.appendMarkup=function(){var Y=this;if(!f||!g){Z("Default appendMarkup");S.superclass.appendMarkup.apply(Y);return;}if(Y.launchStatus=="INIT"||Y.launchStatus=="TIMEOUT"){if(c<U){Y.createSandbox();}}Y.handleSandbox();};S.prototype.applyHandler=function(){var j=this,Y=j.viewObj.get("viewId");j.internalAPIHandler=G.on("om:msg:"+Y,j.handleInternalAPI,j);j.on("activeChange",function(k){j.sendSandboxControllerEvent("activechange",{viewId:Y,newVal:k.newVal});if(k.newVal===1&&NeoConfig.fullPage){j.sendSandboxControllerEvent("updateheight",{"viewId":Y});}});j.on("closeChange",function(k){if(k.newVal===1){j.closeSandbox();}});};S.prototype.closeSandbox=function(){var j=this,Y=(j.viewObj)?j.viewObj.get("viewId"):null;j.isSandboxViewReady=false;j.firstMsgDisplayed=false;j.sandboxStartTime=null;j.RSstopwatch=null;if(Y){j.sendSandboxControllerEvent("closesandboxview",{"viewId":Y});if(j.heightUpdateTimer){j.heightUpdateTimer.cancel();}O.Views.closeView(Y);j.viewObj=null;}if(j.internalAPIHandler){j.internalAPIHandler.detach();j.internalAPIHandler=null;}if(j.handleContactChanged){j.handleContactChanged.detach();j.handleContactChanged=null;}if(j.msgRenderTimer){clearTimeout(j.msgRenderTimer);j.msgRenderTimer=null;}};S.prototype.handleSandbox=function(){try{var p=this,j=p.viewObj,n=p.message,o=!!(n&&!n.body&&!p.loading_slow&&!p.loading_error)||p.outboundReq,Y=p.formatters.page_show_comm_modes()+p.formatters.page_show_comm_modes_else(),l=(n&&n.body)?p.getEnhancedBody()||n.body.display:"";}catch(m){I.stat("OM","ERR:genMarkup");}function k(){try{p.RSstopwatch=new d.Stopwatch("DisplayMessageInSandbox");p.startStopwatch(1,"DisplayMessageInSandbox");p.msgReadRtbApps=n&&n.extend&&n.extend.openmail&&n.extend.openmail.context.msgReadRtbApps;var t=null,s={data:{}},v=n&&n.extend&&n.extend.openmail&&n.extend.openmail.context,r=n&&n.extend&&n.extend.openmail&&n.extend.openmail.onreadScripts||[],w=G.Array.map(v&&G.Object.keys(n.extend.openmail.context.matchedAppIds)||[],function(y){return y.split(".")[0];});if(v){s.data=O.Messageread.repackageData(n);}s.data.loading=o;s.data.matchedAppIdList=w;s.data.appCodes=[];s.data.body={content:Y,msgBody:l,truncated:(n&&n.body&&n.isTruncated),scrollTop:p.scrollTop,href:p.href,isChat:p.isChat(n)};if(n&&n.body){s.data.body.msgBlockedMarkup=b(N._shared_module_message_display_rollup.msg_blocked,n,p.readFormatters,0,strings);}for(var u=0,q=r.length;u<q;++u){t=r[u];s.data.appCodes.push({css:t.css,scripts:t.scripts,APIContext:t.context});}Z("Send mesage to Sandbox.");if(n&&n.body){if(p.msgRenderTimer){clearTimeout(p.msgRenderTimer);}p.msgRenderTimer=setTimeout(function(){p.launchStatus="TIMEOUT";p.closeSandbox();S.superclass.appendMarkup.apply(p);I.stat("OM","ERR:sendMessageToSandbox");},h);}p.sendSandboxControllerEvent("render",{viewId:p.viewObj.get("viewId"),data:s});}catch(x){I.stat("OM","ERR:fireRenderEvent");}}if(p.isSandboxViewReady){k();}else{p.once("sandboxViewReady",function(){k();});}};S.prototype.handleSandboxRenderComplete=function(){var m=this,j=m.viewObj?m.viewObj.get("viewId"):null,l=m.viewObj?m.viewObj.getIframe():null,k=function(){S.superclass.renderComplete.apply(m);if(l){l.set("title",m.message.header.subject||strings["str_comp_nosubject"]);}};if(m.msgRenderTimer){clearTimeout(m.msgRenderTimer);m.msgRenderTimer=null;}if(!m.firstMsgDisplayed){m.firstMsgDisplayed=true;var Y=m.get("parentNode");if(Y){Y.all(".message.content > div").remove();}if(l){l.addClass("enabled");}if(NeoConfig.fullPage){m.heightUpdateTimer=G.later(R,m,function(){if(m.get("active")){m.sendSandboxControllerEvent("updateheight",{"viewId":j});}},null,true);}}else{window.rt_LogTime&&rt_LogTime("t2",0,true);}if(!m.outboundReq&&m.message&&m.message.body){G.UA.ie?setTimeout(k,0):k();}};S.prototype.renderProfileImage=function(j){var l=this,Y=l.viewObj?l.viewObj.get("viewId"):null,k;if(G.Lang.isArray(j)&&j.length==1){j=j[0];}if(!l.isSandboxActive()){S.superclass.renderProfileImage.apply(l,[j]);return;}k=S.superclass.getProfileImageMarkup.apply(l,[j]);if(k){l.sendSandboxControllerEvent("updateheaderprofileimage",{"viewId":Y,data:{html:k}});}};S.prototype.renderComplete=function(Y){var j=this;if(!j.isSandboxActive()){S.superclass.renderComplete.apply(j);return;}j.RSstopwatch&&j.RSstopwatch.stop&&j.RSstopwatch.stop();};S.prototype.postRender=function(){var Y=this;if(Y.isSandboxActive()){Y.sendSandboxControllerEvent("resizeSubject",{viewId:Y.viewObj.get("viewId")});}S.superclass.postRender.apply(Y);};S.prototype.handleSandboxDOMSubtreeModified=function(Y){var j=this;i.getIFrameById(j.viewObj.get("viewId")).setStyle("height",Y.height+"px");};S.prototype.handleSandboxDOMSubtreeModifiedWidth=function(Y){var j=this;S.superclass.scrollWidthUpdate.apply(j,arguments);};S.prototype.handleAttachmentDownloadSingle=function(Y){var j=this;j.downloadAttachment(Y.partId,Y.tnefId);};S.prototype.handleAttachmentDownloadAll=function(Y){this.downloadAllAttachments("non-image");};S.prototype.handleAttachmentDownloadAllPhotos=function(Y){this.downloadAllAttachments("image");};S.prototype.handleAttachmentDownloadEverything=function(Y){this.downloadAllAttachments("all");};S.prototype.handleMessageSetFlag=function(Y){var j=this;G.use("mail-ui-messageevents",function(l){var k=j.message.flags.isFlagged?"unflagged":"flagged";
l.mail.ui.MessageEvents.handleUI({action:k},j.fid,null,[j.message]);});};S.prototype.handleMailTo=function(Y){G.use("mail-ui-shortcuts",function(j){j.mail.ui.ShortCuts.composeMailToMessage(Y.mailto);});};S.prototype.handleMRD=function(Y){G.use("mail-controller-mrd",function(j){j.fire("mrd:launch",Y.mrdLink);});};S.prototype.handleUnblockImages=function(Y){var j=this;j.unblockImages();};S.prototype.handleLoadOptions=function(Y){var j=this;j.loadOptions();};S.prototype.handleRetryLoad=function(Y){var j=this;j.retryLoad();};S.prototype.handleToggleShowDetails=A("toggleShowDetails","mail-ui-messagepane-bind");S.prototype.showMore=function(Y){this.sendSandboxControllerEvent("showMore",{"viewId":this.viewObj.get("viewId"),"markup":this.getAllLozenges(Y.field),"field":Y.field});};S.prototype.updateMessageFlagMarkup=function(Y){if(!f||!this.viewObj){S.superclass.updateMessageFlagMarkup.apply(this);return;}this.sendSandboxControllerEvent("messageflagstatus",{"viewId":this.viewObj.get("viewId")});};S.prototype.updateLozenges=function(Y){if(!f||!this.viewObj){return;}this.sendSandboxControllerEvent("handleupdatelozenges",{viewId:this.viewObj.get("viewId"),data:{contacts:Y.details[0]}});};S.prototype.convertShortcuts=function(){};S.prototype.setFocusToSandboxElement=function(Y){if(this.viewObj){this.sendSandboxControllerEvent("setfocus",{viewId:this.viewObj.get("viewId"),selector:Y});}};S.prototype.startStopwatch=function(k,j){var Y=d.Stopwatch.get("MsgInPreview")||this.stopwatch;Y&&Y.start(k,j);};S.prototype.handleInternalAPI=function(j,Y){var k=this;switch(j){case"sandboxStartStopwatch":k.startStopwatch(Y.lv,Y.msg);break;case"sandboxSetFocus":k.setFocusToSandboxElement(Y.selector);break;case"sandboxRenderComplete":k.handleSandboxRenderComplete();break;case"sandboxDOMSubtreeModified":k.handleSandboxDOMSubtreeModified(Y);break;case"sandboxDOMSubtreeModifiedWidth":k.handleSandboxDOMSubtreeModifiedWidth(Y);break;case"sandboxViewReady":k.fire("sandboxViewReady");break;case"downloadSingle":k.handleAttachmentDownloadSingle(Y);break;case"downloadAll":k.handleAttachmentDownloadAll(Y);break;case"downloadAllPhotos":k.handleAttachmentDownloadAllPhotos(Y);break;case"downloadEverything":k.handleAttachmentDownloadEverything(Y);break;case"setFlag":k.handleMessageSetFlag(Y);break;case"mailto":k.handleMailTo(Y);break;case"mrd":k.handleMRD(Y);break;case"viewFullMsg":k.viewFullMsg(Y);break;case"unblockImages":k.handleUnblockImages(Y);break;case"loadOptions":k.handleLoadOptions(Y);break;case"retryLoad":k.handleRetryLoad(Y);break;case"toggleShowDetails":k.handleToggleShowDetails(Y);break;case"showMore":k.showMore(Y);break;case"message.readAppTime":k.handleMsgReadAppTime(Y);break;}};S.prototype.setDocRole=function(){};S.prototype.setRootNodeTabIndex=function(){this.get("rootNode").set("tabIndex",-1);};S.prototype.setFocusNode=function(){};S.prototype.onFocus=function(){var j=this,Y=j.fullPageView?j.getSubjectFocusNodeSelector():".message.content";if(j.launchStatus=="REGISTERED"&&j.get("active")&&j.message){j.setFocusToSandboxElement(Y);}return 1;};S.prototype.handleMsgReadAppTime=function(l){var o=this,n=o.message,k=n.mid,m=l.time,Y=a.getAppName(l.appId)||"",j=d.Stopwatch.get("MsgInPreview")||o.stopwatch;j&&j.addComment("-AppRender."+Y+":"+m);if(--o.msgReadRtbApps===0){o.fire("msgReadAppComplete");}Z("message.read app time(mid:"+k+" / appName:"+Y+"): "+m);};G.namespace("om.ui");G.om.ui.OMMessagePane=S;if(f){var X={success:function(Y,k,j){O.Messageread.postHookMessageGet(Y,k,j);}};K=G.mail.Controller.Messages.hook("get",X);}},"1.0.0",{requires:["mail-ui-messagepane-base","mail-controller-messages","json-stringify","om-model-datastore","om-controller-messageread","om-controller-views","common-utils-stats","rocket-stats"]});

YUI.add("om-ui-convpane-base",function(G){var c=G.common.Utils,i=G.mail,M=G.om,F=M.model.DataStore,Z=F.Registry,J=F.ApplicationConfig,O=M.Controller,j=M.common.Utils,f=NeoConfig.om.isSandboxEnabled,L=NeoConfig.servername,a=c.substitute,A=c.onDemand,N=G.ui.Templates,V=(G.UA.ie&&G.UA.ie<8),B=V?6000:4000,R=500,h=V?11000:6000,T=3,b=0,U=["comms-log4js","common-utils-stats","mail-ui-messagepane-utils-shared","openmail_strings","om-ui-messagepane-sandbox-controller","om-ui-sandbox-view","om-ui-sandbox-datastore","om-ui-sandbox-messageread","om-ui-sandbox-utils","common-utils","mail-ui-messagepane-warnings"],S=["attachments_css","mod-conversation-history_css","mod-shortcuts_css"],K=null,D=null,I=c.rocketstats,X=i&&i.Controller?i.Controller.Messages:{},g=null,C=null;function W(Y){j.log(Y,"SANDBOX");}function Q(k,Y){return j.getEventName(k,Y);}G.on("om:msg:registerSandboxController",function(Y){if(!g){W("Controller registered");g=F.ViewRegistry.get(Y.id);G.fire("readpool:check");}});function E(){var n=["launch_css","vitality_css"],m=[],k;for(var o=0,Y=n.length;o<Y;++o){k=G.one("#"+n[o]);if(k){m.push(k.get("href"));}}return m;}function P(){var Y={isRTL:NeoConfig.isRTL,fullPage:NeoConfig.fullPage,hasConv:NeoConfig.hasConv,ieCompatibleMode:{ie8_ie7compatible:NeoConfig.ieCompatibleMode.ie8_ie7Compatible,ie9_ie8compatible:NeoConfig.ieCompatibleMode.ie9_ie8Compatible}};return{NeoConfig:Y,cssLinks:E(),appConfig:F.Registry.getSandboxMsgReadConfig(),NeoUrlParams:c.parseQueryString()};}G.on("om:msg:getSandboxPostLaunchConfig",function(Y){if(!D){D=P();}O.Openapi.returnAPI(Y,D);});function H(){function Y(m){return m.slice(0,4)=="http";}var l=G.merge(YUI_config.groups.mail_css),k=G.merge((yui.Env._loader||YUI_config).groups.mail);l.modules=G.mix({},l.modules,false,S);k.modules=G.mix({},k.modules,false,U);if(!Y(l.comboBase)){l.comboBase=NeoConfig.launch_protocol+L+l.comboBase;}if(!Y(k.comboBase)){k.comboBase=NeoConfig.launch_protocol+L+k.comboBase;}return{css:l,js:k,strings:strings,mailYUIURL:NeoConfig.yuiURL,mailBase:YUI_config.base,mailComboBase:YUI_config.comboBase,mailLoaderPath:YUI_config.loaderPath,mailModuleRoot:YUI_config.root};}G.on("om:msg:getConf",function(Y){if(!C){C=H();}O.Openapi.returnAPI(Y,{data:C});});function e(Y){if(Z.hasMessageReadEvents(Y)){G.mail.model.DataStore.Messages.flushExt("openmail");G.fire(Q(g.get("instanceId"),"sandbox.controller"),{cmd:"apprefresh",args:{appConfig:Z.getSandboxMsgReadConfig()}});}}G.on("om:refreshApp",e);G.on("om:installApp",e);G.on("om:uninstallApp",e);var d=function(Y,k,l){var m=this;d.superclass.constructor.apply(m,arguments);m.handleContactChanged=G.on("contacts:api:contactChanged",m.updateLozenges,m);if(!f){return;}m.launchStatus="INIT";m.msgRenderTimer=null;m.isSandboxViewReady=false;m.heightUpdateTimer=null;m.sandboxStartTime=null;m.firstRender=1;m.firstMsgDisplayed=false;m.RSstopwatch=null;m.msgReadRtbApps=0;!m.fullView&&G.once("om:msg:registerSandboxController",function(){if(!m.message){m.render();}});m.modifyAttr("scrollWidthActive",{getter:function(){return !m.isSandboxActive();}});};d.prototype.NAME="OMConvPane";G.extend(d,G.mail.ui.ConvPane,{isSandboxActive:function(){return f&&g&&b<T&&this.launchStatus!=="TIMEOUT";},getEnhancedBody:function(){var l=this,k=l.message,Y=l.isSandboxActive()&&k.extend&&k.extend.openmail&&k.extend.openmail.enhancedBody;return Y||"";},setFullFormatters:function(){var n=this,m=null,k=null,Y=null,l=function(p){var t=p.s||"",r=p.o||0,o=p.f||n.readFormatters,s=p.a||0,q=p.strs||strings;return a(t,r,o,s,q);};if(d.superclass.setFullFormatters){d.superclass.setFullFormatters.apply(n,arguments);m=n.readFormatters.msg_has_attachment;k=n.readFormatters.msg_has_photo_attachment;n.readFormatters.msg_has_photo_attachment=function(){var o=n.message;return n.isSandboxActive()&&(!G.Lang.isUndefined(o.body)&&n.hasOMFlag(o,"suppressAttachments"))?"":k();};n.readFormatters.msg_has_attachment=function(){var o=n.message;return n.isSandboxActive()&&(!G.Lang.isUndefined(o.body)&&n.hasOMFlag(o,"suppressAttachments"))?"":m();};Y=n.readFormatters.msg_blocked;n.readFormatters.msg_blocked=function(){var o=n.message;return(n.isSandboxActive()&&o.extend&&o.extend.openmail&&o.extend.openmail.imgBlocked)?l({s:N._shared_module_message_display_rollup.msg_blocked,o:o}):Y();};}},isPreviewPane:function(){return !this.fullView;},getTotalRetryCount:function(){return b;},createSandbox:function(){var k=this,Y=Z.getSandboxData();if(!Y){W("Sandbox app not found.  Switching to message pane.");return;}k.launchStatus="CREATE";O.Views.runActions(Y,"events","message_render",false,null,null,null,null,null,function(l){k.viewObj=l;k.initSandboxIframe();});},sendSandboxControllerEvent:function(k,Y){if(!this.viewObj){return;}G.fire(Q(this.viewObj.get("instanceId"),"sandbox.controller"),{cmd:k,args:Y});},render:function(Y){var k=this;k.firstActive&&k.firstActive.detach();k.firstActive=null;Y=Y||k.parentNode;if(k.firstRender&&!(Y&&Y.inDoc())){k.firstActive=k.once("activeChange",function(l){if(l.newVal){k.firstRender=0;d.superclass.render.apply(k,[Y]);k.firstActive=null;}});}else{d.superclass.render.apply(k,[Y]);}},scrollWidthReset:function(){var Y=this;d.superclass.scrollWidthReset.apply(Y);if(Y.isSandboxActive()){Y.sendSandboxControllerEvent("resetwidth",{"viewId":Y.viewObj.get("viewId")});}},initSandboxIframe:function(){var n=this,k;if(!n.viewObj){W("viewObj is not available.  Use default appendMarkup.");d.superclass.appendMarkup.apply(n);return;}if(n.launchStatus=="CREATE"){n.startStopwatch(1,"LoadSandbox");n.sandboxStartTime=new Date();n.RSstopwatch=new c.Stopwatch("LoadSandbox");W("Waiting for sandbox to register.");d.superclass.appendMarkup.apply(n);var Y=n.get("parentNode"),m=Y.one(".tripane.content")||Y.one(".message.content"),l=setTimeout(function(){if(n.launchStatus!="TIMEOUT"){W("TIMEOUT: sandbox failed to register!");n.launchStatus="TIMEOUT";n.closeSandbox();if(++b===T){G.mail.Controller.Messages.unhook("get",K);}}d.superclass.appendMarkup.apply(n);I.stat("OM","ERR:registerSandbox");
},B);m.append(n.viewObj.getMarkup());n.viewObj.initIframe();n.launchStatus="WAIT";n.applyHandler();n.once("sandboxViewReady",function(){n.RSstopwatch&&n.RSstopwatch.stop&&n.RSstopwatch.stop();if(n.sandboxStartTime){window.rt_LogTime&&rt_LogTime("t2",(new Date())-n.sandboxStartTime,true);n.sandboxStartTime=null;}W("SUCCESS: registered!");n.launchStatus="REGISTERED";clearTimeout(l);n.isSandboxViewReady=true;});n.viewObj.once("load",function(){n.sendSandboxControllerEvent("initsandboxview",{viewId:n.viewObj.get("viewId"),data:{fullView:n.fullView}});});}},appendMarkup:function(){var Y=this;if(!f||!g){W("Default appendMarkup");d.superclass.appendMarkup.apply(Y);return;}if(Y.launchStatus=="INIT"||Y.launchStatus=="TIMEOUT"){if(b<T){Y.createSandbox();}}Y.handleSandbox();},applyHandler:function(){var k=this,Y=k.viewObj.get("viewId");k.internalAPIHandler=G.on("om:msg:"+Y,k.handleInternalAPI,k);k.convInternalAPIHandler=G.on("om:conv:"+Y,k.handleConvInternalAPI,k);k.on("activeChange",function(l){k.sendSandboxControllerEvent("activechange",{viewId:Y,newVal:l.newVal});});k.on("closeChange",function(l){if(l.newVal===1){k.closeSandbox();}});},closeSandbox:function(){var k=this,Y=(k.viewObj)?k.viewObj.get("viewId"):null;k.isSandboxViewReady=false;k.firstMsgDisplayed=false;k.sandboxStartTime=null;k.RSstopwatch=null;if(Y){k.sendSandboxControllerEvent("closesandboxview",{"viewId":Y});if(k.heightUpdateTimer){k.heightUpdateTimer.cancel();}O.Views.closeView(Y);k.viewObj=null;}if(k.internalAPIHandler){k.internalAPIHandler.detach();k.internalAPIHandler=null;}if(k.convInternalAPIHandler){k.convInternalAPIHandler.detach();k.convInternalAPIHandler=null;}if(k.handleContactChanged){k.handleContactChanged.detach();k.handleContactChanged=null;}if(k.msgRenderTimer){clearTimeout(k.msgRenderTimer);k.msgRenderTimer=null;}},handleSandbox:function(){try{var p=this,s=p.viewObj,k=p.message,r=k.msgs,Y=r.length-1,l=!!(k&&!k.body&&!p.loading_slow&&!p.loading_error)||p.outboundReq,o=p.formatters.page_show_comm_modes()+p.formatters.page_show_comm_modes_else(),m=r?r[Y].body.display:"";}catch(q){I.stat("OM","ERR:genMarkup");}function n(){try{p.RSstopwatch=new c.Stopwatch("DisplayMessageInSandbox");p.startStopwatch(1,"DisplayMessageInSandbox");p.msgReadRtbApps=k&&k.extend&&k.extend.openmail&&k.extend.openmail.context.msgReadRtbApps;var u=null,z={data:{}},t=r[Y],AB=G.Object.getValue(t,["extend","openmail","context"]),x=G.Object.getValue(t,["extend","openmail","onreadScripts"])||[],AA=G.Array.map(AB&&G.Object.keys(t.extend.openmail.context.matchedAppIds)||[],function(AC){return AC.split(".")[0];});if(AB){z.data=O.Messageread.repackageData(t);z.data.matchedAppIdList=AA;z.data.appCodes=x;}z.data.guid=p.guid;z.data.msgItem=Y;z.data.loading=false;z.data.body={content:o,msgBody:m,truncated:(k&&k.body&&k.isTruncated),scrollTop:p.scrollTop,href:p.href,isChat:p.isChat(k)};if(k&&k.body){z.data.body.msgBlockedMarkup=a(N._shared_module_message_display_rollup.msg_blocked,k,p.readFormatters,0,strings);}for(var w=0,v=x.length;w<v;++w){u=x[w];z.data.appCodes.push({css:u.css,scripts:u.scripts,APIContext:u.context});}W("Send mesage to Sandbox.");if(k&&k.body){if(p.msgRenderTimer){clearTimeout(p.msgRenderTimer);}p.msgRenderTimer=setTimeout(function(){p.launchStatus="TIMEOUT";p.closeSandbox();d.superclass.appendMarkup.apply(p);I.stat("OM","ERR:sendMessageToSandbox");},h);clearTimeout(p.msgRenderTimer);}p.sendSandboxControllerEvent("render",{viewId:p.viewObj.get("viewId"),data:z});}catch(y){I.stat("OM","ERR:fireRenderEvent");}}if(p.isSandboxViewReady){n();}else{p.once("sandboxViewReady",function(){n();});}},handleSandboxRenderComplete:function(){var n=this,k=n.viewObj?n.viewObj.get("viewId"):null,m=n.viewObj?n.viewObj.getIframe():null,l=function(){d.superclass.renderComplete.apply(n);if(m){m.set("title",strings["str_comp_nosubject"]);}};if(n.msgRenderTimer){clearTimeout(n.msgRenderTimer);n.msgRenderTimer=null;}if(!n.firstMsgDisplayed){n.firstMsgDisplayed=true;var Y=n.get("parentNode");if(Y){Y.all(".message.content > div").remove();}if(m){m.addClass("enabled");}}else{window.rt_LogTime&&rt_LogTime("t2",0,true);}if(!n.outboundReq&&n.message){G.UA.ie?setTimeout(l,0):l();}},renderProfileImage:function(w,k,u,n){var r=this,Y={},v=r.viewObj?r.viewObj.get("viewId"):null,p,o=r.get("parentNode"),t,s,p,m,q,l={},x=G.mail.common.hiDefProfiles.getCachedProfile;if(!r.isSandboxActive()){d.superclass.renderProfileImage.apply(r,arguments);return;}if(!u||!o||!w){return;}q=u.length;if(q==1&&n){p=d.superclass.getProfileImageMarkup.apply(r,[w[0],u[0]]);Y[n]={msgIdx:n,html:p};}else{for(m=0;m<q;m++){if(k[m]){l=x(k[m])[0];}p=d.superclass.getProfileImageMarkup.apply(r,[l,u[m]]);Y[m]={msgIdx:m,html:p};}}r.sendSandboxControllerEvent("renderProfileImage",{"viewId":v,data:{guid:r.guid,msgs:Y}});},renderComplete:function(Y){var k=this;if(!k.isSandboxActive()){d.superclass.renderComplete.apply(k);return;}k.RSstopwatch&&k.RSstopwatch.stop&&k.RSstopwatch.stop();G.use("mail-ui-convpane-profiles",function(){k.appendProfileImage();});},postRender:function(){var Y=this;if(Y.isSandboxActive()){Y.sendSandboxControllerEvent("resizeSubject",{viewId:Y.viewObj.get("viewId")});}d.superclass.postRender.apply(Y);},handleSandboxDOMSubtreeModified:function(Y){var k=this;j.getIFrameById(k.viewObj.get("viewId")).setStyle("height",Y.height+"px");},handleSandboxDOMSubtreeModifiedWidth:function(Y){var k=this;d.superclass.scrollWidthUpdate.apply(k,arguments);},threadItemDownload:function(k){var m=this,Y=k.msgItem,l=m.message.msgs[k.msgItem];d.superclass.threadItemDownload.apply(m,[null,l,Y]);},handleAttachmentDownloadSingle:function(Y){var l=this,k=l.message.msgs[Y.msgItem];l.downloadAttachment(Y.partId,Y.tnefId,k);},handleAttachmentDownloadAll:function(Y){var l=this,k=l.message.msgs[Y.msgItem];l.downloadAllAttachments("non-image",Y.tnefId,k);},handleAttachmentDownloadAllPhotos:function(Y){var l=this,k=l.message.msgs[Y.msgItem];l.downloadAllAttachments("image",null,k);},handleAttachmentDownloadEverything:function(Y){var l=this,k=l.message.msgs[Y.msgItem];
this.downloadAllAttachments("all",Y.tnefId,k);},handleMessageSetFlag:function(Y){var k=this;G.use("mail-ui-messageevents",function(m){var l=k.message.flags.isFlagged?"unflagged":"flagged";m.mail.ui.MessageEvents.handleUI({action:l},k.fid,null,[k.message]);});},handleMailTo:function(Y){G.use("mail-ui-shortcuts",function(k){k.mail.ui.ShortCuts.composeMailToMessage(Y.mailto);});},handleMRD:function(Y){G.use("mail-controller-mrd",function(k){k.fire("mrd:launch",Y.mrdLink);});},handleUnblockImages:function(Y){var k=this;k.unblockImages();},handleLoadOptions:function(Y){var k=this;k.loadOptions();},handleRetryLoad:function(Y){var k=this;k.retryLoad();},handleToggleShowDetails:A("toggleShowDetails","mail-ui-messagepane-bind"),showMore:function(Y){this.sendSandboxControllerEvent("showMore",{"viewId":this.viewObj.get("viewId"),"markup":this.getAllLozenges(Y.field),"field":Y.field});},updateMessageFlagMarkup:function(Y){if(!f||!this.viewObj){d.superclass.updateMessageFlagMarkup.apply(this);return;}this.sendSandboxControllerEvent("updateMessageFlagMarkup",{"viewId":this.viewObj.get("viewId"),data:{msgId:Y,guid:this.guid}});},updateConvFlagMarkup:function(Y){if(!f||!this.viewObj){d.superclass.updateConvFlagMarkup.apply(this);return;}this.sendSandboxControllerEvent("updateConvFlagMarkup",{"viewId":this.viewObj.get("viewId"),data:{shouldFlag:Y}});},updateMessageReadMarkup:function(Y,k){if(!f||!this.viewObj){d.superclass.updateMessageReadMarkup.apply(this);return;}this.sendSandboxControllerEvent("updateMessageReadMarkup",{"viewId":this.viewObj.get("viewId"),data:{msgIdx:Y,guid:this.guid,shouldMarkAsRead:k}});},updateConvReadMarkup:function(Y){if(!f||!this.viewObj){d.superclass.updateConvReadMarkup.apply(this);return;}this.sendSandboxControllerEvent("updateConvReadMarkup",{"viewId":this.viewObj.get("viewId"),data:{shouldMaskAsRead:Y}});},updateLozenges:function(Y){if(!f||!this.viewObj){return;}this.sendSandboxControllerEvent("handleupdatelozenges",{viewId:this.viewObj.get("viewId"),data:{contacts:Y.details[0]}});},convertShortcuts:function(){},setFocusToSandboxElement:function(Y){if(this.viewObj){this.sendSandboxControllerEvent("setfocus",{viewId:this.viewObj.get("viewId"),selector:Y});}},startStopwatch:function(l,k){var Y=c.Stopwatch.get("MsgInPreview")||this.stopwatch;Y&&Y.start(l,k);},handleInternalAPI:function(k,Y){var l=this;switch(k){case"sandboxStartStopwatch":l.startStopwatch(Y.lv,Y.msg);break;case"sandboxSetFocus":l.setFocusToSandboxElement(Y.selector);break;case"sandboxRenderComplete":l.handleSandboxRenderComplete();break;case"sandboxDOMSubtreeModified":l.handleSandboxDOMSubtreeModified(Y);break;case"sandboxDOMSubtreeModifiedWidth":l.handleSandboxDOMSubtreeModifiedWidth(Y);break;case"sandboxViewReady":l.fire("sandboxViewReady");break;case"downloadSingle":l.handleAttachmentDownloadSingle(Y);break;case"downloadAll":l.handleAttachmentDownloadAll(Y);break;case"downloadAllPhotos":l.handleAttachmentDownloadAllPhotos(Y);break;case"downloadEverything":l.handleAttachmentDownloadEverything(Y);break;case"setFlag":l.handleMessageSetFlag(Y);break;case"mailto":l.handleMailTo(Y);break;case"mrd":l.handleMRD(Y);break;case"viewFullMsg":l.viewFullMsg(Y);break;case"unblockImages":l.handleUnblockImages(Y);break;case"loadOptions":l.handleLoadOptions(Y);break;case"retryLoad":l.handleRetryLoad(Y);break;case"toggleShowDetails":l.handleToggleShowDetails(Y);break;case"showMore":l.showMore(Y);break;case"message.readAppTime":l.handleMsgReadAppTime(Y);break;}},handleConvInternalAPI:function(k,Y,m){var l=this;cmdFn=l[k];if(G.Lang.isFunction(cmdFn)){cmdFn.call(l,Y,m);}},threadItemFlag:function(k){var n=this,Y=k.msgItem,m=n.message.msgs[Y],l=m.flags.isFlagged?"unflagged":"flagged";G.use("mail-ui-convpane-bind",function(o){n.flagMessage(m,Y,l);});},threadItemUnread:function(k){var n=this,Y=k.msgItem,m=n.message.msgs[Y],l=m.flags.isRead?"unread":"read";G.use("mail-ui-convpane-bind",function(o){n.flagMessage(m,Y,l);});},showMessageWithBody:function(m,l,k,Y){var n=this;markup=n.getMsgMarkUp(m,n.guid+"-"+l,true),appScripts=null,hasOMContext=m&&m.extend&&m.extend.openmail&&m.extend.openmail.context,appCodes=m&&m.extend&&m.extend.openmail&&m.extend.openmail.onreadScripts||[],matchedAppIdList=G.Array.map(hasOMContext&&G.Object.keys(m.extend.openmail.context.matchedAppIds)||[],function(o){return o.split(".")[0];}),args={viewId:n.viewObj.get("viewId")};if(hasOMContext){args.data=O.Messageread.repackageData(m);args.data.matchedAppIdList=matchedAppIdList;args.data.appCodes=appCodes;}args.data.guid=n.guid;args.data.msgItem=l;args.data.body={content:markup,msgBody:m.body.display,quotedText:m.body.quotedText,inlineAttachments:m.body.inlineAttachments,truncated:(m&&m.body&&m.isTruncated)};n.sendSandboxControllerEvent("showMessageWithBody",args);},selectThread:function(k){var m=this,Y=k.msgItem,l=m.message.msgs[Y];m.expandMessage(l,Y,null,false,false);},createCDO:function(k,n){var m=this,Y=k.msgItem,l=m.message.msgs[Y];G.use("mail-ui-inlinecompose","mail-controller-sendconfirm",function(o){m.initializeCDO(m,l,null,Y,k.author);n();});},setDocRole:function(){},setRootNodeTabIndex:function(){this.get("rootNode").set("tabIndex",-1);},setFocusNode:function(){},onFocus:function(){var k=this,Y=k.fullPageView?k.getSubjectFocusNodeSelector():".message.content";if(k.launchStatus=="REGISTERED"&&k.get("active")&&k.message){k.setFocusToSandboxElement(Y);}return 1;},handleMsgReadAppTime:function(m){var p=this,o=p.message,l=o.mid,n=m.time,Y=Z.getAppName(m.appId)||"",k=c.Stopwatch.get("MsgInPreview")||p.stopwatch;k&&k.addComment("-AppRender."+Y+":"+n);if(--p.msgReadRtbApps===0){p.fire("msgReadAppComplete");}W("message.read app time(mid:"+l+" / appName:"+Y+"): "+n);}});G.namespace("om.ui");G.om.ui.OMConvPane=d;},"1.0.0",{requires:["mail-ui-convpane-base","mail-controller-messages","json-stringify","om-model-datastore","om-controller-messageread","om-controller-views","common-utils-stats","rocket-stats"]});

YUI.add("om-controller-messageread",function(D){var T=D.om,I=T.Controller,i=I.extend("Messageread"),k=T.common.Utils,m=T.model.DataStore,h=m.Registry,U=m.ViewRegistry,F=m.EventRegistry,J=m.ApplicationConfig,L=D.common.Utils,n=D.mail,B=n.model.DataStore.Messages,K=n.Controller.Messages,Q=D.Array,A=D.Lang,a=D.Object,R=A.isUndefined,d="message.read",Z=k.createLogger("ONREAD");function H(u,AA,t){var z=null,w=u.extend,o=w.openmail,Y=(AA.cbk&&AA.cbk.args&&AA.cbk.args.stopwatch)||null,r=u.mid,p="FILTER: "+r+": ",y=new L.Stopwatch("OMMessageGetPostHook"),x;if(o&&o.isProcessed){Z(p+"This message was already processed");return u;}if(o&&o.onEnhanced){Z(p+"This message is already enhancing by another runningQ. Wait until it's done");x=t(function(){});o.onEnhanced.push(x);return;}Y&&Y.start(1,"MatchOnRead");try{z=C(u);if(!o){o=w.openmail={isProcessed:false,isBodyModified:false,flags:{suppressAttachments:z.suppressAttachments}};}o.context=z;}catch(v){Z(p+"Error Message:"+v.message||"");}if(z&&z.filtersMatched){try{Z(p+"This message can be enhanced. start enhancing");o.onEnhanced=[];function s(){}function q(AC){x(AC);for(var AB in o.onEnhanced){o.onEnhanced[AB](AC);}delete o.onEnhanced;y.stop();}x=t(s);u.inboxservices=AA.origParms.msg.inboxservices||[];f(u,q,Y);}catch(v){Z(p+"JS Error occured, show the original message");x(u);}}else{if(!m.Loading.isLoading()){o.isProcessed=true;Z(p+"This message is not interested by any onRead app. Show the original message");}else{Z(p+"Openmail is still loading.  Result not cached.  Show the original message");}}}function f(w,u,Y){Y&&Y.start(1,"LoadAppsOnRead");var p=w.extend.openmail.context,s=p.msgReadAppData,y=p.launchAppIds,q=k.getObjSize(y),t=w.mid,r="LOADQ: "+t+": ",v,AB,AA,o,x;if(q>0){function z(AF){var AD=NeoConfig.om.onReadAppLaunchTimeout.split("."),AC=q*parseInt(AD[2]),AE;AC=Math.max(AC,parseInt(AD[0]));AC=Math.min(AC,parseInt(AD[1]))*1000;AE=AF.later(AC,this,function(){Z(r+"launch timeout. but let's move to runQ");AF.detach("om:message.read:loadQ|*");j(w,u,Y);return;});Z(r+"# of launch apps("+q+") / total launch timeout("+AC+"ms)");for(o in y){v=s[o];AB=v.appData;AA=AB.app;x=k.getEventName(o,d,null);I.Views.runActions(AB,"events","message_read",true,null);Z(r+AB.name+"("+AB.app+"): launching");AF.once("om:message.read:loadQ|"+x+"registered",function(AG){Z(r+AB.name+"("+AB.app+"): event registered "+AG);q--;if(q===0){AE.cancel();j(w,u,Y);}});}}if(I.Views&&I.Views.runApps&&I.Internalapi){z(D);}else{D.use("om-controller-views","om-controller-internalapi",z);}}else{Z(r+"All apps are already launched");j(w,u,Y);}}function j(AL,AB,w){w&&w.start(1,"RunAppsOnRead");var AH=AL.extend,q=AH.openmail,p=q.context,o=p.msgReadAppData,u=p.matchedAppIds,AJ=l({data:c(AL)},d),y=new D.AsyncQueue(),AC=AL.mid,z="RUNQ: "+AC+": ",s="om:message.read:runQ:"+AC+"|",Y,v,AG,r,AF,t,AI,x=false,AA=false,AK,AD=(document.location.host.indexOf("corp.yahoo.com")!==-1);for(AK in m.MessageReadRunList.getAll()){if(AC!=AK){Y=m.MessageReadRunList.get(AK);if(Y){Y.queue.stop();delete Y.omExtend.onEnhanced;D.detach("om:message.read:runQ:"+AK+"|*");m.MessageReadRunList.del(AK);Z(z+"STOP runningQ for message(mid:"+AK+"), another runningQ for the current message has started");}}else{Z(z+"There is already runningQ for the same message (mid:"+AK+")");}}m.MessageReadRunList.set(AC,{queue:y,omExtend:q});function AE(AM){y.add(function(){y.pause();var AN=D.later(parseInt(NeoConfig.om.onReadAppRunTimeout)*1000,this,function(){Z(z+"TIMEOUT "+AM);D.fire(d+AC,AJ);});D.once(s+d+AC,function(AR,AS,AP){AN.cancel();if(AR.returnCode==="success"){V(AR.data,AS);Z(z+"RETURN: SUCCESS "+AM);if(AR.data.data){q.isBodyModified=true;AJ.data.body.content=AR.data.data;}if(A.isUndefined(AJ.data.om_flags)){AJ.data.om_flags={};}if(AR.data.suppressAttachments){AJ.data.om_flags.suppressAttachments=AR.data.suppressAttachments;}if(AR.data.imagesBlocked){AA=true;}if(AA){AJ.data.imagesBlocked=true;}if(!AJ.data.onreadScripts){AJ.data.onreadScripts=[];}var AO=h.isInternal(AS)?NeoConfig.om.webcacheHostCom:NeoConfig.om.webcacheHostNet,AQ={context:{appId:AS,instanceId:AP,invokePrefix:("http://"+(AD?AO:([AS,".",AO].join(""))))},scripts:AR.data.scripts||[],css:AR.data.css||[]};AJ.data.onreadScripts.push(AQ);}else{Z(z+"RETURN: OTHERS "+AM);}y.run();});D.fire(AM,AJ);Z(z+"FIRE "+AM);});}for(AF in u){v=o[AF];AG=v.appData;r=AG.app;AI=v.viewId;t=k.getEventName(AF,d,null);x=U.get(AI)&&F.getByEventName(AF,AI,d+r);if(x){AE(t);Z(z+"ADD "+t);}}D.once(s+d+".jserror"+AC,function(){Z(z+"JSERROR");D.fire(d+AC,AJ);});y.on("complete",function(){if(AH&&q){if(q.isBodyModified){q.enhancedBody=AJ.data.body.content;}q.onreadScripts=AJ.data.onreadScripts;if(!A.isUndefined(AJ.data.om_flags)){q.flags.suppressAttachments=!!(AJ.data.om_flags.suppressAttachments||q.flags.suppressAttachments);}if(!A.isUndefined(AA)){q.imgBlocked=AA;AA=false;}q.isProcessed=true;m.MessageReadRunList.del(AC);D.detach(s+"*");y.stop();AB(AL);Z(z+"ALL DONE!");}});y.run();}function V(o,q){var Y="returnMessage: data type error, appId="+q,p=(A.isObject(o)&&!a.isEmpty(o)&&((R(o.scripts)||A.isArray(o.scripts))&&(R(o.css)||A.isArray(o.css))&&(R(o.suppressAttachments)||A.isBoolean(o.suppressAttachments))&&(R(o.imagesBlocked)||A.isBoolean(o.imagesBlocked))));if(!R(o.data)&&!A.isString(o.data)){p=false;delete o.data;}if(!p){Z(Y);}return p;}function c(q){var u={},Y={},s=K.getQueryParams(q),p=q.extend.openmail.context,o=!K.isCertified(q.inboxservices||[]),t=(s.midRequest.blockImages=="all")&&o;L.merge(u,q.header);L.merge(Y,q.flags);var r={from:u.from,to:u.to,cc:u.cc,replyto:u.replyto,subject:u.subject,date:u.sentDate,messageid:q.mid,folderid:s.fid,sourceFolderid:q.sourceFolderInfo&&q.sourceFolderInfo.fid||null,body:{content:q.body.display},flags:Y,annotation:p.scAnnotation||{},attachment:X(s.fid,q.mid,q.attachments),imagesBlocked:!!((q.hasBlockedImages&&o)||(q.imgAttachments&&q.imgAttachments.length&&t)),suppressImages:t,truncated:q.isTruncated,sandboxPrefix:q.yivPrefixNumber};return r;}function N(p,Y,o){var q=p.header;
return{header:{from:q.from,to:q.to,cc:q.cc,bcc:q.bcc,replyto:q.replyto,inReplyTo:q.inReplyTo,sentDate:q.sentDate,receivedDate:q.receivedDate,subject:L.escapeHtml(q.subject)},body:p.body,hasForwardedMsg:p.hasForwardedMsg,isTruncated:p.isTruncated};}function X(p,r,o){var s=[];for(var Y in o){var t=o[Y],q={partId:L.escapeHtml(t.partId),type:L.escapeHtml(t.type),tnefId:L.escapeHtml(t.tnefId),subtype:L.escapeHtml(t.subtype),typeParams:L.escapeHtml(t.typeParams),disposition:L.escapeHtml(t.disposition),dispParams:L.escapeHtml(t.dispParams),size:t.size,encoding:L.escapeHtml(t.encoding),filename:L.escapeHtml(t.filename),contentId:L.escapeHtml(t.contentId),thumbnailurl:t.thumbnailurl};q.url=D.mail.Controller.Messages.getAttachmentUrl(p,r,t.partId,t.tnefId,t.filename,t.subtype);if(q.type=="message"){q.message=N(t.message,p,r);}s.push(q);}return s;}function l(p,Y){var q=D.merge(p),o=q.data.messageid,r=q.data.folderid;switch(Y){case d:q["returnMessage"]=["function( obj ) {",'var _context = { eventName: "',d,'", mid:"',o,'", fid:"',r,'" };','openmail.Application.callWebService( { url:"apps://", method:"GET", parameters:{ cmd:"returnEvent",args:{ ctx:_context, returnCode:"success", data:obj } } } );}'].join("");q["cancel"]=["function( obj ) {",'var _context = { eventName: "',d,'", mid:"',o,'", fid:"',r,'" };','openmail.Application.callWebService( { url:"apps://", method:"GET", parameters:{ cmd:"returnEvent", args:{ ctx:_context, returnCode:"cancel", data:obj } } } );}'].join("");break;case"compose.start":break;}return q;}function C(v){var t=["http://","https://","ftp://"];if(v.extend.openmail&&v.extend.openmail.context&&v.extend.openmail.enhancedBody){Z("This message is cached and get the context from cache");return v.extend.openmail.context;}function p(w){return Q.some(t,function(x){return w.substring(0,x.length)===x;});}function u(x){var AB=x.length,y=Math.max(x.search(/<body[^>]*>/i),0),w=Math.max(x.search(/<\/body>/i),AB),AA=(y!==0||w!==AB?x.substring(y,w):x).replace(/<script[^>]*>[\s\S]*?<\/script>/mig,""),z=AA.match(/<a\s[^>]*href\s*=\s*"[^"]*|\b(ftp|https?):\/\/[^\s<]+/mig)||[],AC=Q.filter(Q.map(z,function(AD){return A.trim(L.unescapeHtml(AD.replace(/^<a\s[^>]*href\s*=\s*"/mi,"").replace(/"[\s\S]*$/mi,"")));}),p);return AC;}function r(){var AC=v.body.display,w=W(AC),x=w?G(w):{filterInfo:{},scAnnotation:{}},AD=x.filterInfo,AA=x.scAnnotation,AB=Q.hash((AD.url||[]).concat(AD.http||[])),z=Q.unique(u(AC)),y=Q.filter(z,function(AE){return !(AE in AB);});Q.each(y,function(AE){if(!AD.url){AD.url=[];AA.url=[];}AD.url.push(AE);AA.url.push({id:D.guid(),text:AE,context:""});});return x;}var o=null,s=r(),q={annotation:s.filterInfo||{},flags:v.flags,fid:K.getQueryParams(v).fid,header:{from:v.header.from.email,to:Q.map(v.header.to,function(w){return w.email;}),subject:v.header.subject,"attachment.type":Q.map(v.attachments,function(w){return w.type;}),"attachment.subtype":Q.map(v.attachments,function(w){return w.subtype;}),"attachment.filename":Q.map(v.attachments,function(w){return w.filename;})}},Y={domainKeyOk:!v.header.domainkey||(new RegExp(v.header.domainkeyname+"$","i")).test(v.header.from.email),isSpam:q.fid==="%40B%40Bulk"};o=P(v,q,Y);o.scAnnotation=s.scAnnotation||{};return o;}function P(x,AI,AA){var p={},o={},u={},v={},AE=h.getAll(),w=false,AB=false,AH,AF,s,AD,AJ,Y,y,q,AG,AC,t,z=0;function r(AL,AK){return Q.some(Q(AL),function(AM){try{return AK.test(AM);}finally{AK.lastIndex=0;}});}if(!AA.isSpam){for(s in AE){AF=AE[s];if(!AF){continue;}AD=AF.instance;if(AF.needsAck&&!h.isNoDisclaimer(AF)){continue;}if(h.isSick(AF)){continue;}if(NeoConfig.isFullSSL&&AF.name=="Yahoo! Shortcuts"){continue;}if(!AA.domainKeyOk&&!h.isInternal(AF)){continue;}if((AJ=AF.config)&&(Y=AJ.events)&&(y=Y.message_read)&&(q=y.match)){AH=(y.action&&y.action.launch&&y.action.launch.id)?M(s,y.action.launch.id):e(s,"message_read");w=U.get(AH)&&F.getByEventName(AD,AH,d+s);AG=q["@attributes"].mode;AC=t=0;Q.each(J.MATCH_CATEGORIES,function(AK){var AM=q[AK]||[],AL=Q.filter(AM,function(AP){var AO=AI[AK][AP.name],AN=!A.isUndefined(AO)&&r(AO,AP.regex);Z("FILTER: "+AF.name+" ("+AF.app+"): ["+AK+"/"+AP.name+"]"+(AN?"":" NOT")+" MATCH for "+AP.regex);return AN;});AC+=AM.length;t+=AL.length;});Z("FILTER: "+AF.name+" ("+AF.app+"): "+"matched "+t+" of "+AC+" filters; mode="+AG);o[AD]={appData:AF,totalNumFilters:AC,numFiltersSatisfied:t,viewId:AH};if(((AG==="or")&&(t>0))||((AG==="and")&&(t>0)&&(AC==t))){v[AD]=AD;if(y.message_actions&&y.message_actions.suppress_attachments=="true"){AB=true;}if(!w&&y.action){u[AD]=AD;}if(NeoConfig.om.isMsgReadAppRTB&&h.isMsgReadRtbApp(s)){z++;}}}}}p=k.getObjSize(o)>0?{filterInfo:AI,filtersMatched:k.getObjSize(v)>0?true:false,launchAppIds:u,matchedAppIds:v,autoRun:true,suppressAttachments:AB,msgReadAppData:o}:{filtersMatched:false,launchAppIds:{},matchedAppIds:{},autoRun:true,msgReadAppData:null};if(NeoConfig.om.isMsgReadAppRTB){p.msgReadRtbApps=z;}return p;}function b(o,Y){var q=parseInt(o.split("_").pop(),10),p=parseInt(Y.split("_").pop(),10);return q<p?-1:p<q?1:o.localeCompare(Y);}var E=[{include:/shortcuts:\/us\/(instance)\/(identifier)\/(URL|phone_number|email_address|date_only|date_time|day_of_week|day_of_week_time|month_only|month_year|time_only|vin|.+_tracking|isbn|hyperlink\/http)(\/([\w\W]+))*$/i,exclude:/(other\/health\/drug|organization\/company\/ticker)/},{include:/shortcuts:\/us\/(instance)\/(place|person|organization|event|animal\/fictional|other)(\/([\w\W]+))*/i,exclude:/(other\/health\/drug|organization\/company\/ticker)/i},{include:/shortcuts:\/us\/(tag)\/(other\/technology|news|celebrity|finance\/glossary_mail|other\/wiki)(\/([\w\W]+))*/i,exclude:/(small_business|health\/yahoo_health)/i},{include:/shortcuts:\/us\/(place\/virtual\/web_site)(\/([\w\W]+)*)/i},{include:/shortcuts:\/us\/(class)(\/([\w\W]+))*/i},{include:/shortcuts:\/(concept)(\/([\w\W]+))*/i},{include:/shortcuts:\/(abstract)\/(other|organization|event)(\/([\w\W]+))*/i}];function S(o){var q,r=Q.some(E,function(s){var u=s.include,t;try{if(!(q=u.exec(o))){return false;
}}finally{u.lastIndex=0;}if((t=s.exclude)){try{if(t.test(o)){return false;}}finally{t.lastIndex=0;}}return true;}),p,Y;if(!r){return null;}p=q[2]==="identifier"?q[3]:q[2];Y=q[Math.floor(q.length-1,5)];return{text:o,category:q[1],type:p,subtype:p!==Y?Y:""};}function G(Y){var p=a.keys(Y).sort(b),o=Q.hash(["class","concept"]);return Q.reduce(p,{filterInfo:{},scAnnotation:{}},function(q,s){var t=Y[s],r=a.keys(Q.reduce(t.type,{},function(x,u){var v=S(u),w;if(v){if(v.type&&v.category&&!o[v.category]){w=v.type.replace(/^.*\//,"");}else{w=v.category||v.subtype;}if(w){x[w.toLowerCase()]=true;}}return x;}));Q.each(r,function(u){var v;if(u==="http"){v=L.unescapeHtml((t.metaData||{}).linkHref)||t.text||"";}else{v=t.text||"";}Q.each(a.keys(q),function(w){if(!q[w][u]){q[w][u]=[];}});q.filterInfo[u].push(v);q.scAnnotation[u].push({id:s,text:v,context:t.context});});return q;});}function W(r){var o=r.search(/<script[^>]*>/i),t,Y,q,p;if(o>=0){t=r.length;Y=Math.max(r.search(/<\/script>/i),t);q=o!==0||Y!==t?r.substring(o,Y):r;p=/\bYAHOO\.Shortcuts\.annotationSet\s*=\s*({[\s\S]*?})\s*;/.exec(q);if(p&&p[1]){try{return D.JSON.parse(p[1]);}catch(s){return null;}}}return null;}var O="om_user_view_id_",g="om_default_view_id_";function M(o,Y){return O+o+"-"+Y;}function e(o,Y){return g+o+"-"+Y;}D.mix(i,{postHookMessageGet:H,runMessageReadAppFilters:P,repackageData:c,canEnhanceMessage:C,validateReturnData:V},true);},"1.0.0",{requires:["om-controller-base","om-common-utils","async-queue","mail-controller-messages","common-utils-stats"]});

YUI.add("gx_bootstrap",function(B){B.namespace("galaxy");B.galaxy.cachedEvent={};var C=B.mail,H=window.gGalaxyData,E=B.common.Utils.rocketstats.stat,F=function(K,J){if(B.Env._used[J]&&B.Env._attached[J]){return;}if(K){if(J==="gx_messages"&&K.target&&K.target.getAttribute("msgheader")){K.preventDefault();}B.galaxy.cachedEvent[J]=K;if(K.target.getAttribute("href")=="#"){K.preventDefault();}}B.use(J,function(L){if(J==="gx_messages"){L.galaxy.messages(K);}});return true;};B.once("click",F,"#gx_cue",null,"gx_cue");B.once("click",F,"#gx_cue_mini_nux",null,"gx_cue_mini_nux");var D=B.once("click",F,"#gx_messages",null,"gx_messages");var G=B.on("ds:folder:change",function(K,J,L){if(K&&J&&L){D.detach();G.detach();F(null,"gx_messages");}});if(NeoConfig&&NeoConfig.launchMsgPrefetch!=1&&H&&H.ruefcCaching==1){B.once("ws:postLoad",function(){var L=3,K=[],J=B.one("#gx_messages").all("ul.messages a");J.each(function(M){K.push({ts:M.getAttribute("ts"),mid:decodeURIComponent(M.get("id").substring(5))});});K.sort(function(N,M){return(M.ts-N.ts);});if(C&&C.Controller&&C.Controller.Messages){C.Controller.Messages.get({fid:"Inbox",msg:null,prefetch:K.slice(0,L)});}});}B.once("click",F,"#gx_vnews",null,"gx_news");if(B.one("#gx_birthdays a.ecard")){B.on("click",function(J){E("gx","birthday_click");B.fire("mrd:launch","http://mrd.mail.yahoo.com/gallery?appId=34o9m6oo30o9l&param0=374446");J.preventDefault();},"#gx_birthdays a.ecard");}if(B.one("#gx_top_searches")){B.one("#gx_top_searches").delegate("click",function(J){var K=J.currentTarget;if(K.get("nodeName").toUpperCase()=="A"&&K.getAttribute("target")=="_blank"){E("gx","trendingClick");}},"a");}B.galaxy.bindInboxLink=function(){B.on("click",function(J){E("gx","RUEFCViewAll");yui.fire("openInbox");J.preventDefault();},"#gx_messages .icn-inbox a.more");};B.galaxy.bindInboxLink();B.galaxy.delayLoadImages=function(J){J=J||"#galaxyPageContainer";var K=B.all(J+" img[dsrc]");K.each(function(L){L.on("load",function(){this.removeClass("invisible");});L.set("src",L.getAttribute("dsrc"));});};var I=H&&H.rushmoreEnabled===true&&B.one("#gx_messages a.photo")&&(H.linkedApps.indexOf("facebook")!=-1||H.showProfileImage);function A(){if(I){B.use("gx_profiledata",function(J){J.galaxy.ProfileData.getProfileData({onFailure:J.galaxy.delayLoadImages});});}}if(!I){B.galaxy.delayLoadImages();}if(C.ui.Workspace.get("postLoadFired")){A();}else{B.on("ws:postLoad",function(){A();});}B.galaxy.loadRushmoreImages=A;B.galaxy.isRushMore=I;},"1.0.0",{requires:["node-base"]});

YUI.add("common-ui-virtuallist-base",function(H){var G=H.Lang,C=H.Node,A=C.getDOMNode,E=C.one,D=C.create,B=H.common.Utils;var F=function(AG){AG=AG||{};var f=this,J,Ag,Ai,AQ=AG.pageSize||50,AE=AG.ulSize||85,e=AG.ulPadding||60,Aw=AG.itemHeight||21,AV=AG.key||"id",AF=H.guid(),Q=AG.length||(AG.arrItems?AG.arrItems.length:0),r,m=AG.listHolder||null,w,Ac=AG.scrollDelay||100,l,g,Ap=-1,Ad=AG.context,n=AG.requestItems,Az,R=0,u={},AN=[],Ab={},AY=0,z,Aj=1,An=-1,A7,As=AG.selectclass||" selected ",A4=G.trim(As),A0=AG.unselected||" unselected ",o=G.trim(A0),AL=AG.arrItems||[],j=AG.renderEmpty||0,AC,Au,AH,Av,b,AI,Aa=AG.scrollToBottom,A6=0,c={},Ae=0,P,x,O,AO,A1={38:1,40:1,33:1,36:1,34:1};if(Q){AL.length=Q;}H.on("windowresize",X);function AW(){Q=f.rootSelect=0;}function L(BF){return AF+"-"+BF;}function AS(BF){return Ag.one("#"+L(BF));}function BC(BF){return u[BF]||(Az&&(BF>=Az.begin)&&(BF<=Az.end)&&(!Ab[BF]));}function AJ(i){return f.isSelected(i)?As:" ";}function y(){AI.scrollTop+=AI.offsetHeight;}function s(){AI.scrollTop-=AI.offsetHeight;}function AX(BF,i){if(i<0||i>=Q){return;}var BG=AS(i);BG.focus();Ay(BF,BG,1);v();}function Z(BF){var i=((H.UA.os==="macintosh")?BF.metaKey:BF.ctrlKey);A7=BF.shiftKey;switch(BF.keyCode){case 38:case 188:if(BF.ctrlKey||BF.keyCode==38){Af(BF);AX(BF,Ap>0?Ap-1:0);}break;case 40:case 190:if((BF.ctrlKey&&!BF.metaKey)||BF.keyCode==40){Af(BF);AX(BF,(f.rootSelect?Ap+1:(Ap>0?Ap:0)));}break;case 36:case 33:An=0;s();Af(BF);break;case 35:case 34:An=1;y();Af(BF);break;case 65:case 97:if(i&&!A7&&!BF.altKey){Ak(1);Af(BF);}break;default:break;}}function Am(BH,i,BG,BJ,BF){var BI;if(BI=S(BH)){if(i){A2();}Ay(0,0,1,BI.i,0,BG,1,BJ,BF);return 1;}else{AY=AY||{};AY[BH]=1;}}function S(i){return BE(function(BF,BG){if(BG&&BG[AV]==i){return{i:BF,item:BG};}});}function BE(BG,BJ){for(var BI=0,BH,BF=AL.length;BI<BF;BI++){if(BH=BG.call(BJ,BI,AL[BI])){return BH;}}}function Ak(i){if(i&&(R==Q)){A2(0,0,1);}else{A2(1,1);Az={begin:0,end:Q-1};R=Q;f.checkmode=1;Au=1;h(0,1);f.fire("select",{count:R});return 1;}}function AM(i){var BG=Az||{begin:Q,end:Q-1},BH={};function BF(BJ){BH=BJ;Al(BG.end+1,Q-1,u,BI);}function BI(BJ){BH.arr=BH.arr.concat(BJ.arr);G.augmentObject(BH.map,BJ.map);for(AC in Ab){BH.map[Ab[AC][AV]]=Ab[AC];BH.arr.push(Ab[AC][AV]);}i.call(0,BH);}Al(0,BG.begin-1,u,BF);}function d(){return R==Q;}function I(BF,BK,BG,BM){var BL={},BH,BI;function BJ(BN){var i,BP,BO=[];BL.arr=BN.arr;BL.map=BN.map;for(BI in u){if(u[BI]){BL.map[u[BI][AV]]=u[BI];BL.arr.push(u[BI][AV]);}}if(R==1){BH=BI||Az.begin;if(BG&&BM){BG(AL,BH,BO,BM);}BL.neighbors=BO;}if(AY){H.mix(BL.map,AY);for(BI in AY){BL.arr.push(BI);}}for(i in AL){BP=AL[i];BL.map[BP[AV]]&&(BL.map[BP[AV]]=BP);}BF(BL);}if(!Az){BJ({map:{},arr:[]});}else{Al(Az.begin,Az.end,Ab,BJ,BK);}}function Al(BG,BK,BL,BI,BH){var BM,BR,BN=[],BF={},BP,BJ;if(BG>=Q){return BI({map:BF,arr:BN});}for(BM in BL){BJ=1;break;}function BO(BT,BS,i,BU){for(BM=BS;BM<=i;BM++){BR=BT[BM];if(BR){if(!BL[BM+BU]){BF[BR[AV]]=BR;BN.push(BR[AV]);}}else{BP=1;}}}function BQ(BS,i){if(BS<BG){i.splice(0,BG-BS);}if((BS+i.length)>BK){i.length=BK-BS+1;}if(BJ){BM=i.length;while(BM--){if(BL[i[BM]]){i.splice(BM,1);}}}BO(i,0,i.length-1,BS);BG+=i.length;if(BG<BK){n.call(Ad,BG,BK-BG+1,BQ,1);}else{BI({map:BF,arr:BN});}}BO(AL,BG,BK,0);if(BP&&!BH){BN=[];n.call(Ad,BG,BK-BG+1,BQ,1);}else{if(BP&&BH){BF={};}BI.call(0,{map:BF,arr:BN});}}function AD(BH,i,BG){function BF(){var BN,BL=0,BM,BK=i||[],BI=BK.length,BJ=BH+BI;for(;BL<BI;BL++){AL[BH+BL]=BK[BL];}if(AY&&(A8(AY))){for(BL=BH;BL<BJ;BL++){if((BM=AL[BL])&&(BN=BM[AV])){if(AY[BN]){delete AY[BN];Am(BN,0,1,1,f.checkmode);}}}}AL.length=BG;if(Q&&(BG>Q)&&((BH!=0)||(AI.scrollTop!=0))){AI.scrollTop+=((BG-Q)*Aw);}AB(BG,A6,A6);A6=0;if(!BG){Ah(j?j(AG.context):"");f.fire("renderComplete");}else{h();}}if((BG!=Q)||AO){Au=1;Y(BF);}else{BF();}}function v(){var i=AS(Ap),BG=AI.scrollTop,BF=BG+AI.offsetHeight,BH;i=A(i);if(!i){return;}BH=i.offsetTop+Ai.offsetTop;if((BH+Aw)>BF){AI.scrollTop=BH+Aw-AI.offsetHeight;}else{if(BH<BG){AI.scrollTop=BH;}}}function BA(i){return i.hasClass(A4);}function Af(i){i.halt();}function W(BF){var i;if(i=AT(BF)){z=!BA(i);if(!H.UA.ie||H.UA.ie>8){Av.focus();}if(z){Ay(BF,i);}if(H.UA.gecko==0||H.UA.os!="macintosh"||BF.button!=3){BF.preventDefault();}return 0;}}function V(BF){var i;if(i=AT(BF)){if(!z&&(BF.button<2)){Ay(BF,i);}if((R==1)&&!q(BF)&&(BF.button<2)){f.fire("command",{e:BF});}BF.preventDefault();return 0;}}function q(BG){var BF=BG.target,i;return((BF.get("type")||"").toLowerCase()=="checkbox"||BF.hasClass("cbox")||BF.hasClass("info")||(BF.hasClass("fixed")&&BF.hasClass("start"))||((i=BF.get("parentNode"))&&i.hasClass("cbox"))||i.hasClass("info")||Ar(BG));}function Ar(BK){var BJ=BK.target,BI,BH=0,BF=0,BG,i;if(BJ.hasClass("list-view-item")){i=BJ.one("div.info");if(i){BH=i.get("offsetWidth");}BG=BJ.one("input");if(BG){BF=BG.get("offsetWidth");}BI=BJ.getX()||0;return((BK.clientX>BI)&&(BK.clientX<BI+BF+BH));}}function T(BF){if(!q(BF)){var i=AT(BF);if(i&&BA(i)){f.fire("dblclick");if(R==1){f.fire("command",{e:BF});}Af(BF);return 0;}}}function At(){if(f.rootSelect&&An>=0&&A7){var i=AR(An).i,BF,BG;if(AL[i]){BF=An;An=-1;Ay(0,0,1,i,A7);if(BG=AS(Ap)){AI.scrollTop=(Ai.offsetTop+BG.get("offsetTop"))-(BF?(AI.offsetHeight-(Aw)):0);}}}}function p(BI,BG){var BL,BF,BM=BG.className,BN=AJ(BI),BK=BM.indexOf(A4)>=0,BJ=BN.indexOf(A4)>=0,BH;if(AL[BI]){BH=L(BI);if(BH!=BG.id){BG.id=BH;}}if(BK!=BJ){if(BK&&!BJ){BF=1;}BG.setAttribute("aria-selected",!!BJ);BG.className=(BK&&!BJ)?BM.replace(A4,""):BM+BN;}if(BJ&&f.checkmode){BL=BG.getElementsByTagName("input");if(BL&&BL[0]){BL[0].checked=true;}}if(BF||(BJ&&(R==1)&&!f.checkmode)){BL=BG.getElementsByTagName("input");if(BL&&BL[0]){BL[0].checked=false;}}}function AU(){var BF=Ae,BG=Ai.firstChild,BH;while(BG){BH=BG.className;if(BH&&BH.indexOf("list-view-item")>=0){p(BF,BG);BF++;}BG=BG.nextSibling;}}function A9(BF){return Math.floor(BF/AQ);}function A3(){if(w){w.cancel();}w=G.later(Ac,f,i);function i(){At();var BG=AI.scrollTop,BN=AI.offsetHeight,BK=Math.max(BN,(Aw*7)),BF=BG+BN,BJ=Ai.offsetTop,BO=Math.max(Ai.offsetHeight,AE*Aw),BM=BJ+BO,BI=Math.floor(BO/2),BH=Math.floor(AE/2),BL;
if(f.flexRow){if((BM<BG)||(BJ>BF)){BL=Math.floor(BG/Aw)-1;Ai.innerHTML="";}else{if(BJ>BG){BL=Ae-BH;}else{if(BM<BF){BL=Ae+BH;}}}BL=Math.max(BL,0);if((BL>=0)&&(BL<Q)&&(BL!=Ae)){Ae=BL;h();}}else{if(Math.min(AI.scrollHeight,BF+BK)>BM){Ae=Math.floor(Math.max(0,(BF-BI)/Aw));h();}else{if(Math.max(0,(BG-BK))<BJ){Ae=Math.max(0,Math.floor((BG-BI)/Aw));h();}}}}f.fire("scroll");}function AT(BH,BI){var BG=BH.target,i,BF;BF=BG.ancestor(function(BJ){if(!BI&&BJ.hasClass(o)){i=1;}return BJ.hasClass("list-view-item")||i;},true);return i?0:BF;}function a(i){return 1*i.get("id").split("-").pop();}function Ax(i){return AL[a(AT(i,1))];}function A2(BG,i,BF){u={};AN=[];Ab={};Az=0;R=0;f.checkmode=0;Ap=-1;An=-1;AY=0;f.rootSelect=0;if(!BG){h(0,BF);}if(!i){f.fire("select",{count:0});}}function Ay(BY,BV,BF,BJ,BN,BX,BT,BM,Ba){if((BV||(BJ>=0))&&(BF||!BY.target.hasClass("unselectable"))){if(BV&&BV.one("input")==null){BV=BV.get("parentNode").get("parentNode");}var BG,Bb,BH,BU=(BN||BY.shiftKey)&&R,BK=0,BZ,BI=R,BL=BF?0:BV.one("input").get("checked"),BR=Ba?1:(BF?0:BY.button>=2||q(BY)&&!BU),BO=f.rootSelect,BQ=((H.UA.os==="macintosh")?BY.metaKey:BY.ctrlKey),BS=(BQ||BR||BT)?true:false;if(!BT&&!(BR||(BQ&&(BY.type=="mousedown"||BY.type=="mouseup")))||((BY.type=="mousedown"||BY.type=="mouseup")&&BY.button>=2)||((R==1)&&BR&&!f.checkmode)){A2(1,1);}Bb=BH=BJ=(BJ>=0)?BJ:a(BV);if(BO&&BU){Bb=BO.index;}BG={begin:Math.min(Bb,BH),end:Math.max(Bb,BH)};if(BS){BZ=AL[BG.begin];if(f.isSelected(BG.begin)){if((R!=1)||BL){delete u[BG.begin];Ab[BG.begin]=BZ;BK--;}}else{u[BG.begin]=BZ;BK++;}}else{Az=BG;BK=BG.end-BG.begin+1;}if(!BM){R+=BK;}f.checkmode=(R>1)||BR||(BQ&&(R<BI))||BU;if(R==1){var BP=H.Object.keys(u);if(BP.length){BJ=BP[0];BZ=u[BJ];}else{for(var BW=Az.begin;BW<=Az.end;BW++){if(!Ab[BW]){BJ=BW;BZ=AL[BW];break;}}}BO={index:BJ*1,el:BZ};}Ap=BJ*1;if(R==0){Ap=BO.index;BO=0;}f.rootSelect=BO;AU();if(!BX){f.fire("select",{count:R,e:BY,index:Ap});}}}function BD(){var BG,BF=[];for(BG in u){BF.push(BG);}if(Az){for(BG=Az.begin;BG<=Az.end;BG++){if(!Ab[BG]){BF.push(BG);}}}BF.sort(function(BH,i){return(BH-i);});BG=BF.length;while(BG--){AL.splice(BF[BG],1);}A2(1);AB(AL.length);h();}function N(){var BF=0,BJ,BG,BH=AG.bindItem,BI=Ag.all("div.list-view-item");if(!AL.length){BI.each(function(i){BJ=i.get("id");BG={};if(BH){BG=BH(i);}AL[BF++]=BG;});}Av.scrollTop=1;Av.set("tabIndex",-1);Av.on("scroll",A3,f);Av.on("click",function(i){i.preventDefault();});Av.on("mousedown",W,f);Av.on("mouseup",V,f);Av.on("dblclick",T,f);Av.on("keydown",Z,f);AI.onkeypress=function(i){if(i&&A1[i.keyCode]){if(i.stopPropagation){i.stopPropagation();}i.cancelBubble=true;i.returnValue=false;return false;}};Ai.onselectstart=function(){return false;};AB(Q||AL.length,1);AU();if(!BI.size()){h();}}function A8(BG){for(var BF in BG){return BG;}}function AP(BH){var BJ=AS(BH),BI=BC(BH),BG,BF=0;if(BJ){BG=C.create(AG.renderItem(AL[BH],BH,BI,AG.context));if(BJ.contains(document.activeElement)){BF=1;}BJ.replace(BG);BF&&BG.focus();p(BH,A(BG));}}function h(BF,i){if(O){O.cancel();}if(f.ignoreUpdate){return;}O=G.later(0,f,function(){var BQ=[],BH=Ae,BK=BH+AE,BO,BW,BM=AG.renderItem,BU,BT,BW,BG,BR,BV,BS,BI,BL=f.flexRow,BN=BH,BJ,BP=AG.context;if(Q&&(BK>Q)){BK=Q;}if(BH==0){BV={top:"0px",bottom:"auto"};}else{if(BL&&(BW=AS(BH))){BS=Ag.get("offsetTop")+BW.get("offsetTop");BV={top:BS+"px",bottom:"auto"};BT=1;Aw=BS/BH;}else{if(BL&&(BW=AS(BK-1))){BS=Ag.get("offsetTop")+BW.get("offsetTop")+BW.get("clientHeight");BG=AI.scrollHeight-BS;BR=-1*((AI.scrollHeight)-AI.offsetHeight);BV={top:"auto",bottom:BR+BG+"px"};BT=1;Aw=BS/BK;}else{BV={top:Ae*Aw+"px",bottom:"auto"};}}}Ag.setStyles(BV);if(!BT){b.setStyle("height",(Q*Aw)+"px");}if(AL[BH]){Ah();}else{if(BF){Ah(BF);}}for(BN=BH;BN<BK;BN++){BW=AL[BN];if(BW){BQ.push(BM(BW,BN,BC(BN),BP));}if(!BW&&!BO){BO=BN;}}if(BO>=0){if(BF){Ah(BF);}K(BO);Av.addClass("loading");}else{Au=0;Av.removeClass("loading");}if(!Au){Ai.innerHTML=BQ.join("");if(!BO&&!BT&&!i&&(BJ=Ai.firstChild)){BU=BJ.offsetHeight;if(BU&&(Aw!=BU)){if(BL){Aw=Math.max(BU,Aw);}else{Aw=Math.min(BU,Aw);}b.setStyle("height",(Q*Aw)+"px");}f.fire("renderComplete");}AU();At();f.fire("scroll");}if(Aj&&AL[Ae]){Aj=0;if(Aa){AI.scrollTop=AI.scrollHeight;Aa=0;}}});}function K(i,BG){var BF=A9(i);if(!c[BF]||BG){c[BF]=1;n.call(Ad,BF*AQ,AQ,AD);}}function AK(BF){var i;J=E(BF);if(m){Ag=m;}else{Ag=J.one("div.list-view-items");}Ag.removeClass("loading");Ai=A(Ag);Av=Ag.cloneNode(0);AI=A(Av);Ag.replace(Av);b=D("<div></div>");b.appendChild(Ag);Av.appendChild(b);i=Ag.getAttribute("class");Ag.replaceClass(i,"list-view-items-inner");Ag.setStyles({"position":"relative"});P=D('<div style="display:none;text-align:center;margin-top:50px;padding-top:10px;"></div>');P.setStyles({"position":"absolute","width":"100%","height":"auto","top":"0px","margin":0,"overflow":"visible"});Av.append(P);N();if(Aa){AI.scrollTop=AI.scrollHeight;if(AI.scrollHeight>0){Aa=0;}}}function AZ(BF,BG,i){if(Ai&&!BF&&!i){AI.scrollTop=0;Ai.innerHTML=" ";}f.arrItems=AL=[];c={};if(BF){}else{Ae=0;A2(BG,i);AB(0);}}function AB(i,BF,BG){if((Q!=i)||BF){Q=i;f.length=Q;AL.length=i;if(b){if(BG){b.setStyle("visibility","hidden");}b.setStyle("height",(Q*Aw)+"px");if(BG){AI.scrollTop=AI.scrollHeight;b.setStyle("visibility","visible");}}c={};}}function Ah(BF,i){x=BF||"";i&&Av.removeClass("loading");if(P){P.setContent(x);P.setStyle("display",x?"inline":"none");if(x){Ag.setContent("");AI.scrollTop=0;}}}function U(){h();}function AR(BG){var BF=Math.floor((AI.scrollTop+(AI.offsetHeight*BG))/Aw);BF=BF+((BG<0.5)?0:-1);return{i:BF,item:AL[BF]};}function BB(){var BF=Av.getXY(),i=parseInt((AI.offsetHeight-40)*AI.scrollTop/AI.scrollHeight);return[BF[0]+AI.offsetWidth,BF[1]+i];}function Ao(i){Ae=Math.max(0,Math.min(Q-AE,Math.floor(i-AE/2)));AI.scrollTop=(i*Aw)-AI.offsetHeight/2;}function k(i){A6=i;}function Y(i){AO=0;I(function(BG){var BH=R,BF=f.checkmode;A2(1,1);AZ(1);f.checkmode=BF;AY=BG.map;R=BH;if(B.size(BG.map)<R){A2();}i();},1);}function Aq(i){if(Ai){if(i){if(!AO){G.later(0,f,function(){K(Ae,1);AO=1;});
}}else{AI.scrollTop=0;AY=0;AZ();}}}function X(){var i=AI&&AI.offsetHeight,BF;if(i){BF=Math.ceil(i/Aw);AE=BF+e;}}function M(BK,BJ){var BG,BF,i,BI,BH=H.Object.size(u);if(Az||(BH>0)){BF=A5(BH>1);i=BF.i;BI=BF.item;if(i==(Q-i)){BG=i;}else{BG=Q-i-1;}Ae=Math.max(0,Math.floor(BG-AE/2));AL.reverse();if(BH){u={};u[BG]=BI;}if(Az&&("begin" in Az)){Az.begin=Az.end=BG;}f.rootSelect={index:BG,item:BF};Ap=BG;h(BJ);Ao(BG);}else{if(AL.length>0){if(BK){Ae=Math.max(0,AL.length-AE);}else{Ae=0;}AL.reverse();h(BJ);t(BK);}}}function t(i){if(i){Ao(Q-1);}else{Ao(0);}}function A5(){var BG=H.Object.keys(u),i=BG[BG.length-1]||Az.begin,BF=u[i]||AL[i];if(!BF&&!B.isEmpty(AY)){BG=H.Object.keys(AY);BF=BG[BG.length-1];}return{i:i,item:BF};}function AA(BM,BH){var BK=0,BL,BI,BR,BJ,BO={},BG,BQ,BN,BF,BS,BP=R;while(BJ=BM[BK++]){BO[BJ]=1;}BK=AL.length;while(BK--){if(BR=AL[BK]){if(u[BK]||(Az&&BK>=Az.begin&&BK<=Az.end)){BQ=BK;}if(BO[BR[AV]]){if(BK===BL-1){BL--;BI++;}else{BI&&AL.splice(BL,BI);BL=BK;BI=1;}if(AY&&AY[BR[AV]]){delete AY[BR[AV]];}if(u[BK]){BN=BK;delete u[BK];R--;}else{if(Az){if(BK>=Az.begin&&BK<=Az.end){BN=BK;if(Ab[BK]){delete Ab[BK];}else{R--;}if(Az.begin==Az.end){Az={};}else{if(Az.begin<Az.end){Az.end--;}}}else{if(BK<Az.begin){Az.begin--;Az.end--;}}}}for(BG in u){if(BG>BK){u[BG-1]=u[BG];delete u[BG];}}}}}BI&&AL.splice(BL,BI);if(BP==1&&R==0&&BQ>=0&&BQ==BN&&!BH){if(BN==AL.length){BN--;}if(BN>=0){Az={begin:BN,end:BN};R++;}}AB(AL.length);h();if(R==0){BF=Math.min(f.rootSelect.index,Ap);A2(1,1);Ap=BF;if(Ap>=0){BS=AS(Ap);if(BS){BS.focus();}else{Ao(Ap);}}}f.fire("select",{count:R});}AW();H.mix(f,{render:AK,reverse:M,setStatus:Ah,getItemAtScreenPos:AR,setScrollByIndex:Ao,setRefreshScrollToBottom:k,getScrollBarPos:BB,refreshBody:U,refresh:Aq,getSelected:I,removeSelection:BD,isSelected:BC,getIndex:a,iterate:BE,findByKey:S,clear:AZ,clearSelection:A2,setSelected:Am,getSelectCount:function(){return R;},getUnselected:AM,selectAll:Ak,hasAllSelected:d,setItems:AD,removeByKey:AA,getItem:Ax,arrItems:AL,selectLastSingle:A5,toggleScrollPos:t,setLength:AB,getSelectClass:AJ,getItemFromIndex:AS,updateItemByIndex:AP,updateUlSize:X,ignoreUpdate:AH});};H.augment(F,H.EventTarget);H.namespace("common.ui");H.common.ui.VirtualList=F;},"1.0.0",{requires:["common-utils"]});

YUI.add("mail-ui-messagelist-base",function(C){var a=C.common.Utils,b=C.mail.ui.common.StringUtils,q=C.mail,o=a.substitute,R=a.escapeHtml,X=a.unescapeHtml,P=q.Controller,J=P.Messages,e=P.Folders,f=q.model.DataStore.Messages,p=f.toMessage,Q=f.toMessageInfo,I="date",U="down",N="up",L="flag",F=C.common.persist.UserData,D="userUIPref.defaultSortOrder",G=strings.str_cfg_tog_hkr_siu===true?"hkr_siu":"cg_siu",W=strings.str_cfg_tog_hkr_siu===true,A=[],g=(24*60*60*1000),c=new Date(),m=c.getTime(),K=c.setHours(0,0,0,0),M=c.setHours(23,59,59,999),h=M-m+1,V=[],n,O,H=1,j=K-g*6,T="userUIPref.msgPaneVisible",l=["externalAccounts","aliases","disposableAddresses"],k,B=NeoConfig.bidi&&C.Intl.detectDirection,S=l.length,E=C.mail.ui.Accounts,d;for(k=0;k<S;++k){F.after("knownAddress|"+l[k]+"Change",function(Y){d=E.buildAccountList();});}var Z=function(Y){var r=this;Y=Y||{};r.evt=[];r.fid2sortCol={};r.listAPIObj={};function i(){Z.superclass.constructor.call(r);var w=[],u=C.one("div#inboxcontainer"),x=u&&u.all("div.list-view-item.selected");x&&x.each(function(z){var AA=z.one("input"),y=AA.get("value");w.push(y);});r.selectedMids=w;r.title="";r.restoreSortOrder();if(!Y.dontBind&&(Y.fid=="Inbox")){var t=NeoConfig&&NeoConfig.msgListObj;}r.view=Y.view||{};r.dontBind=Y.dontBind;r.TEMPLATE=Y.TEMPLATE||NeoConfig.msgListTmpl;r.pageSize=NeoConfig.pageSize*1||150;if(!t||(Y.fid=="%40S%40Search")){r.createVirtualList(t);r.initAttrs(Y);r.set("fid",Y.fid||"Inbox");}else{e.get(Y.fid,{success:function(y){r.createVirtualList(t,y.total);r.initAttrs(Y);r.set("fid",Y.fid||"Inbox");}});}function v(z,AA,y){if(z==r.fid){if(H!=y){if(y=="checkmail"){if(!r.sorting){r.refresh();}}else{r.vlist.refresh(1);!r.vlist.hasAllSelected()&&r.selectAllNode.set("checked",0);}}r.updateTitle();}}r.on("visibleChange",function(y){if(y.newVal&&r.needFlush){v(r.fid);r.needFlush=0;}});!C.UA.ie&&r.after("activeChange",function(y){var z=u.one(".list-view-items-inner");z&&z.setStyle("display",y.newVal?"block":"none");});r.evt.push(C.on("ds:msg:remove",r.removeMsg,r));r.evt.push(C.on("ds:msg:flush",v,r));r.evt.push(C.on("ds:msg:change",r.changeMsg,r));r.evt.push(C.on("ds:msg:add",r.addMsg,r));r.evt.push(C.on("checkmail:before",r.removeSelection,r));function s(){r.dateResetHandle.cancel();c=new Date();m=c.getTime();K=c.setHours(0,0,0,0);M=c.setHours(23,59,59,999);h=M-m+1;j=K-g*6;r.dateResetHandle=C.Lang.later(h,r,s);r.refresh();}r.dateResetHandle=C.Lang.later(h,r,s);if(strings.str_cfg_tog_show_contact_name==true){r.evt.push(C.on("contacts:api:loaded",function(y){r.update();},r));r.evt.push(C.on("contacts:api:contactChanged",function(y){r.update();},r));}C.mix(r,{update:function(){r.vlist.refreshBody();}});}i();if(YUI_config.debug){Z._instanceList.push(r);}};if(YUI_config.debug){Z._instanceList=[];}C.extend(Z,C.common.ui.ContentWidget);C.mix(Z.prototype,{NAME:"MessageList",itemHeight:21,setFocusNodeAttr:function(Y){this.set("focusNode",Y);return Y;},setStatus:function(i,Y){this.vlist.setStatus(i,Y);},getFolder:function(r,Y){var i=this;e.get(i.fid,{success:function(t){var s=t.folderInfo;if(!s.localizedName){s.localizedName=b.getSystemFolderName(s.fid,s.name,Y,C.Lang.isObject(i.extraParams));}r(t);}});},getFolderNameBidi:function(s,i,r,Y){if(typeof s==="undefined"){return"";}if(typeof Y==="undefined"){Y=strings.str_tog_loadRTLCss?"rtl":"ltr";}if(typeof i==="undefined"){i=B?C.Intl.detectDirection(s,Y):"";}s=((i=="rtl")?"\u202B":"\u202A")+s+"\u202C";s+=(Y=="rtl")?"\u200F":"\u200E";if(typeof r!=="undefined"){r=((Y=="rtl")?"\u202B":"\u202A")+"("+r+")"+"\u202C";s='<span dir="'+i+'">'+s+'</span>  <i dir="'+Y+'">'+r+"</i>";}return s;},updateTitle:function(){var Y=this;Y.getFolder(function(i){var r=i.folderInfo.localizedName;if(NeoConfig.bidi){r=Y.getFolderNameBidi(r,i.folderInfo.dir,i.total);}else{r+=" <i>("+i.total+")</i>";}Y.set("title",r);},true);},setLabel:function(){var Y=this;Y.getFolder(function(i){Y.parentNode.one(".list-view").set("aria-label",i.folderInfo.localizedName);},false);},removeMsg:function(v,u){var t,w=this;if(v==w.fid){if(u){var r=[],Y=u?u.length:0,s=Y&&f.isSearchMid(u[0].mid,v);if(!s){for(t=0;t<Y;t++){r.push(u[t].mid);}w.vlist.removeByKey(r,w.vlist.checkmode||w.fid=="%40B%40Bulk");}}else{w.vlist.refresh();}w.updateTitle();}w.searchUpdate(v,u);},searchUpdate:function(i,Y){var r=this;if(r.fid!=="%40S%40Search"){C.Array.some(Y,function(s){if(s&&(s.sourceFolderInfo&&(s.sourceFolderInfo.fid==r.fid)||f.isSearchMid(s.mid))){r.needFlush=1;return 1;}});}},restoreSortOrder:function(){var t=this,r=t.fid2sortCol;t.sortedColumn=r[t.fid]||t.columns.date;t.sortedColumn.sortOrder=(a.isEmpty(r)?F.get(D):0)||t.sortedColumn.sortOrder;if(t.msgListRender&&(t.fid!=="%40S%40Search")){var s=C.one('#msg-list div[data-action="'+t.sortedColumn.sortKey+'"]'),Y=s.ancestor(),i;while(i=Y.one(".sortby")){i.removeClass("sortby asc");i.removeClass("sortby desc");i.removeAttribute("aria-sort");}if(!t.sortedColumn.groupBy){if(t.sortedColumn.sortOrder==U){s.addClass("sortby desc");s.setAttribute("aria-sort","descending");}else{s.addClass("sortby asc");s.setAttribute("aria-sort","ascending");}}}},addMsg:function(r,Y,i){this.changeMsg(r,Y,Y,Y);},changeMsg:function(w,AG,v,t){var y=this,z,s=0,AA=v?v.length:0,AF={},Y={},x=y.vlist,AB=x.arrItems,AH=[],AC,u,AD,r=AB.length,AE=AA&&f.isSearchMid(v[0].mid,w);if(!AE&&(w==y.fid)&&(AA>0)){for(z=0;z<AA;z++){AF[v[z].mid]=v[z];if(t[z].flags||t[z].header){Y[v[z].mid]=v[z];}}z=0;while((z<r)&&(s!=AA)){AD=AB[z];if(AD&&(AD.mid in AF)){if(AD.mid in Y){u=Q(y.fid,AF[AD.mid]);AC=AB[z];u.receivedDate=AC.receivedDate;AB[z]=a.merge(AC,u,true);AH.push(z);}s++;}z++;}if(s!=AA){x.refresh(1);y.updateTitle();}else{if(AH.length>1){x.refreshBody();y.updateTitle();}else{if(AH.length==1){x.updateItemByIndex(AH[0]);}}}}y.searchUpdate(w,v);},removeSelection:function(){var Y=this;if(!F.get(T)){Y.vlist.clearSelection(0,1,1);}},render:function(t){var v=this,s,r;v.parentNode=C.Node.one(t);v.rootNode=v.parentNode.one(".content");if(!v.vlist){return;}if(!v.rootNode){function i(y){var w=C.ui.Templates._shared_module_message_list_rollup,x={message_list_full_pane:"",get_message_response:"",show_from_header:w.show_from_header?o(w.show_from_header,0,0,0,strings):"",search_results:y?"":w.search_results,has_pagination:y?"":w.has_pagination,show_snippet:"",show_snippet1:"",show_snippet_else:w.show_snippet_else,show_snippet_else1:w.show_snippet_else1};
if(y){x.hide_attachments_else=w.hide_attachments_else;}v.TEMPLATE=w;v.parentNode.set("innerHTML",o(v.TEMPLATE.base,x,0,0,strings));v.render(t);}function u(){i(true);}if(!v.TEMPLATE||NeoConfig.hasConv){C.use("_shared_module_message_list_rollup",NeoConfig.hasConv?u:i);return;}else{i();}}s=v.rootNode.one(".list-view");if(v.fid!="Inbox"||v.dontBind){v.rootNode.one(".list-view .list-view-items").set("innerHTML","");}v.vlist.render(s);var Y;Y=v.rootNode.one(".list-view-scroller");Y&&Y.set("role","presentation");v.bindUI();v.parentNode.one(".list-header").setStyle("overflow-x","hidden");v.parentNode.one(".list-header input").removeAttribute("disabled");v.setLabel();v.set("focusNode",v.rootNode.one(".list-view .list-view-items"));if(NeoConfig.intl==="jp"){v.rootNode.one(".list-view .list-view-items").on("scroll",function(){v.handleDarlaEvent(false,true);});}if(v.selectedMids){while(r=v.selectedMids.pop()){v.vlist.setSelected(r);}}v.msgListRender=1;v.updateHeader();v.fire("render");},getColorIndicator:function(Y,i){var r=Y||i;d=d||E.buildAccountList();return(r&&d[r])?d[r]:"";},createVirtualList:function(x,r){var v=this,u=0,w=x?x.length:0,z,AA=(v.sortedColumn.sortKey==I)&&(v.sortedColumn.sortOrder==N),Y=r?(AA?r-w:0):0,y=[];function t(AD){var AC,AB=strings.str_cfg_tog_show_contact_name&&C.contacts&&C.contacts.utils,i=AD.from.name?AD.from.name:AD.from.email;AD.from.nameDir="";if(v.fid=="Draft"||v.fid=="Sent"){if(AD.toEmail){AC=AD.toEmail;AD.from.nameDir=NeoConfig.bidi?(AD.toEmailDir?AD.toEmailDir:(B?C.Intl.detectDirection(AC):"")):"";}}else{AC=AB?C.contacts.utils.getShownContactName(AD.from):i;if(B&&AC){AD.from.nameDir=C.Intl.detectDirection(AC);}}AD.FormattedFrom=AC?R(X(AC)):"&nbsp;";return AD;}function s(AD,AB,AC,AE){if((C.server&&!AD)||!AD){return"";}AD=t(AD);AD.colorIndicator=v.getColorIndicator(AD.externalPopServer,AD.xapparentlyto);v.renderIndex=AB;n=AE;O=AC;return o(v.TEMPLATE.message,AD,v.formatters,AD,strings,null,v);}if(w){for(u=0;u<w;u++){z=x[u];y[Y++]={mid:z.mid,subject:z.subject?a.unescapeHtml(z.subject):"",subjectDir:(NeoConfig.bidi&&z.subjectDir)?z.subjectDir:"",xapparentlyto:z.xapparentlyto,receivedDate:z.rawDate,msgSnippet:(NeoConfig.hasConv&&z.snippet)?z.snippet:"",size:parseInt((z["data-size"].split("=").pop()).replace('"',"")),inboxservices:(z.inboxservices&&z.inboxservices.match("data-certified"))?[{name:"crt",value:"transactional"}]:[],from:(function(){try{return C.JSON.parse(a.unescapeHtml(z.fromObj));}catch(i){return"";}})(),flags:{isFlagged:z.flags.match("flagged")?1:0,isRead:z.flags.match("unread")?0:1,isForwarded:z.flags1.match("forwarded")?1:0,isReplied:z.flags1.match("replied")?1:0,hasAttachment:z.hasOwnProperty("hide_attachments_else1")?0:1,inAddressBook:z.hasOwnProperty("inAddressBook")?1:0},msgicon:(z.msgicon?z.msgicon:"")};}}Z.setMsgHdrList(y);if(r){y.length=r;}C.use("common-ui-virtuallist-base",function(AB){var i={requestItems:v.requestItems,renderItem:s,arrItems:y,length:r,context:v,key:"mid",pageSize:v.pageSize,ulPadding:NeoConfig.ulPadding*1,itemHeight:v.itemHeight,unselected:L,scrollDelay:NeoConfig.scrollDelay*1,scrollToBottom:AA};v.vlist=new AB.common.ui.VirtualList(i);v.vlist.on("select",v.onListSelect,v,true);v.vlist.on("command",v.onCommand,v);if(v.parentNode){v.render(v.parentNode);}});},formatters:{id:function(){return n;},status_message:function(w,s,u){var r="&nbsp;",t,Y,v=w.srvmap;if(!v){Y=w.inboxservices||[];w.srvmap=v={};for(t=Y.length-1;t>=0;t--){v[Y[t].name]=Y[t].value;}}if(!strings.str_cfg_tog_certified_icon&&v.crt){delete v.crt;}if(w.flags.isReplied){r=strings["str_msg_list_info-replied"];}else{if(w.flags.isForwarded){r=strings["str_msg_list_info-forwarded"];}else{if(!w.flags.isRead){r=strings["str_msg_list_info-unread"];}else{if(v.crt){r=strings["str_msg_list_info-certified"];}}}}return r;},status_title:function(s,Y,i){var r="";if(s.srvmap&&s.srvmap.crt){r=o(strings.str_msg_list_info_verified_attr,strings);}return r;},checkbox_label:function(r,Y,i){return o(strings.str_msg_list_checkbox_label,{messagenumber:(i.renderIndex+1)});},page_conversation_history:function(Y){return o(Y.template.page_conversation_history,Y,Y.formatters,0,strings);},archiving_disabled:function(Y){return o(Y.template.archiving_disabled,Y,Y.formatters,0,strings);},from:function(r,Y,i){return r.FormattedFrom?r.FormattedFrom:"&nbsp;";},fromDir:function(r,Y,i){return NeoConfig.bidi?r.from.nameDir:"";},folder:function(i){var Y=i.sourceFolderInfo,r=Y.name;b.getSystemFolderName(Y.fid,Y.name);return r;},sender:function(r,Y,i){var s=i;return o(s.TEMPLATE.sender,0,0,0,strings,null,s)+" "+R(X(r.from.name));},date:function(Y){if(Y.receivedDate){return a.dateFormatter(new Date(Y.receivedDate*1000),strings.str_tog_dateformat_messagelist_timeonly_l10n);}return"";},receivedDate:function(i){var Y=i.receivedDate*1000;return a.dateFormatter(new Date(Y),Neo.getDateFormat(Y));},subject:function(Y){return Y.subject?R(X(Y.subject)):strings["str_msg-view_no_subject"];},snippet:function(Y){if(Y.msgSnippet){}return Y.msgSnippet?R(X(Y.msgSnippet)):"";},show_snippet:function(r,Y,i){var s=i;return NeoConfig.hasConv?o(s.TEMPLATE.show_snippet,r,s.formatters,r,strings,null,s):"";},show_snippet1:function(r,Y,i){var s=i;return NeoConfig.hasConv?o(s.TEMPLATE.show_snippet1,r,s.formatters,r,strings,null,s):"";},show_snippet_else:function(r,Y,i){var s=i;return NeoConfig.hasConv?"":o(s.TEMPLATE.show_snippet_else,r,s.formatters,r,strings,null,s);},show_snippet_else1:function(r,Y,i){var s=i;return NeoConfig.hasConv?"":o(s.TEMPLATE.show_snippet_else1,r,s.formatters,r,strings,null,s);},size:function(Y){return Math.ceil(Y.size/1000);},mid:function(){return"";},flags:function(r,Y,i){var s=i;return[O?" selected ":" ",(r.flags.isRead?"":" unread "),(r.flags.isFlagged?" flagged ":"")].join("");},flags1:function(u){var r="",s,Y,t=u.srvmap;if(!t){Y=u.inboxservices||[];u.srvmap=t={};for(s=Y.length-1;s>=0;s--){t[Y[s].name]=Y[s].value;}}if(!strings.str_cfg_tog_certified_icon&&t.crt){delete t.crt;}if(u.flags.isReplied){r="replied";
}else{if(u.flags.isForwarded){r="forwarded";}else{if(!u.flags.isRead){r="unread";}else{if(t.crt){r="certified";}}}}return["info-",r].join("");},flags2:function(r,Y,i){var s=i;return r.flags.hasAttachment?s.TEMPLATE.hasAttachment:"";},hide_attachments_else1:function(r,Y,i){var s=i;return o(s.TEMPLATE.hide_attachments_else1,r,s.formatters,null,(r.flags.hasAttachment?strings:null),null,s);},contains_attachment:function(r,Y,i){var s=i;if(r.flags.hasAttachment){return o(s.TEMPLATE.hide_attachments_else,0,0,0,null,null,s);}return"";},flags3:function(r,Y,i){var s=i;return o(s.TEMPLATE.flags3,r,s.formatters,r,null,null,s);},isFlagged1:function(r,Y,i){var s=i;return r.flags.isFlagged?o(s.TEMPLATE.isFlagged1,r,s.formatters,r,strings,null,s):"";},isFlagged2:function(r,Y,i){var s=i;return r.flags.isFlagged?o(s.TEMPLATE.isFlagged2,r,s.formatters,r,strings,null,s):"";},isFlagged_else1:function(r,Y,i){var s=i;return r.flags.isFlagged?"":o(s.TEMPLATE.isFlagged_else1,r,s.formatters,r,strings,null,s);},isFlagged_else:function(r,Y,i){var s=i;return r.flags.isFlagged?"":o(s.TEMPLATE.isFlagged_else,r,s.formatters,r,strings,null,s);},inboxservices:function(v,r,t){var w=t,u=v.srvmap;if(!u){var Y=v.inboxservices||[];v.srvmap=u={};for(var s=Y.length-1;s>=0;s--){u[Y[s].name]=Y[s].value;}}return((W||!u.crt)&&(u[G]||v.msgicon))?o(w.TEMPLATE.inboxservices,v,w.formatters,v,null,null,w):"";},msgicon:function(r){var i=r.srvmap,Y={"http://mail.yimg.com/a/i/cal/bell4.gif":"https://s.yimg.com/nq/i/cal/bell4.gif","http://mail.yimg.com/a/i/us/pim/ybang_16x16_1.gif":"https://s.yimg.com/lq/i/us/pim/ybang_16x16_1.gif"};if(NeoConfig.isFullSSL&&i&&i[G]&&Y[i[G]]){i[G]=Y[i[G]];}return i&&i[G]?i[G]:r.msgicon;},msgicon_title:function(s,Y,i){var t=i,r=t.formatters.flags1(s);return(r!="info-"&&r!="")?strings[["str_msg_list_",r].join("")]:"";},is_flagged:function(Y){return[(Y.flags.isRead?"":" unread "),(Y.flags.isFlagged?" flagged ":"")].join("");}},columns:{date:{sortKey:I,sortOrder:U},size:{sortKey:"size",sortOrder:U},subject:{sortKey:"subject",sortOrder:N},sender:{sortKey:"sender",sortOrder:N},to:{sortKey:"to",sortOrder:N},recipient:{sortKey:"recipient",sortOrder:N},participant:{sortKey:"sender",sortOrder:N},attachment:{sortKey:I,groupBy:"hasAttachment",sortOrder:U},flagged:{sortKey:I,groupBy:"flagged",sortOrder:U},replied:{sortKey:I,groupBy:"unRead",sortOrder:U},unRead:{sortKey:I,groupBy:"unRead",sortOrder:U}},initAttrs:function(Y){var r=this,i={selectCount:{getter:function(){return(r.vlist)?r.vlist.getSelectCount():0;}},fid:{setter:r.setFid},extraParams:{setter:r.setExtraParams},title:{value:r.title},fullpane:{setter:r.setFullpane},vertical:{value:Y.vertical}};r.addAttrs(i);},setFid:function(Y){var i=this;if(i.fid!=Y||i.extraParams){i.prevFid=i.fid;i.reset();i.fid=Y;e.get(i.fid,{success:function(r){var s=i.sortedColumn.sortKey===I&&i.sortedColumn.sortOrder==N&&!i.sortedColumn.groupBy;i.folder=r;if(i.vlist){i.vlist.setLength(i.folder.total);if(strings.str_cfg_tog_preserve_msglist_scroll){i.vlist.setRefreshScrollToBottom(s);}i.refresh();}}});}},setExtraParams:function(Y){var i=this;i.extraParams=Y;},reset:function(){var Y=this;Y.folder=null;Y.cancelRequests();NeoConfig.msgrData={reply:{},spam:{spims:[]},message:null};},cancelRequests:function(){for(var Y=0;Y<A.length;Y++){A[Y].abort();}A.length=0;this.sorting=0;},refresh:function(){var i=this;i.updateHeader();var Y=new Date().setHours(0,0,0,0);i.setStatus(strings[(i.fid=="%40C%40Chats")?"str_msg_list_loading_conversation":"str_msg_list_loading"]);i.vlist.refresh();},updateHeader:function(){if(!this.parentNode){return;}var v=this,u=v.prevFid,r=v.fid,t={Draft:"show_to_header",Sent:"show_to_header","%40C%40Chats":"show_participant_header"};if(u!=r&&v.fid!="%40S%40Search"){var x=v.parentNode.one(".from"),i=x.getData("col-width"),Y=x.getData("col-left"),y=x.getData("col-right"),s=x.getData("toCol"),w=t[r]||"show_from_header";x.replace(o(v.TEMPLATE[w],0,0,0,strings,0,v));x=v.parentNode.one(".from");x.setData("col-width",i);x.setData("col-left",Y);x.setData("col-right",y);}if(v.selectAllNode){v.selectAllNode.set("checked",(v.vlist.hasAllSelected()?1:0));}v.restoreSortOrder();},getSelected:function(Y){var r=this;function i(u){var v,s=(u&&u.arr?u.arr.length:0),t=[];for(v=0;v<s;v++){t.push(p(r.fid,u.map[u.arr[v]]));}Y(t);}r.vlist.getSelected(i,null,Z.getNeighbors,r.fid);},bindUI:function(){var s=this,i=s.parentNode.one(".list-header"),Y,r;s.selectAllNode=i.one(".cbox input");s.selectAllNode.set("checked",0);i.one(".cbox").removeAttribute("disabled");s.evt.push(s.after("fidChange",function(t){s.setLabel();}));s.evt.push(s.vlist.on("beforeRender",function(){s.fire("beforeRender");},s));s.evt.push(s.vlist.on("renderComplete",function(){s.fire("renderComplete");},s));s.evt.push(s.vlist.on("beforeItemUpdate",function(){s.fire("beforeItemUpdate");},s));s.evt.push(s.vlist.on("itemUpdate",function(){s.fire("itemUpdate");},s));s.evt.push(s.rootNode.on("click",function(u){var w=this,t=u.target,v;switch(a.getDataAction(u).action){case"selectAll-message":case"selectAll":C.Lang.later(0,w,function(){w.selectAllNode.set("checked",w.vlist.selectAll(1));});break;case"flagged":return;case"retry-msglist-load":w.refresh();break;}if(t.hasClass("flag")||t.ancestor(".flag")){v=p(w.fid,w.vlist.getItem(u));C.use("mail-ui-messageevents",function(y){var x=t.ancestor(".list-view-item").hasClass("flagged")?"unflagged":"flagged";y.mail.ui.MessageEvents.handleUI({action:x},w.fid,w,[v]);});}},s));s.evt.push(i.on("click",function(AC){if(this.sorting==1){return;}var AA=this,w,v=a.getDataAction(AC).action,AE=false,AB=AA.sortedColumn,x=i.one(".sortby")||i.one(".date"),AI=AC.currentTarget.one('[data-action="'+v+'"]'),AF,u=AA.columns,AG=strings.str_msg_list_sorting;if(!u[v]||(AA.folder.total==1)){return;}AA.sortedColumn=w=a.wcopy(u[v])||AA.sortedColumn;if(v==I&&(AB.sortKey!=I||AB.groupBy)&&F.get(D)){AA.sortedColumn.sortOrder=w.sortOrder=F.get(D);}AA.fid2sortCol[AA.fid]=AA.sortedColumn;if(x==AI){w.sortOrder=(AB.sortOrder==U)?N:U;switch(v){case"flagged":AF=(AB.groupBy=="flagged")?"unFlagged":"flagged";
break;case"unRead":AF=(AB.groupBy=="unRead")?"read":"unRead";break;case"attachment":AF=(AB.groupBy=="hasAttachment")?"noAttachment":"hasAttachment";break;}w.groupBy=AF;AE=true;}x.removeClass("sortby asc");x.removeClass("sortby desc");x.removeAttribute("aria-sort");if(w.sortOrder==N){AI.addClass("sortby asc");}else{AI.addClass("sortby desc");}AI.setAttribute("aria-sort",(w.sortOrder==N?"ascending":"descending"));if(AA.vlist.getSelectCount()==1){if(AE&&!((v=="unRead")||(v=="flagged"))){AA.vlist.reverse(0,AG);}else{var z=J.list,y=AA.vlist.selectLastSingle(true),AD={fid:AA.fid,loc:"centerOn",offsetMid:y.item.mid,numInfo:AA.pageSize,sortKey:w.sortKey,sortOrder:w.sortOrder,groupBy:w.groupBy};if(AA.listAPIObj&&AA.listAPIObj.apiName){z=AA.listAPIObj.apiName;AA.listAPIObj.params&&C.mix(AD,AA.listAPIObj.params);}var t=AA.vlist.checkmode;AA.vlist.ignoreUpdate=1;AA.setStatus(AG);AA.vlist.clear(0,1,1);AA.sorting=1;z(AD,{success:function(AJ){AA.vlist.ignoreUpdate=0;AA.vlist.setLength(AJ.folder.total);AA.vlist.setScrollByIndex(AJ.startMid);AA.vlist.setItems(AJ.startInfo,AJ.messageInfo,AJ.folder.total);AA.vlist.setSelected(y.item.mid,false,true,false,t);AA.sorting=0;},failure:function(){AA.sorting=0;AA.vlist.ignoreUpdate=0;}});}}else{var AH=(w.sortKey==I)&&(w.sortOrder==N&&!w.groupBy);if(AE&&!((v=="unRead")||(v=="flagged"))){if(AA.vlist.getSelectCount()>1){AA.vlist.clearSelection(1);}AA.vlist.reverse(AH,AG);}else{AA.setStatus(AG);AA.sorting=1;AA.vlist.refresh();AA.vlist.toggleScrollPos(AH);}}AC.halt();if(w.sortKey==I&&w.sortOrder!=F.get(D)&&!w.groupBy){F.set(D,w.sortOrder);F.saveOne(D);}},s));s.evt.push(s.on("closeChange",function(u){var t,v=this;if(u.newVal==1){for(t in v.evt){C.detach(v.evt[t]);}v.evt=[];}},s));},onCommand:function(i){var r=this;function Y(s){var t=p(r.fid,s.map[s.arr[0]]);r.fire("command",{e:i.e,fid:r.fid,message:t,index:i.index,neighbors:r.convertNeighbors(s.neighbors,r.fid)});}r.vlist.getSelected(Y,null,Z.getNeighbors,r.fid);},onListSelect:function(r){var u=this,Y=r,t=r.count,i=r.index;u.set("selectCount",t);if(u.selectAllNode){u.selectAllNode.set("checked",(u.vlist.checkmode&&t&&t==u.vlist.length)?1:0);}if(t==1&&!u.vlist.checkmode&&!NeoConfig.hasConv){function s(v){var w=p(u.fid,v.map[v.arr[0]]);u.fire("singleSelect",{fid:u.fid,index:i,message:w,neighbors:u.convertNeighbors(v.neighbors,u.fid),e:Y.e});}u.vlist.getSelected(s,null,Z.getNeighbors,u.fid);}if(u.fid=="%40C%40Chats"){u.setMessengerData(t);}},setMessengerData:function(Y){var i=this;if(Y==1){i.vlist.getSelected(function(r){var s=r.map[r.arr[0]];NeoConfig.msgrData={reply:{cloud_id:s.srvmap&&s.srvmap.cloudid,alias:s.toEmail,id:s.from.email},spam:{},message:s};});}else{NeoConfig.msgrData={};}},setFullpane:function(Y){var i=this;if(Y){i.rootNode.addClass("inbox-fullpane");i.rootNode.setStyles({width:"auto",height:"auto"});}else{C.use("common-persist-cookie-data",function(u){var s=u.common.persist.getCookie(),t,r=i.get("vertical");if(r){t=s.get("pos.h2slider");t=t&&t.substr(1);t=Math.max((t?t:630),0);i.rootNode.setStyles({width:t,height:"auto"});}else{t=s.get("pos.vslider");i.rootNode.removeClass("inbox-fullpane");t=Math.max((t?t:148),0);i.rootNode.setStyles({height:t,width:"auto"});}});}},requestItems:function(Y,x,t,AB){var w=this;function s(AE){var AG,AH,AI=AE.messageInfo,AJ=AE.startInfo,AF,AD=AI.length;w.folder=AE.folder;if((AF=AE.mid)&&(AF.length)){AG=AF.length;AI=[];AJ=AE.startMid;while(AG--){AI[AG]={mid:AF[AG]};}AD=AI.length;}for(AG=0;AG<AI.length;AG++){AH=AI[AG].msgSnippet;if(AH){AI[AG].msgSnippet=AH.replace(/<.*?>/g,"");}}t(AJ,AI,w.folder.total);w.sorting=0;}var y={fid:w.fid,sortKey:w.sortedColumn.sortKey,sortOrder:w.sortedColumn.sortOrder,groupBy:w.sortedColumn.groupBy},AC=(this.fid=="%40C%40Chats"),r="Client.FolderIdDoesntExist",z=w.extraParams,AA,v;y=AB?C.mix(y,{startMid:Y,numMid:x,bidiDetection:NeoConfig.bidi}):C.mix(y,{startInfo:Y,numInfo:x,bidiDetection:NeoConfig.bidi});if(z){for(var u in z){y[u]=z[u];}}AA={success:s,failure:function(i){w.setStatus(o(w.TEMPLATE.loading_error,0,0,0,strings),true);if(AC&&i.code==r){w.handleDarlaEvent("%40C%40Chats");}else{if(i.reason==J.Error.request){a.rocketstats.stat("mgslist","BadRequest_"+(AB?"mid":"info"));}}w.sorting=0;},timeout:NeoConfig.wsListTimeout||60000,suppressCodes:["*"],suppressLogs:AC&&[r],exceptCodes:[999]};v=J.list;A.push(v.call(J,y,AA,++H));},handleDarlaEvent:function(s,r){var u=this,t=r?{Inbox:"scroll_inbox","%40C%40Chats":"scroll_inbox",Draft:"scroll_draft",Sent:"scroll_sent",Trash:"scroll_trash","%40B%40Bulk":"scroll_spam"}:{Inbox:"folderview_inbox","%40C%40Chats":"folderview_chat",Draft:"folderview_draft",Sent:"folderview_sent",Trash:"folderview_trash","%40B%40Bulk":"folderview_bulk"},Y,i=s||(u.folder&&u.folder.total==0);Y=t[u.fid]||(r?"scroll_folder":"folderview_custom");u.fire("darlaEvent",{action:(i&&!r)?Y+"_empty":Y});},convertNeighbors:function(r,s){var Y=r.length;while(Y--){r[Y]=p(s,r[Y]);}return r;}},true);C.namespace("mail.ui");Z.getMsgHdrList=function(){return V;};Z.setMsgHdrList=function(r){for(var s=0,Y=r.length;s<Y;s++){V.push(r[s]);}};Z.getNeighbors=function(){};C.mail.ui.MessageList=Z;},"1.0.0",{requires:["common-ui-contentwidget","mail-controller-folders","mail-controller-messages","common-persist-user-data","mail-ui-common-string-utils","rocket-stats","mail-model-datastore","mail-ui-accounts"]});

YUI.add("mail-ui-mailpane-base",function(C){C.namespace("mail.ui");var D=C.common.Utils,Q=D.escapeHtml,b=D.unescapeHtml,a=D.substitute,A=D.rocketstats,L=C.ui.Templates,f=C.mail,J=f.ui,G=C.Lang,c=G.trim,V=f.ui.MessagePaneUtils,W=f&&f.Controller?f.Controller.Messages:{},U=f&&f.model?f.model.DataStore.Messages:{},R=U.getPermMidPart,X=L.minty_module_comm_modes,E=U.toMessage,e="ERROR: MessagePaneRead ",P=200,F=1000,K=15,Z=0,d=15000,T=1,M,S=function(){},I={};var O=function(Y){var i=this,h=(NeoConfig.om&&strings["str_cfg_tog_hasIM"]&&NeoConfig.hasIM),g=(NeoConfig.om&&strings["str_cfg_tog_hasSMS"]);O.superclass.constructor.call(this);i.numSelected=0;i.hasStarted=false;i.loading_slow=i.loading_error=i.loading_moved=i.tmPendingLoad=i.tbarMod=i.tbarCallBack=i.tbarScope=i.tmFireRead=i.slowLoad=i.loadingTimer=i.widthUpdateTimer=i.neighbors=i.message=i.outboundReq=i.request=null;i.isLoaded=i.nextPrevCounter=i.stepTimer=i.isStepping=i.scrollWidth=i.scrollWidthIncr=i.scrollWidthKill=i.fid=0;i.fullView=Y.fullView;i.fullPageView=NeoConfig&&NeoConfig.fullPage;i.parentNode=Y.parentNode||null;i.type="message";i.guid=C.guid();i.sortedColumn=Y.sortedColumn||null;i.searchQuery=Y.searchQuery||null;i.arrMessageSequence=Y.arrMessageSequence||null;i.stopwatch=null;i.oTemplate=null;i.statOp=null;i.stopwatchPreview="PaneInPreview";i.formatters={page_show_comm_modes:function(){return !i.numSelected&&!i.get("asleep")?i.sub({s:i.oTemplate.page_show_comm_modes}):"";},page_show_comm_modes_else:function(){return i.numSelected&&!i.get("asleep")?i.sub({s:i.oTemplate.page_show_comm_modes_else}):"";},global_spearmint_view_else:function(){return !i.get("asleep")?i.sub({s:X.base}):"";},page_message_pane_view:function(){return Y.fullView?"":i.oTemplate.page_message_pane_view;},page_message_pane_view1:function(){return Y.fullView?"":i.oTemplate.page_message_pane_view1;},page_message_full_view:function(){return Y.fullView?i.oTemplate.page_message_full_view:"";},message_selection:function(){return i.numSelected>0&&!i.message?i.oTemplate.message_selection:"";},has_im:function(){return h?a(X.has_im,null,i.formatters,null,strings):"";},has_sms:function(){return g?a(X.has_sms,null,i.formatters,null,strings):"";}};Y.asleep&&i.set("asleep",1);i.on("asleepChange",function(k){var j;if(k.newVal>=1){i.detach();if(k.newVal!=3){setTimeout(function(){i.set("message",null);},0);}else{if(i.fullView){i.dsMsgChangeListener=C.on("ds:msg:change",function(n,t,o,u,q){var m=i.message,l=o&&o[0],r=i.parentNode,p,s;if(q=="move"){for(p=0;m&&p<o.length;p++){s=o[p].mid;if(U.hasMoved(m.mid,s,i.fid,n)){if(!i.isStepping){i.set("close",1);}return;}}}if(m&&l&&R(l.mid)==R(m.mid)&&r&&!i.outboundReq){i.queuedEvent={event:"ds:msg:change",newfid:n,oldMsgs:t,newMsgs:o,cset:u,reason:q};}});}}}else{j=i.queuedEvent;i.dsMsgChangeListener&&i.dsMsgChangeListener.detach();i.attach();if(j){C.fire(j.event,j.newfid,j.oldMsgs,j.newMsgs,j.cset,j.reason);i.queuedEvent=null;}}});i.on("closeChange",function(k){if(k.newVal==1){try{var j;i.detach();i.dsMsgChangeListener&&i.dsMsgChangeListener.detach();i.set("visible",0);i.set("message",null);if(i.parentNode){j=(!i.fullPageView&&i.parentNode.one("div.tripane.content"))||i.parentNode.one("div.message.content");i.set("parentNode",null);i.parentNode=null;}if(j){j.destroy();}}catch(k){}}});!Y.asleep&&i.attach();i.addAttrs({fid:{setter:function(j){i.fid=j;}},message:{setter:function(j){i.setMessage(j);},getter:function(){return i.getMessage();}},visible:{setter:function(k){var j=i.get("rootNode");if(j){j.setStyle("display",(k?"block":"none"));}},value:Y.visible==undefined?1:Y.visible,lazyAdd:true},vertical:{setter:function(m){var j=i.get("rootNode"),l=C.common.persist.getCookie(),k;if(m){k=l.get("pos.h2slider");k=(k&&k.charAt(0)=="a")?k.substr(1):k;j.setStyles({"top":"0px","left":(k||630)});}else{j.setStyles({"top":(l.get("pos.vslider")||148),"left":"0px"});}}},transferFocus:{},scrollWidth:{value:null},scrollWidthActive:{value:true}});};C.extend(O,C.mail.ui.BaseWidget,{scrollWidthReset:function(){var Y=this;if(!Y.scrollWidthKill){Y.scrollWidth=Y.scrollWidthIncr=0;Y.set("scrollWidth",null);}},scrollWidthUpdate:function(Y){var j=this,h,g=Y.scrollWidth,i=g-j.scrollWidth;if(NeoConfig.fullPage&&j.fullView&&!j.scrollWidthKill){if(i!=0){h=i-this.scrollWidthIncr;if(h>=0&h<=K){j.scrollWidthKill=1;j.set("scrollWidth",null);}else{j.scrollWidth=g;j.scrollWidthIncr=i;j.set("scrollWidth",g);}}}},scrollWidthNotify:function(){var g=this,Y=g.parentNode.one(".msg-body");if(Y){if(Z==0){Z=parseInt(Y.getStyle("marginRight"))+parseInt(Y.getStyle("marginLeft"));}g.scrollWidthUpdate({scrollWidth:Y.get("scrollWidth")+Z});}},scrollWidthStartTimer:function(){var Y=this;if(NeoConfig.fullPage&&Y.fullView&&Y.get("scrollWidthActive")){Y.scrollWidth=Y.scrollWidthIncr=Y.scrollWidthKill=0;Y.scrollWidthNotify();if(Y.widthUpdateTimer){Y.widthUpdateTimer.cancel();}Y.widthUpdateTimer=C.later(F,Y,function(){if(Y.get("active")){Y.scrollWidthNotify();}},null,true);}},resetScrollPosition:function(){var h=this;var Y,g;if(h.resetScroll){Y=this.get("parentNode");g=Y?(!h.fullPageView&&Y.one("div.tripane.content"))||Y.one("div.message.content"):0;if(g){g.set("scrollTop",0);h.resetScroll=0;}}},bindUI:function(){var h=this,g=h.getStopwatch();g&&g.start(2,"BindUI");var Y=h.getRoot();if(C.UA.webkit&&Y&&Y.get("id")!=="msg-preview"&&!h.fullPageView){Y.setStyle("-webkit-user-select","none");C.later(1000,null,function(){var i=h.getRoot();i&&i.setStyle("-webkit-user-select","");},0,false);}if(h.message){g&&g.start(2,"PreLoadExtra1");h.loadExtra(function(){try{g&&g.start(2,"LoadExtraCB1");h.bindPaneContent();}catch(i){}});}else{if(Y&&!h.rootBound){g&&g.start(2,"DelegateClick");Y.delegate("click",function(k){var j=D.getDataAction(k).action;if(j.search(/^om:.*:.*:.*$/)>-1){B(j);H();}else{switch(j){case"compose":C.fire("newMessage");C.fire("globalUltBeaconEvent",{action:"compose_new_msg_pane"});break;case"new-conv":break;case"loadContent":if(M){var i=k.target.get("className");H(i);}else{C.use("mail-ui-messenger",function(l){l.mail.ui.Messenger.showErrorDialog();
});}break;}}k.preventDefault();},".media-modes span");Y.on("scroll",function(){h.resetScroll=1;});h.rootBound=1;}}Y=null;},renderComplete:function(){var h=this,Y=h.getStopwatch();Y&&Y.start(1,"postRender");h.fireEvent("complete");try{h.fire("renderComplete");}catch(g){A.stat(h.statOp,"renderCompleteError");}A.stat(h.statOp,"renderComplete");h.scrollWidthStartTimer();h.hasStarted=false;h.setRenderFocus();h.postRender();},appendMarkup:function(){try{var j=this,i=j.get("parentNode"),Y=j.message,g,n,m,l,h;if(!i){return;}g=(!j.fullPageView&&i.one("div.tripane.content"))||i.one("div.message.content");if(g){m=j.numSelected?j.oTemplate.page_show_comm_modes_else:j.oTemplate.page_show_comm_modes;n=a(m,Y,this.formatters,null,strings,L);g.setContent(n);j.insertBody(g);if(j.scrollTop&&(l=j.get("rootNode"))){l.set("scrollTop",j.scrollTop);}}else{i.append(j.getMarkup());g=(!j.fullPageView&&i.one("div.tripane.content"))||i.one("div.message.content");j.insertBody(g);}if(!j.get("rootNode")){j.set("rootNode",g);j.setRootNodeTabIndex();}}catch(k){A.stat(j.statOp,"appendMarkupError");C.use("common-utils-error",function(){D.error.report((e+"appendMarkupError"),k,1,1,1);});}},getRoot:function(){var g=this,Y=g.parentNode;return(!g.fullPageView&&Y&&Y.one(".tripane.content"))||(Y&&Y.one(".message.content"));},sub:function(g){var k=g.s||"",i=g.o||0,Y=g.f||this.formatters,j=g.a||0,h=g.strs||strings;return a(k,i,Y,j,h);},onKeyDown:function(i){if(i.keyCode!=65){i.stopPropagation();}else{var j=this,g=(!j.fullPageView&&j.parentNode.one("div.tripane.content"))||j.parentNode.one("div.message.content"),Y=C.Node.getDOMNode(g),h;if(window.getSelection){h=window.getSelection();h.selectAllChildren(Y);}else{h=document.body.createTextRange();h.moveToElementText(Y);h.select();}i.halt();}},setToolbar:function(i,Y,g){var h=this;h.tbarMod=i;h.tbarCallBack=Y;h.tbarScope=g;},onFocus:function(){return this.fullView&&!this.message;},getMarkup:function(){var g=this;var Y=a(g.oTemplate.base,g.message,g.formatters,null,strings,L);return Y;},getStopwatch:function(){var Y=this;return D.Stopwatch.get(Y.stopwatchPreview)||Y.stopwatch;},setDocRole:function(){this.get("rootNode").set("role","document");},setRootNodeTabIndex:function(){},abortRequests:function(){var i=this,g=i.request,h=i.retryPrefix(),Y=i.requestType||"";if(g){A.stat(i.statOp,(h+Y+"requestAbort"));g.abort();}i.request=null;},retryPrefix:function(Y){var g=(Y>=0)?Y:this.isRetrying;return g?((g==20)?"retrySL_":"retry_"):"";},requestMessage:function(k,g,j){var m=this,h=k?k.mid||0:0,l,i=j.ovparams||{},Y=m.getStopwatch();if(h){g.args={fid:m.fid,primeMsg:k,stopwatch:Y};if(m.isChat(k)){i.displayPref="text/json";i.urlDetection=false;i.emailDetection=false;i.annotateOption={annotateText:"none"};j.ovparams=i;}m.fireEvent("get");if(Y){Y.start(1,"YCMSGGetBegin");if(!Y.YCMSGGetBegin){Y.YCMSGGetBegin=new Date();}}l=W.get(j,g);}return l;},insertBody:function(Y){},attach:function(){},detach:function(){},setMessage:function(Y){},getMessage:function(Y){},render:function(Y){},requestPaneContent:function(h,Y,g){},loadPaneContent:function(g,h,Y){},setRenderFocus:function(){},setFocusNode:function(){},loadExtra:function(){}});function N(g){M=g;var Y=C.one(".media-modes");if(Y){Y.all(".disabled").removeClass("disabled");}}function H(k){var g,h,l,Y=C.one(".media-modes");if(M){for(var j in M){g=M[j]["icon"]["class"];l=M[j]["data_action"];h=Y?Y.one("."+g):null;if(h){h.setAttribute("data-action",l);}if(k===g){B(l);}}}}function B(Y){C.use("om-common-utils",function(g){g.om.common.Utils.fireEvent(Y);});}C.mail.ui.MailPane=C.mail.ui._MailPane=O;C.on("previewpane:config",N);C.on("previewpane:action",H);},"1.0.0",{requires:["_shared_module_message_pane","_shared_module_thread_thread_pane","minty_module_comm_modes","common-utils","mail-model-datastore","mail-controller-messages","mail-ui-basewidget","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils"]});

YUI.add("mail-ui-messagepane-base",function(B){B.namespace("mail.ui");var C=B.common.Utils,O=C.escapeHtml,a=C.unescapeHtml,Z=C.substitute,A=C.rocketstats,J=B.ui.Templates,i=B.mail,H=i.ui,F=B.Lang,b=F.trim,T=i.ui.MessagePaneUtils,V=i&&i.Controller?i.Controller.Messages:{},S=i&&i.model?i.model.DataStore.Messages:{},P=S.getPermMidPart,W=J.minty_module_comm_modes,D=S.toMessage,f="ERROR: MessagePaneRead ",N=200,E=1000,I=15,X=0,d=15000,R=1,K,Q=function(){},G={};var U=function(Y){var k=this,e;Y=Y||{};k.changeHandle=k.removeHandle=k.flushHandle=null;U.superclass.constructor.call(k,Y);k.handleContactChanged=B.on("contacts:api:contactChanged",k.updateLozenges,k);k._cancelMarkAsRead=function(){if(k.tmFireRead){clearTimeout(k.tmFireRead);k.tmFireRead=null;}};k.formatters._shared_module_message_display=function(){var l=J._shared_module_message_display_rollup;return k.numSelected&&l?k.sub({s:l.base,f:k.readFormatters}):"";};k.oTemplate=J._shared_module_message_pane;k.statOp="messageread";k.stopwatchPreview="MsgInPreview";k.set("handleKeysLocally",1);k.set("charCodes","33,34,38,40,35,36,65+ctrl,65+meta");k.set("parentNode",k.parentNode);if(Y.fid&&Y.message){if(F.isString(Y.message)){var j=Y.message;Y.message=D();Y.message.mid=j;}k.set("message",{message:Y.message,neighbors:Y.neighbors,fid:Y.fid});}};B.extend(U,B.mail.ui.MailPane,{setMessage:function(l){var m=this,Y=C.Stopwatch.get("MsgInPreview")||m.stopwatch;Y&&Y.start(1,"Set");var j=m.message||{},e=m.get("visible"),k;clearTimeout(m.slowLoad);clearTimeout(m.loadingTimer);if(m.widthUpdateTimer){m.widthUpdateTimer.cancel();m.widthUpdateTimer=null;}m.scrollWidth=m.scrollWidthIncr=m.scrollWidthKill=0;if(l&&m.message==l.message&&m.isLoaded){return;}m.isLoaded=0;m.scrollTop=0;m.disableTruncate=0;m.href="";m.resetScrollPosition();if(m.fullView&&NeoConfig.fullPage){m.set("scrollWidth",null);}m.numRetries=m.loading_slow=m.loading_error=m.loading_moved=0;if(l){if(l.message.length>0){m.numSelected=l.message.length;m.neighbors=m.message=null;if(!e){return;}m._cancelMarkAsRead();Y&&Y.start(2,"PreLoadExtra2");m.loadExtra(function(){Y&&Y.start(2,"LoadExtraCB2");try{m.render();}catch(n){}});}else{m.numSelected=1;m.fid=l.fid;m.message=l.message;m.neighbors=l.neighbors;if(m.message.mid&&!m.message.header){m.message=D(m.fid,m.message);}}}else{m.numSelected=0;m.neighbors=m.message=null;if(!e){return;}m._cancelMarkAsRead();m.render();}if((m.message&&j.mid!=m.message.mid)||m.forceShow){if(!e){m.forceShow=1;return;}m.forceShow=0;if(j.mid){m.abortRequests();}m._cancelMarkAsRead();if(!m.parentNode){return;}A.stat("messageread","setMessage");if(m.tmPendingLoad){clearTimeout(m.tmPendingLoad);k=m.loadPaneContent;}else{m.loadPaneContent();}m.tmPendingLoad=setTimeout(function(){clearTimeout(m.tmPendingLoad);m.tmPendingLoad=null;k&&k.call(m);},N);}},getMessage:function(){var j=this,e=(j.message)?{message:j.message,fid:j.fid}:null,Y=C.Stopwatch.get("MsgInPreview")||j.stopwatch;Y&&Y.start(1,"Get");if(j.numSelected&&!j.message){e={message:new Array(j.numSelected),fid:j.fid};}Y&&Y.start(1,"PostGet");return e;},render:function(q){try{var m=this,l,p,k,Y=C.Stopwatch.get("MsgInPreview")||m.stopwatch,j=q&&!m.parentNode&&m.message,o=function(){try{m.renderComplete();m.setFocusNode();}catch(r){}};m.parentNode=B.one(q)||m.parentNode;if(j){m.loadPaneContent();return;}Y&&Y.start(1,"Render");if(!m.parentNode){return;}l=m.parentNode;m.set("parentNode",l);if(l){if(!m.hasStarted&&m.message){m.fireEvent("start");m._cancelMarkAsRead();}m.fireEvent("render");m.appendMarkup();m.setDocRole();m.convertShortcuts();m.bindUI();if(m.fullView){p=m.message&&m.message.header&&m.message.header.subject?O(a(m.message.header.subject)):m.fid=="Draft"?strings["str_tabs_compose"]:strings["str_msg-view_tab_no_subject"];if(m.get("title")!=p){m.set("title",p);}}}if(!m.outboundReq&&m.message){if(m.message.body){m.isLoaded=1;Y&&Y.start(1,"MessageInDOM");B.UA.ie?setTimeout(o,0):o();}setTimeout(function(){if(m.tbarCallBack){m.tbarCallBack.apply(m.tbarScope,[B]);}},0);}}catch(n){A.stat("messageread","renderError");B.use("common-utils-error",function(){C.error.report((f+"renderError"),n,1,1,1);});}},requestPaneContent:function(j,Y,e){return this.requestMessage(j,Y,e);},loadPaneContent:function(l,n,u){try{var m,o=this,k=o.message,v=k?k.mid||0:0,t,q=(l&&!n)?l:0,s=o.retryPrefix(q),Y=o.getStopwatch(),r=new C.Stopwatch("LoadMessage");Y&&Y.start(2,"Load");n=n||{};o.fire("loadmessage");if(v&&!o.hasStarted){o.fireEvent((o.fullView?"tab":"preview")+":start");o.hasStarted=true;o._cancelMarkAsRead();}if(v){var j={success:function(AA){try{if(r==-1){A.stat("messageread","successdupcall_load");C.assert(0,"successdupcall",1);return;}var x=j&&j.respProps&&j.respProps.wasCached,y=[AA,x,false];if(Y){Y.start(1,"YCMSGGetEnd");Y.YCMSGGetEnd=new Date();Y.wasCached=x;}if(r){r.wasCached=x;r.stop();}o.loadExtra(function(){Y&&Y.start(3,"PreOnSuccess");o.onSuccess.apply(o,y);u&&u();});r=-1;}catch(z){A.stat("messageread",(s+"loadMessageSuccessError"));B.use("common-utils-error",function(){C.error.report("loadMessageSuccessError",z,1,1,1);});}},failure:function(e){clearTimeout(o.loadingTimer);o.loadExtra(function(){o.onFailure.apply(o,[e,false]);},1);},notify:B.bind(M,o),suppressCodes:!l&&["*"]},w={fid:o.fid,msg:k,cachekey:"Prime",ovparams:n};o.fireEvent("get");if(o.usedPreload){if(o.preloadedMsg){o.loadExtra(function(){Y&&Y.start(3,"PreOnSuccess");o.onSuccess.apply(o,[o.preloadedMsg,true,true]);o.preloadedMsg=null;});}else{if(o.preloadFailure){o.loadExtra(function(){o.onFailure.apply(o,[o.preloadFailure,true]);o.preloadFailure=null;},1);}}}else{A.stat("messageread",(s+"loadMessageRequest"));t=o.requestPaneContent(k,j,w);o.abortRequests();if(o.outboundReq){o.request=t;o.requestType="loadMessage";}}o.usedPreload=0;o.isRetrying=q;if(o.outboundReq){clearTimeout(o.loadingTimer);o.loadingTimer=setTimeout(function(){o.loadExtra(function(){if(o.outboundReq){o.render();}});},300);clearTimeout(o.slowLoad);o.slowLoad=setTimeout(function(){var x=o.message,e=x&&x.header.size,y=e<10000?1:(e<100000?2:(e<1000000?3:4));
A.stat("messageread","slowLoad");A.stat("messageread","slowLoadSize"+y);A.stat("messageread","slowLoadSbox"+((NeoConfig.om&&NeoConfig.om.isSandboxEnabled)?"On":"Off"));o.loadExtra(function(){o.handleSlowRequest();},1);},d);}}if(!v){o.render();}}catch(p){A.stat("messageread",(s+"loadMessageError"));}},insertBody:function(k){var o=this,m=o.message,e,j,Y,l,n=B.UA.ie?'<div style="position:absolute;z-index:-5;">&nbsp</div>':"";if(m&&m.body&&!o.isChat(m)){l=k.one(".msg-body");l&&l.setContent(n+m.body.display);}},attach:function(){var Y=this;Y.changeHandle=B.on("ds:msg:change",function(m,w,n,x,q){var l=Y.message,k=n&&n[0],r=Y.parentNode,o=l&&l.body,j=k&&k.body,u=0,p,s,v;if(Y.fullView&&q=="move"){for(p=0;l&&p<n.length;p++){v=n[p].mid;if(S.hasMoved(l.mid,v,Y.fid,m)){if(!Y.isStepping){Y.set("close",1);}return;}}}if(l&&k&&P(k.mid)==P(l.mid)&&r&&!Y.outboundReq){if(k.flags.isFlagged!=l.flags.isFlagged){Y.updateMessageFlagMarkup();}Y.message=k;if(o&&j&&o.display!=j.display){u=1;}if(!u&&o&&o.inlineAttachments&&(s=o.inlineAttachments.length)){for(p=0;p<s;p++){try{if(o.inlineAttachments[p].content.text!=j.inlineAttachments[p].content.text){u=1;break;}}catch(t){}}}if(u){Y.render();Y.resetScrollPosition();}}});Y.removeHandle=(Y.fullView)?B.on("ds:msg:remove",function(n,m,j){if(Y.fid==n&&!Y.isStepping){Y.arrMessageSequence=null;}if(Y.fid===n&&j){var k,l=0,e=m?m.length:0,o=Y.message;for(k=0;k<e;k++){if(o.mid===m[k].mid){l=1;break;}}if(!Y.isStepping&&((!m&&j)||l)){Y.set("close",1);}}if(Y.stepIndex!==null){Y.stepIndex=null;}}):0;Y.flushHandle=B.on("ds:msg:flushExt",function(){Y.loadPaneContent();});Y.resizeHandle=B.on("windowresize",function(){var e=Y.getRoot();e&&Y.message&&Y.get("visible")&&T.resizeSubject(e);});},detach:function(){var Y=this;Y.stepIndex=Y.isStepping=null;Y.changeHandle.detach();Y.removeHandle&&Y.removeHandle.detach();Y.flushHandle.detach();Y.resizeHandle&&Y.resizeHandle.detach();Y.abortRequests();clearTimeout(Y.loadingTimer);clearTimeout(Y.slowLoad);Y._cancelMarkAsRead();if(Y.tmPendingLoad){clearTimeout(Y.tmPendingLoad);Y.tmPendingLoad=null;}if(Y.widthUpdateTimer){Y.widthUpdateTimer.cancel();Y.widthUpdateTimer=null;}},setRenderFocus:function(){var Y=this;Y.setFocusNode();if(Y.fullView&&Y.get("active")&&!Y.disableTruncate){Y.set("focus",1);}},getSubjectFocusNodeSelector:function(){var Y=this.message,e=((strings.str_cfg_tog_mailSearchEnabled!==undefined&&strings.str_cfg_tog_mailSearchEnabled===false)||!(Y&&Y.header&&Y.header.subject));return(e?".message-header h3":".message-header h3 a");},setFocusNode:function(){var k=this,e,j,Y;if(k.fullPageView){e=k.get("parentNode");Y=k.getSubjectFocusNodeSelector();if((j=e.one(Y))){k.set("focusNode",j);}}},loadExtra:function(e,Y){var o=this,l=Y?["mail-ui-messagepane-error"]:["mail-ui-messagepane-read"],j=C.Stopwatch.get("MsgInPreview")||o.stopwatch,k,n,m;if(!Y&&R){n="MsgPaneRead_NotPreloaded";o.bindPaneContent&&(n="MsgPaneRead_Preloaded");A.stat("messageread",n);R=0;}j&&j.start(2,"LoadExtraBody");if(o.tbarMod){l.push(o.tbarMod);}m=function(){try{var r=l,p;j&&j.start(2,"LoadExtraUseCB");if(o.setFullFormatters&&!o.setFull){o.setFullFormatters();}try{e.apply(o);}catch(q){A.stat("messageread","loadExtraCBApplyError");B.use("common-utils-error",function(){C.error.report("loadExtraCBApplyError",q,1,1,1);});}if(G){for(p=0;p<r.length;p++){if(typeof r[p]!="function"){G[r[p]]=1;}}}}catch(q){A.stat("messageread","loadExtraCBError");}};for(k=0;k<l.length;k++){if(G[l[k]]){l.splice(k,1);k--;}}if(l.length){l.push(m);B.use.apply(B,l);}else{m(B);}j&&j.start(2,"PostLoadExtraBody");}});function g(){var j=this.get("parentNode").one(".message-header .flag"),e,Y;if(j){Y=j.hasClass("flagged");e=j.one("a");j.toggleClass("flagged").set("title",strings[Y?"str_msg_list_flag_attr":"str_msg_list_flagged_attr"]);e&&e.set("aria-checked",!Y);}}function h(e,Y){var j=this;if(j.message&&e){Y=Y||j.message.mid;if(!Y){}B.fire("Y.mail.ui.MessagePane:"+e,Y,j.guid);}}function M(Y){var e=this;if(Y=="async"&&!e.outboundReq){e.outboundReq=1;}}function L(k){var l=this,j=k.details[0],Y=j.created;B.use("comms-ui-lozenge",function(e){e.comms.ui.LozengeUtils.makeContact(l.parentNode,Y);});}B.mix(U.prototype,{updateLozenges:L,updateMessageFlagMarkup:g,fireEvent:h,convertShortcuts:function(){var j=this,Y=j.parentNode,e=(!j.fullPageView&&Y.one("div.tripane.content"))||Y.one("div.message.content");B.Lang.later(0,null,function(){T.convertShortcuts(Y,e,NeoConfig.fullPage);});},preload:function(j){var l=this,o=j.mid,k,Y=C.Stopwatch.get("MsgInPreview")||l.stopwatch,n=new C.Stopwatch("PreLoadMessage"),p,m;if(o){var e={success:function(q){if(n==-1){A.stat("messageread","successdupcall_preload");C.assert(0,"successdupcall",1);return;}p=e&&e.respProps&&e.respProps.wasCached;if(Y){Y.start(1,"YCMSGGetEnd");Y.YCMSGGetEnd=new Date();Y.wasCached=p;}if(n){n.wasCached=p;n.stop();}if(l.message){l.loadExtra(function(){l.onSuccess.apply(l,[q,false,true]);});}else{l.preloadedMsg=q;}n=-1;},notify:B.bind(M,l),failure:function(q){if(l.message){l.loadExtra(function(){l.onFailure.apply(l,[q,true]);},1);}else{l.preloadFailure=q;}},suppressCodes:["*"]};A.stat("messageread","preloadRequest");l.usedPreload=1;m=l.requestPaneContent(j,e,{fid:l.fid,msg:j,cachekey:"Prime"});l.abortRequests();if(l.outboundReq){l.request=m;l.requestType="preload";}}},isChat:function(j){var e=j&&j.sourceFolderInfo&&j.sourceFolderInfo.fid,Y=this&&this.fid||Neo.fid,k="%40C%40Chats";return(e||Y)===k;},handleUI:function(e,k,Y,j){B.use("mail-ui-messageevents",function(){H.MessageEvents.handleUI(e,k,Y,j);});}},true);B.mail.ui.MessagePane=B.mail.ui._MessagePane=U;try{B.Env._loader.groups.mailTmpl.modules._shared_module_message_pane.requires=[];}catch(c){}},"1.0.0",{requires:["_shared_module_message_pane","minty_module_comm_modes","common-utils","mail-model-datastore","mail-controller-messages","mail-ui-mailpane-base","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils"]});

YUI.add("mail-ui-mailview-base",function(B){var T=[48,49,50,51,52,53,54,55,56,57],V=[strings.str_cfg_sc_keycode_reply_to_all,strings.str_cfg_sc_keycode_message_forward,strings.str_cfg_sc_keycode_movemenu_display,strings.str_cfg_sc_keycode_mark_as_read,strings.str_cfg_sc_keycode_flag_selected_messages,strings.str_cfg_sc_keycode_reply_to_sender,strings.str_cfg_sc_keycode_print,strings.str_cfg_sc_keycode_toggle_preview_pane,strings.str_cfg_sc_keycode_close_tab],E=[65,70,68,75,76,82,80,86,220],W={},R=V.length,C=NeoConfig,Q=B.common,D=Q.Utils,S=B.contacts,Z=B.mail,H=Z.ui,L=Z.model.DataStore,F=L.Folders.get,G=Q.persist.UserData,M=H.MessagePaneUtils,J="userUIPref.msgPaneVisible",K="%40C%40Chats",P="%40B%40Bulk",O="darlaEvent",U="delete",A="message",X="move",N="visible";for(i=0;i<R;++i){W[V[i]]=E[i];}var I=function(Y){var e=this,d,c;e.statOp=null;Y=Y||{};d=Y.fid||0;c=!(Y.msgList===0);Y.vertical=e.verticalPreview=(B.one("#rail-resize-vert"))?1:0;e.isSearch=(Y.query=="")||Y.query;e.subToolbars={};e.bottomToolbars={};e.supportPreview=true;function b(){I.superclass.constructor.call(e);}function a(g){var f;if(g){return((f=F(g))&&f.total==0);}return 0;}B.mix(e,{fid:d,hasMsgList:c,isEmpty:a,msgList:null,msgPane:null,type:e.isSearch?"searchlist":(c?"messagelist":"messagepane")},true);b();};B.extend(I,B.mail.ui.BaseWidget);B.mix(I.prototype,{keyCodes:V,numCodes:T,verticalPreview:null,isChat:function(Y){var a=this;return a.isActualFolder(Y,K);},isActualFolder:function(a,Y){var c=this,b=c.msgPane&&c.msgPane.get(A);return(b&&b.message&&b.message.sourceFolderInfo&&b.message.sourceFolderInfo.fid||a)===Y;},refreshMessage:function(Y){var a=this;if(!a.hasMsgList&&a.msgPane){a.msgPane.set(A,{fid:Y.fid,message:Y.msg});}},handlePostAction:function(e,a,c,Y){if(!e){return;}var d=this,b=e.action,h=d.msgPane,g=G.get("userUIPref.goOnMessageDelete")=="msg",f;if(a!=P&&g&&b=="folder-new"){e.preHandle=function(j){B.use("mail-ui-messagepane-next-prev",function(){h&&h.stepMessage("next",j,1);});};}f=function(){d.handleUI(e,a,c,Y?[Y.message]:null);};if(d.type=="messagepane"&&a!=P&&a!=K&&(b==U||b==X||b=="trash"||b=="spam")&&g){B.use("mail-ui-messagepane-next-prev",function(){if(a=="Trash"&&b==U){h&&h.dialogThenStep(d,Y,e,1);}else{h&&h.stepMessage("next",f,1);}});}else{f();}},loadResizersAndSliders:function(){var a=this,Y=[];if(!C.fullPage){Y.push("mail-ui-workspace-horizontal-slider","mail-ui-messagesview-resize");if(a.verticalPreview){Y.push("mail-ui-messagesview-vertical");}}else{Y.push("mail-ui-messagesview-resize");}if(C.useDD){Y.push("mail-ui-messagesview-dd");}Y.push(function(b){if(H&&H.MessagesViewResize&&a.supportPreview){if(a.verticalPreview){a.horizResizer=new H.MessagesViewVertical(a);}else{a.vertResizer=new H.MessagesViewResize({messagesview:a});}}else{}if(C.useDD&a.supportPreview){if(typeof b.mail==="object"&&typeof b.mail.MessagesViewDD==="object"){Z.MessagesViewDD.setDD(a);}else{}}});B.use("contacts-api","contacts-api-utils",function(b){if(S&&S.utils&&!S.utils.areContactsLoaded()){S.api.load();}});B.use.apply(B,Y);a.slidersSet=true;},positionPreview:function(a,Y){var b=this;if(C.fullPage){return;}B.use("mail-ui-messagesview-vertical",function(){if(a&&!H.MessagesViewVertical.canGoVert()){return;}b.verticalPreview=a;if(b.horizResizer){b.horizResizer.setDisplay(a);}else{if(a){b.horizResizer=new H.MessagesViewVertical(b);}}if(b.vertResizer){b.vertResizer.setDisplay(!a);}else{if(!a){b.vertResizer=new H.MessagesViewResize({messagesview:b});}}b.msgList.set("vertical",a);b.msgList.set("fullpane",false);b.msgPane&&b.msgPane.set("vertical",a);Y&&Y();B.fire("verticalPreview",a);});},previewPaneUIChange:function(Y){try{var d=this,c=d.msgList,j=d.msgPane,a,g,h,b;if(d.verticalPreview&&Y&&!H.MessagesViewVertical.canGoVert()){d.positionPreview();}B.fire(Y?"previewPane:expanded":"previewPane:collapsed",d);c.set("fullpane",!Y);j.set(N,Y);if(Y){a=D.Stopwatch.get(d.statOp);g=j.get(A);h=g&&g.message&&g.message.mid;b=g&&g.fid;if(b&&h){a=M.handleMsgInPreviewStopwatch(a,j,b,h);}j.set(A,g);}a&&a.start(1,"SetDisplay");if(d.verticalPreview){d.horizResizer&&d.horizResizer.setDisplay(Y,1);}else{d.vertResizer&&d.vertResizer.setDisplay(Y);}}catch(f){}},togglePreviewPane:function(c){var f=this;if(!C.fullPage&&!f.isEmpty(f.fid)){try{var f=this,a=f.msgList,b=f.msgPane,Y;if(!a||!b){return;}Y=G.get(J);if(!c){Y=!Y;}f.previewPaneUIChange(Y);f.checkPreview();if(!c){G.set(J,Y);G.saveOne(J);}a.vlist.updateUlSize();B.fire("ws:previewChange",Y);}catch(d){}}},checkPreview:function(){var c=this,Y=G.get(J),b;try{if(Y){b=c.verticalPreview?c.horizResizer:c.vertResizer;b&&b.checkDisplay();}}catch(a){}},switchView:function(k){var f=this,e="scroll-view-prev",h="scroll-view-prev-beside",c="scroll-view-noprev",a,g,j={},d=(k==e)||(k==h),b,Y;switch(k){case"fullpage-view":if(C.fullPage){return;}else{j={fullpage:1,previewPane:null};}break;case e:case h:case c:g=G.get(J)?e:c;if(!C.fullPage){b=function(){if((g==c&&d)||(g==e&&k==c)){f.togglePreviewPane();}};if((f.verticalPreview&&k==e)||(!f.verticalPreview&&k==h)){f.positionPreview((k==h),b);}else{b();}return;}else{if(k==h){Y="mail-ui-messagesview-vertical";b=function(){var l=new H.MessagesViewVertical(f);l.setCookieDefault();};}a=(k==e)?1:0;j={fullpage:0,previewPane:(a!=G.get(J))?a:null};}break;}if(Y){B.use(Y,function(){b&&b();B.fire("update:view",j);});}else{B.fire("update:view",j);}},handleDarlaEvent:function(){var Y=this;if(Y.hasMsgList){Y.msgList.handleDarlaEvent();}else{Y.fire(O,{action:Y.darlaActionKey});}},triggerDarlaWithAIC:function(){var b=this,Y,a;Y=F(b.fid);a=B.mail.ui.common.StringUtils.getSystemFolderName(b.fid,Y.folderInfo.name);b.fire(O,{action:b.darlaActionKey,value:{siteAttr:B.mail.ui.MessagePaneUtils.getAdSiteAttribsFromMesgObj(b.msgPane.message,b.fid),foldername:a}});},handleToolbarSelection:function(f){var h=this,d=f?f.dataAction:0,c=f?f.item:0,g,a,b=h.msgPane,Y=h.msgList;switch(d){case"select-all":Y.vlist.selectAll();break;case"menu":break;case"prev":case"next":B.use("mail-ui-messagepane-next-prev",function(){b&&b.stepMessage(d);
});break;case"conv-save":break;case"conv-spam":break;case"conv-help":break;case"fullpage-view":case"scroll-view-prev":case"scroll-view-prev-beside":case"scroll-view-noprev":h.switchView(d);break;case"addcontact":h.handleDefaultCase({action:d,context:"msg"});break;case"togglePrevDialog":B.use("mail-ui-messagepreview",function(){c&&c.toggleClass("checked");B.mail.ui.MessagePreview.toggle(h.msgList);});break;default:h.handleDefaultCase({action:d,item:c,tbAction:true});break;}},onFocus:function(){if(!this.hasMsgList){return this.msgPane.onFocus();}},onKeyDown:function(AE){var y=this,j=AE.keyCode,z,o=AE.metaKey,AB=AE.shiftKey,l=AE.ctrlKey,AF=AE.altKey,p=AE.metaKey||AE.ctrlKey,AA=y.fid==="Draft",v=y.isChat(y.fid),AC=false,Y=y.msgPane,g=y.msgList,q=B.UA,w,f,u=B.one("#app-list"),a,t,s=B.UA.ie;j=!p?W[j]||j:j;if(j>=96&&j<=105){j-=48;}if(AA&&((j==65&&!p)||j==82||j==70||j==68)){return false;}if(v&&((!AB&&j==65)||j==82||j==70||j==68||j==75)){return false;}switch(j){case 13:z=AE.target.ancestor("div .list-view")?"open":null;break;case 33:case 34:if(C.fullPage){return;}case 35:case 36:if(C.fullPage){return;}case 38:case 40:case 188:if(o){return;}case 190:if((j==188||j==190)&&!l){return;}if(!g&&(j==188||j==190)){B.use("mail-ui-messagepane-next-prev",function(){Y&&Y.stepMessage(j==188?"prev":"next",null,null,true);});}else{g.set("active",1);w=g.get("focusNode");f=B.one(document.activeElement);if(w&&(!f||!w.contains(f))){B.use("node-event-simulate",function(){g.get("focusNode").simulate("keydown",{charCode:j,keyCode:j,altKey:AF,shiftKey:AB,ctrlKey:l,metaKey:o});});}}AE.halt();break;case 46:if(!u||(u&&!u.contains(AE.target))){z=U;}break;case 68:if(!AF&&!AB){if(y.ftrNode&&y.ftrNode.inViewportRegion()&&!y.get("contentToolbar").get("content").inViewportRegion()){w=y.ftrNode.one("#btn-move");if(w){if(!w.menu){w.simulate("click");}else{w.menu.show();}break;}}z="move-menu";}break;case 75:z=AB?"unread":"read";break;case 76:z=AB?"unflagged":"flagged";break;case 65:if(!AB&&!AF&&p){g.vlist.selectAll(1);AE.halt();}else{if(!p&&!AF){z=AB?(y.isEnableAddToContacts()?"addcontact":null):"reply_all";if(z=="addcontact"&&!o&&!l){y.handleDefaultCase({action:z,context:"msg"});return true;}a=s;}}break;case 82:if(!AB){z="reply_sender";a=s;}break;case 70:if(!AF&&!AB&&!p){z="forward";a=s;}else{if(AB&&(AF||C.intl=="jp")){AC=true;z="forward";AF=false;AE.halt();}}if((!(q.gecko&&q.os=="macintosh")&&!AB&&!o)&&(AB||!p)){AE.preventDefault();}break;case 86:if(o||l||AF||AB){break;}y.togglePreviewPane();return true;case 27:var x=B.one(".card-v1 .user-email a");if(x&&x.getStyle("visibility")!="hidden"){B.mail.ContactPopup&&B.mail.ContactPopup.hideMini();}else{if(y.type=="messagepane"){y.set("asleep",1);return true;}}break;case 220:if(o||l){if(y.type=="messagepane"){y.set("asleep",1);return true;}}break;case 80:if(p){AE.halt(true);try{event.keyCode=0;}catch(r){}}if(!AF&&!AB){y.handleDefaultCase({action:"print",item:0});}break;case 73:case 84:if(AB&&v&&strings.str_cfg_tog_hasSMS){var c=(j==84)?"reply-sms":"reply-im",h=y.getCurrentMsg();y.handleUI({action:c},y.fid,y.msgList,h?[h]:null);return true;}break;case 48:case 49:case 50:case 51:if((j==51)&&AB&&!l&&!AF&&!o){z=U;break;}case 52:case 53:case 54:case 55:case 56:case 57:var k=AE.target.ancestor("div",true);if(o||l||AF||AB||(!k||k.get("id")!="menu-move")||!strings.str_tog_use_num_accel){break;}B.mail.Controller.Folders.get(null,{success:function(AJ){var AK=AJ,AH,AM=[],AI,e,AL;e=AK?AK.length:0;for(AI=0;AI<e;AI++){if(!AK[AI].isSystem){AM.push(AK[AI]);}}AH=j===48?"Inbox":AM[j-49];AH=(B.Lang.isString(AH))?AH:(AH?AH.folderInfo.fid:0);if(y.fid===AH){return;}if(AH){y.handlePostAction({action:X,fid:AH},y.fid,(y.hasMsgList?g:null),(y.hasMsgList?null:Y.get(A)));}}});return true;case 67:if(p){var b=B.mail.Tabs.getActiveTab().elContent;if(b){var m,n,AG="",d;var AD=b.one(".message-header").one(".lozengeContainer.pressed .lozenge");d=document.activeElement;if(AD){m=AD.getAttribute("data-address");n=AD.getAttribute("data-name");if(n){AG=n+" <"+m+">";}else{AG=m;}M.initializeCopyText();M.copyToClipboard(AG,null,d);}}}return;default:break;}if(z&&!o&&!l){t=function(){y.handleDefaultCase({action:z,item:0,forwardAsAttachment:AC});};a?setTimeout(t,0):t();return true;}return false;}},true);B.namespace("mail.ui");B.mail.ui.MailView=I;},"1.0.0",{requires:["mail-ui-basewidget","common-persist-user-data","mail-ui-messagepane-utils","mail-model-datastore","common-utils","node-event-simulate"]});

YUI.add("mail-ui-messagesview-base",function(C){var E=C.common.Utils,f=C.mail,L=f.ui,R=L.MessagePaneUtils,Q=f.model.DataStore,H=Q.Folders.get,T=E.substitute,F=C.ui.Templates,Z,K=C.common.persist.UserData,M="userUIPref.msgPaneVisible",J="div.empty-folder",I="#inboxcontainer",X="hidden",D=NeoConfig,c=D.grayoutEnabled,b=null,W="%40B%40Bulk",P="%40C%40Chats",V="darlaEvent",d="delete",B="message",S="renderComplete",a="%40S%40Search",O="title",U="visible",N=NeoConfig.hasConvRelease?"minty_module_toolbar_inbox_conversation_thread_rollup":"minty_module_toolbar_inbox_conversation_rollup",G=NeoConfig.hasConvRelease?"minty_module_toolbar_inbox_default_thread_rollup":"minty_module_toolbar_inbox_default_rollup";function e(){var Y=C.mail.ui.ContextButton;if(c&&Y){Y.setNodeMessageListMenu();}}var A=function(Y){var i=this,h;A.superclass.constructor.call(i,Y);h=i.hasMsgList;Y=Y||{};if(!D.fullPage||!h){i.msgPane=new L.MessagePane(C.mix(Y,{fullView:!h&&!Y.query,visible:!h||K.get(M)}));}Y.stopwatch&&i.msgPane&&(i.msgPane.stopwatch=Y.stopwatch);i.callFromLaunch=Y.callFromLaunch?Y.callFromLaunch:false;i.msgList=h?Y.msgList||new L.MessageList(Y):0;i.darlaActionKey=(D.low_bandwidth)?"message_tabpane_low":(D.ssl_launch?"message_tabpane_ssl":"message_tabpane");i.scrolling=[".list-view-items",".message.content"];i.supportPreview=NeoConfig.hasConv?false:true;function g(){i.addAttrs({scrollWidth:{value:null},bottomToolbar:{value:0}});i.after("activeChange",i.afterActiveChanged,i);var k=function(){if(i.msgList&&i.msgList.vlist){i.msgList.vlist.updateUlSize();}};i.formatters={non_ad:function(l){return T(F._shared_module_folder_empty_rollup.non_ad,l,i.formatters,0,strings);},page_conversation_history:function(l){return i.isChat(i.fid)?T(F._shared_module_folder_empty_rollup.page_conversation_history,l,i.formatters,0,strings):"";},page_conversation_history_else:function(l){return !i.isChat(i.fid)?T(F._shared_module_folder_empty_rollup.page_conversation_history_else,l,i.formatters,0,strings):"";},archiving_disabled:function(l){return !D.ssa_enabled?T(F._shared_module_folder_empty_rollup.archiving_disabled,l,i.formatters,0,strings):"";},full_view:function(l){var m=i.isChat(i.fid)?P:i.fid;return !h?T(F[i.toolbarMods[m]].full_view,l,0,0,strings):"";},full_view_else:function(l){var m=i.isChat(i.fid)?P:i.fid;return h?T(F[i.toolbarMods[m]].full_view_else,l,0,0,strings):"";},has_spam_button:function(l){return !i.isActualFolder(i.fid,"Sent")?T(F[i.msgToolbarMod].has_spam_button,l,0,0,strings):"";},has_preview_pane:function(m){var l=i.isChat(i.fid)?N:G;return(D.switchView!=1&&!D.fullPage&&h)?T(F[l].has_preview_pane,m,0,0,strings):"";},has_switch_view:function(m){var l=i.isChat(i.fid)?N:G;return(D.switchView==1&&h)?T(F[l].has_switch_view,m,0,0,strings):"";},has_pagination:function(m){var l=i.isChat(i.fid)?N:G;return(D.fullPage&&h)?T(F[l].has_pagination,m,0,0,strings):"";},has_pagination_else:function(m){var l=i.isChat(i.fid)?N:G;return(!D.fullPage&&h)?T(F[l].has_pagination_else,m,0,0,strings):"";},has_sms_menu_else:function(m){var l=NeoConfig.hasConvRelease?F.minty_module_toolbar_inbox_conversation_thread_rollup:F.minty_module_toolbar_inbox_conversation_rollup;return !strings.str_cfg_tog_hasSMS?T(l.has_sms_menu_else,m,i.formatters,0,strings):"";},has_sms_menu_else1:function(m){var l=NeoConfig.hasConvRelease?F.minty_module_toolbar_inbox_conversation_thread_rollup:F.minty_module_toolbar_inbox_conversation_rollup;return strings.str_cfg_tog_hasSMS?T(l.has_sms_menu_else1,m,i.formatters,0,strings):"";},is_mon:function(l){return(NeoConfig.intl!=="jp"||NeoConfig.hasAds)&&strings.str_cfg_tog_monster_ad_empty_l10n?F._shared_module_folder_empty_rollup.is_mon:"";},is_lrec:function(l){return !strings.str_cfg_tog_monster_ad_empty_l10n?F._shared_module_folder_empty_rollup.is_lrec:"";}};if(i.msgList){i.once("activeChange",function(){k();});}C.on("msgsview:splitterdone",k);function j(l){if(l.newVal>=1){i.dsFolderChange&&i.dsFolderChange.detach();i.dsFolderRename&&i.dsFolderRename.detach();i.footerScrollEvt&&i.footerScrollEvt.detach();i.footer&&i.footer.addClass(X);}else{if(h){i.dsFolderChange=C.on("ds:folder:change",function(p,o,q){if(q&&q.length>0){var n,m;for(n=0,m=o.length;n<m;n++){if(q[n].total!==undefined&&o[n].folderInfo.fid==i.fid){i.renderToolbarsOrEmpty();break;}}}});}else{i.dsFolderRename=C.on("ds:folder:rename",function(o,m,n){if(i.msgPane&&i.fid==o.folderInfo.fid){i.fid=m.folderInfo.fid;i.msgPane.set("fid",i.fid);}});i.footer&&i.bindFooterScroll();}}}i.on("asleepChange",j);i.on("closeChange",function(n){var m,l=i.subToolbars;for(m in l){l[m].set("close",n.newVal);}j({newVal:1});});i.set("children",[i.msgPane,i.msgList]);i.msgPane&&i.msgPane.on(V,function(l){i.fire(V,l);});C.on("msgsview:movetonewfolder",function(){var l=C.mail.Tabs.getActiveTab();if(i.hasMsgList&&l&&l.widget&&l.widget==i){i.handleUI({action:"folder-new",tbAction:true},i.fid,i.msgList);}});if(!h){i.msgPane.on("scrollWidthChange",function(l){i.set("scrollWidth",l.newVal);if(i.get("active")){C.fire("ws:fpMsgWidth",l);}});i.on("scrollWidthChange",function(l){if(l.reset){i.msgPane.scrollWidthReset();}});}i.set(O,h?i.msgList.get(O):i.msgPane.get(O));i.setToolbars();j({newVal:(Y.asleep||0)});if(h){i.bindMsgList();}else{i.msgPane.on("fidChange",function(l){i.fid=l.newVal;i.setToolbars();});i.msgPane.on("rootNodeChange",function(l){i.set("rootNode",l.newVal);});}i.set("charCodes","13,27,33,34,35,36,38,40,46,188,190,"+i.numCodes.join(",")+","+i.keyCodes.join(",")+","+"32+ctrl+shift,73+shift,84+shift,67");i.set("reuse",Y.reuse);}g();};C.extend(A,C.mail.ui.MailView);C.mix(A.prototype,{msgToolbarMod:NeoConfig.hasConvRelease?"minty_module_toolbar_inbox_message_thread":"minty_module_toolbar_inbox_message",toolbarMods:{Inbox:NeoConfig.hasConvRelease?"minty_module_toolbar_inbox_default_thread_rollup":"minty_module_toolbar_inbox_default_rollup","%40C%40Chats":NeoConfig.hasConvRelease?"minty_module_toolbar_inbox_conversation_thread_rollup":"minty_module_toolbar_inbox_conversation_rollup",Draft:NeoConfig.hasConvRelease?"minty_module_toolbar_inbox_drafts_thread_rollup":"minty_module_toolbar_inbox_drafts_rollup","%40B%40Bulk":NeoConfig.hasConvRelease?"minty_module_toolbar_inbox_spam_thread_rollup":"minty_module_toolbar_inbox_spam_rollup",Sent:NeoConfig.hasConvRelease?"minty_module_toolbar_inbox_sent_thread_rollup":"minty_module_toolbar_inbox_sent_rollup","%40S%40Search":NeoConfig.hasConvRelease?"minty_module_toolbar_inbox_search_thread_rollup":"minty_module_toolbar_inbox_search_rollup"},renderEmptyFolder:function(h){var i=this,g,Y=F._shared_module_folder_empty_rollup;
g=C.one(I).one(J);if(!g){C.one(I).append(T(Y.base,{folder_name:h},i.formatters,0,strings,F));}else{g.one(".col-a").setContent(T(Y.non_ad,{folder_name:h},i.formatters,0,strings,F));}g=C.one(I).one(J);C.one(I).get("children").addClass(X);if(g){g.removeClass(X);}if(c){i.setToolbars();}else{i.set("contentToolbar","");}if(!D.fullPage&&(i.fid=="Trash"||i.fid==W)){C.fire("foldersview:resetFocus",i.fid);}},renderEmptyFolderAd:function(Y){},renderToolbarsOrEmpty:function(){var l=this,g,i,k,j,Y,h;if(l.fid&&(k=H(l.fid))&&(k.total===0)){j=C.mail.ui.common.StringUtils.getSystemFolderName(l.fid,k.folderInfo.name);if(D.bidi){j='<span dir="'+k.folderInfo.dir+'">'+j+"</span>";}C.use("_shared_module_folder_empty_rollup",function(m){l.renderEmptyFolder.apply(l,[j]);});}else{h=C.one(I).one(J);if(h){l.renderEmptyFolderAd(h);g=C.one(I).get("children");if(g){g.removeClass(X);}h.addClass(X);}l.setToolbars();}},createToolbar:function(Y){var h=this,g;g=new L.Toolbar({template:Y,menu:{template:function(j,i){C.use("mail-ui-inboxmenu-base",function(k){L.InboxMenu.insert(j,i,h.fid,{enableAddContact:function(l){l(h.isEnableAddToContacts(h));}});});},keys:function(j,i){C.use("mail-ui-inboxmenu-base",function(l){var k=L.InboxMenu.getValidKeys(j);if(j.get("id")==="menu-move"){k=k.concat([68,96,97,98,99,100,101,102,103,104,105]);j.on("menu:state",function(m){if(m.state==="hide"){if(h.msgList&&h.msgList.get("focusNode")){h.msgList.get("focusNode").focus();}}});}i(k);});},enterAccel:function(i){C.use("mail-ui-inboxmenu-base",function(j){i(j.mail.ui.InboxMenu.getEnterAccel());});}}});g.on("itemSelected",h.handleToolbarSelection,h);return g;},setToolbars:function(Y){var g=this;if(c){C.use("mail-ui-button-ctxt",function(){g._setToolbars(Y);});}else{g._setToolbars(Y);}},_setToolbars:function(Y){var m=this,h=m.isChat(m.fid),l=h?P:m.fid,j=(h||m.hasMsgList)?m.toolbarMods[l]:m.msgToolbarMod,i=NeoConfig.hasConvRelease?"minty_module_toolbar_inbox_default_thread_rollup":"minty_module_toolbar_inbox_default_rollup",k=NeoConfig.hasConvRelease?C.ui.Templates.minty_module_toolbar_inbox_default_thread_rollup:C.ui.Templates.minty_module_toolbar_inbox_default_rollup;if(!j){j=m.hasMsgList?m.toolbarMods.Inbox:m.msgToolbarMod;}if(j==i&&k){g();}else{if(j==m.msgToolbarMod&&!Y){m.msgPane&&m.msgPane.setToolbar&&m.msgPane.setToolbar(j,m.setToolbars,m);}else{C.use(j,g);}}function g(){var q,n=K.get(M),w=(j==m.msgToolbarMod&&l==W),o=m.get("bottomToolbar"),p,s={previewToggle:strings[n?"str_msg-view_btn_hidepreview":"str_msg-view_btn_showpreview"],spam_data_action:w?"notspam":"spam",str_spam_attr:strings[w?"str_not_spam_attr":"str_spam_attr"],str_spam:strings[w?"str_not_spam":"str_spam"]},z,y=l,v=m.subToolbars.Inbox,u=m.bottomToolbars.Inbox,r;if(c){r=H(l);s.msgliststate=Y?"hasonemsg":"hasnomsg";}z=T(F[j].base,s,m.formatters,0,strings);if(strings.str_cfg_tog_use_reedit&&l=="%40S%40Search"&&m.msgPane&&m.msgPane.message.sourceFolderInfo&&m.msgPane.message.sourceFolderInfo.fid=="Sent"){y=l+"+Sent";}if(!(y in m.subToolbars)){var x=H(y);if(x&&!x.isSystem&&v){m.subToolbars[y]=v;m.bottomToolbars[y]=u;if(v.setButtonContext){v.setButtonContext(0);}if(u.setButtonContext){u.setButtonContext(0);}}else{m.subToolbars[y]=m.createToolbar(z);m.bottomToolbars[y]=m.createToolbar(z);if(D.fullPage){m.subToolbars[y].once("activeChange",function(AA){if(m.msgList&&m.msgList._listview){q=new L.ListViewControls(C.one(AA.currentTarget.get("content")).one(".pagination"),m.msgList._listview,F[j]);AA.preventDefault();}});}}}m.set("contentToolbar",m.subToolbars[y]);m.set("bottomToolbar",m.bottomToolbars[y]);var t=m.get("parentNode");if(t&&D.fullPage){if(o){o.get("content").remove();}if(m.hasMsgList&&(p=(C.UA.ie===7)?C.one("#msg-list").get("lastChild").get("firstChild"):C.one("#inboxcontainer").one(".list-view-footer .commontasks"))){p.insert(m.get("bottomToolbar").get("content"),0);if(!m.ftrNode){m.ftrNode=p;}}else{if(!m.footer){m.footer=C.Node.create(T(D.msgListTmpl.has_pagination));m.footer.addClass(X);t.append(m.footer);}m.footer.addClass(X);m.footer.one(".commontasks").append(m.get("bottomToolbar").get("content"));}}}},getCurrentMsg:function(){var i=this,h,Y=i.msgList,g=i.msgPane;if(g&&g.message){h=g.message;}else{if(Y.vlist&&Y.vlist.getSelectCount()==1){Y.getSelected(function(j){if(j){h=j[0];}});}}return h?h:null;},isEnableAddToContacts:function(g){g=g||this;var h=g.getCurrentMsg(),Y;if(h){Y=g.getFromEmail(h);!R.isKnownEmailAddress(Y);return !R.isKnownEmailAddress(Y);}return;},getFromEmail:function(Y){var g;if(Y){g=Y.from||(Y.header&&Y.header.from);return g&&g.email||"";}else{return"";}},singleSelectHandler:function(g){var l=this,i=l.msgPane,k=g.details[0],j=k.message&&k.message.mid,h=i&&i.get(U),Y=E.Stopwatch.get("MsgInPreview");if(h){if((i&&i.message&&i.message.mid)==j){return;}R.handleMsgInPreviewStopwatch(Y,i,k.fid,j);}i&&i.set(B,k);l.msgDetails=k.message?g.details[0]:null;C.use("rocket-stats",function(o){o.common.Utils.rocketstats.stat("messageread","SelectIndex_"+g.index);if(b!==null){var n=b-g.index,m=n>0?"MAX":"-MAX";o.common.Utils.rocketstats.stat("messageread","SelectIndexDiff_"+((Math.abs(n)<=200)?n:m));}b=g.index;});},handleUI:function(g,i,Y,h){var j=this;if(j.ymume){j.ymume.handleUI(g,i,Y,h);}else{C.use("mail-ui-messageeventsnew",function(){j.ymume=new C.mail.ui.MessageEventsNEW();j.ymume.handleUI(g,i,Y,h);});}},bindFooterScroll:function(Y){var j=this,h,i,g;Y=Y||j.get("parentNode");j.footerScrollEvt&&j.footerScrollEvt.detach();j.footerScrollEvt=C.one("window").once("scroll",function(k){if(j.footer){h=C.one("window");i=Y.get("region");g=h.get("winHeight");if(i.height>g){j.footer.removeClass(X);}}});},bindMsgList:function(){var i=this,Y=i.msgList,g=i.msgPane,h=i.fid;Y.on("singleSelect",i.singleSelectHandler,i);Y.on(V,function(j){i.fire(V,j);});Y.on("toggleToCol",function(j){if(L&&L.MessagesViewColResize){L.MessagesViewColResize.toggleCol("to",true);}});g&&g.on("transferFocusChange",function(j){if(j.newVal){Y.set("focus",1);}});Y.on("command",function(j){if(i.supportPreview&&j.e&&j.e.type!="dblclick"&&((i.msgPane&&i.msgPane.get(U))||strings.str_cfg_tog_open_by_dblclick)){return;
}C.fire("openMessage",{msg:j.message,fid:j.fid,neighbors:j.neighbors,sortCol:Y.sortedColumn,arrMsgSeq:Y.vlist.arrItems||(Y.vlist._model&&Y.vlist._model.get("list")),index:j.index||(Y.vlist.rootSelect&&Y.vlist.rootSelect.index)||null});});Y.on("fidChange",function(j){if(i.fid!=j.newVal){i.msgDetails=null;i.fid=j.newVal;g&&g.set(B,null);i.renderToolbarsOrEmpty();i.toggleColumns(j.prevVal,j.newVal);}});if(g||c){Y.on("selectCountChange",function(l){var o,n=i.fid,j=i.subToolbars[n],m=i.bottomToolbars[n],k=l.newVal;if(j&&j.setButtonContext){o=H(n);j.setButtonContext(k);if(m){m.setButtonContext(k);}}if(g){if(k>1||(k===1&&Y.vlist.checkmode)){g.set(B,{message:new Array(k)});i.msgDetails=null;}else{if(k===0){g.set(B,null);}}}});}Y.on(S,function(){var j=i.isEmpty(i.fid);if(!i.get("loaded")||j){C.Lang.later(0,Y,function(){!D.fullPage&&Y.handleDarlaEvent&&Y.handleDarlaEvent(j);});if(D.fullPage){C.use("mail-ui-messagepane-next-prev");}i.set("loaded",1);}});if(D.fullPage&&Y){Y.on("fullPageRenderComplete",function(){if(Y.get("active")){Y.handleDarlaEvent(i.isEmpty(i.fid));}});}C.one("#msg-list").one("div.list-view-items").on("keydown",function(l){var k=C.UA.os,j=(k=="windows"||k=="win");if((j&&l.shiftKey&&l.keyCode==121)||(!j&&l.ctrlKey&&l.shiftKey&&l.altKey&&l.keyCode==77)){l.preventDefault();E.simulateContextMenu(l.target);}});C.one("#msg-list").one("div.list-view-items").on("contextmenu",function(l){var m=l.currentTarget,k;l.halt();function j(){C.mail.ui.InboxMenu.insert("menu-msglist",function(){var n=C.one("#menu-msglist");e();C.common.ui.MenuHelper.create(m,{menu:n,isContext:true,xy:[l.clientX,l.clientY],keys:function(o){o(C.mail.ui.InboxMenu.getValidKeys(n));},enterAccel:function(o){o(C.mail.ui.InboxMenu.getEnterAccel());}},function(){n.on("menuSelected",function(p){var o={action:p.dataAction};if("addcontact"===p.dataAction){o.context="msg";}i.ymume.handleUI(o,i.fid,i.msgList);});n.on("menu:state",function(o){if(o.state=="hide"){if(i.msgList&&i.msgList.get("focusNode")){i.msgList.get("focusNode").focus();}}});});},i.fid,{isContext:true,enableAddContact:function(n){n(i.isEnableAddToContacts());}});}C.use("mail-ui-inboxmenu-base",function(n){n.use("common-ui-menu-helper",function(o){k=o.common.ui.MenuHelper;k.createLoadingMenu(m,{isContext:true,xy:[l.clientX,l.clientY]});o.use("mail-ui-inboxmenu-base",function(p){if(i.ymume){j();}else{p.use("mail-ui-messageeventsnew",function(){i.ymume=new p.mail.ui.MessageEventsNEW();j();});}});});});});},toggleColumns:function(g,Y){if(g===P){C.one(".list-view").all(".col-hd.info, .col-hd.file").removeClass("hidden");}else{if(Y===P){C.one(".list-view").all(".col-hd.info, .col-hd.file").addClass("hidden");}}},handleActiveDarlaEvent:function(){var Y=this;Y.msgList.handleDarlaEvent(Y.isEmpty(Y.fid));},afterActiveChanged:function(g){var h=this,Y=h.msgList;if(g){if(h.hasMsgList&&!C.server){!h.slidersSet&&C.Lang.later(0,h,h.loadResizersAndSliders);if(g.newVal&&h.get("loaded")){h.handleActiveDarlaEvent();}}else{if(!h.hasMsgList&&h.msgPane.message&&typeof g.prevVal!=="undefined"){if(g.newVal){h.triggerDarlaWithAIC();}}}Y&&Y.set(U,g.newVal);if(!g.newVal&&D.fullPage&&h.hasMsgList&&Y){Y.vlist.resetFocus();}}},handleDefaultCase:function(l){var j=this,n=l.item,h=l.action,Y=j.fid,i=j.msgList,o=j.msgPane,k={action:h,id:(n?n.get("id"):0),forwardAsAttachment:l.forwardAsAttachment||0,fid:(n&&n.getAttribute("data-fid")?n.getAttribute("data-fid"):Y),widget:(j.type==="messagepane"?j:null),item:n,hasMsgList:j.hasMsgList,tbAction:l.tbAction},m,g;if(l.context){k.context=l.context;}if(j.hasMsgList){j.handleUI(k,Y,i);}else{g=o&&o.get(B);j.handlePostAction(k,Y,null,g);}},render:function(Y){var j=this,g=j.msgList,i=j.msgPane,h=C.one(Y);j.set("parentNode",h);(g||i).on(S,function(){if(!j.hasMsgList){!j.callFromLaunch&&setTimeout(function(){j.triggerDarlaWithAIC();},0);}j.footer&&j.bindFooterScroll(Y);j.fire(S);});if(D.fullPage&&i){i.on("loadmessage",function(){j.footer&&j.footer.addClass(X);});}if(g){g.render(Y);}if((!D.fullPage&&j.fid!==a)||g===0){i&&i.render(Y);}if(j.fid&&j.fid!==a){j.set("focusNode",(g||i).get("focusNode"));j.renderToolbarsOrEmpty();}}},true);C.namespace("mail.ui");C.mail.ui.MessagesView=A;},"1.0.0",{requires:["common-ui-contentwidget","common-ui-toolbar-base","mail-ui-mailview-base","mail-ui-messagelist-base","mail-ui-messagepane-base","minty_module_toolbar_inbox_default_rollup","minty_module_toolbar_inbox_default_thread_rollup","dom-screen","mail-ui-common-string-utils"]});

YUI.add("common-utils-stats",function(D){var T=D.namespace("common.Utils"),F=T.rocketstats.stat,S=(window.NeoConfig&&NeoConfig.RTFirePercentage)||0,K={},H={},N,C=function(){return N||new Date;},W={Compose:{calcValues:O,calcSpaceId:P},Compose_inline:{},FolderView:{baseSpaceId:978500090},ConvFolderView:{baseSpaceId:1},MsgInPreview:{calcValues:U,rocketStatsExtras:M,calcSpaceId:Q},ConvInPreview:{calcValues:U,rocketStatsExtras:M,calcSpaceId:Q},MsgInTab:{calcValues:U,rocketStatsExtras:M,calcSpaceId:Q},ConvInTab:{calcValues:U,rocketStatsExtras:M,calcSpaceId:Q},SendConfirm:{baseSpaceId:978500224,calcValues:L},UpdatesTab:{baseSpaceId:978500277},LoadMessage:{},OMMessageGetPostHook:{},LoadSandbox:{},DisplayMessageInSandbox:{},PreLoadMessage:{rocketStatExtras:M},OMOpenView:{},"OMOpenView:36ohk6dgmcd1n":{},"OMOpenView:3cp9lcoq32dpn":{},"OMOpenView:3ae1mc4rm4e9l":{},Search:{calcValues:E,calcSpaceId:B},AttachmentUpload:{baseSpaceId:978500442,calcValues:A}},V=T.Stat={log:function(Y,b,a,Z){var d,X;if(Y in W){if(Y.indexOf("Conv")!=-1){return;}var c=W[Y];X=(c.calcValues?c.calcValues(Y,b,a,Z):{t_done:b});if(window.rt_Done&&(c.baseSpaceId||c.calcSpaceId)&&(NeoConfig&&NeoConfig.roundTrip)){d=c.baseSpaceId||c.calcSpaceId(Y,X,a,Z);V.rtBeacon(d,X,a);}F("profile",Y,X.t_done);if(!K[Y]&&NeoConfig.roundTrip&&NeoConfig.roundTrip.interactiveDate){F("profile","TimeToFirst"+Y,Z.s-NeoConfig.roundTrip.interactiveDate);}c.rocketStatsExtras&&c.rocketStatsExtras(Y,X,a,Z);K[Y]=1;}}},I=T.Stopwatch=function(Y){var X=this;X.n=Y;X.c=[];N=X.s=C();X.start.apply(X,D.Array(arguments,1));N=0;};I.get=function(b){var Z=D.Array(arguments,1),Y=H[b],X;if(Z.length){X=Z.shift();if(Y&&X){Y.stop(X);}Y=0;if(Z.shift()){Y=new I(b);N=Y.s;Y.start.apply(Y,Z);N=0;}H[b]=Y;}return Y;};V.rtBeacon=function(c,Z,b){var a,X=NeoConfig,e=[],Y=false;if(c&&window.rt_LogTime&&Math.random()<S){c+=X.roundTrip.spaceIdOffset;if(typeof YAHOO=="undefined"){YAHOO={};}if(typeof YAHOO.RT=="undefined"){YAHOO.RT={qsvars:{}};}rt_SetSpaceid(c);for(a in Z){switch(a.charAt(0)){case"t":rt_LogTime(a,Z[a],true);break;case"k":default:rt_AddVar(a,Z[a]);break;}}for(var d in X.userAdLocations){Y=true;break;}e.push("kd1:"+((!X.IsMailPlus&&X.hasAds&&Y)?"1":"0"));rt_AddVar("ks1",X.cluster);if(X.roundTrip&&X.roundTrip.adComment&&X.roundTrip.adComment.length>0){rt_AddVar("ks4",NeoConfig.roundTrip.adComment.join("/"));X.roundTrip.adComment=[];}(X.om&&X.om.isSandboxEnabled)&&e.push("OM:1");X.RTTimerComment&&b&&e.push(b);rt_SetComment(e.join(";"));rt_Done();}};function R(Y,X){while(Y){Y.d=X-Y.s;Y=Y.sb;Y=Y&&Y[Y.length-1];}}function G(a){var c=this,Z,Y=a.c,b="";function X(f,d){var e=0;while(e<f.length){Z=f[e++];b+=d+Z.n+":"+Z.d+"\n";if(Z=Z.sb){X(Z,d+"-");}}}X([a],b);if(Y&&Y.length>0){b+=Y.join("\n");}a.rtComment=b;b=(a.title||"")+b;}I.prototype={start:function(e){var b,c,Y=this,X=Y,g=e,h=arguments,f=0,Z=C();if(typeof g=="number"){f=1;}else{g=-1;}while(Y.sb&&--g){X=Y;Y=X.sb;Y=Y[Y.length-1];}for(;f<h.length;f++){b=Y.sb=Y.sb||[];if(c=b.length){R(X=b[c-1],Z);}X={n:h[f],s:Z};b.push(X);}},stop:function(X){var Y=this;if(!D.Lang.isNumber(Y.d)){Y.n=X||Y.n;R(Y,C());G(Y);V.log(Y.n,Y.d,Y.rtComment,Y);}},addComment:function(Y){var X=this;if(Y){X.c.push(Y);}}};function U(Y,f,d,b){var a=b.sb,e=-1,c=a?a.length-1:-1,Z={t_done:f};if(b.YCMSGGetEnd&&b.YCMSGGetBegin){Z.t1=b.YCMSGGetEnd-b.YCMSGGetBegin;}for(;c>=0;c--){var X=a[c].n;if(X=="OMMessageInDOM"||X=="MessageInDOM"){e=a[c].s;break;}}if(e>0){Z.t4=f;Z.t_done=e-b.s;}Z.kd5=(NeoConfig.hasConv?1:0);return Z;}function M(a,Y,c,b){var Z=(NeoConfig.low_bandwidth?"_lowBW":"");var X=(NeoConfig.hasConv?"_conv":"");if(b.wasCached){F("profile",a+Z+X+"_Cached",Y.t_done);}else{F("profile",a+Z+X+"_Uncached",Y.t_done);}}function Q(b,Z,e,d){var Y=NeoConfig,X=(Y.low_bandwidth?"low":(Y.secure_cascade*1?"ssl":"non-ssl")),c=(d.wasCached?1:0),a={"ssl":{MsgInPreview:[978500342,978500341],MsgInTab:[978500348,978500347]},"non-ssl":{MsgInPreview:[978500340,978500339],MsgInTab:[978500346,978500345]},"low":{MsgInPreview:[978500338,978500337],MsgInTab:[978500344,978500343]}};return a[X][b][c];}function J(a,Z,c,b){var Y=NeoConfig,X="non-ssl";cacheIndex=(b.wasCached?1:0),lookUpTable={"non-ssl":{ConvInPreview:[xx,xx],ConvInTab:[xx,xx]}};return lookUpTable[X][a][cacheIndex];}function A(X,a,Z,Y){var b={t_done:a};b.ks2=Y.attType&&Y.attType==="form"?"1":Y.attType&&Y.attType==="flash"?"2":"0";if(!D.Lang.isUndefined(Y.attSize)){b.kd2=Y.attSize+"";}return b;}function L(Y,c,b,a){var Z,e,X=0,d={t_done:c};if(a.sb){for(Z=0;Z<a.sb.length;Z++){e=a.sb[Z];switch(e.n){case"moduleLoad":d.t1=e.d;break;case"msgSend":d.t2=e.d;break;}}}d.kd4=a.action&&a.action==="retry"?"1":a.action&&a.action==="captcha"?"2":"0";if(!D.Lang.isUndefined(a.bodySize)){d.kd2=a.bodySize+"";}if(!D.Lang.isUndefined(a.attachCount)){d.kd3=a.attachCount+"";}d.kd5=(NeoConfig.hasConv?1:0);return d;}function O(X,b,a,Z){var Y,d,c={t_done:b};if(Z.sb){for(Y=0;Y<Z.sb.length;Y++){d=Z.sb[Y];switch(d.n){case"moduleLoad":c.t1=d.d;break;case"initView":c.t2=d.d;break;}}}if(Z.CMGStart&&Z.CMGEnd){c.t3=Z.CMGEnd-Z.CMGStart;}c.kd4="0";if(!D.Lang.isUndefined(Z.CMGSize)){c.kd2=Z.CMGSize+"";}if(!D.Lang.isUndefined(Z.wasCached)){c.kd3=(Z.wasCached?"1":"0");}c.kd5=(NeoConfig.hasConv?1:0);return c;}function P(a,Y,c,b){var Z={"reply_sender":978500080,"reply_all":978500245,"forward":978500078,"edit":978500266},X=Z[b.action];return(X?X:978500077);}function E(X,c,b,a){var Z={},d={t_done:c};function Y(g){var e,f;if(g.sb){for(e=0;e<g.sb.length;e++){f=g.sb[e];Z[f.n]=f.d;Y(f);}}}Y(a);d.t1=Z.start+Z.serverRequest;d.t2=Z.renderSearch;if(Z.renderSearchGroups){d.t3=Z.renderSearchGroups;}d.kd2=a.matches;d.ks2=a.source;return d;}function B(Z,X,b,a){var Y={"results":978500252,"refinement":978500222};return Y[a.action];}},"1.0.0",{requires:["rocket-stats"]});

YUI.add("common-utils",function(E){E.namespace("common.Utils");var B=E.common.Utils,D=E.Object,C=E.Lang,A=C.trim,F=/{{([^{}]*)}}/g;E.mix(B,{isEmpty:function(H){var G;if(H){for(G in H){return false;}}return true;},size:function(I){var G,H=0;for(G in I){H++;}return H;},congruent:function(I,H,G,K){var J=((I===H)||(G||(B.size(I)==B.size(H))));if(C.isString(I)){J=(I===H);}if(J&&(I!=H)){D.some(I,function(M,L){J=(K&&!!K[L])||(C.isObject(M)?B.congruent(M,H[L],G):(M==H[L]));return !J;},null,true);}return J;},diff:function(J,I,H){var G,K=H?J:B.merge({},J);if(I){D.each(K,function(M,L){G=C.isObject(M)?B.diff(M,I[L],true):(M!=I[L]);if(!G){delete K[L];}},null,true);}return(!B.isEmpty(K)||(J&&!I))&&K;},wcopy:function(I,G){var K=I&&(I.length||(I.length===0))&&Object.prototype.toString.call(I)=="[object Array]",H,J=I?(K?E.clone(I):E.Object(I)):I;G=G||{};if(!K){for(H in J){if((typeof J[H]=="object")&&J[H]){J[H]=G[H]?I[H]:B.wcopy(J[H]);}}}return J;},merge:function(M,L,K,I){var J,H,G;if(C.isObject(L)){M=(C.isObject(M)&&M)||{};for(J in L){if(I&&!L.hasOwnProperty(J)){continue;}if(C.isArray(L[J])){H=L[J];if(!M[J]||K){M[J]=[];}for(G=0;G<H.length;G++){M[J].push(B.merge(M[J][G],H[G],K,I));}}else{if(C.isObject(L[J])){if(!M[J]){M[J]={};}M[J]=B.merge(M[J],L[J],K,I);}else{if((K&&(M[J]!=L[J]))||C.isUndefined(M[J])){M[J]=L[J];}}}}}else{M=L;}return M;},assert:function(H,I,G,J){if(!H){I=I||"assertfail";E.use("common-utils-error",function(){var K=(J&&J())||"";B.error.report(I+" "+K,1,G);});}},substitute:function(M,L,I,H,G,K,J){if(typeof M!=="string"){return;}if(J){M=J.str||M;L=J.obj||L;I=J.formatters||I;H=J.args||H;G=J.strings||G;K=J.templates||K;}return M.replace(F,function(O,N){var Q,P,R=B.substitute;if(I&&(Q=(J&&J.formatters)?J.formatters[N]:I[N])){return(Q(L,H,J))||"";}else{if(L&&N in L){P=L[N];return typeof P==="string"&&P.match(F)?R(P,L,I,H,G,K,J):P;}else{if(G&&N in G){P=G[N];return P.match(F)?R(P,L,I,H,G,K,J):P;}else{if(K&&N in K){return R(K[N].base||K[N],L,I,H,G,K,J);}else{return"";}}}}});},regexpEscape:function(G){if(G==null){return null;}G=""+G;return G.replace(/([\^\/.*+?|()[\]{}\\=!:$])/g,"\\$1");},escapeHtml:function(H,G){if(H==null){return null;}H=""+H;H=H.replace(/&/g,"&amp;");H=H.replace(/</g,"&lt;");H=H.replace(/>/g,"&gt;");H=H.replace(/\"/g,"&quot;");H=H.replace(/\'/g,"&#39;");H=H.replace(/\\/g,"&#92;");H=H.replace(/&(?:amp;)+/g,"&amp;");if(G){H=H.replace(/&amp;#([A-Za-z0-9]+);/g,"&#$1;");}return H;},unescapeHtml:function(G){if(G==null){return null;}G=""+G;G=G.replace(/&amp;/g,"&");G=G.replace(/&lt;/g,"<");G=G.replace(/&gt;/g,">");G=G.replace(/&quot;/g,'"');G=G.replace(/&#39;/g,"'");G=G.replace(/&#92;/g,"\\");return G;},escapeStringField:function(G){return B.escapeHtml(B.unescapeHtml(G));},escapeEmailObject:function(G){return{email:B.escapeStringField(G.email),name:B.escapeStringField(G.name)};},escapeEmailObjectArray:function(J){var G=J.length,H=[],I=0;for(;I<G;I++){H.push(B.escapeEmailObject(J[I]));}return H;},removeHtml:function(G){if(G==null){return null;}G=""+G;G=G.replace(/<[^>]*>/g,"");return G;},getDataAction:function(K){var J=K.target,I=K.currentTarget,G=J.ancestor(function(L){return L.getAttribute("data-action")||L===I;},true),H=G?G.getAttribute("data-action"):0;return{node:G,action:H};},dateFormatter:function(H,G){if(Neo&&Neo.dateFormatter){return Neo.dateFormatter(H,G);}return"";},triggerDarla:function(G,H){!NeoConfig.noDarla&&E.use("mail-ui-darla",function(J){var I=J.mail.ui.darla;I&&I.trigger(G,H);});},loadDarlaAndExecute:function(G,H){if(H){E.use("darla-base","mail-ui-darla",function(){G(E);E.use("mail-track");});}else{E.use("darla-base","mail-ui-darla","mail-track",function(){G(E);});}},parseQueryString:function(G){var H,I={};G=G||window.location.search.replace(/^\?/,"");if(G&&G.length>1){H=G.split("?");I=E.QueryString.parse(H.length>1?H[1]:H[0]);}return I;},sanitizeString:function(H){var G=/[\u0000-\u001f\u007f]/g;return typeof H==="string"?A(H.replace(G,"")):H;},mergeQueryString:function(H,I){var G;if(E.Lang.isObject(I)){G=H.replace(/\?.*$/,"");I=E.merge(B.parseQueryString(H),I);H=G+"?"+E.QueryString.stringify(I);}return H;},setSelect:function(H,G){if(typeof H.addClass!=="undefined"){H=[H];}E.Array.each(H,function(I){var J=E.Node.getDOMNode(I);if(typeof J.onselectstart!=="undefined"){J.onselectstart=function(){if((window.event.srcElement||window.event.target).tagName==="INPUT"){return true;}else{return G;}};}else{if(typeof J.style.MozUserSelect!=="undefined"){J.style.MozUserSelect=G?"inherit":"-moz-none";}else{J.onmousedown=function(){return G;};}}});},onDemand:function(G,H){return function(){var J=this,I=arguments;E.use(H,function(){J[G].apply(J,I);});};},escapeRegexp:function(H){var G=/([\[|\]|\(|\)|])/g;return H.replace(G,"\\$1");},simulateContextMenu:function(K,H){var I,G=2,J,L;if(!K){return false;}K=(K._node)?K._node:K;if(K.ownerDocument.createEvent){J=E.one(K);L=J.getXY();if(H!==false&&(L[1]-E.DOM.docScrollY())<0){J.scrollIntoView();L=J.getXY();}L[1]-=E.DOM.docScrollY();I=K.ownerDocument.createEvent("MouseEvents");I.initMouseEvent("contextmenu",true,true,K.ownerDocument.defaultView,1,0,0,L[0],L[1],false,false,false,false,G,null);return !K.dispatchEvent(I);}else{if(K.ownerDocument.createEventObject){I=K.ownerDocument.createEventObject();I.button=G;return K.fireEvent("oncontextmenu",I);}}return false;},isBrowserCORSCapable:function(){return(("withCredentials" in new XMLHttpRequest())||typeof XDomainRequest!=="undefined");},convertToPlain:function(G){var H=document.createElement("div");H.innerHTML=G;return H.textContent||H.innerText;},makeHttpsUrl:function(G){if(G&&typeof G=="string"){G=G.replace(/^http:/,"https:");G=G.replace(/:80\//,":443/");}return G;}});if(NeoConfig&&NeoConfig.intl==="jp"){E.use("common-utils-jp");}},"1.0.0",{requires:["querystring-parse-simple"]});

YUI.add("common-utils-apihook",function(D){var C=D.Lang,B=D.common.Utils,A=B.rocketstats;B.ApiHook=function(F){var E={};F.hook=function(K,H,G){var J,I;G=G||10;if(!H){for(I in K){F.hook(I,K[I],G);}}else{B.assert(K&&H);B.assert(C.isObject(H));B.assert(!C.isArray(H));J=E[K]=E[K]||[];J=J[G]=J[G]||[];return H.hId={o:G,i:J.push(H)-1};}};F.unhook=function(J,L){var H,G,I,K;if(L){B.assert(J&&(L||L===0));B.assert(C.isString(J)&&C.isObject(L)&&C.isNumber(L.o)&&C.isNumber(L.i));B.assert(E[J]);B.assert(E[J][L.o][L.i].hId==L);E[J][L.o][L.i]=0;}else{for(H in E){I=E[H];for(G in I){K=I[G];for(L in K){if(K[L]==J[H]){K[L]=0;}}}}}};return function(J,I,M,S,U){var O,T,Q,P=0,L=0,N,R=U&&U.notify||function(){},V=E[J]||[],K=function(){T=2;return 1;},G={abort:K};B.assert(C.isFunction(R));function H(){function X(Z,Y){if(C.isString(Z)){I=Z;P=L=0;if(Y){J=Y;V=E[J]||[];}Q=V[0];}else{T=T||1;if(C.isFunction(Z)){G.abort=function(){var a=Z();T=2;return a===undefined?1:a;};R("async",J,S);return function(b,e,a){if(T==1){R("resume",J,S);M=b||M;G.abort=K;T=0;if(e){I=e;L=0;P=a||0;}H();}return T==1;};}if(Z){if(C.isObject(Z)){G.abort();G.abort=function(){return Z.abort();};}else{T=0;M=Y||M;H();return;}}T=2;}}while(P<V.length){Q=V[P];while(Q&&!T&&(L<Q.length)){if(O=Q[L++]){if(!C.isFunction(O)){O=O[I];}try{M=(O&&O(M,S,X,I))||M;}catch(W){A.stat("hookutil","hookfailure");N=["HookFailure",J,I,P,L-1].join("_");A.stat("hookutil",N);if(NeoConfig.log_error_yapache==1){D.use("common-utils-error",function(){B.error.report(W,"apihook:"+N,1,1,1);});}}}}if(T){break;}P++;L=0;}if(!T){T=2;G.abort=function(){};if(O=U){if(!C.isFunction(O)){O=O[I];}try{O&&O(M,U,I);}catch(W){N="CbkFailure_"+J+"_"+I;A.stat("hookutil","CbkFailure_"+J+"_"+I);if(NeoConfig.log_error_yapache==1){D.use("common-utils-error",function(){B.error.report(W,"apihook:"+N,1,1,1);});}}}}return G;}return H();};};},"1.0.0",{requires:["common-utils","rocket-stats"]});

YUI.add("common-user-session",function(F){var C=F.common,B=C.persist,D,A,E;C.UserSession={getState:function(){var I=B.getCookie("Y"),H=I&&I.get("l"),G=B.getCookie("T"),J=G&&G.get("d");return{user:H,session:J,newuser:H&&H!=A,expired:J!=E,loggedout:!H};},update:function(){var G=this.getState();A=G.user;E=G.session;},same:function(){var G=this.getState();return !(G.newuser||G.loggedout||G.expired);}};D=NeoConfig.initCookieData||C.UserSession.getState();A=D.user;E=D.session;},"1.0.0",{requires:["common-persist-cookie-data","common-utils"]});

YUI.add("mail-controller-base",function(D){var J,I,d,W,A,g={},P=D.common.net.Error,X=D.common.Utils,C=X.rocketstats.stat,h=D.mail,H=h.Controller={},b=0,B=[],f={fixParms:2,cacheCheck:4,dupcheck:12,optimistic:14,gdmDelay:16,delay:18,transport:20,deBatch:2,unpark:4,dupcbk:6,cache:8,resume:10,envelope:12,usercbk:30},Q={notfound:1,moved:2,request:3,failed:4,baddata:5,wserror:6,_reservedIdx:20};function L(j,Y,i){return{reason:Y,data:j,fault:i,code:i&&i.code};}function K(s,j,Y,k,q,p,n){var o,l,i=s.bulkOps,r={controller:s,api:j,method:Y,reason:n,cfg:i&&i[j],custom:{},start:0,size:0,batchOps:k,batch:k.batch,getBatch:function(){r.batch=1;return S(k);},newApi:m,opNum:b++,deBatch:1};function m(u,w,t,v){r.api=u;r.method=w;r.cfg=i&&i[u];v&&(r.reason=v);if(w=="FlagMessages"){o=t.setFlags;if(o.spam||o.ham){r.cfg=i["spam"];}}r.parms=t;if(typeof t=="object"){l=r.origParms={};for(j in t){l[j]=t[j];}l=r.modParms={};for(j in t){l[j]=t[j];}}else{r.origParms=r.modParms=t;}}if(!n){r.reason=j;q=q||{};if(!p&&(q.success||q.failure)){p=q;q={};}p=p||{};}r.cbk=p;if(!k.cbk){p=k.cbk=D.Object(p);p.success=p.failure=0;}m(j,Y,q);r.batchIdx=k.push(r)-1;k.count++;return r;}function N(k,n,i,l,Y,m){if(!i){i=[];i.count=0;i.waitCnt=0;}var j=K(this,k,n,i,l,Y,m);return j.abort=g[this.ns].ch(k,"pre",j.parms,j,j.cbk);}function V(j,i,k,l){if(i.deBatch&&(l!="pre")){var Y=i.batchOps;i.deBatch=0;Y[i.batchIdx]=0;Y.count--;if(typeof i.waitIdx!="undefined"){B[i.waitIdx]=0;Y.waitCnt--;}!I&&R();}}function Z(k,j,n,o){if(j.batch&&(o!="pre")){var l,i=j.batchOps,Y=i.cbk,m=i.response.result.response[j.batchIdx]={};m[j.method+"Response"]=k;i.envCnt++;if(i.envCnt==i.length){Y&&(l=Y.success)&&l(m);}}}function G(q,s,m){var r,o=0,j=s.batchOps,Y=s.method,n=g[s.controller.ns],p=n.noDelay,i=n.isdup,l=function(){B[s.waitIdx]=0;j[s.batchIdx]=0;j.waitCnt--;j.count--;},k=function(){r.dups[s.dupIdx]=0;};if(i&&(i=i[Y])){while(o<B.length){if((r=B[o++])&&(r.method==Y)&&i(r.parms,q,r,s,m)){V(q,s);r.dups=r.dups||[];s.dupIdx=r.dups.push(s)-1;s.resume=m(k);return;}}}if(!j.batch){j.ready=1;}j.waitCnt++;if(j.batch||!p||!p[s.api]){s.waitIdx=B.push(s)-1;if(I||!j.ready||(j.waitCnt!=j.count)){s.resume=m(l);s.delayed=1;}else{F();I=1;A=s;o=0;while(o<j.length){if((s=j[o++])&&s.delayed){s.delayed=0;s.resume();}}}}}function O(){if(d){clearTimeout(d);d=0;}}function F(){O();d=setTimeout(function(){var Y=A?A.method:"Unknown";C("controller","ForceResume_"+Y);R();W=Y;},NeoConfig.controllerForceResume||30000);W=0;}function R(){W&&C("controller","ForceResumeWrong_"+W);F();var Y,m,p,o=0,n=0,k=B.length;while(o<k){if(m=B[o++]){p=1;Y=m.batchOps;if(Y.ready&&(Y.waitCnt==Y.count)){n=Y.length;while(n){if(m=Y[--n]){A=m;B[m.waitIdx]=0;m.delayed=0;if(!m.resume()){Y[m.batchIdx]=0;Y.waitCnt--;Y.count--;}}}if(Y.count!=0){I=1;return;}}}}if(!p){B.length=0;}I=0;A=0;O();}function T(l,j,n){var k=0,Y=j.batchOps,o=function(){return m();},m=function(){while(k<Y.length){if(j=Y[k++]){B[j.waitIdx]=0;}}R();};j.resume=n(o);j.parms=l;j.deBatch=0;if(!--Y.waitCnt){m=a(Y,Y.cbk);}}function e(l,i,k,m){var j,Y=i.dups;if(Y){while(Y.length){if(j=Y.shift()){j.resume(l,m);}}}}function M(j){var i,Y=j.cfg,k=j.parms,m=k.mid;if(Y&&m&&(j.count=i=m.length)){return j.time=i*(j.cost=(1000/Y.bs));}}function E(Y,q){var o,t,k,s,n=0,r=0,j=new Date,l=j-q.bst,p=j-q.st;if(l){q.bst=j;r=800/l-0.8;q.ie+=l-1000;r-=0.5*q.ie/p;if(q.la){k=0.5*r*r*(1+1/q.la);k=k<-0.5?-0.5:k>0.5?0.5:k;r+=k;}q.la=r;while(s=Y[n++]){if(o=s.cfg){t=o.bs;t+=t*r;(o.min>t)&&(t=o.min);(o.max<t)&&(t=o.max);o.bs=t;}}}}function c(j,o,n){try{var Y,m,k=0;while(Y=o[k]){Y.cnd="success";m=n;if(j){m=n.response[k];if(m.success){m=m[Y.method+"Response"];}}k++;Y.start+=Y.size;Y.cfg&&Y.resp&&Y.resp.mid&&m.mid&&(m.mid=Y.resp.mid.concat(m.mid));Y.resp=m;}}catch(l){}}function a(Y,AJ){var AG,AE,AB,AK,AI,u,AO,s,t,y,AF,j,AC,l,AH,w,AL,AN,AA,k,z,q,n,x,r,AD=1,v=0,m=D.Object(AJ||{});function AM(){AG=AO=u=AI=0;y=[];AF=[];while(AG<Y.length){if(AE=Y[AG++]){s&&AE.size&&(s.processed+=AE.size);if(AE.complete){B[AE.waitIdx]=0;Y[AE.batchIdx]=0;AE.resume(AE.resp,AE.cnd);}else{if(M(AE)){AI+=AE.cost;u+=AE.time;AO+=AE.count;}y.push(AE);}}}AI&&(v=(1000/AI)|0);if((r=Y[0])&&(r=r.cfg)&&r.fixed){v=r.fixed;if(Y[0].parms.mid.length<v*2.5){AD=0;}}if(!t){t=1;if(u<2000){v*=9;}else{if(AD){t={ie:0,la:0,bn:0};t.bst=t.st=new Date;s={processed:0,total:AO};}}}s&&(s.timeleft=u);x=0;AG=0;AK=[];while((AE=y[AG++])&&(AE.cfg||!x)){AC={};AC[j=AE.method]=w={};AA=AE.parms;for(AN in AA){if(AA.hasOwnProperty(AN)){w[AN]=AA[AN];}}AK.push(AC);AF.push(AE);if(AE.cfg){AE.size=v;n=l=AE.start;l+=v;w.mid=w.mid.slice(n,l);if(AA.mid.length>l){x=1;continue;}}AE.complete=1;}q=AK.length;z=q>1;if(!AL){try{s&&AJ&&(AH=AJ.progress)&&AH(s);}catch(i){}q&&(AB=h.net.Transport.request(z?"BatchExecute":j,z?{call:AK}:w,m,true));}if(AL||!q){R();}}m.success=function(i){F();E(AF,t);c(z,AF,i.body.result);AM();};m.failure=function(i){if(i.body&&i.body.result){c(z,AF,i.body.result);}k(i,"failure");};AM();return k=function(o,i){if(!AL){o=o||{fault:"aborted"};AL=true;AG=0;while(AG<Y.length){if(AE=Y[AG++]){B[AE.waitIdx]=0;AE.complete=1;AE.cnd=i||"aborted";AE.resp=L(o,Q.failed,o.fault);}}if(i!="aborted"){AM();}AB&&AB.abort();R();}};}H.extend=function(k,i){var j,m,l,Y=H[k];if(!Y){Y=H[k]=D.clone(J);Y.ns=k;g[k]={};g[k].ch=X.ApiHook(Y);}i=i||{};i.ch=g[k].ch;i.order=f;D.mix(g[k],i,0,0,0,1);if(m=(i&&i.passthru)){for(j in m){Y[j]=D.bind(N,Y,j,m[j],0);Y.hook(j,{pre:G},f.delay);Y.hook(j,{pre:T},f.transport);Y.hook(j,e,1);Y.hook(j,V,f.deBatch);Y.hook(j,Z,f.envelope);}}if(l=(i&&i.batchable)){for(j in l){if(!m[j]){Y.hook(j,{pre:G},f.delay);Y.hook(j,{pre:T},f.transport);Y.hook(j,V,f.deBatch);Y.hook(j,Z,f.envelope);}}}return Y;};function S(l){if(Y=l.intf){return Y;}var k,m,j,i,Y=l.intf={execute:function(n){l.ready=1;l.cbk=n;!I&&R();return{abort:function(){var o=0;while(o<l.length){if(i=l[o++]){i.abort();}}}};}};l.envCnt=0;l.response={error:null,result:{response:[]}};for(k in g){if(m=g[k].batchable){Y[k]=D.Object(Y);Y[k].ns=k;Y[k].bulkOps=H[k].bulkOps;for(j in m){Y[k][j]=D.bind(N,Y[k],j,m[j],l);
}}}l.batch=1;l.count=l.length;l.waitCnt=0;return Y;}H.batch=function(){return S([]);};J={Error:Q,abort:function(Y){Y&&Y.abort();},_error:L};function U(m,o,l){function k(){var n;if(l.status==500){j=l.fault.code;if(/SessionIdReissue/.test(j)){i=402;}else{if(/Credentials/.test(j)){i=401;n={stat:j+"_"+Y.method};}}}m.callDefault(i,n,1);}var j,i=null,Y;if((Y=l.callback)&&Y.service=="mail"){D.use("mail-error",function(n){if(h.Error){h.Error.handle(m,o,l);}else{k();}});return m.isdone()||m.async(k);}}P.onError(U);},"1.0.0",{requires:["mail-net-transport","common-net-error-base","common-utils-apihook","rocket-stats"]});

YUI.add("mail-controller-messages",function(C){var q,u=C.mail,H=u.model.DataStore,B=H.Messages,N=C.common.Utils,o=N.rocketstats.stat,A=C.Lang,G="%40S%40Search",S=u.Controller,J=B.getPermMidPart,T=B.getParam,E=NeoConfig.truncateAt||50000,D={},Q,t={"Neighbors":0},h=0,R=0,j=0,Z=0,b=0,P=NeoConfig.msgCacheInterval||30000,p=N.parseQueryString()||{},g=function(){return new Date().getTime();},V=g(),f={passthru:{send:"SendMessage",get:"GetDisplayMessage",list:"ListMessages",search:"SearchMessages",save:"SaveMessage",scan:"VirusScanAttachments"},isdup:{ListMessages:function(e,Y){return(e&&Y&&e.fid==Y.fid&&e.numInfo==Y.numInfo&&e.sortKey==Y.sortKey&&e.sortOrder==Y.sortOrder&&e.startInfo==Y.startInfo);}},noDelay:{get:1}},i=[],a=0,I=0,s,O,W,c="[NONE]";f.batchable=f.passthru;s=S.extend("Messages",f);O=s.Error;W=s._error;q=f.order;try{c=NeoConfig.userDataObj.userSendPref.loggedInAlias;}catch(r){}s.bulkOps={remove:{bs:100,min:100,max:1000},flag:{bs:100,min:100,max:1000},move:{bs:100,min:100,max:1000},spam:{bs:20,min:20,max:50,fixed:20}};function F(e,x,Y){var v,w;if(x=="Draft"){return"none";}switch(e){case"0":w="none";break;case"b":case"1":default:w="all";break;}if(!strings.str_cfg_tog_old_imageblock){if(x==="%40B%40Bulk"){w="all";}if(e==="b"&&Y&&(v=Y.flags)&&v.inAddressBook){w="none";}}else{if(e==="b"){w=x==="%40B%40Bulk"?"all":"none";}}return w;}C.mix(s,{_process:function(){},_preset:function(v){var w=(NeoConfig.low_bandwidth||NeoConfig.noLiveWords=="1"||strings.str_cfg_tog_disable_livewords)?"none":"inline";if(p.lw){w=p.lw==="1"?"inline":"none";}var x=v.fid,Y=v.msgObj,e={fid:x,enableRetry:true,textToHtml:true,urlDetection:true,emailDetection:true,emailComposeUrl:"mailto:%e%",truncateAt:E,charsetHint:"",annotateOption:{annotateText:w},bidiDetection:NeoConfig.bidi,midRequest:v.request||{blockImages:F(C.common.persist.UserData.get("userUIPref.imageBlocking"),x,Y),restrictCSS:true,expandCIDReferences:true,enableWarnings:true,bidiDetection:NeoConfig.bidi,cachekey:"launch"}};if(Y&&Y.part&&Y.flags){B.set(x,Y,"launch",true,function(y){s._process(y,{fid:x,key:e.midRequest,msg:Y});return y;},e);}},isCertified:function(Y){var e=/images|all/;return C.Array.some(Y,function(v){return v.name=="allow"&&e.test(v.value);});},getQueryParams:function(v,Y){var e=T(v.mid)||v._param;return(Y&&e&&e[Y])||e;},getAttachmentUrl:function(AA,w,e,x,v){var Y="/ya/download";if(AA=="INBOX"){AA="Inbox";}if(v){v=v.replace(/\?/g,"x");v=encodeURIComponent(v);}var y=new Date().getTime().toString(),z;w=encodeURIComponent(w);z=[NeoConfig.launch_protocol,location.hostname,Y,"?fid=",encodeURIComponent(AA),"&mid=",w,"&pid=",e,"&tnef=",x,"&YY=",y];if(v){z.push("&file_name=",v);}z.push("&appid=YahooMailNeo");return z.join("");}},true);s.hook("get",{pre:m},q.cacheCheck);s.hook("get",{success:l},q.cache);s.hook("list",{pre:U,success:M});s.hook("get",{pre:n},q.gdmDelay);s.hook("get",K,q.unpark);function n(e,Y,w){if(a){Y.parkIdx=i.push(Y)-1;Y.resume=w(x);}else{if(I){clearTimeout(I);}I=setTimeout(v,30000);}Y.unparkIt=1;a=1;function x(){i[Y.parkIdx]=0;var y=i.length;while(y--){if(i[y]){return;}}a=0;}function v(){I=0;if(a){a=0;o("msgctrl","UnlockGdmQ");d();}}}function K(e,Y,v,w){if(w!="pre"&&Y.unparkIt){Y.unparkIt=0;setTimeout(d,0);}}function d(){if(!Y(1)){Y();}function Y(y){var v,e,x,w=i.length;while(w--){if((v=i[w])&&(!y||v.parms.msg)){i[w]=0;if(y){while(w--){if((e=i[w])&&!e.parms.msg){i[w]=0;}}}a=0;v.resume(v.parms,"pre");return 1;}}if(!y){a=0;i.length=0;}}}function m(AK,AI,AM){var AG,AH,e=AK.fid,y=AK.msg,z=!AK.dontCache&&AK.prefetch,AF=AK.ovparams,AJ,Y=[],AE,v=AI.custom,AB,AC=C.common.persist.UserData.get("userUIPref.imageBlocking"),AA=(AI.parkIdx!==undefined);if(y&&z){AH=C.clone(AK);AH.msg=null;AK.prefetch=null;z=null;setTimeout(function(){s.get(AH,{suppressCodes:["*"]});},0);}function x(AS,AR){var AO,AQ=T(AS.mid),AP=AR&&AR.truncateAt,AN;AO=!AR||!AQ||((N.congruent(AR,AQ,true,{truncateAt:1})));return(AO&&(AN=B.get(e,AS))&&AN.part&&((!AN.isTruncated||(AP&&(AQ.truncateAt>AP)))||(AN.isTruncated&&typeof AP=="undefined"))&&AN);}function AL(AN){var AO=AN.mid,AP=T(AO),AQ=(NeoConfig.low_bandwidth||NeoConfig.noLiveWords=="1"||strings.str_cfg_tog_disable_livewords)?"none":"inline",AR;if(p.lw){AQ=p.lw==="1"?"inline":"none";}AR=AP?N.merge({},AP):{fid:e,enableRetry:true,textToHtml:true,urlDetection:true,emailDetection:true,emailComposeUrl:"mailto:%e%",truncateAt:E,charsetHint:"",annotateOption:{annotateText:AQ},bidiDetection:NeoConfig.bidi};if(AN.charset){AR.charsetHint=AN.charset;}if(NeoConfig.mentos_enabled){AR.MessageHeaders=["Authentication-Results","X-Rocket-Track"];}if(AF){N.merge(AR,AF,true);}if(!A.isNumber(AR.truncateAt)){delete AR.truncateAt;}delete AR.midRequest;return AR;}function w(AN,AR){var AO=AN.mid,AP,AT=T(AO),AQ=AT&&AT.midRequest,AS=AQ?N.merge({},AQ):{blockImages:F(AC,e,AN),restrictCSS:true,expandCIDReferences:true,enableWarnings:true,bidiDetection:NeoConfig.bidi};if(AF){N.merge(AS,AF.midRequest||{},true);}AS.mid=AO;AS.cachekey=AN.cachekey||AK.cachekey;if(!AS.cachekey){AS.cachekey=AR?"PrimeOther":"Other";}return AS;}function AD(AN){var AP=T(AN.mid),AO=(AP&&AP.midRequest.cachekey)||"Neighbors";if(!t[AO]){t[AO]=0;}t[AO]++;return AO;}if(!(AK&&AK.fid&&((AK.msg&&AK.msg.mid)||AK.prefetch))){AM("failure");N.assert(!NeoConfig.isInternal,"badparam-get",1,function(){C.use("mail-debug",function(AN){if(confirm("Y! Internal: Found invalid message query param.\nPlease click OK to send for Y!Mail Engineering diagnosis.")){u.Debug.emailIssue("GDM Bad param sent:\n\n"+AN.JSON.stringify(AK||{}));}});});return W(AK,O.request);}if(y){y.mid=y.mid.replace(/ /g,"+");V=g();if(AE=x(y,AF)){if(AA){h--;R--;}Q=AD(y);D[AE.mid]|=1;N.traceMsg(["CachedMessage: ","MID => ",AE.mid," | ","Cache => ",Q," | ","Algorithm => ",NeoConfig.preCacheModule||"unknown"].join(""));AI.cbk&&(AI.cbk.respProps={wasCached:true});AM("success");return AE;}else{!AA&&++h;AI.cbk&&(AI.cbk.respProps={wasCached:false});if(AK.cacheOnly){AM("failure");return W(y,O.notfound);}!AA&&R++;AJ=AL(y);Y=[w(y,true)];}}for(AG=0;
z&&AG<z.length;AG++){AB=z[AG];N.assert(!NeoConfig.isInternal||AB.mid,"badparam-get",1,function(){C.use("mail-debug",function(AN){if(confirm("Y! Internal: Found invalid message query param.\nPlease click OK to send for Y!Mail Engineering diagnosis.")){u.Debug.emailIssue("GDM Prefetch bad param:\n\n"+AN.JSON.stringify(z||{}));}});});if(AB.mid&&!x(AB,AF)){!AA&&R++;if((AJ&&N.congruent(AJ,AL(AB),true))||(AJ=AL(AB))){Y.push(w(AB,false));}}}if(AJ){N.assert(Y.length);AJ.message=Y;v.rparams=N.merge({},AJ);for(AG=0;AG<Y.length;AG++){delete Y[AG].cachekey;}}return AJ&&Y.length?AJ:AM("nomsgs");}function l(AP,AL,AQ){var AK,AI,y,AE,w,AA,Y,AH=AL.origParms,e=AH.fid,AD=AH.msg,AF=!AH.dontCache,v=AP.message,AJ=AP.code,z,AR,AC,AM=AL.custom.rparams,x,AN=AM&&AM.message;function AG(AS){var AV,AZ,AX,AY,AU=v||[],AT=AS.mid,AW=B.isSearchMid(AT,e);for(AV=0;AV<AU.length;AV++){AZ=AU[AV];AY=(AZ.sourceFolderInfo&&AZ.sourceFolderInfo.fid)||e;if(AT==AZ.mid||(AW&&J(AT)==J(AZ.mid))){break;}if(B.hasMoved(AT,AZ.mid,e,e)){if(!(AX=(AY!=e))){B.flush(e);}break;}}return(AV==AU.length)?null:{pos:AV,key:AS,fid:(AW&&e)||AY,msg:AZ,moved:AX};}function AO(AS){var AV,AU,AT=AS.mid;for(AU=0;AJ&&(AU<AJ.length);AU++){AV=AJ[AU];if((AT==AV.mid||(B.isSearchMid(AT,e)&&J(AT)==J(AV.mid)))&&AV.code!="WARN"){return AV;}}}function AB(AW){var Aa=AW.search(/<script[^>]*>/i),AS,AZ,AX,AU,AT,AY={};if(Aa>=0){AS=AW.length;AZ=Math.max(AW.search(/<\/script>/i),AS);AX=Aa!==0||AZ!==AS?AW.substring(Aa,AZ):AW;AT=/\bYAHOO\.Shortcuts\.mailCategories\s*=\s*(.*);/.exec(AX);if(AT&&AT[1]){try{AY.categories=C.JSON.parse(AT[1]);}catch(AV){AY.categories={};}}AT=/\bYAHOO\.Shortcuts\.annotationSet\s*=\s*({[\s\S]*?})\s*;/.exec(AX);if(AT&&AT[1]){try{AY.annotations=C.JSON.parse(AT[1]);}catch(AV){AY.annotations=null;}}return AY;}return null;}if(AN&&(v||AJ)){delete AM.message;for(AK=0;AK<AN.length;AK++){y=true;z=AA=null;AE=AG(AN[AK]);if(AE){z=AE.msg;if(AE.moved){B.remove(e,AN[AK]);B.set(AE.fid,z,"move");AA=O.moved;}AC=C.clone(AM);AC.midRequest=AN[AK];if(AF){if(w=B.get(AE.fid,z)){if(w.part&&N.congruent(T(z.mid),AC,true)){z=w;y=false;}else{if(w.flags){z.flags=w.flags;}}}if(y){B.set(AE.fid,z,AL.reason,true,function(AS){s._process(AS,AE);return AS;},AC);D[z.mid]&&L();D[z.mid]=0;j++;z=B.get(AE.fid,z);if(z.extend){for(AI in z.extend){delete z.extend[AI];}}else{z.extend={};}if(z.body&&z.body.display){z.extend.shortcuts=AB(z.body.display);}}}else{z._param=AC;s._process(z,AE);B.extend(z);}}else{AA=O.wserror;}if(AA==O.wserror){Y=AO(AN[AK]);AR="GDM_Code_"+(Y?Y.code:"NotFound")+(AD?"_Prime":"_Prefetch");C.use("common-utils-error","mail-error",function(AS){if(u.Error&&AD){u.Error.statTAE(4,AR);}o("msgctrl",AR);N.netError([AR,"yid",c,AS.JSON.stringify(AP)].join(";"));});}if(AD&&(AN[AK].mid==AD.mid)){x={err:AA,msg:z};}}}if(x){if(x.err){AQ("failure");return W(x.msg,AA);}else{D[x.msg.mid]|=1;return x.msg;}}else{if(!AD){AQ("noprime");}}}function U(z,AA,y){var e=z.startInfo,x=z.numInfo,v=z.startMid,Y=z.numMid,w=A.isNumber;if(NeoConfig.hasConv){z["responseFields-messages-all"]=1;}if(w(e)&&e<0){y("failure");return W(z,O.request);}}function M(y,AC,x){var Y=y.folder,v=Y.folderInfo.fid,AB=y.messageInfo,AD,AA,z=AB?AB.length:0,e,w;for(w=0;w<z;w++){e=AB[w];if(e&&e.errorflag==="true"){AA=1;break;}}if(AA){x("failure");o("msgctrl","E_ListCorrupt_BadMsgInfo");return W(AC.parms,O.baddata);}if(AC.parms&&y.startInfo+AC.parms.numInfo>=Y.total&&y.startInfo+AB.length<Y.total){Y.total=y.startInfo+AB.length;o("msgctrl","E_ListCorrupt_Total");o("msgctrl","E_ListCorrupt_Total_"+(Y.isSystem?"System":"User"));if(!b){b=1;o("msgctrl","E_ListCorrupt_onePerSession");}C.use("common-utils-error",function(){N.error.report("MsgCtrl_E_ListCorrupt_Total: yid: "+c);});}if(AC.parms&&AC.parms.maxMessagesToScanForContacts){AC.reason="ruefc";}if(v=="%40C%40Chats"){AD=[];C.Array.each(AB,function(AF){var AE=C.Array.some(AF.inboxservices||[],function(AG){if(AG.name=="src"){if(AG.value=="mmc"){Y.total--;}else{AD.push(AF);}return true;}});if(!AE){Y.total--;}});y.messageInfo=AB=AD;}if(Y&&!AC.batch){S.Folders.set(Y,null,AC.reason);}B.syncHeaders(v,AB);X(v,y.messageInfo);}function X(v,e,x){var z=NeoConfig.msgCacheUnread.split(","),x=z[0],AB=z[1],AC=g()-V;if(x>0&&AB>0&&AC<AB*60*1000){var AA=0,Y,y=new Date().getTime()/1000-18000,w=[];while(x>0&&AA<e.length){Y=e[AA++];if(Y&&Y.flags.inAddressBook&&!Y.flags.isRead&&y<Y.receivedDate){w.push(Y);x--;}else{break;}}if(w.length>0){s.get({fid:v,msg:null,prefetch:w,cachekey:"List"},{suppressCodes:["*"]});}}}function L(){for(var Y in D){if((D[Y]&3)==1){D[Y]|=2;Z++;}}}function k(Y,v,w){var e=v;while(v>0){o("MsgCache",Y+"_"+(v>10?10:v));v-=10;}w&&k(Y+"_"+w,e);}setInterval(function(){var Y,e=NeoConfig.preCacheAlgorithm||0;for(Y in t){k("CacheHit",t[Y],Y);t[Y]=0;}k("CacheMiss",h,e);k("CacheRequest",R,e);k("MsgsFetched",j,e);L();k("MsgsUsed",Z,e);h=j=R=Z=0;},P);C.use("mail-controller-processbody");C.namespace("mail.test.controller");C.mail.test.controller.Messages={cacheMsg:X};},"1.0.0",{requires:["launch-utils","rocket-stats","mail-controller-base","mail-controller-folders","common-persist-user-data"]});

YUI.add("mail-controller-folders",function(D){var i=D.mail,Z=D.common.Utils,L=i.model.DataStore,H=D.common.persist.UserData,c=Z.rocketstats.stat,S=D.Lang,G=L.Folders,B=i.Controller,a=S.trim,g={},K,R,V,M,O,f="%40S%40Search",Q=/[@#$%&*?\/;\'\":\[\]\{\}<>|\\\~\n\r\f\t]+/,e={"%40B%40Bulk":strings.spam||"Spam","%40C%40Chats":strings.str_nav_conversations||"Conversations","Draft":strings.str_nav_drafts||"Drafts"},P={},g={passthru:{refresh:"ListFolders",empty:"EmptyFolder",get:"ListFolders"},batchable:{create:"CreateFolder",refresh:"ListFolders",rename:"RenameFolder",remove:"RemoveFolder",fetchExtMail:"FetchExternalMail"}};K=B.extend("Folders",g);R=K.Error;M=R._reservedIdx;P[strings.str_folder_reserved_inbox]=P[strings.str_folder_reserved_conversations]=P[strings.str_folder_reserved_drafts]=P[strings.str_folder_reserved_sent]=P[strings.str_folder_reserved_spam]=P[strings.str_folder_reserved_trash]=P[strings.str_folder_reserved_search]=P[strings.str_folder_reserved_inbox_lower]=P[strings.str_folder_reserved_conversations_lower]=P[strings.str_folder_reserved_drafts_lower]=P[strings.str_folder_reserved_sent_lower]=P[strings.str_folder_reserved_spam_lower]=P[strings.str_folder_reserved_trash_lower]=P[strings.str_folder_reserved_search_lower]=P[strings.str_folder_reserved_inbox_upper]=P[strings.str_folder_reserved_conversations_upper]=P[strings.str_folder_reserved_drafts_upper]=P[strings.str_folder_reserved_sent_upper]=P[strings.str_folder_reserved_spam_upper]=P[strings.str_folder_reserved_trash_upper]=P[strings.str_folder_reserved_search_upper]=1;function X(l,k,Y){var j;Y&&(j=Y.failure)&&j(K._error(l,k),Y.args);}function C(k,Y){var j;Y&&(j=Y.success)&&j(k,Y.args);}function A(j){var Y={suppressCodes:["*"],failure:function(){A();}};O&&O.cancel();O=D.later((S.isNumber(j)&&j)||NeoConfig.chkFolders||10*60000,null,function(){K.refresh(NeoConfig.checkmailExt?{accountId:""}:{},Y);});}function J(k){var j=k&&k.length,Y=K.Error,l;if(!j){l=Y.empty;}else{if(j>40){l=Y.oversize;}else{if(G.getByName(k)||k.toLowerCase() in P||k in P){l=Y.exists;}else{if(Q.test(k)){l=Y.baddata;}}}}return l;}function F(l,k){var m,o,p,j,n,Y=l&&(l.folder||[l]);for(m=0;Y&&m<Y.length;m++){o=Y[m];if(o&&(j=o.folderInfo)&&(p=j.fid)){if(n=e[p]){j.name=n;}}else{if(k){k.push(o);}}}return(k.length==0)&&l;}function h(k,l,j){var Y;if(l.reason=="get"){if(Y=G.get(k)){j("success");return Y;}l.reason="refresh";k={bidiDetection:NeoConfig.bidi};}else{k={fid:k};}return k;}function d(j,t,l){var p={resetMessengerUnseen:true};p.bidiDetection=NeoConfig.bidi;if(j&&typeof j.accountId==="string"){var n,m,q,k=[],v=t.cbk||{},r,u,o=j.accountId,Y=(H.get("externalAccounts")||{}).extAccount;function s(AC,AD){var z,AA,w,x,y=[],AB;if((z=AC.fetchResults)&&(w=z.length)){for(AA=0;AA<w;AA++){if((x=z[AA].status)!="success"){y.push({userName:k[AA].userName,status:x,server:k[AA].address||k[AA].server});}}if(y.length){D.use("mail-error",function(AE){if(AB=AE.mail.Error){AB.extFetchError(y);}});}}}if(Y&&Y.length){for(m=0;m<Y.length;m++){u=Y[m];if(a(u.username)&&a(u.server)&&(o===""||o===u.address)){k.push({protocol:u.protocol,userName:u.username,server:u.server});}}if(k.length){l();r=D.clone(v);r.failure=null;r.success=s;n=B.batch().Folders;n.fetchExtMail({externalAccounts:k},r);n.refresh(p,v,t.reason);n.execute();}}}return p;}function N(l,n,m){var j=n.reason,k=n.origParms,Y=(n.api=="refresh"||j=="refresh");if(Y){l.folder.sort(function(r,p){var q=r.isSystem,o=p.isSystem;if(q&&!o){return -1;}else{if(!q&&o){return 1;}}return r.folderInfo.name.localeCompare(p.folderInfo.name);});K.set(l,null,j);A();}if(n.api=="get"){if(Y&&(!(l=G.get(k)))){m("failure");return K._error(k,K.Error.notfound);}else{return l;}}}function E(j,m){var k,Y=m.reason,l=m.origParms;k=Y.match(/\.([\w\W]+)/);k=k&&k[1]||Y;if(/^create/.test(Y)){G.add(j,k);}else{if(/^remove/.test(Y)){G.remove(l.fid,k);}else{if(/^rename/.test(Y)){G.rename({folderInfo:l},j,k);}}}G.flush();}function b(m,Y,l){var n,k,j=Z.wcopy(Y);m=Z.sanitizeString(a(m));n=J(m);if(j){j.success=j.failure=null;}if(n){X(m,n,Y);}else{k=B.batch().Folders;k.create({name:m,bidiDetection:NeoConfig.bidi},function(r,o,p){var q=Y&&Y[p];q&&setTimeout(function(){q(r,o);},0);},"create"+(l?"."+l:""));k.refresh({});k.execute(j);}}function I(m,Y,l){var k=B.batch().Folders,j=Z.wcopy(Y);if(j){j.success=j.failure=null;}k.remove({fid:m},Y,"remove"+(l?"."+l:""));k.refresh({});k.execute(j);}function W(n,Y,l){var m,k,j=Z.wcopy(Y);n.name=(n&&n.name)?Z.sanitizeString(a(n.name)):"";n.bidiDetection=NeoConfig.bidi;m=J(n.name);if(j){j.success=j.failure=null;}if(m){X(n.name,m,Y);}else{k=B.batch().Folders;k.rename(n,Y,"rename"+(l?"."+l:""));k.refresh({});k.execute(j);}}function U(k,Y,l){var j=[];k=F(k,j);if(!k){X(j,K.baddata,Y);}else{G.set(k,l);C(k,Y);}}V={success:E};K.hook({create:V,remove:V,rename:V,empty:{pre:h,success:function(Y,j){Z.assert(j.parms&&j.parms.fid);L.Messages.remove(j.parms.fid,null,true);}},get:{pre:h,success:N},refresh:{pre:d,success:N}});D.mix(K,{create:b,rename:W,remove:I,set:U,validateName:J});D.mix(R,{empty:M++,oversize:M++,exists:M++});function T(k,u,q){var n,o=0,m=0,l,p=q=="remove",s=p&&!u,v=q=="move"||q=="add",Y=(p&&-1)||(v&&1)||0,j,r=G.get(k),t;if(r){for(n=0;n<u.length;n++){j=u[n];l=j.flags&&j.flags.isRead;if(S.isNumber(l)){if(v){o+=l?0:1;}else{if(p){o+=l?0:-1;}else{o+=l?-1:1;}}}if(v||p){m+=((j.header&&j.header.size)||0);}}if(p){m=-m;}G.set(attrs={folderInfo:{fid:k},unread:s?0:r.unread+o,total:s?0:r.total+(u.length*Y),size:s?0:r.size+m},"ds:msg:");Z.assert(attrs.unread>=0&&attrs.total>=0,"neg-folder-cnt",1,function(){c("foldercnt",["Negative",attrs.unread>=0?"Total":"Unread",q].join("_"));D.use("common-utils-error",function(w){Z.netError(["NegFolderCount fid:",k,q].join(";"));});});}}D.on("ds:msg:change",function(m,o,Y,n,l){var j,k;if(m==f){for(j=0;j<Y.length;j++){if(k=(Y[j].sourceFolderInfo&&Y[j].sourceFolderInfo.fid)){T(k,[n[j]],l);}Z.assert(k);}}else{T(m,n,l);}});D.on("ds:msg:remove",function(m,k){var Y,j,l="remove";if(m==f){for(Y=0;Y<k.length;Y++){if(j=(k[Y].sourceFolderInfo&&k[Y].sourceFolderInfo.fid)){T(j,[k[Y]],l);
}Z.assert(j);}}else{T(m,k,l);}});D.on("net:suspended",function(Y){O&&O.cancel();O=0;});D.on("net:resumed",function(){A();});A(NeoConfig.checkmailExt&&(((H.get("externalAccounts")||{}).extAccount)&&10));},"1.0.0",{requires:["rocket-stats","mail-model-datastore","mail-controller-base","common-persist-user-data"]});

YUI.add("mail-controller-processbody",function(D){D.namespace("mail.Controller");var A=D.common.Utils,C=D.common.Utils.rocketstats.stat,B=new function(){strings=window.strings||{forwarded_msg_attached:"Note: Forwarded message is attached.",str_nav_left_untitled:"untitled"};var K={"jpg":1,"jpe":1,"pjpg":1,"pjpe":1,"pjpeg":1,"bmp":1,"jpeg":1,"png":1,"gif":1,"tiff":1,"x-png":1};function H(R,S){if(R){if((S&&S.fid==="%40C%40Chats")||(R.sourceFolderInfo&&R.sourceFolderInfo.fid==="%40C%40Chats")){O(R);(R.body||(R.body={}))&&(R.body.display||(R.body.display=""));R.conversationBody=R.part[0].text;}else{E(R,S);}}}function O(R){R.body=R.body||{stationery:"",inlineAttachments:[],isPlainText:0};R.imgAttachments=R.imgAttachments||[];R.nonImgAttachments=R.nonImgAttachments||[];R.attachments=R.attachments||[];R.isTruncated=false;R.yivPrefixNumber="";R.hasForwardedMsg=false;}function N(R,S){R.attachments=R.attachments.concat(S.attachments||[]);R.imgAttachments=R.imgAttachments.concat(S.imgAttachments||[]);R.nonImgAttachments=R.nonImgAttachments.concat(S.nonImgAttachments||[]);R.isTruncated=S.isTruncated||R.isTruncated;R.body.inlineAttachments=R.body.inlineAttachments.concat((S.body&&S.body.inlineAttachments)||[]);if(S.body&&S.body.display){R.body.display=[R.body.display,S.body.display].join("");}R.yivPrefixNumber=R.yivPrefixNumber||S.yivPrefixNumber||"";}function F(R){if(R){return{from:A.escapeEmailObject(R.from),subject:A.escapeStringField(R.subject),to:A.escapeEmailObjectArray(R.to),cc:A.escapeEmailObjectArray(R.cc),bcc:A.escapeEmailObjectArray(R.bcc),replyto:A.escapeEmailObjectArray(R.replyto)};}}function E(V,T){V.cookedHeader=F(V.header);if(V.part){var S=0,U=V.part,R;O(V);while(R=U[S++]){Q(V,R,T);N(V,R);}}(V.body||(V.body={}))&&(V.body.display||(V.body.display=""));if(V.hasForwardedMsg){V.body.display=[strings.str_comp_reply_fwdHeader,"<br/><br/>",V.body.display].join("");}if(V.body&&V.body.display){I(V.body);}}function Q(T,S,U){if(!S.size){S.size=S.size||0;}var R=S.isTruncated&&((S.disposition=="inline"||!S.disposition)&&!S.referencedInline&&(S.subtype==="plain"||S.subtype==="html"));S.isTruncated=R;switch(S.type){case"text":P(T,S,U);break;case"image":G(T,S,U);break;case"message":L(T,S,U);break;default:M(T,S,U);break;}}function J(S,R){if(!R.filename){R.filename=R.partId+".txt";}S.attachments.push(R);S.nonImgAttachments.push(R);}function P(S,R,T){if(typeof R.text=="string"){if((R.disposition=="inline"||!R.disposition)&&!R.referencedInline&&(R.subtype==="plain"||R.subtype==="html")){if(typeof S.body.display=="undefined"){S.body.display=R.text;S.body.isPlainText=R.subtype=="plain";}else{S.body.display+="<br />"+R.text;}}else{J(S,R);}}}function G(T,S,U){var V=(S.subtype||"").toLowerCase(),R=(V in K)||0;if(!S.referencedInline){if(!R){M(T,S);}else{if((S.disposition=="inline"||(!S.disposition&&S.contentId))&&!T.isTruncated){if(U.key.blockImages!="none"){T.hasBlockedImages=true;}else{downloadUrl=["http://",location.hostname,"/ya/download","?mid=",encodeURIComponent(U.msg.mid),"&pid=",encodeURIComponent(S.partId),"&fid=",encodeURIComponent(U.fid),"&inline=1"].join("");if(NeoConfig.useTNServer&&S.thumbnailurl){T.body.display=[T.body.display,"<div id='part",S.partId,"'>","<img src='",S.thumbnailurl,"&httperr=1&h=600&w=600' ","onerror='bN=document.getElementById(\"part",S.partId,'");bN.innerHTML="<img src=\\"',downloadUrl,'\\" />";\' />',"</div>"].join("");}else{T.body.display=[T.body.display,"<img src='",downloadUrl,"' />"].join("");}C("processbody","inline_image_download");}}}}if(!S.filename){S.filename=strings.str_nav_left_untitled+S.partId+"."+S.subtype;}if(R){S.isDisplayable=true;T.imgAttachments.push(S);T.attachments.push(S);}}function L(U,S,V){var W=(S.subtype||"").toLowerCase(),T,R;if(W=="rfc822"){if(S.partId!="TEXT"||U.part.length==2){U.attachments.push(S);U.nonImgAttachments.push(S);}if(S.disposition==""){U.hasForwardedMsg=true;}if(R=S.message){if(!S.filename){T=R.header.subject.substring(0,240)||strings.str_comp_nosubject;S.filename=T+".eml";}E(R,V);N(U,R);}}}function M(Z,S,Y){var V=(S.subtype||"").toLowerCase(),R=(S.type||"").toLowerCase(),b,T,W,U=0,X=Z.attachments,a=Z.nonImgAttachments;if(R=="application"&&V=="ms-tnef"){if(b=(S.attachments||[])){T=b.length;for(U;U<T;U++){W=b[U];if(W&&W.name){W.filename=W.name;W.partId=S.partId;W.tnefId=W.id;}}a=Z.nonImgAttachments=a.concat(b);}}else{if(!S.filename){S.filename=strings.str_nav_left_untitled+S.partId;}X.push(S);a.push(S);}}function I(R){var T=R.display,U='<div id="STATIONERY_STYLE">',W,V,S;if(/id="STATIONERY_STYLE/.test(T)){T=T.replace(/div\s*id="STATIONERY_STYLE"/,'div id="STATIONERY_STYLE"');W=T.indexOf(U);if(W>-1){V=T.indexOf("</div>",W);S=T.substring(W+U.length,V);T=T.substring(0,W)+T.substring(V+6);R.display=T;R.stationery=S;}}}D.mix(D.mail.Controller.Messages,{_process:function(S,R){S&&!S.body&&H(S,R);}},true);};},"1.0.0",{requires:["common-utils","common-utils-stats"]});

YUI.add("mail-model-datastore",function(D){D.namespace("mail.model");var E="ds:folder:",M="ds:msg:",N="invalidarg",H="change",I="add",B="rename",G="remove",K="%40S%40Search",Q=D.mail,J=D.Lang,P=D.common.Utils,O=function(){return{extend:{}};},F=50,L=Q.model.DataStore={};function C(V,U){var T,S,R;if(J.isObject(V)){S=V.extend=V.extend||{};R=(U&&U.extend)||{};for(T in R){if(!S[T]){S[T]={};P.merge(S[T],R[T]);}}}}function A(S){try{D.fire.apply(D,S);}catch(R){D.use("common-utils-error",function(){P.error.report("datastore error",R,1,1);});}}D.mix(L,{Folders:(function(){var Z=[];function U(d){return(J.isString(d)?d:(d&&d.folderInfo&&d.folderInfo.fid));}function a(d){try{return J.isObject(d)&&U(d);}catch(f){}return false;}function X(d){return(d&&d.folder&&J.isArray(d.folder));}function T(h,e,f){for(var g=0,d=Z.length;g<d;g++){if((f&&h==Z[g].folderInfo.name)||h==Z[g].folderInfo.fid){return e?g:Z[g];}}return e?-1:null;}function V(f){var k,h=!f||(J.isObject(f)&&P.isEmpty(f)),d,g,e=O(),j;if(h){d=[];for(g in Z){d.push(P.wcopy(Z[g],e));}k=d.length?d:null;}else{if(!(j=U(f))){D.error(E+"get:"+N);}k=P.wcopy(T(j),e);}return k;}function W(d){return P.wcopy(T(d,false,true),O());}function S(n,m,h){var e,l,k,o,q=n.numberOfFolders,d,f=O(),p=[],g=[],j=Z.length==0,r=!j&&[],u=!j&&[];function t(x){for(var w=0,v=x.length;w<v;w++){if(T(x[w].folderInfo.fid,true)==-1){return true;}}}function s(v,i){P.assert(a(v));var AA=U(v),y,z={},x,w;if(j&&i){return;}if(AA&&AA!=K){if(j){w=v;y=P.merge({},v);Z.push(y);}else{x=T(AA,true);if(x==-1){if(i){return;}D.error(E+"set:"+N);}z=Z[x]||z;w=h?v:P.diff(v,z);if(w){y=h?{}:P.wcopy(z);P.merge(y,w,true);!i&&Z.splice(x,1,y);}}if(w){C(y,z);p.push(P.wcopy(y,f));r&&r.push(z);u&&u.push(w);}}else{g.push(v);}}if(!(a(n)||(o=X(n)))){D.error(E+"set:"+N);}if(o){e=n.folder;k=e.length;if(d=(!j&&q&&((q!=Z.length)||t(n.folder)))){for(l=0;l<k;l++){s(e[l],d);}if(p.length){A([E+H,r,p,u,m]);}R();j=true;p=[];g=[];r=u=false;}for(l=0;l<k;l++){s(e[l]);}}else{s(n);}if(p.length){A([E+H,r,p,u,m]);}return g;}function c(d,e){if(!U(d)){D.error(E+"add:"+N);}Z.push(P.merge({},d));A([E+I,d,e]);}function Y(i,g,h){var f=U(i),d=T(f,true),e=Z[d];if(!f||!e){D.error(E+"rename:"+N);}P.merge(g,e);Z.splice(d,1,g);A([E+B,e,P.wcopy(g,O()),h]);}function b(e,f){var g=U(e),d=T(g,true);if(!g||d==-1){D.error(E+"remove:"+N);}Z.splice(d,1);A([E+G,J.isObject(e)?e:{folderInfo:{fid:g}},f]);}function R(){Z.length=0;}return{get:V,getByName:W,set:S,remove:b,rename:Y,add:c,extend:C,flush:R};})()});D.mix(L,{Messages:(function(){var f={},b={},n={olist:[],max:F,sync:{}},v=null,i={},s={};function r(x){var w;if(x&&J.isString(x)){w={mid:x};}else{w=J.isObject(x)&&x.mid&&x;}return w;}function V(x,AC,y){var AA,w,z,AD,AE,AB=(J.isString(AC)||!AC)?AC:AC.mid;if(!x||!AB){D.error(M+"get:"+N);}AA=f[x]||{};w=AA[AB];if(y&&w&&w.part){AE=n.olist;for(z=0;z<AE.length;z++){if(AE[z].fid==x&&AE[z].mid==AB){AD=AE.splice(z,1);AE.push(AD[0]);break;}}}if(!w&&j(AB)){AB=c(AB);for(AD in AA){if(c(AD)==AB){w=AA[AD];break;}}}return P.wcopy(w,O());}function Y(AA,y){var z,w,x=(J.isString(y)||!y)?y:y.mid;if(!AA||!x){D.error(M+"get:"+N);}z=f[AA]||{};return !!((w=z[x])&&w.part);}function o(w,AG,AM,AC,AB,x){var AK,AH=AC,AO=J.isArray(AG),AE=AO?AG:[AG],y=J.isArray(x)?x:[x],AA=[],AI=[],AD=[],AN=[],AL=O(),z,AJ;if("Sent"==w&&"add"==AM&&J.isString(AG)){n.sync[w]=AJ=true;}function AF(AT,AV){var AP,AR,AQ,AS,AU;if(AP=r(AT)){AS=AP.mid;f[w]=f[w]||{};AR=f[w][AS]||{};AU=P.diff(AP,AR);if(AU){AQ=AC?{}:P.wcopy(AR,AL);AQ=P.merge(AQ,AC?AP:AU,true);AH=AH&&(P.isEmpty(AR)||(AU.part&&!AR.part));if(v){if(AR.cid){AQ.cid=AR.cid;}if(AR.sourceFolderInfo){AQ.sourceFolderInfo=P.wcopy(AR.sourceFolderInfo);}if(!AR.header&&AQ.header){AQ.header.receivedDate=AR.receivedDate;}}!AJ&&a(w,AB?AB(AQ):AQ,AH,AV);C(AQ,AR);AI.push(P.wcopy(AQ,AL));AA.push(AR);AN.push(AU);}}else{AD.push(AT);}}if(!w){D.error(M+"set:"+N);}for(AK=0;AK<AE.length;AK++){AF(AE[AK],y[AK]);}if(AI.length){z=[M+(AH?I:H),w];z=z.concat(AH?[AI,AM]:[AA,AI,AN,AM]);A(z);}return AD;}function h(AD,z){var y,AC,AB,w=n.sync,x,AA;if(w[AD]&&(AB=f[AD])&&z){for(y=0;y<z.length;y++){if(AC=AB[z[y].mid]){if(!AC.flags){AB[z[y].mid]=Z(AD,z[y]);}else{AC.flags=z[y].flags;}}}w[AD]=0;}if(x=s[AD]){for(y=0;y<z.length;y++){if(AA=x[c(z[y].mid)]){P.merge(z[y],AA,true);}}}}function S(z,w){var y,x;x=f[z]=f[z]||{};if(y=x[w.mid]){if(!y.flags){x[w.mid]=Z(z,w);}else{if(!y.header){x[w.mid]=w;}else{if(w.cid){y.cid=w.cid;}y.flags=w.flags;}}}else{x[w.mid]=w;}}function X(AA,y){var z,x,AB,w=n.olist,z=f[AA];if(z&&z[y]){delete z[y];}for(x=0;x<w.length;x++){if(w[x].fid==AA&&w[x].mid==y){w.splice(x,1);break;}}}function k(x,AD,AA){var w,z,y,AC,AB=0;for(w in AD){z=x[w]=AD[w];if(AA&&(w in AA)){y=AA[w];if(typeof y=="object"){AC={};x[w]=D.Object(AC);AB|=k(AC,z,y);}else{if(z!=y){AB=1;x[w]=y;}}}}for(w in AA){if(!(w in AD)){y=AA[w];if(typeof y=="object"){AC={};x[w]=D.Object(AC);AB|=k(AC,{},y);}else{AB=1;x[w]=y;}}}return AB;}function q(AB,AF,AI,AD){var AA,AJ,x,w=D.clone(AI,1),z=AI.flags,AC=0,y=O(),AH=[],AG=[],AE=[];if(z&&z.isSpam){delete w.flags.isRead;}if(!J.isArray(AF)){AF=[AF];}f[AB]=f[AB]||{};for(;AC<AF.length;AC++){AJ={};if(k(AJ,AA=f[AB][AF[AC].mid]||AF[AC],AI)){f[AB][AA.mid]=AJ;AH.push(AA);AA.flags.isRead?AG.push(w):AG.push(AI);for(x in y){AJ[x]=y[x];}AE.push(P.wcopy(AJ,y));}}AH.length&&A([M+H,AB,AH,AE,AG,AD]);}function e(AL,AA,AJ,AM,AE){var AB,AC,AG,z,AI,y,w,AH=[],AF=[],x=O(),AK=[],AD=0;AB=f[AL]=f[AL]||{};while(AC=AJ[AD]){AG=AM[AD++];AI={mid:AG,folderInfo:{fid:AA}};y={};k(y,i[AC]||{},AI);z=c(AG);if(b[z]){b[z].fid=AA;}delete i[AC];y.extend={};AH.push({});for(w in x){y[w]=x[w];}AF.push(P.wcopy(y,x));AK.push(AI);}A([M+H,AA,AH,AF,AK,AE]);window.CollectGarbage&&CollectGarbage();}function g(x,AE,y){var AC,AA,z,AB,AJ,w,AD,AG,AF=[],AI=n.olist,AH=!AE||J.isArray(AE)?AE:[AE];if(!x){D.error(M+"remove:"+N);}AC=f[x];if(!AH){delete f[x];AA=0;while(AA<AI.length){if(AI[AA].fid==x){AI.splice(AA,1);}else{AA++;}}}else{for(AA=0;AA<AH.length;AA++){w=r(AH[AA]);AG=w.mid;if(AD=AC&&AC[AG]){delete AC[AG];}for(z=0;z<AI.length;z++){if(AI[z].fid==x&&AI[z].mid==AG){AI.splice(z,1);
break;}}if(AD&&AD.header&&(AB=w.header)&&(AJ=AB.size)){AD.header.size=AJ;}AD=AD||w;i[AG]=AD;AF.push(AD);}}A([M+G,x,AF.length&&AF,y]);}function d(w){f={};n={olist:[],max:F,sync:{}};if(w){i={};}}function W(w){v=w;}function u(y,w){var x,z;x=f[y];if(x&&x[w]&&!x[w].part){delete x[w];}}function U(AA){var z,x,y,w;for(z in f){x=f[z];for(y in x){if(w=x[y].extend){delete w[AA];}}}A([M+"flushExt",AA]);}function R(w){this.mid=w;}R.prototype={flags:{},fromConnection:{},folderInfo:{},sourceFolderInfo:{},inboxservices:{},header:{from:{email:"",name:""},to:[],subject:"",subjectDir:"",xapparentlyto:"",msgSnippet:"",externalPopServer:"",receivedDate:"",size:0},cookedHeader:{from:{email:"",name:""},to:[],subject:""}};function Z(y,AD){var w,AA=0;if(AD&&AD.mid){for(w in AD){AA++;}if(AA==1){return new R(AD.mid||"");}}AD=AD||{};var AC=AD.subject||"",AE=AD.from,AF=AD.toEmail,z={mid:AD.mid||"",cid:AD.cid||"",flags:AD.flags||{},fromConnection:AD.fromConnection||{},folderInfo:AD.folderInfo||{},sourceFolderInfo:AD.sourceFolderInfo||{},inboxservices:AD.inboxservices||{},header:{from:AE?x(AE):{email:"",name:""},to:[],subject:AB(AC),subjectDir:(NeoConfig.bidi&AD.subjectDir)?AD.subjectDir:"",xapparentlyto:AD.xapparentlyto||"",msgSnippet:AD.snippet||"",externalPopServer:AD.externalPopServer||"",receivedDate:AD.receivedDate||AD.date||"",size:AD.size||0}};AF&&(z.header.to[0]={name:AF,email:""});z.cookedHeader={from:AE?P.escapeEmailObject(z.header.from):"",subject:AC?P.escapeStringField(z.header.subject):"",to:AF?P.escapeEmailObjectArray(z.header.to):[]};return z;function AB(AG){return(AD.mid&&j(AD.mid,y)&&AG.replace(/\^_/g,""))||AG;}function x(AG){var AH=AG&&AG[0];if(AH){return{email:AH.email||AH.address||"",name:AH.name||AH.displayname||""};}return AG;}}function p(y,x){x=x||{};var z=x?x.header||{}:{},w={mid:x.mid||"",cid:x.cid||"",flags:x.flags||{},from:z.from||"",fromConnection:x.fromConnection||{},folderInfo:{fid:y||"",name:""},sourceFolderInfo:x.sourceFolderInfo||{},toEmail:(z.to?z.to.name||(z.to[0]&&(z.to[0].name||z.to[0].email))||"":""),subject:z.subject||"",xapparentlyto:z.xapparentlyto||"",externalPopServer:z.externalPopServer||"",receivedDate:z.receivedDate||"",msgSnippet:z.snippet||"",receivedDate:z.receivedDate};return w;}function c(w){P.assert(J.isString(w));return w.substr(w.lastIndexOf("_"));}function j(w,x){return/^1_0_/.test(w)||(x==K);}function T(w,y,x,z){return !j(w,x)&&!j(y,z)&&(w!=y)&&(c(w)==c(y));}function m(AA,w,z){var x,y=f[AA];for(x in y){if(!y[x].flags){return 0;}y[x].flags[w]=z;}return 1;}function t(AC,z){var x,AB,AA,y,w=n.olist;AB=AC.folderInfo.fid;if(y=f[AB]){delete f[AB];AA=z.folderInfo.fid;f[AA]=y;for(x=0;x<w.length;x++){if(w[x].fid==AB){w[x].fid=AA;}}}}function l(AC,z,AE,AA){var y,x,AD,w,AB;if(AA==M){return;}for(y=0;AE&&y<AE.length;y++){AD=AE[y];x=z[y];w=x.folderInfo.fid;if(!(J.isUndefined(AD.total)&&J.isUndefined(AD.unread))){AB=(AD.unread==x.total||AD.unread==0)?(x.unread?0:1):undefined;m(w,"isRead",AB);n.sync[w]=AB===undefined;}if(!(J.isUndefined(AD.unread)&&J.isUndefined(AD.total)&&J.isUndefined(AD.size))){A([M+"flush",w,AE,AA]);}}}function a(AA,y,AD,AG){var AH,AE=y.mid,x=c(AE),AI=n.olist,z,w,AB,AC,AF;if(AD){if(AI.length>=n.max){AH=AI.shift();P.assert(f[AH.fid]);if(f[AH.fid]){if(AH.cid&&v&&v.hit(AH.fid,AH.cid)){z=f[AH.fid][AH.mid];if(z){f[AH.fid][AH.mid]=p(AH.fid,z);}}else{delete f[AH.fid][AH.mid];}}}AI.push({fid:AA,mid:y.mid});}if(AG&&AG.charsetHint&&(AF=y.header)){s[AA]=s[AA]||{};s[AA][x]=AF;}f[AA][AE]=y;b[x]=AG;}D.on(E+B,t);D.on(E+H,l);return{get:V,set:o,move:e,update:q,remove:g,extend:C,flush:d,flushExt:U,toMessage:Z,toMessageInfo:p,getPermMidPart:c,hasMoved:T,isSearchMid:j,isCached:Y,syncHeaders:h,syncConvHeader:S,removeConvMsg:X,setConvStore:W,bustSparse:u,applyDiff:k,cacheSize:function(w){!isNaN(w)&&(w>0)&&(n.max=w);},getParam:function(w){return b[c(w)];}};})()});},"1.0.0",{requires:["common-utils","json-stringify"]});

YUI.add("mail-net-transport",function(B){B.namespace("mail.net");B.mail.net.Transport=function(){var U=B.common.net,E=U.SessionMgr,T=B.common.Utils,O=U.Error,M=E.makeFaultObject,P,S="/jsonrpc?appid=_APPID_&m=",H="/ws/mail/v2.0"+S,I="/ws/mailPreferences/v1"+S,N=H.replace(/jsonrpc/,"formrpc"),R={GetUserPreferences:I,SetUserPreferences:I,ListFolders:N,ListMessages:N,ListFolderThreads:N,ListMessagsInThread:N},D=function(V){return/formrpc/.test(V);};function L(V,a){var Z,b=B.JSON.stringify,W="badparam_",X,Y={"method":V,"params":[a]};Z=b(Y)||"";if(!(/method/.test(Z))){X=Z==""?"empty_":"nomethod_";}else{if(V=="GetDisplayMessage"||V=="MoveMessage"||V=="FlagMessage"){if(!Z.match(/\"mid\"/)||Z.match(/\"mid\":\"\"/)||Z.match(/\"mid\":\[\]/)){X="nomid_";}}}if(X){X=W+X+V;T.rocketstats.stat("mailnet",X);T.assert(0,W,1,function(){if(NeoConfig.isInternal){alert(["Bad param sent:",V,X,"Pl. contact mily@yahoo-inc.com"].join(" "));}return[X,Z,"params",(a?b(T.merge({},a)):a)].join(" ");});}return Z;}function F(X){function Y(b){var a,Z={};for(a in b){if(b[a]!==undefined){Z[a]=b[a];}}return Z;}var W=["&o=json"],V=E.formatQueryParams(Y(X),true);if(V.length){W.push("&",V);}return W.join("");}function K(Y,W){function X(){var f=c.result.response,l,k,g=[],j=W.callback.batchop,h;T.assert(j.length==f.length);for(h=0;h<f.length;h++){l=f[h];if(!l.success){k=l.ErrorResponse||{};if(k.code!="Client.FailedDependency"){g.push(M(k.code||"Server.MalformedFault",k.string,{detail:k.detail,idx:h,response:l}));}}}return g.length&&M("BatchItemError",null,g);}var c=W.body||{},e,d=W.fault,Z=D(Y.request.url),b,a=W.status,V=W.responseText||"";if(d){if(d.code==O.parse){if(V.match(/<code>Server.ServiceTemporarilyUnavailable<\/code>/)){d.code="Server.ServiceTemporarilyUnavailable";}else{b=W.allHeadersText;b=(b.indexOf("system.hostname")>-1)?"-mail":"-unk";d.code="Server."+(d.detail.respTxt==""?"NoResponse":((e=E.isHtml(W))?"HTMLResponse":"Malformed"))+b;d.subcode=e;}}}else{if(c.error||c.fault){c=c.error||c.fault;}if(a==500){d=M(c.code||"Server.MalformedFault",c.message,c.detail||W);W.body=c;}else{if(a==200){if(Z){W.body={result:c};}else{if(W.callback.batchop){d=X();}}}}W.fault=d;}}function C(X,a,b){var Y={},W,V,Z=(b&&b.appid)||"YahooMailNeo";a=a||{};if(!X){throw new Error("CascadeMethod");}Y.headers=a.headers;delete a.headers;W=Y.url=(R[X]||H).replace(/_APPID_/,Z)+X;if(D(W)){V=F(a);if((W.length+V.length)>=2048){V=null;}else{Y.url+=V;}}if(!V){Y.post=function(c){return L(X,c||a);};}Y.callback=J(b,X,a);return Y;}function Q(X,V){var W=P.format[V.callback.responseType];if(W){W(X,V);}}function J(b,V,Z){var a,W,Y,X;if(!b){b={};}B.mix(b,{responseType:"json",method:V,service:"mail",formatter:P.formatter,suppressCodes:[],exceptCodes:[],suppressLogs:[],exceptLogs:[],timeout:NeoConfig.mailwstimeout},false);if(V=="BatchExecute"){Y=b.batchop=[];X=Z.call;for(W=0;W<X.length;W++){for(a in X[W]){Y.push(a);}}}return b;}function G(V){return P.queue?P.queue(V):V;}P={request:function(V,b,c,Y){var Z,X=C(V,b,c),a=X.headers||{},W;Z=G(E.request(X.url,X.post,X.callback,X.post?"POST":"GET"));a["Accept"]="application/json";for(W in a){Z.setHeader(W,a[W]);}if(Y){Z.send();}return Z;},formatter:Q,format:{"json":K}};return P;}();var A=B.common.persist.NeoData.get("mailnetQueue");if(A||(typeof A==="undefined")){B.use("mail-net-queue",function(){});}if(NeoConfig.enable_etp&&NeoConfig.isInternal){B.use("mail-net-diag","mail-net-ETP");}else{B.use("mail-net-diag");}},"1.0.0",{requires:["common-net-sessionmgr","json-stringify","common-persist-neo-data"]});

YUI.add("mail-net-queue",function(B){var E=B.mail.net.Transport,H=[],D=false,I="mailnet:queue",C="mailnet:dequeue",J={"GetDisplayMessage":1,"GetMessage":1};function L(N){return !J[N];}function K(N,P){P=P||{};var O=P.method;D=D||(P.service=="mail"&&L(O));}function M(N,Q){var O,Q=Q||{},P=Q.service=="mail"&&L(Q.method);if(P){D=false;if(H.length>0){O=H.shift();B.fire(C,O,H.length);O.send();}}}function G(O,N){if(L(N)&&(D||H.length>0)){H.push(O);B.fire(I,O,H.length);}else{O.send();}}function F(Q,O){for(var P=0,N=H.length;P<N;P++){if(Q.id==H[P].id){H.splice(P,1);B.fire(C,Q,H.length,true);return;}}if(Q){Q.abort();}}function A(O){function N(P){this.send=function(){G(P,this._callback.method);};this.abort=function(){F(P,this._callback.method);};}N.prototype=O;return new N(O);}B.on("net:start",K);B.on("net:complete",M);B.on("net:abort",M);B.mix(E,{queue:A},true);},"1.0.0",{requires:["mail-net-transport"]});

YUI.add("mail-net-diag",function(A){A.namespace("mail.net");A.mail.net.Diag=function(){var G=A.JSON,C=A.common.net.Diag;function B(H){return H&&H.service=="mail";}function E(H,I){return B(I)&&{log:[D(H,I),"Request :",G.stringify(H.request).substring(0,500)].join(" ")};}function F(J,N){var R=N.callback,H,L,M,I="",Q,P=N.fault,K="request.time.total";try{if(B(R)&&N.responseHeaders){H=N.responseHeaders["X-Ywsc-Debug"];H=H&&H.length?G.parse(H):{};if(!H[K]){H[K]=N.responseHeaders["X-Response-Time"];}if(M=H[K]){C.addStat("mailws","RespTime_"+R.method,H[K]);}if(M&&(M>1000)){M='<span style="color:red">'+M+"</span>";}L={log:G.stringify(H),dbgui:["ws :",(M||"X")," ms"].join("")};}}catch(O){}return L||"";}function D(I,R){function K(T){var V;try{return(V=T.postdata)&&G.parse(V).params[0];}catch(U){}}if(B(R)){var M,P=I.request,L,Q,N,S,J,O="",H=R.method;if(N=R.batchop){J="<br/> ---";O=N.join(J);}else{if(O=="ListMessages"){O=((Q=P.url.match(/startInfo=(\d)+/))&&Q[0]);}else{if(O=="GetDisplayMessage"&&(S=((L=K(P))&&L.message))){for(M=0;S&&M<S.length;M++){O+=" "+S[M].mid;}}}}return O;}}C.addLogger("net:start",E);C.addLogger("net:end",F);}();},"1.0.0",{requires:["common-net-diag","json-stringify","json-parse"]});

YUI.add("mail-ui-messagepane-utils",function(G){G.namespace("mail.ui.MessagePaneUtils");var H=G.mail.ui.MessagePaneUtils,D=G.common.Utils;function F(I){if(I){I.hRenderedEvent&&I.hRenderedEvent.detach();delete I.hRenderedEvent;}}function C(K,L){var P,Q,I,N,R,J=[],O,T,S,M=[];if(K){if(K.extend&&K.extend.shortcuts){P=K.extend.shortcuts.categories;if(G.Lang.isArray(P)){R=P.length;for(N=0;N<R;N++){O=P[N][0];J.push(O);}}Q=K.extend.shortcuts.annotations;for(N in Q){I=Q[N];if(I&&I.text){if((I.weight>0&&I.csScore>0)||I.capAbtScore>0.5){M.push(Q[N].text);}}}}J=J.join(",");if(L!="Draft"&&L!="%40C%40Chats"&&L!="Sent"){if(K.header&&K.header.from&&K.header.from.email){S=K.header.from.email.split("@");T=S[1];}}}return{category:J,domain:T,terms:M};}function A(I){I.stop();D.Stopwatch.get("MsgInPreview",0);}function E(I,Q,K,P){var N,M;if(!I||(I.mid!=P)){var O=Q&&Q.isSandboxActive&&Q.isSandboxActive(),L=O&&NeoConfig.om&&NeoConfig.om.isMsgReadAppRTB,J;I=D.Stopwatch.get("MsgInPreview","MsgInPreviewAbort",1);I.title="MsgInPreview Stopwatch (sandbox "+(O?"enabled":"disabled")+")\n";I.mid=P;I.hRenderedEvent&&I.hRenderedEvent.detach();I.hMsgReadAppEvent&&I.hMsgReadAppEvent.detach();if(Q){N=G.mail.model.DataStore.Folders.get(K);M=G.mail.ui.common.StringUtils.getSystemFolderName(K,N.folderInfo.name);I.hRenderedEvent=Q.once("renderComplete",function(){F(I);if(!L){A(I);}G.use("rocket-stats",function(R){R.common.Utils.rocketstats.stat("messageread","previewMessageRead");});Q&&Q.get("active")&&Q.fire("darlaEvent",{action:(NeoConfig.low_bandwidth)?"msgread_reading_pane_low":(NeoConfig.ssl_launch?"msgread_reading_pane_ssl":"msgread_reading_pane"),value:{siteAttr:C(G.mail.model.DataStore.Messages.get(K,P),K),foldername:M}});});if(L){J=G.later(3000,null,A,[I]);I.hMsgReadAppEvent=Q.once("msgReadAppComplete",function(){J.cancel();A(I);delete I.hMsgReadAppEvent;});}}}return I;}function B(K){if(G.contacts&&G.contacts.utils&&G.contacts.api){var J=G.contacts,L=J.utils,M=J.api,I=G.common.persist.UserData;if(!K||K===""){return 1;}if(I.isUsersEmailAddress(K)||L.isEmailKnown(K,true)){return 1;}if(!L.areContactsLoaded()){M.load();return 1;}return 0;}else{return 1;}}G.mix(H,{getAdSiteAttribsFromMesgObj:C,handleMsgInPreviewStopwatch:E,cleanUpStopwatch:F,isKnownEmailAddress:B});},"1.0.0",{requires:["common-utils-stats","mail-ui-messagepane-utils-shared"]});

YUI.add("mail-ui-messagepane-utils-shared",function(A){A.namespace("mail.ui.MessagePaneUtils");var B=A.mail.ui.MessagePaneUtils;function D(Q){var M="",K,P,O,L,J=Q.toLowerCase();if(J.indexOf("http://")==0||J.indexOf("https://")==0||J.indexOf("ftp://")==0){return"";}if(J.indexOf("mailto:")==0){Q=Q.substring(7);}K=Q.indexOf("?");if(K>-1){Q=Q.substring(0,K);}if(Q&&Q.length){P=/\s*([^@ ;,<>]+@[^@ ;,<>]+\.[^@^? ;,<>]+)*/ig;O=Q.match(P);for(var N=0;N<O.length;N++){L=O[N].replace(/^\s+/,"");if(L.length){M+=(M.length)?(","+L):L;}}}return M;}function I(M){var J="";if(M&&M.length){var L=/^(http:\/\/opi.yahoo.com\/online\?u=[a-zA-Z0-9.@_]+)/i,K=M.match(L);J=K?K[K.length-1]:"";}return J;}function G(M){var K="",N="";var L=M&&M.all("tt");if(L&&!L.isEmpty()){N=L.get("innerHTML").join("");}else{N=M&&M.get("innerHTML");}if(N&&N.length){N=N.replace(/&amp;/gi,"&");var J=/^(http:\/\/mrd.mail.yahoo.com\/)(\w+)\?*(.*)/i;K=N.match(J)?N:false;}return K;}function H(K,N,M){var L=N||(K&&((!M&&K.one(".tripane.content"))||K.one(".message.content"))),J=L&&L.all(".yshortcuts");if(J){J.each(function(P){var O=P.get("innerHTML"),T=D(O);if(T&&T.length){var U=P.get("parentNode");if(U.get("tagName")=="A"&&U.hasAttribute("ymailto")){}else{var S=[];S.push('<a href="mailto:'+T+'" ');S.push('target="_blank" ymailto="mailto:'+T+'" rel="nofollow">');S.push('<span id="'+P.get("id")+'" class="yshortcuts">');S.push(O);S.push("</span></a>");var W=A.Node.create(S.join(""));try{P.replace(W);}catch(Q){}}}else{var V=I(O);if(V){var S=[];S.push('<span id="'+P.get("id")+'" class="yshortcuts">');S.push('<img src="'+V+'" alt="'+V+'"/>');S.push("</span>");var W=A.Node.create(S.join(""));P.replace(W);}else{var R=G(P);if(R){var S=[];S.push('<a href="#" target="_blank" rel="nofollow">');S.push('<span id="'+P.get("id")+'" class="yshortcuts">');S.push(O);S.push("</span></a>");var W=A.Node.create(S.join(""));W.setAttribute("ymrd",R);P.replace(W);}}}});}}function F(J){var Q=0,L=0,K=0,S=0,M=J.one(".message-header h3 span.btn"),R="",O=J.one(".message-header h3"),N=J.one(".header-expand"),P=J.one(".subanchor");if(M){S=M.get("offsetWidth");}if(O&&N){Q=(O.get("offsetWidth"))-29;L=N.get("offsetWidth");K=(Q-(L+S));R="max-width:"+K+"px";if(P){P.setAttribute("style",R);}}}function E(L){var J=L?A.one(L).one("body"):A.one("body");if(!J.one("#copyText")){var K=500;J.append('<input type = "text" value = "" style = "opacity: 0;  filter: alpha(opacity = 0); position:absolute; width:1px; height: 1px; left:'+K+'px;" id = "copyText">');}}function C(N,L,M){var J=L?A.one(L).one("body"):A.one("body"),K=J.one("#copyText");K._node.value=N;K.setY(J.get("scrollTop")+20);K.focus();K.select();setTimeout(function(){if(M){M.focus();}},200);}A.mix(B,{extractEmailAddress:D,extractOPILink:I,extractMRDLink:G,convertShortcuts:H,resizeSubject:F,initializeCopyText:E,copyToClipboard:C});},"1.0.0");

YUI.add("mail-ui-common-string-utils",function(D){D.namespace("mail.ui.common.StringUtils");var C=D.mail.ui.common.StringUtils,B=D.common.Utils,A=B.escapeHtml;D.mix(C,{getSystemFolderName:function(H,E,G,F){switch(H){case"Inbox":if(F){return strings.str_nav_email_from_ctcts;}return G?strings.str_tabs_inbox:strings.str_nav_inbox;case"Draft":return G?strings.str_tabs_drafts:strings.str_nav_drafts;case"Trash":return G?strings.str_tabs_trash:strings.str_nav_trash;case"Sent":return G?strings.str_tabs_sent:strings.str_nav_sent;case"%40B%40Bulk":return G?strings.str_tabs_spam:strings.str_nav_spam;case"%40C%40Chats":if(NeoConfig.hasConv){return G?strings.str_tabs_IM:strings.str_nav_IM;}else{return G?strings.str_tabs_conversations:strings.str_nav_conversations;}case"%40S%40Search":return strings.str_tabs_search;}return E?A(E):"";}});},"1.0.0",{requires:["common-utils"]});

YUI.add("mail-ui-navkeys",function(F){var B=F.mail.Tabs;F.namespace("mail.ui");var A={"input":1,"textarea":1,"select":1};var D={};F.mail.ui.navKeys={charCodes:[8,27,191,67,69,77,78,83],onKeyDown:function(Q){Q=Q||{};var T=Q.keyCode,U=Q.metaKey,G=Q.ctrlKey,N=Q.altKey,I=Q.shiftKey,R=Q.target,J=R&&R._node?R.get("tagName").toLowerCase():"",M,K=B.getTab(function(V){return V.type&&V.type==="author"&&V.composeActive&&V.get("active")==1;}),O=F.one("#custom-folders li:hover"),S=F.one("#system-folders li:hover"),L=F.UA.os=="windows",P=F.UA.os=="macintosh";if(!(J in A)&&(!K||T==8||T==191)){if(G&&I&&T=="67"){F.one("body").toggleClass("l-headercollapsed");}if(((L&&G&&I)||(P&&U&&I))&&T=="191"){F.use("common-ui-dialog-helper",function(a){var Z=a.common.ui.DialogHelper,W=[],V,X;for(X in NeoGV.ads){if(NeoGV.ads.hasOwnProperty(X)){V=[];V.push("Position:");V.push(X);V.push(" ");V.push("AdID:");V.push(NeoGV.ads[X].adId);V.push(" ");V.push("MatchID:");V.push(NeoGV.ads[X].matchId);W.push(V.join(" "));}}Z.alert({modal_classes:"lg",hd:"Ad Information",bd:"<pre>"+(W.length>0?W.join("\n"):"No items to display in this view")+"</pre>"});Q.preventDefault();});}if(!U&&!G&&!N){switch(T){case 8:Q.preventDefault();break;case 27:var H=B.getActiveTab();if(H&&H.widget.type=="omtab"){H.fire("closeChange");}Q.preventDefault();break;case 78:setTimeout(function(){F.fire("newMessage");},0);Q.preventDefault();break;case 77:F.fire("checkmail:pressed",Q.shiftKey);break;case 83:Q.preventDefault();F.use("mail-ui-searchbar",function(V){V.mail.ui.SearchBar.focus();});break;case 67:if(O){Q.currentTarget=O;F.fire("#custom-folders.li:keydown",Q);}break;case 69:if(S){Q.currentTarget=S;F.fire("#system-folders.li:keydown",Q);}if(O&&NeoConfig.emptyFolders){Q.currentTarget=O;F.fire("#custom-folders.li:keydown",Q);}break;case 191:if(I){F.use("mail-ui-shortcuts-dialog",function(V){V.mail.ui.ShortcutsDialog.show();});}break;default:M=C(T,I);if(F.Object.hasKey(D,M)){F.use("om-common-utils",function(V){V.om.common.Utils.fireEvent(D[M]);});Q.preventDefault();}break;}}else{if((T==69)&&I&&((!P&&G)||(P&&U))){Q.preventDefault();if(Q.target.getAttribute("id")=="menu-move"){F.fire("msgsview:movetonewfolder");}else{F.fire("newfolder:pressed");}}}}},onKeyPress:function(H){if(F.UA.os=="macintosh"&&F.UA.gecko&&H.charCode==63){var G=H.target&&H.target._node?H.target.get("tagName").toLowerCase():"";if(!(G in A)){F.use("mail-ui-shortcuts-dialog",function(I){I.mail.ui.ShortcutsDialog.show();});}}}};function C(H,G){return G?"shift+"+H:H;}function E(L,H){var K,G,N,J,I=F.mail.ui.navKeys;F.Array.each(H,function(O){if(O.keycode){K=O.keycode;G=O.shiftKey||false;N=O.data_action;if(K&&N){D[C(K,G)]=N;I.charCodes.push(K);}}});var M={charCodes:I.charCodes,onKeyDown:I.onKeyDown,onKeyPress:I.onKeyPress};F.mail.ui.Workspace.set("navKeys",M);I=M;}F.on("menu:config",E);},"1.0.0",{requires:["mail-controller-folders"]});

YUI.add("mail-ui-searchbar",function(E){var D=E.common.Utils,A=D.escapeHtml,C=E.Node.one,B=NeoConfig&&NeoConfig.uh2Enabled;var F=new function(){var Q=this,R=B?"input.yucs-search-field":"#searchfield",H=E.common.Utils.substitute(strings.str_cfg_url_search,null,null,null,strings),O="p",I={"ei":"UTF-8","fr":strings.str_cfg_fr_code},P=false;function L(){return(NeoConfig&&NeoConfig.searchField)||E.one(R);}function S(){var T=L();if(T){T.focus();}}function G(T){var U=T||L().get("value");if(P){E.fire("omsearch:input",{query:U});}else{E.fire("search:input",{newSearch:true,query:U});}}function K(){var T,U,V=L().get("value");if(V){T=H+"?"+O+"="+encodeURIComponent(V);for(U in I){T+="&"+U+"="+A(I[U]);}}else{T=H+"?fr="+I["fr"];}E.fire("search:web",T);window.open(T,"_blank");}function N(T){if(!T.mode||T.mode==="default"){P=false;}else{P=true;}}function M(){E.on("search:config",N);if(B){var W=L();E.Global.on("ucs:verticalSearchAction",function(Y){NeoConfig.currentQuery=Y.query;G(Y.query);});if(W){W.on("keydown",function(Y){switch(Y.keyCode){case 65:if(Y.ctrlKey||Y.metaKey){Y.stopPropagation();}break;}});}}else{var U=C("#search"),T,W,X,V;if(U){U.on("click",function(Y){var Z=E.common.Utils.getDataAction(Y);if(Z.action=="search"){G();}});T=C("#searchweb");if(T){T.on("click",function(){K();});}W=U.one(R);if(W){W.on("keydown",function(Y){switch(Y.keyCode){case 65:if(Y.ctrlKey||Y.metaKey){Y.stopPropagation();}break;case 13:(strings.str_cfg_tog_mailSearchEnabled!==undefined&&strings.str_cfg_tog_mailSearchEnabled===false)?K():G();Y.halt();break;}});}}}if(NeoConfig.bidi&&W){W.on("focus",function(){if(!W.bidiTextEntry&&E.Plugin.BidiTextEntry){W.plug(E.Plugin.BidiTextEntry);}});}if(strings.str_cfg_tog_show_search_desc){E.use("mail-ui-searchdesc",function(Z){Z.mail.ui.SearchDesc.bindSearchDesc();});}}function J(){M();}E.mix(Q,{render:J,getSearchField:L,focus:S});};E.namespace("mail.ui");E.mail.ui.SearchBar=F;},"1.0.0",{requires:["common-utils","node-pluginhost","comms-bidi-textentry"]});

YUI.add("_shared_module_message_pane",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_message_pane={base:'<div id="{{page_message_pane_view}}" class="{{page_message_pane_view1}} {{page_message_full_view}} content" {{page_message_pane_view2}}> {{page_show_comm_modes}} {{page_show_comm_modes_else}}</div>',page_message_pane_view:"msg-preview",page_message_pane_view1:"tripane ",page_message_full_view:"message ",user_pref_height:'style="top:{{msg_pane_top}};left:{{msg_list_width}}"',page_message_pane_view2:"{{user_pref_height}}",global_spearmint_view:"{{_shared_module_message_prompt}} ",global_spearmint_view_else:"{{minty_module_comm_modes}} ",page_show_comm_modes:"{{global_spearmint_view}} {{global_spearmint_view_else}} ",page_show_comm_modes_else:"{{_shared_module_message_display}} "};},"1.0.0",{requires:["_shared_module_message_prompt","minty_module_comm_modes","_shared_module_message_display"]});

YUI.add("minty_module_comm_modes",function(A){A.namespace("ui.Templates");A.ui.Templates.minty_module_comm_modes={base:'<div class="comm-modes unselectable" unselectable="on"> <h2>{{str_msg-view_click_above}}</h2> <div id="msg-preview-media-modes" class="media-modes msg-preview"> <span class="btn left right" data-action="compose"><a class="email" href="{{global_url_base}}/app/minty/compose" title="{{str_msg-view_comm_modes_email_attr}}"><i>{{str_msg-view_comm_modes_email}}</i></a></span> {{has_im}} </div></div>',has_sms:'<span class="btn left right"><a class="sms" data-action="loadContent" href="{{global_url_base}}/app/minty/conversation/?type=sms" target="dock" title="{{str_msg-view_comm_modes_sms_attr}}"><i>{{str_msg-view_comm_modes_sms}}</i></a></span> ',has_im:'{{has_sms}} <span class="btn left right" data-action="new-conv"><a class="im" data-action="loadContent" href="{{global_url_base}}/app/minty/conversation/?type=im" target="dock" title="{{str_msg-view_comm_modes_im_attr}}"><i>{{str_msg-view_comm_modes_im}}</i></a></span> '};},"1.0.0");

YUI.add("minty_module_toolbar_inbox",function(A){A.namespace("ui.Templates");A.ui.Templates.minty_module_toolbar_inbox={base:'<div class="switcher shaded"> <span class="btn left {{has_im_else}}" id="main-btn-new"><a title="{{str_toolbar_compose_attr}}" href="{{global_url_base}}/minty/page/compose" data-action="compose" draggable="false">{{str_toolbar_compose}}</a></span>{{has_im}}</div>',has_im_else:"right",has_im:'<span class="btn right menu" id="btn-new" data-action="menu"><a href="#" title="{{str_toolbar_comp_menu_toggle_attr}}" draggable="false"><b>{{str_toolbar_comp_menu_toggle}}</b></a></span>'};},"1.0.0");

YUI.add("minty_module_toolbar_inbox_default_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates.minty_module_toolbar_inbox_default_rollup={base:'<div id="pagetoolbar" class="{{msgliststate}}"> <span class="btn left right multimsg"><a href="#" title="{{str_delete_email_attr}}" data-action="delete">{{str_delete}}</a></span> <span class="btn left onemsg"><a href="#" title="{{str_reply_attr}}" data-action="reply_sender">{{str_reply}}</a></span><span class="btn right menu onemsg" data-action="menu" id="btn-reply"><a href="#" title="{{str_toolbar_reply_menu_toggle_attr}}"><b>{{str_toolbar_reply_menu_toggle}}</b></a></span> <span class="btn left onemsg"><a href="#" title="{{str_forward_attr}}" data-action="forward">{{str_forward}}</a></span><span class="btn multimsg"><a href="#" title="{{str_spam_attr}}" data-action="spam">{{str_spam}}</a></span><span class="btn menu right multimsg" id="btn-move" data-action="menu"><a href="#" class="icon" title="{{str_move_attr}}"><i>{{str_move}}</i><b></b></a></span> {{has_preview_pane}} {{has_switch_view}} <span class="btn left right menu" data-action="menu" id="btn-actions"><a href="#" class="icon" title="{{str_actions_email_attr}}"><i>{{str_actions}}</i><b></b></a></span>  {{has_pagination}}</div>',has_preview_pane:'<span class="btn left right" id="btn-togglepreview" data-action="toggle-preview-pane"><a href="#" title="{{str_msg-view_btn_togglepreview_attr}}">{{previewToggle}}<b></b></a></span> ',has_switch_view:'<span class="btn left right menu" data-action="menu" id="btn-ml-preview"><a href="#" class="icon" title="{{str_msg-view_hd_modal}}"><i>{{str_show_message_view_options}}</i><b></b></a></span> ',pagination_inner:'<span class="btn left ufirst{{first_class_disabled}}"><a href="#" role="button" aria-disabled="{{first_aria_disabled}}" class="icon first" data-action="home" title="{{str_msg_list_first}}"><i>{{str_msg_list_first}}</i></a></span><span class="btn uprev{{first_class_disabled}}"><a href="#" role="button" aria-disabled="{{first_aria_disabled}}" class="icon previous" data-action="previous-page" title="{{str_msg_list_previous}}"><i>{{str_msg_list_previous}}</i></a></span><span class="pagination-count" id="page-info" title="{{str_msg_list_page_info}}"><i>{{current}}</i></span><span class="btn unext{{last_class_disabled}}"><a href="#" role="button" aria-disabled="{{last_aria_disabled}}" class="icon next" data-action="next-page" title="{{str_msg_list_next}}"><i>{{str_msg_list_next}}</i></a></span><span class="btn right ulast{{last_class_disabled}}"><a href="#" role="button" aria-disabled="{{last_aria_disabled}}" class="icon last" data-action="end" title="{{str_msg_list_last}}"><i>{{str_msg_list_last}}</i></a></span>',has_pagination:'<div class="rht pagination shaded" role="presentation">{{pagination_inner}}</div> '};},"1.0.0");

window.strings=strings;};
var strings= {"str_error_title":"{{str_branding_mail}}","str_error_wstoken":"Failed to get valid web service token - reloading Y!Mail","str_error_ydod_error":"Unable to process request at this time \u2014 error 999","str_error_ydod_token_link":"While this error is usually temporary, if it continues, please <a href={linkURL} target=_blank>contact us.<\/a>","str_error_ydod_title":"Your request cannot be processed","str_error_reload_user_change":"You are no longer signed in to {{str_branding}} as '{{username}}'.&#010; The application will now close.","str_error_relogin":"Sorry, your session has expired. To protect your account, you need to confirm your password periodically.","str_error_signin":"Sign In Again","str_error_Connect":"{{str_branding_mail}} was unable to connect. Please reload the page or verify that your network connection is active.","str_branding_mail":"Yahoo! Mail","str_branding":"Yahoo!","str_error_AccountVerificationRequired":"Account verification required","str_error_BadFrom":"Missing or malformed from address","str_error_BadMime":"Mime Error","str_error_BadRecipient":"Missing or malformed recipient","str_error_BadRequest":"Bad request.","str_error_CannotSendThisMessage":"Cannot send this message","str_error_ComposeAttachFailed":"Attaching a file Failed","str_error_ComposeError":"Compose Failed","str_error_ComposeFailed":"Sorry, but we had a problem composing your message.","str_error_ComposeNavigateAway":"You were in the middle of composing a message. You will lose your changes if you press OK.","str_error_DailyLimitExceeded":"You have reached your message sending limit for the day.","str_error_DownloadError":"Error while downloading the files.","str_error_EmptyFolderFailed":"Failed to empty folder","str_error_FarmNameNotFound":"Sorry, but there seems to be a problem with your account. We suggest you close this window and re-launch {{str_branding_mail}}.","str_error_FolderAlreadyExists":"A folder with this name already exists.","str_error_FolderCreateFailed":"Failed to create folder","str_error_FolderFetchFailed":"Failed fetching \"Sent\" folder","str_error_FolderIdDoesntExist":"It looks like this folder isn't around anymore. Perhaps you already deleted or renamed it in another browser window?","str_error_FolderIdIsSystemFolder":"System folders cannot be renamed or removed","str_error_FolderListFetchFailed":"Error fetching folder list","str_error_FolderNameIllegalCharacter":"Illegal character in foldername, only letters, numbers, dashes and underscores allowed.","str_error_FolderRemoveFailed":"Error removing folder","str_error_GetDisplayMessageFailed":"Sorry, but we were not able to get your message","str_error_GetMessageFailed":"Error fetching emails to flag","str_error_GetMessageInvalidId":"Sorry, but it looks like this message is not really in your folder. Perhaps you already deleted or moved this message? Please refresh your Inbox and try again.","str_error_HourlyLimitExceeded":"You have reached your message sending limit for the hour.","str_error_HumanVerificationFailed":"Human verification failed","str_error_HumanVerificationRequired":"Human verification required","str_error_LaunchTAE":"An error occurred when trying to connect to {{str_branding}}. This error could be temporary.","str_error_ListMessagesFailed":"Looks like we had a problem getting some new messages. This may be a temporary problem. Please reconnect and try again.","str_error_MailErrorTitle":"Temporary Error","str_error_MailUnexpectedResponse":"An unexpected problem has occurred. &#010;&#010;Performing your action again in a few moments will probably solve the problem. &#010;If it persists, we suggest you close this window and re-launch {{str_branding_mail}}.","str_error_MailboxBusy":"Sorry, there was a problem accessing your Mailbox. Please try again in 10 minutes.","str_error_MailboxOpenFailed":"Failed to open mailbox","str_error_MaxBCCAddressesExceeded":"Too many recipients for Bcc.","str_error_MaxCCAddressesExceeded":"Too many recipients for Cc.","str_error_MaxToAddressesExceeded":"Too many recipients for To.","str_error_MaxTotalAddressesExceeded":"Too many recipients.","str_error_MessageDeleteFailed":"Failed to delete message","str_error_MessageFetchFailed":"Failed to fetch message","str_error_MessageIdsNotFound":"Cannot flag emails that don't exist in the specified folder","str_error_MessageNotFound":"Failed to fetch message","str_error_MessageSaveFailed":"Failed to save message","str_error_MessageSelectionNotFound":"Cannot flag emails based on a selection that doesn't match any emails in the folder","str_error_MessageToLarge":"The message you tried to send was too large","str_error_MessageTooLargeForSomeRecipients":"The message you tried to send was too large for some recipients","str_error_MetaDataMissingPath":"Sorry, but there seems to be a problem with your account","str_error_MissingApplicationID":"Missing or bad application ID","str_error_MissingCredentials":"Missing credentials","str_error_MissingRecipients":"No recipient set.","str_error_MoveMessagesInvalidId":"Sorry, but we were unable to access your message. Perhaps you already moved or deleted it somewhere else? Please refresh your folder.","str_error_NicknameExpansionFailed":"Please check all email addresses. Looks like one of them may not be formatted correctly.","str_error_NoResponse":"The response was empty","str_error_NoSenderSpecified":"Cannot save a message with no sender specified","str_error_Offline":"Your browser may be in Offline mode. Please make sure the Work Offline option under the browser's File menu is not checked and try again. If you continue to see this error, you're probably no longer connected to the Internet. Please reconnect and try again.","str_error_OfflineTitle":"Your browser may be in Offline mode","str_error_Print":"Print Failed","str_error_ResetSpamFilterFailed":"The operation to reset the spam filter failed","str_error_SaveMessageFailed":"Error saving message to the \"Sent\" folder","str_error_SendMessageFailed":"Error sending message","str_error_SendMessageFailedForSomeRecipients":"There was an error while sending the message to some recipients","str_error_ServerError":"Server Error.","str_error_ServiceUnavailable":"Service Temporarily Unavailable","str_error_SetUserDataFailed":"Error saving user data","str_error_SpamReportingFailed":"Error reporting spam","str_error_SpamTrainingFailed":"Error training spam filter","str_error_Timeout":"Operation timed out. Please try again. If the problem persists, please check your network connection.","str_error_TooManyCallsBatched":"Cannot batch more than 5 calls together in one single request","str_error_TooManyFolders":"Sorry, you can only create up to 497 personal folders","str_error_TooManyMessagesRequested":"Cannot request more message bodies than are allowed to be fetched in a single call","str_error_UnexpectedTitle":"A Connection Failure Has Occurred","str_error_UserDataFetchFailed":"Sorry, but we were not able to fetch your user information","str_error_UserOverQuota":"Operation failed. Account over quota.","str_error_UserPreferenceFetchFailed":"Error fetching user preferences","str_error_UserSuspended":"Account is suspended from sending.","str_error_UserTempSuspended":"To protect you, your account has been suspended for up to 48 hours.","str_error_ab_invalid_field_data":"Please enter valid contact details, current content is too long or invalid","str_error_ab_size_exceeded":"Cannot add contact. There are too many contacts in this addressbook.","str_error_btn_reconnect":"Reconnect","str_error_btn_relaunch":"Relaunch {{str_branding_messenger}}","str_branding_messenger":"Yahoo! Messenger","str_error_catastrophic_error":"Unfortunately, you cannot connect to {{str_branding_messenger}} at this time.","str_error_disconnected_error":"You have been disconnected from {{str_cfg_branding_messenger}}.","str_error_download_message_viewing_error":"Sorry, there was a problem opening the message.","str_error_download_not_scannable":"The attachment you are trying to download can not be virus scanned.","str_error_email_address":"Please enter a valid email address format: name@domain.com.","str_error_error_searching_messages":"There was an error while searching for emails.","str_error_extFetch":"External account retrieval failed. Please go to Options and verify your information for this account.","str_error_extFetch1":"Error receiving messages from {{error_extFetch_email1}}. Please go to Options, Account and verify your information for this account.","str_error_extFetch2":"Error receiving messages from {{error_extFetch_email2}} and {{error_extFetch_email1}}. Please go to Options, Account and verify your information for this account.","str_error_extFetch3":"Error receiving messages from {{error_extFetch_email3}}, {{error_extFetch_email2}} and {{error_extFetch_email1}}. Please go to Options, Account and verify your information for this account.","str_error_extFetch_badFolder":"We're sorry, but we're having trouble opening up your external account {{userName}}:{{server}} to retrieve your messages.  Check your settings in Mail Options and try again.","str_error_extFetch_badHost":"We're sorry, but it looks like there might be something wrong with the settings of the external account {{userName}}.  Please check your {{server}} in Mail Options and try again.","str_error_extFetch_badLogin":"It looks like there might be something wrong with the settings of this external account {{userName}}.  Please check your user id and password for this account in Mail Options and try again.","str_error_extFetch_badMailbox":"We're sorry, but we're having trouble opening up your external account  {{userName}}:{{server}} to retrieve your messages.  Check your settings in Mail Options and try again.","str_error_extFetch_badMessage":"We're sorry, but we're having trouble retrieving messages from your external account  {{userName}}:{{server}}.  Check your settings in Mail Options and try again.","str_error_extFetch_badPassword":"It looks like there might be something wrong with the password settings of the external account {{userName}}.  Please check your password for this account in Mail Options and try again.","str_error_extFetch_badPort":"It seems there was an error communicating with the external POP server {{server}}.  Please check your settings for {{userName}} in Mail Options and try again.","str_error_extFetch_badUserId":"It looks like there might be something wrong with the settings of this external account.  Please check your user id : {{userName}} for the account {{server}} in Mail Options and try again.","str_error_extFetch_busy":"We're sorry, but it looks like your external account {{userName}} is busy.  Please try again in a while.","str_error_extFetch_connectionLost":"It seems there was an error communicating with the external POP server.  Please check your settings in Mail Options and try again.","str_error_extFetch_connectionTimeout":"Timed out","str_error_extFetch_largeMsg":"It looks like there is really big message in this external account: {{userName}}.  Please delete the message locally and try again.","str_error_extFetch_lastUnsupported":"It seems there was an error communicating with the external POP server {{server}}.  Please check your settings in Mail Options and try again.","str_error_extFetch_messageBlocked":"It looks like there is message from a blocked sender in this external account: {{userName}}.  Please delete the message locally and try again.","str_error_extFetch_quota":"It looks like you have exceeded your mailbox quota for this external account: {{userName}}.  You should delete some messages by logging into that account.","str_error_extFetch_unknownError":"It seems there was an error communicating with the external POP server {{server}}.  Please check your settings for {{userName}} in Mail Options and try again.","str_error_first_message":"You have reached the first message in {{folder_name}}.","str_error_flash_unavailable_body":"Your browser is blocking Flash. You must have Flash 9.0 or higher installed and unblocked to run a mail application. You can download and install the latest Flash Player <a href=\"http:\/\/get.adobe.com\/flashplayer\/\" target=\"_blank target=\"_blank\"\">here<\/a>.","str_error_folder_name_is_reserved":"That folder name is reserved, please choose a different name.","str_error_generic":"Something unexpected just happened. Please contact {{str_branding}} Customer Care if the problem persists. Here's some technical info that might help us know more about what is going on:","str_error_generic_cc":"Something unexpected just happened. Please contact {{str_branding}} Customer Care if the problem persists.","str_error_im":"Please enter a valid IM id.","str_error_last_message":"You have reached the last message in {{folder_name}}.","str_error_loading_recent_messages":"Sorry, problem loading conversation history.","str_error_logged_out":"You are no longer signed in to {{str_branding_messenger}}.","str_error_logged_out_another":"You have been signed out because you signed into a different computer or device.","str_error_messenger_load_failure":"Sorry, but {{str_branding_messenger}} is currently unavailable. Please try again later.","str_error_messenger_loading":"{{str_branding_messenger}} is currently loading.","str_error_msg_diff_folder":"The selected message is now in the {{foldername}} folder.","str_error_msg_diff_folder_link":"Click here to switch to the {{foldername}} folder.","str_error_msg_diff_folder_switch":"This message has been moved to <a href=\"#\" class=\"switchFolder\" sourceFolder=\"{{newFid}}\">{{foldername}}<\/a>","str_error_msg_load":"We\u2019re sorry, but there appears to be a problem loading the message \"{{subject}}\".","str_error_msg_load_click_me":"Click here to try again.","str_error_msg_load_slow":"We\u2019re sorry, but your message is taking longer than normal to display.","str_error_no_body_returned":"Looks like we were unable to load your message.","str_error_phone_number":"Please enter a valid phone number format: ###-###-####.","str_error_recent_messages_empty":"You have no recent conversations with {{contact}}.","str_error_reconnected_message":"You have successfully signed in.","str_error_redirect_auth":"There may be an authentication required to continue. Please refresh your browser and come back here to try again.","str_error_redirect_authtitle":"Authentication redirect. Please refresh","str_error_reload_account_migrated":"Due to routine server maintenance, {{str_branding_mail}} must now reload. We apologize for any inconvenience this may cause.","str_error_replace":"Please enter a valid error string here.","str_error_uploadNumFiles":"You have reached the 50 attachment limit for this message.","str_error_yid_collision_error":"This {{str_branding_messenger}} ID already belongs to someone else in your Contacts. Please try again.","str_error_yid_no_info_error":"Please enter some information for this contact.","str_ok":"OK","str_btn_close":"Close","str_btn_cancel":"Cancel","str_tabs_close_attr":"Close tab [Esc]","str_tabs_close":"Close tab","str_msg-view_btn_hidepreview":"Hide Preview","str_msg-view_btn_showpreview":"Show Preview","str_nav_left_checkmail_account_attr":"Check {{mailbox_pretty_name}} for new email  [M]","str_nav_left_checking_mail":"Checking...","str_nav_inbox":"Inbox","str_tabs_inbox":"INBOX","str_tabs_drafts":"DRAFTS","str_tabs_sent":"SENT","str_tabs_spam":"SPAM","str_tabs_conversations":"CONVERSATIONS","str_tabs_trash":"TRASH","str_nav_inbox_unread_attr":"{{inbox_unread_cnt}} unread emails","str_nav_draft_attr":"1 draft","str_nav_drafts_attr":"{{inbox_unread_cnt}} drafts","str_nav_conv_attr":"1 conversation","str_nav_convs_attr":"{{conv_cnt}} conversations","str_page_title_unread":"({{unread_cnt}} unread) - {{title}} - {{str_branding_mail}}","str_page_title":"{{title}} - {{str_branding_mail}}","str_email_cnt_one":"email","str_email_cnt_multi":"emails","str_nav_folder_email_cnt":"{{total_cnt}} {{email_str}}","str_nav_email_from_ctcts_attr":"Email only from Contacts; {{email_ctcts_cnt}} emails","str_nav_email_from_ctcts":"Email from Contacts","str_nav_conversations":"Conversations","str_nav_drafts":"Drafts","str_folder_reserved_inbox":"Inbox","str_folder_reserved_conversations":"Conversations","str_folder_reserved_drafts":"Drafts","str_folder_reserved_sent":"Sent","str_folder_reserved_spam":"Spam","str_folder_reserved_trash":"Trash","str_folder_reserved_search":"Search","str_folder_reserved_inbox_lower":"inbox","str_folder_reserved_conversations_lower":"conversations","str_folder_reserved_drafts_lower":"drafts","str_folder_reserved_sent_lower":"sent","str_folder_reserved_spam_lower":"spam","str_folder_reserved_trash_lower":"trash","str_folder_reserved_search_lower":"search","str_folder_reserved_inbox_upper":"INBOX","str_folder_reserved_conversations_upper":"CONVERSATIONS","str_folder_reserved_drafts_upper":"DRAFTS","str_folder_reserved_sent_upper":"SENT","str_folder_reserved_spam_upper":"SPAM","str_folder_reserved_trash_upper":"TRASH","str_folder_reserved_search_upper":"SEARCH","str_ctrl":"Ctrl","str_enter":"Enter","str_ctrl_shift":"Ctrl+Shift","str_ctrl_alt":"Ctrl+Alt","str_right_click":"right-click","str_tog_loadRTLCss":false,"str_modal_pagination_change":"In order to change this setting, {{str_branding_mail}} will refresh when you click Save. Any mail messages you're currently writing will be saved as drafts.","str_conv_btn_view_conv_options":"Options","str_modal_option_attention":"","str_tabs_options":"OPTIONS","str_tabs_search":"SEARCH","str_tabs_compose":"New Email","str_msg-view_tab_no_subject":"Message","str_modal_too_many_tabs_title":"Please Close Some Tabs","str_modal_too_many_tabs_note":"Sorry, you've reached the maximum number of open tabs. Please close a few tabs first before opening additional tabs.","str_modal_too_many_tabs_close_auto":"Close All Message Tabs","str_modal_too_many_tabs_close_manual":"I'll Close Some Myself","str_modal_tabdeactivate_title":"Confirm Application Switch","str_modal_tabdeactivate_body":"Switching away from this application will cause you to lose your data and\/or actions.  Proceed?","str_spam_attr":"Move selected emails to Spam folder","str_not_spam_attr":"Remove spam classification and move back to Inbox","str_spam":"Spam","str_not_spam":"Not Spam","str_cfg_sc_keycode_reply_to_all":"65","str_cfg_sc_keycode_message_forward":"70","str_cfg_sc_keycode_movemenu_display":"68","str_cfg_sc_keycode_mark_as_read":"75","str_cfg_sc_keycode_flag_selected_messages":"76","str_cfg_sc_keycode_reply_to_sender":"82","str_cfg_sc_keycode_print":"80","str_cfg_sc_keycode_toggle_preview_pane":"86","str_cfg_sc_keycode_close_tab":"220","str_tog_use_num_accel":true,"str_msg_list_info-replied":"Replied","str_msg_list_info-forwarded":"Forwarded","str_msg_list_info-unread":"Unread","str_msg_list_info-certified":"Certified","str_msg_list_info_verified_attr":"This is a verified message from {{str_branding}}","str_msg_list_checkbox_label":"Message {{messagenumber}}","str_tog_dateformat_messagelist_timeonly_l10n":"{h}:{mm} {A}","str_msg-view_no_subject":"[No Subject]","str_msg_list_loading_conversation":"Loading conversations...","str_msg_list_loading":"Loading email...","str_msg_list_message_preview_attr":"Double-click to open this message in a new tab","str_msg_list_message_full_attr":"Click to open this message in a new tab","str_msg_list_sorting":"Sorting email...","str_msg_list_attachments":"Attachments","str_msg_list_attachments_attr":"This email has {{msg_num_attachments}} attachments","str_msg_list_attachments_size":"Size","str_msg_list_checkbox_attr":"Select this email","str_msg_list_column_attachment_attr":"Click to sort by emails with attachments","str_msg_list_column_date_attr":"Click to sort by date","str_msg_list_column_flag_attr":"Click to sort by flagged messages","str_msg_list_column_fldr_attr":"Click to sort by Folder name","str_msg_list_column_from_attr":"Click to sort by sender","str_msg_list_column_info_attr":"Click to sort by unread messages","str_msg_list_column_mailbox_attr":"Click to sort by mailbox; click again to reverse sort","str_msg_list_column_participant_attr":"Click to sort by participant","str_msg_list_column_size_attr":"Order emails by attachment size (largest-smallest); click again to reverse order","str_msg_list_column_subject_attr":"Click to sort by subject","str_msg_list_column_to_attr":"Order emails by recipient (A-Z); click again to reverse order","str_msg_list_date":"DATE","str_msg_list_datetime":"DATE \/ TIME","str_msg_list_emptyfolder":"There are no messages in your {{foldername}} folder","str_msg_list_first":"First Page","str_msg_list_flag":"Flag this email","str_msg_list_flag_attr":"Click to mark as important","str_msg_list_flagged":"This email is flagged","str_msg_list_flagged_attr":"Click to unflag this email","str_msg_list_folder_name":"FOLDER","str_msg_list_from":"FROM","str_msg_list_has_attachments":"This message has attachments","str_msg_list_header":"Email Messages","str_msg_list_last":"Last Page","str_msg_list_list":"CALENDAR \/ LIST","str_msg_list_load_next_messages":"Load next 500 messages","str_msg_list_load_next_messages_attr":"Control how your messages are displayed in the General section of Mail Options","str_msg_list_loading_error":"There appears to be a problem loading the message list.","str_msg_list_location":"LOCATION","str_msg_list_mailboxes":"Mailboxes","str_msg_list_next":"Next Page","str_msg_list_not_flagged":"This email is not flagged","str_msg_list_page_info":"Page {{current}} of {{total}}","str_msg_list_participant":"PARTICIPANT","str_msg_list_previous":"Previous Page","str_msg_list_retry":"Click to retry","str_msg_list_select_all_msgs_attr":"Select or deselect all messages [{{str_ctrl}}+A]","str_msg_list_sort_by":"SORT BY {{sorted_by}}","str_msg_list_sort_by_attr":"Click to select sorting method","str_msg_list_subject":"SUBJECT","str_msg_list_time":"TIME","str_msg_list_title":"TITLE","str_msg_list_to":"TO","str_msg_list_type":"TYPE","str_nav_trash":"Trash","str_nav_sent":"Sent","str_nav_spam":"Spam","str_tabs_IM":"INSTANT MESSAGES","str_nav_IM":"Instant Messages","str_retry":"Retry","str_msg-view_click_above":"Choose your favorite way to communicate.","str_msg-view_comm_modes_email_attr":"Compose an email","str_msg-view_comm_modes_email":"Email","str_msg-view_comm_modes_sms_attr":"Compose an SMS","str_msg-view_comm_modes_sms":"SMS","str_msg-view_comm_modes_im_attr":"Compose an instant message","str_msg-view_comm_modes_im":"Instant Message","str_msg-view_multiple_selected_msgs":"{{num_selected_msgs}} emails selected.","str_msg-view_multiple_selected_convs":"{{num_selected_msgs}} conversations selected.","str_msg-view_single_selected_msg":"1 email selected.","str_msg-view_single_selected_msg_info":"Click above to view an email. Or compose a new message...","str_msg-view_single_selected_conv":"1 conversation selected.","str_msg-view_single_selected_conv_info":"Click above to view a conversation. Or compose a new message...","str_msg-view_message_body":"Message body","str_msg_view_heading_blocked_images":"This message contains blocked images.","str_msg_view_btn_show_images_attr":"Display blocked images","str_msg_view_btn_show_images":"Show Images","str_msg_view_btn_options_attr":"Modify Spam Options","str_msg_view_btn_options":"Options","str_comp_reply_cc":"Cc:","str_comp_reply_from":"From:","str_comp_reply_to":"To:","str_comp_reply_date":"Sent:","str_comp_reply_subject":"Subject:","str_comp_loading_error_perm":"Sorry we're having problems loading this message.  Please <a href=\"{{str_cfg_url_yahoo_mail_help_tae45}}\" target=\"_blank\">view our help site<\/a> to learn how to contact us to report this error.<p>Error code: {{msg_fail_tae_code}}<\/p>","str_comp_multi_retry":"Sorry, we're still having problems loading this message. This is likely a temporary issue due to a connection problem or an email with large attachments.  Check your connection and try again, or try back again shortly.<p>If you're still seeing this error, visit <a href=\"{{str_cfg_url_yahoo_mail_help}}\" target=\"_blank\">Help<\/a> for troubleshooting instructions or to contact us.<\/p><p>Error code: {{msg_fail_tae_code}}<\/p>","str_comp_loading_error":"There appears to be a problem loading the email \"{{msg_subject}}\".","str_comp_loading_retry_attr":"Retry loading this email.","str_comp_loading_msg":"Loading email, please wait...","str_comp_loading_conv":"Loading conversation, please wait...","str_comp_slow_loading":"Loading is taking longer than usual.","str_msg_view_msg_truncated":"This message has been truncated","str_msg_view_btn_view_full":"Show Full Message","str_photos":"Photos","str_msg_view_btn_download_all":"Download All","str_msg_view_photo_attachment_attr":"View {{filename}}","str_msg_view_heading_attachments":"Attachments","str_msg_view_attachment_attr":"Virus scan and download {{filename}}","str_msg_title_search":"Click to search for messages with same subject","str_show_details_tooltip":"Show sender, recipients, and date","str_hide_details_tooltip":"Hide sender, recipients, and date","str_show_details":"Show Details","str_hide_details":"Hide Details","str_msg_hdr_label_cc":"CC:","str_small_header_you":"You","str_msg_hdr_label_bcc":"BCC:","str_msg_view_msg_flag":"Message flagged","str_msg-view_message_header":"Message header","str_msg_hdr_has_attachments":"This email has attachments","str_msg_hdr_label_from":"FROM:","str_btn_from_lozenge_attr":"{{msg_from_address}}","str_btn_add_from_contact_attr":"Add {{msg_from_address}} to your Contacts [{{str_menu_accel_shift_a}}]","str_menu_accel_shift_a":"Shift+A","str_msg_hdr_label_to":"TO:","str_btn_add_contact_attr":"Add {{msg_to_address}} to your Contacts","str_btn_lozenge_attr":"{{msg_to_address}}","str_msg_hdr_btn_more_attr":"See the additional recipients","str_msg_hdr_btn_more_to":"{{has_more_to}} More...","str_msg_hdr_btn_more_cc":"{{has_more_cc}} More...","str_msg_hdr_btn_more_bcc":"{{has_more_bcc}} More...","str_msg_hdr_label_participants":"Participants:","str_msg_hdr_btn_more_participants_attr":"See the additional participants","str_msg_hdr_btn_more_participants":"{{has_more_participants}} More...","str_msg_hdr_label_with":"With:","str_to":"to","str_reply":"Reply","str_reply_all":"Reply All","str_forward":"Forward","str_thread_trash":"Move this message to Trash","str_trash":"Trash","str_actions":"Actions","str_thread_hdr_more_recipients_attr":"See additional recipients","str_thread_hdr_more_recipients":"{{num_more_recipients}} more","str_draft":"DRAFT","str_om_download":"Download","str_download":"Download","str_comp_sending":"Sending...","str_rte_attachments_error_mult":"{{num_error_files}} files cannot be sent","str_rte_attachments_error_single":"1 file cannot be sent","str_to_col":"TO:","str_comp_btn_to_add_attr":"Add recipients","str_comp_btn_to_add":"Add TO Recipients","str_cc":"CC","str_bcc":"BCC","str_cc_col":"CC:","str_comp_btn_cc_add":"Add CC Recipients","str_bcc_col":"BCC:","str_comp_btn_bcc_add":"Add BCC Recipients","str_comp_full_comp":"Reply in a new tab","str_comp_attach_attr":"Choose a file to attach to this message","str_comp_attach":"Attach Files","str_cont_imp_compose_send_attr":"Send Message","str_btn_send":"Send","str_comp_message_not_sent":"Message Not Sent","str_btn_retry_file_attr":"Retry file upload","str_btn_remove_file_attr":"Remove this attachment","str_delete_email_attr":"Delete selected emails  [Delete]","str_delete":"Delete","str_reply_attr":"Reply to sender  [R]","str_toolbar_reply_menu_toggle_attr":"Choose from different ways to reply","str_toolbar_reply_menu_toggle":"Reply","str_forward_attr":"Forward this email \u00a0[F]","str_move_attr":"Move selected emails to a folder  [D]","str_move":"Move","str_actions_email_attr":"More actions for selected emails","str_msg-view_btn_togglepreview_attr":"Switch View","str_msg-view_hd_modal":"Switch View","str_show_message_view_options":"Show Message View Options","str_thread_btn_attr":"Group messages into conversations","str_thread_btn":"Threading","str_folder_empty":"There are no emails in your {{folder_name}} folder.","str_configure_archiving":"Make sure you have configured your archiving settings within {{str_branding_messenger}} Options.","str_conv_folder_empty":"There are no messages in your Conversations folder.","str_delete_conv_attr":"Delete selected conversations  [Delete]","str_menu_reply_im":"Reply via Instant Message","str_menu_accel_shift_i":"Shift+I","str_actions_conv_attr":"More actions for selected conversations","str_previous_conv_attr":"View next conversation up [Ctrl+,]","str_previous_conv":"Previous","str_next_conv_attr":"View next conversation down [Ctrl+.]","str_next_conv":"Next","str_print_attr":"Print this message [P]","str_print":"Print","str_next_attr":"View next email up [Ctrl+,]","str_next":"Next","str_previous_attr":"View next email down [Ctrl+.]","str_previous":"Previous","str_action_edit_draft_attr":"Open selected email in a tab to edit  [{{str_enter}}]","str_action_edit_draft":"Edit Draft","str_me":"Me","str_tog_showFirstAsFriendlyName":true,"str_menu_page_jump":"Jump to:","str_menu_page_placeholder":"Page","str_menu_page_first":"First Page","str_menu_page_last":"Last Page","str_toolbar_prev":"Go to the previous page","str_toolbar_page_menu":"Page","str_toolbar_next":"Go to the next page","str_comp_reply_fwdHeader":"----- Forwarded Message -----","str_comp_reply_origHeader":"----- Original Message -----","str_comp_reply_short":"On {{date_data}}, {{from_data}} wrote:","str_uh_searchmail":"Search Mail","str_tog_sendFeedbackEnabled":true,"str_modal_mail_preveiw":"Please Give Us Your Feedback","str_modal_mail_preveiw_reason":"Thank you for trying the latest version of {{str_branding_mail}}. Your feedback will help us make it better for you. Please tell us why you're switching. Check all that apply:","str_modal_mail_preveiw_reason_reliability":"Reliability or stability concerns","str_modal_mail_preveiw_reason_features":"Missing features","str_modal_mail_preveiw_reason_other":"Other","str_modal_mail_preveiw_reason_speed":"Speed or load time","str_modal_mail_preveiw_reason_readiness":"Not ready to switch","str_modal_mail_preveiw_feedback":"Additional feedback:","str_modal_mail_preveiw_feedback_contact":"It's OK to contact me about my feedback","str_btn_continue_attr":"Continue","str_btn_continue":"Continue","str_menu_new_features":"New Features","str_menu_help":"Help","str_menu_tos":"Terms of Service","str_menu_privacy_policy":"Privacy Policy","str_modal_keys_gen_shortcuts":"Display keyboard shortcuts","str_modal_keys_header":"Keyboard Shortcuts","str_menu_mail_blog":"Mail Blog","str_menu_mail_plus":"Mail Plus","str_menu_leave_mail_prev":"Return to Original Mail","str_menu_switch_full_mail":"Show Full Features","str_uh_send_feedback_attr":"Send feedback to {{str_branding_mail}}","str_uh_send_feedback":"Send Feedback","str_menu_about_our_ads":"About our Ads","str_menu_copyright":"Copyright Notice","str_menu_themes":"Themes","str_menu_options":"Mail Options","str_menu_profile_attr":"Profile","str_menu_profile":"Profile","str_menu_account":"Account","str_menu_signed_in_as":"You are signed in as:","str_menu_homepage":"{{str_branding}} Homepage","str_branding_my":"My Yahoo!","str_menu_sports":"Sports","str_menu_finance":"Finance","str_menu_news":"News","str_mts_customer_care":"Customer Self Care","str_mts_web_chat":"Web Chat","str_mts_tv":"MTS TV","str_mts_games":"Games on Demand","str_mts_yahoo":"MTS Yahoo! Portal","str_menu_attcom":"att.com","str_menu_attnet":"att.net","str_menu_attmyaccount":"My Account","str_menu_attsupport":"Support","str_menu_attbrowseatoz":"Browse A - Z","str_menu_attspanish":"En Espa\u00f1ol","str_nav_applications":"Applications","str_nav_applications_btn_edit_attr":"Add or remove free apps to enhance how you share, organize, and communicate","str_nav_applications_btn_edit":"Edit application options","str_om_app_list_retry":"Retry loading apps","str_om_loading":"Loading...","str_om_error_app_not_found_title":"Application Not Found","str_om_error_app_not_found_body":"This application cannot be found. Do you wish to uninstall it?","str_om_error_app_nonexistant_title":"Non-existant Application","str_om_error_app_nonexistant_body":"Sorry, but this application no longer exists.<br\/>To remove all permissions for this application, please modify your <a class=textLink href=https:\/\/api.login.yahoo.com\/WSLogin\/V1\/unlink target=_blank>Account Sign-in Settings<\/a>.","str_om_error_app_unavailable_title":"Application Unavailable","str_om_error_app_unavailable_body":"Sorry, but the application \"{{app_name}}\" is currently unavailable. Please try again later.","str_om_tou_title":"Application Information","str_om_upgrade_choice":"Sorry, but the feature you're trying to use isn't available in this version of the application. You may continue working and upgrade later. If you upgrade now, we have to close the application.","str_om_error_flash_unavailable_title":"Flash Unavailable","str_om_error_flash_unavailable_body":"Your browser is blocking Flash. You must have Flash 9.0 or higher installed and unblocked to run a mail application. You can download and install the latest Flash Player <a href=\"http:\/\/get.adobe.com\/flashplayer\/\" target=\"_blank target=\"_blank\"\">here<\/a>.","str_om_switch_to_rich_text_title":"Switch to Rich Text?","str_om_switch_to_rich_text_body":"This application needs your message to be composed in rich text mode.  Switch to this mode?","str_menu_remove":"Remove Application","str_comp_nosubject":"No Subject","str_nav_left_untitled":"Untitled","str_toolbar_compose_attr":"Start a new email  [N]","str_toolbar_compose":"Compose Message","str_toolbar_comp_menu_toggle_attr":"Start a new IM or SMS","str_toolbar_comp_menu_toggle":"Compose New...","str_tog_filename_center_truncate":false,"str_small_header_to":"TO:","str_small_header_more":"More","str_small_header_recipient":"recipient","str_small_header_recipients":"recipients","str_tog_dateformat_header_l10n":"{EE}, {MMMM} {d}, {yyyy} {h}:{mm} {A}","str_conv_im":"IM","str_tog_dateformat_conversation":"{MMM} {dd} {h}:{mm} {A}","str_conv_call_duration":"Call duration:","str_conv_time_hours":"hours","str_conv_time_minutes":"minutes","str_conv_time_seconds":"seconds","str_conv_accepted_add_req":"<strong>{{conversation_user}}<\/strong> has been added to your Messenger list.","str_conv_add_requests":"Add Requests","str_conv_alias_send_as":"Send As:","str_conv_autocomplete_default":"TO","str_conv_blocked_user":"<strong>{{conversation_user}}<\/strong> has been blocked. You will no longer receive messages from this user.","str_conv_btn_accept":"Accept","str_conv_btn_accept_and_add":"Accept and Add To List","str_conv_btn_accept_and_add_attr":"Accept and Add To List","str_conv_btn_accept_attr":"Allow {{conversation_yid}} to add me and see when I\u2019m online","str_conv_btn_add_contact":"Add Contact","str_conv_btn_add_contact_attr":"Add Contact","str_conv_btn_add_number":"Add Number","str_conv_btn_add_number_attr":"Add Number","str_conv_btn_add_to_contacts":"Add to Contacts","str_conv_btn_add_to_contacts_attr":"Add {{conversation_yid}} to your Contacts","str_conv_btn_block":"Block","str_conv_btn_block_all":"Block All","str_conv_btn_block_user":"Block User","str_conv_btn_block_user_attr":"Add to Blocked List","str_conv_btn_call_another_number":"Call Another Number","str_conv_btn_call_another_number_attr":"Call Another Number","str_conv_btn_call_back":"Call Back","str_conv_btn_call_back_attr":"Call Back","str_conv_btn_close_all":"Close All","str_conv_btn_close_current":"Close Current","str_conv_btn_convert_conv":"Convert Window","str_conv_btn_convert_conv_attr":"Convert Window","str_conv_btn_decline":"Decline","str_conv_btn_decline_add_number":"Cancel","str_conv_btn_decline_attr":"Don't allow {{conversation_yid}} to add me or see when I'm online","str_conv_btn_hide_media_modes":"Hide Conversation Types","str_conv_btn_hide_media_modes_attr":"Hide conversation types","str_conv_btn_hide_recent_conv":"Hide Recent Conversations","str_conv_btn_hide_recent_conv_attr":"Hide recent conversations with {{conversation_user}}","str_conv_btn_hide_tray":"Hide","str_conv_btn_hide_tray_attr":"Hide conversation types","str_conv_btn_open_media_modes_attr":"Switch to another type of conversation","str_conv_btn_open_setup":"Open Setup","str_conv_btn_open_setup_attr":"Open Setup","str_conv_btn_report_all_spam":"Report All as Spam","str_conv_btn_report_all_spam_attr":"Report All as Spam","str_conv_btn_report_spam":"Report as Spam","str_conv_btn_report_spam_attr":"Report this instant message as spam, and add {{conversation_yid}} to your Blocked List","str_conv_btn_show_conv":"Show Conversations","str_conv_btn_show_conv_attr":"Show Conversations","str_conv_btn_show_recent_conv":"Show Recent Conversations","str_conv_btn_show_recent_conv_attr":"Show recent conversations with {{conversation_user}}","str_conv_btn_show_tray":"Show","str_conv_btn_show_tray_attr":"Show conversation types","str_conv_btn_start_call":"Call","str_conv_btn_start_call_attr":"Call","str_conv_btn_start_conversation":"Start Conversation","str_conv_btn_start_conversation_attr":"Start Conversation","str_conv_btn_try_again":"Try Again","str_conv_btn_unblock":"Unblock","str_conv_btn_unblock_all":"Unblock All","str_conv_btn_unblock_user":"Unblock User","str_conv_btn_unblock_user_attr":"Remove {{conversation_yid}} from your Blocked List","str_conv_btn_view_conv_options_attr":"Options","str_conv_cannot_start_video":"Video call cannot be started.","str_conv_close":"Close all conversations and window","str_conv_close_all":"Close All Conversations?","str_conv_close_always":"Always close all conversations","str_conv_close_confirm":"You have unread messages, are you sure you want to close the window?","str_conv_connection_error":"There was a connection error.","str_conv_conv_being_archived":"Conversations are currently being archived.","str_conv_conv_header_user_attr":"{{conversation_user}} ({{conversation_yid}}) \u2022 {{availability}}","str_conv_conv_header_userimage_attr":"Access Stealth Settings and info for {{conversation_user}}, as well as the ability to report abuse","str_conv_conversation_dateformat_no_trans":"%b %d %l:%M %p","str_conv_conversations":"Conversations","str_conv_current_balance":"Current Balance: <b>{{current_balance}}<\/b>","str_conv_decline_add_number_attr":"Cancel","str_conv_declined_add_req":"<strong>{{conversation_user}}<\/strong> has been declined and will not be added to your Mesenger list.","str_conv_default_group":"Friends","str_conv_dialog_alert":"Alert","str_conv_dialog_confirm":"Confirm","str_conv_emoticon_attr":"Insert emoticons","str_conv_enter_phone_number_label":"Enter a mobile phone number for <b>{{conversation_user}}<\/b>:","str_conv_enter_phone_number_label_no_user":"a mobile phone number for <b>{{conversation_user}}<\/b>:","str_conv_error_empty_general":"All fields are required.","str_conv_example":"Example:","str_conv_file_transfer_attr":"Send a file to {{conversation user}}","str_conv_file_transfer_sending_mult":"Sending {{file_transfer_num_files}} files to <b>{{conversation_user}}<\/b>.","str_conv_file_transfer_sending_one":"Sending 1 file to <b>{{conversation_user}}<\/b>.","str_conv_file_transfer_sent_mult":"You have sent {{file_transfer_num_files}} files to <b>{{conversation_user}}<\/b>.","str_conv_file_transfer_sent_one":"You have sent 1 file to <b>{{conversation_user}}<\/b>.","str_conv_file_transfer_waiting_mult":"Waiting for <b>{{conversation_user}}<\/b> to accept {{file_transfer_num_files}} files","str_conv_file_transfer_waiting_one":"Waiting for <b>{{conversation_user}}<\/b> to accept 1 file","str_conv_format_attr":"Change fonts and colors","str_conv_format_fonts_attr":"Change fonts","str_conv_im_hint":"Type contact information...","str_conv_imconv_new_hint":"Start a new instant message.<br>Enter a Messenger ID or an email address.","str_conv_input_label":"Type your message here","str_conv_label_roadblock":"Don\u2019t show me this again.","str_conv_look_for":"Look for...","str_conv_maximize":"Maximize window","str_conv_message":"Message","str_conv_minimize":"Minimize window","str_conv_mode-tray_btn_group_chat":"Group chat","str_conv_mode-tray_btn_group_chat_attr":"Switch to group conversation","str_conv_mode-tray_btn_im":"Switch to Instant Message","str_conv_mode-tray_btn_im_attr":"Switch to instant message","str_conv_mode-tray_btn_im_only_attr":"Instant Message","str_conv_mode-tray_btn_mail":"Switch to Email","str_conv_mode-tray_btn_mail_attr":"Switch to email","str_conv_mode-tray_btn_phone":"Start Phone Call","str_conv_mode-tray_btn_phone_attr":"Switch to phone call","str_conv_mode-tray_btn_photosharing":"Start Photosharing","str_conv_mode-tray_btn_photosharing_attr":"Invite {{conversation_user}} to share photos","str_conv_mode-tray_btn_sms":"Switch to SMS","str_conv_mode-tray_btn_sms_attr":"Switch to SMS","str_conv_mode-tray_btn_vce":"Start Voice Call","str_conv_mode-tray_btn_vce_attr":"Switch to voice call","str_conv_mode-tray_btn_vid":"Start Video Call","str_conv_mode-tray_btn_vid_attr":"Switch to video call","str_conv_new_conversation_hint":"Type a contact\u2019s information to start a new conversation.","str_conv_new_hint":"Start a new instant message or SMS message.<br>Enter a Messenger ID, email, or mobile number.","str_conv_new_message_browser_title":"{{conversation_user}} sent you a new message.","str_conv_no_contact_add_request":"<b>{{conversation_yid}}<\/b> would like to add you to his or her {{str_cfg_branding_messenger}} List.","str_conv_no_video_support":"<b>{{conversation_user}}<\/b> is not using a version of {{str_cfg_branding_messenger}} that supports video call.","str_conv_non_users_blocked":"<em>You are currently blocking messages from users who are not in your contact list.  To communicate with this user you will need to either add them to your contacts or change your privacy settings.<\/em>","str_conv_ntf_spam_reported":"<em>This message from <span><strong>{{userid}}<\/strong><\/span> has been reported as spam.<\/em>  They were also added to your Block List.  Unblock this person if you want to contact them.","str_conv_ntf_user_blocked":"<em>You have blocked <span><strong>{{userid}}<\/strong><\/span>.<\/em> You cannot send and receive instant messages from blocked users.","str_conv_ntf_user_unblocked":"<em><span><strong>{{userid}}<\/strong><\/span> has been removed from your Blocked List.<\/em>","str_conv_photo_share_accepted":"<b>{{conversation_user}}<\/b> has accepted your invitation to start photo sharing.","str_conv_photo_share_invite":"You have invited <b>{{conversation_user}}<\/b> to start photo sharing.","str_conv_photo_share_wait_revoke":"You can wait for a response or revoke the invitation.","str_conv_photo_sharing_disabled":"{{conversation_user}}\u2019s configuration doesn\u2019t appear to support photo sharing.","str_conv_pop_in":"Anchor window to bottom of window","str_conv_pop_out":"Make window moveable","str_conv_prompt_tab":"View {{str_cfg_branding_messenger}} Conversations in a tab!","str_conv_prompt_tab_btn":"Change to Tab","str_conv_prompt_tab_btn_attr":"Change to display your conversations in a tab by default.","str_conv_receive_messages":"They will receive your instant message after signing in.","str_conv_report_abuse":"Report Abuse","str_conv_report_abuse_attr":"Report Abuse","str_conv_report_abuse_description":"Report this user for threats, harassment, harm to minors, or indecent content.  The transcript of your conversation with this person will be included in your report.","str_conv_report_abuse_radio":"Report Threats or Harassment","str_conv_report_abuse_title":"{{str_cfg_branding_messenger}} Report Abuse","str_conv_report_spam_description":"Stop receiving messages with bad links, phishing attempts, or any unwanted communication.","str_conv_report_spam_radio":"Report Spam","str_conv_revoke":"Revoke","str_conv_revoke_attr":"Revoke","str_conv_search_conversations":"Search Conversations","str_conv_self_objective":"Me","str_conv_send":"Send","str_conv_send_email":"Send Email","str_conv_send_email_attr":"Send an email instead","str_conv_send_sms":"Send SMS","str_conv_send_sms_attr":"Send an SMS to mobile phone instead","str_conv_settings":"Full menus for conversation window","str_conv_signed_out_hint":"You are not signed in to {{str_cfg_branding_messenger}}. Please sign in to start a new conversation.","str_conv_sms":"SMS","str_conv_sms_attachment_error":"Your message has attachments which cannot be included in an SMS","str_conv_sms_fees":"Wireless carrier charges may apply.","str_conv_sms_hint":"Type contact information or mobile number...","str_conv_sms_input_title":"Compose SMS","str_conv_sms_number_example":"e.g. {{example_number}}","str_conv_smsconv_new_hint":"Start a new SMS message.<br>Enter a name or mobile number.","str_conv_spam_reported_description_bl":"To permanently block this contact from sending you messages, add {{user}} to your Block list in {{str_cfg_generic_messenger}} Options.","str_conv_spam_reported_description_bnc":"To permanently block this contact from sending you messages, delete {{user}} from your Contacts list. Right click on display image, then choose Delete.","str_conv_spam_reported_description_bottom":"<strong>{{userid}}<\/strong> has also been blocked, and you will no longer receive messages from this user.","str_conv_spam_reported_description_top":"Thank you. Every IM you report as spam helps SpamGuard work better.","str_conv_spam_reported_title":"Spam Report Submitted","str_conv_start":"Start","str_conv_tab_close_confirm":"You have unread messages, are you sure you want to close this conversation?","str_conv_title_bar_im":"Instant Message","str_conv_title_bar_new_email":"New Email Message","str_conv_title_bar_new_im":"Start Instant Message","str_conv_title_bar_new_phone":"Start Phone Call","str_conv_title_bar_new_sms":"Start SMS","str_conv_title_bar_new_video":"Start Video Call","str_conv_title_bar_new_voice":"Start Voice Call","str_conv_title_bar_phone_call":"Phone Call","str_conv_title_bar_photo_share":"Photo Sharing","str_conv_title_bar_sms":"SMS","str_conv_title_bar_started":"{{str_branding_messenger}}","str_conv_title_bar_video_call":"Video Call","str_conv_title_bar_voice_call":"Voice Call","str_conv_title_conversation_history":"Conversation History","str_conv_typing":"{{conversation_user}} is typing...","str_conv_user_appears_offline":"<b>{{user}}<\/b> appears to be offline.","str_conv_user_invisible":"You currently appear offline to {{conversation_user}} (manage with Stealth Settings)","str_conv_user_notification_ssa":"Instant messages are currently being saved in the Conversation History.","str_conv_user_notification_ssa_button":"Open {{str_cfg_branding_messenger}} Options","str_conv_user_offline":"<b>{{conversation_yid}}<\/b> is currently offline.","str_conv_user_offlineMessage_notice":"Messages sent to you while you were signed out:","str_conv_user_signed_back_in":"<b>{{conversation_user}}<\/b> has signed back in.","str_conv_user_signed_out":"<b>{{conversation_user}}<\/b> has signed out.","str_conv_user_sms_edit_number":"Edit number","str_conv_user_sms_edit_number_attr":"Edit number","str_conv_user_sms_learn_more_btn":"Learn more","str_conv_user_sms_learn_more_btn_attr":"Learn more","str_conv_user_sms_notice":"<b>{{conversation_user}}<\/b> ({{msg_sms_number}}) will receive your instant message as an SMS.","str_conv_user_sms_notice_error_failed_to_deliver":"SMS could not be sent to <b>{{number}}<\/b>. It may be an invalid mobile number, formatted incorrectly, or no longer in service.","str_conv_user_sms_notice_error_msg_blocked":"Phone number {{number}} cannot receive SMS messages at this time.","str_conv_user_sms_notice_error_number_empty":"An empty number is not supported.","str_conv_user_sms_notice_error_number_not_supported":"The number <b>{{number}}<\/b> is not supported.","str_conv_user_sms_notice_error_ration_breached":"<b>{{user}}<\/b> must reply to one of your messages before you can send any more.","str_conv_user_sms_notice_error_system_busy":"SMS could not be sent to {{number}}. The system is currently busy. Please try again later.","str_conv_user_statexfer_notice":"Your ongoing conversation with {{conversation_user}}...","str_conv_video":"VIDEO","str_conv_video_call_camera_error":"<b>{{conversation_user}}<\/b> may not have a camera or it may not be working properly.","str_conv_video_call_end":"Video call ended: {{conversation_end}}","str_conv_video_call_fail":"The video call cannot be completed.","str_conv_video_call_invite":"<b>{{conversation_user}}<\/b> is inviting you to a video call.","str_conv_video_call_invite_declined":"You have declined the video call invitation.","str_conv_video_call_mic_input":"Your microphone may not be working.","str_conv_video_call_no_signal":"We are not receiving a video signal.","str_conv_video_disabled":"{{conversation_user}}\u2019s configuration doesn\u2019t appear to support video calls.","str_conv_voice":"VOICE","str_conv_voice_call_end":"Voice Call ended: {{conversation_end}}","str_conv_voice_call_hold":"You put <b>{{conversation_user}}<\/b> on hold.","str_conv_voice_call_invite":"<b>{{conversation_user}}<\/b> is inviting you to a voice call.","str_conv_voice_disabled":"{{conversation_user}}\u2019s configuration doesn\u2019t appear to support voice calls.","str_conv_wrn_interop_add_request_pending":"To IM with {{user}}, they must first accept your request to add them to your {{str_cfg_generic_messenger}} List contacts. Your request is still pending.","str_conv_wrn_interop_add_request_pending_2":"Send {{user}} an SMS instead.","str_conv_wrn_unknown_interop_user":"To send IM to {{user}}, they must first accept your request to add them to your {{str_cfg_generic_messenger}} List contacts.","str_conv_wrn_unknown_interop_user_2":"To contact {{user}} right now, send an SMS.","str_conv_wrn_unknown_user":"<em><span><strong>{{userid}}<\/strong><\/span> is not in your contacts.<\/em>  Be careful when corresponding with people you don\u2019t know. Never share private information with them.","str_warning_msg_read_form_part1":"Warning! You are about to send information to someone other than {{str_branding}}. If you do not want anyone outside of {{str_branding}} to have this information, click \"Cancel\" now.","str_warning_msg_read_form_part2":"Remember: {{str_branding}} will NEVER ask you for your password in an unsolicited phone call or an unsolicited email.","str_warning_msg_read_link_part1":"Warning! It appears that you are about to access a website that has non-standard web address format.","str_warning_msg_read_link_part2":"Such sites may contain harmful entities such as viruses.","str_warning_msg_read_link_part3":"We recommend you use extreme caution.","str_warning_msg_read_password_part1":"Warning! You are about to enter a password in a form that will not be sent to {{str_branding}}!.","str_warning_msg_read_password_part2":"Remember: {{str_branding}} will NEVER ask you for your password in an unsolicited phone call or an unsolicited email.","str_mailopt_fontvalue_1":"arial, helvetica, sans-serif","str_mailopt_fontvalue_2":"bookman old style, new york, times, serif","str_mailopt_fontvalue_3":"Courier New, monaco, monospace, sans-serif","str_mailopt_fontvalue_4":"garamond, new york, times, serif","str_mailopt_fontvalue_5":"lucida console, sans-serif","str_mailopt_fontvalue_6":"symbol","str_mailopt_fontvalue_7":"tahoma, new york, times, serif","str_mailopt_fontvalue_8":"times new roman, new york, times, serif","str_mailopt_fontvalue_9":"verdana, helvetica, sans-serif","str_nav_left_folders":"Folders","str_nav_folder_addfolder_attr":"Add a new folder [{{str_ctrl_shift}}+E]","str_nav_left_addfolder":"Add folder","str_nav_folder_unread_cnt":"{{unread_cnt}} unread emails","str_galaxy_friends_invited":"Added","str_galaxy_friends_inviteFailed":"Invite friends failed","str_galaxy_friends_added":"Confirmed!","str_galaxy_friends_acceptInviteFailed":"Confirm failed","str_galaxy_vitality_shortTimeAgo":"a short time ago","str_galaxy_profile_status_addAppError":"It seems that you have already linked your account or this service is temporarily unavailable.","str_galaxy_status_loading":"Loading...","str_galaxy_ycw_inviting":"Inviting...","str_galaxy_ycw_invitationSucess":"Invited!","str_galaxy_ycw_invitationFailure":"Failed to send out invitation, please try again later.","str_base_lang":"en-us"};
Neo.mix(strings, {"str_cfg_base_intl":"us","str_cfg_beacon_cg_upsel_no":"2145321914","str_cfg_beacon_def_mig_no":"2145321919","str_cfg_captcha_maxlength":"10","str_cfg_fr_code":"ush-mailn","str_cfg_intl":"us","str_cfg_overview_page_url_trap":"http:\/\/overview.mail.yahoo.com","str_cfg_partner":"yahoo","str_cfg_regex_yahoo_link":"","str_cfg_tog_MP_upsell":true,"str_cfg_tog_aboutOurAdsEnabled":true,"str_cfg_tog_accnt_user_color":false,"str_cfg_tog_ad_positions_disable":"null","str_cfg_tog_ads_mip4_nonsocial_show_l10n":true,"str_cfg_tog_ads_mip4_show_l10n":true,"str_cfg_tog_ads_mip5_show_l10n":true,"str_cfg_tog_ads_mip6_show_l10n":true,"str_cfg_tog_always_show_sky":false,"str_cfg_tog_birthday_eCard_url_toggle_l10n":true,"str_cfg_tog_button_context":false,"str_cfg_tog_calendarEnabled":true,"str_cfg_tog_certified_icon":true,"str_cfg_tog_check_active_compose":false,"str_cfg_tog_composeSMSEnabled":true,"str_cfg_tog_compose_enable_nickname":false,"str_cfg_tog_config_enable_statusomatique_l10n":true,"str_cfg_tog_config_useAdServedNews_l10n":false,"str_cfg_tog_contact_field":"name,email,nickname,yahooid,phone,otherid,guid","str_cfg_tog_contact_sortfields":"first","str_cfg_tog_cue_import_contact":true,"str_cfg_tog_cue_mail_on_mobile":true,"str_cfg_tog_cue_pulse_profile_page":true,"str_cfg_tog_disableBuddyAdd":false,"str_cfg_tog_disableCopyrightLink":false,"str_cfg_tog_disable_livewords":false,"str_cfg_tog_dm_source_tag":"yahoo_mail_mailbox_search","str_cfg_tog_edit_draft_from_search":false,"str_cfg_tog_empty_folders":false,"str_cfg_tog_enableFacebook":true,"str_cfg_tog_enableMultilang":true,"str_cfg_tog_enableTwitter":true,"str_cfg_tog_enableUh2":true,"str_cfg_tog_enable_updates":true,"str_cfg_tog_exlink_alert_page":false,"str_cfg_tog_expandPersonalFolders":false,"str_cfg_tog_ext_accnt_expand":false,"str_cfg_tog_faviconName":"favicon-yhoo.ico","str_cfg_tog_faviconName_HD":"favicon-yhoo-hd.ico","str_cfg_tog_featureCue_endDate_l10n":"04\/22\/2010","str_cfg_tog_featureCue_startDate_l10n":"03\/19\/2010","str_cfg_tog_flag_spam_on_move":false,"str_cfg_tog_full_ssl":true,"str_cfg_tog_hasGoMobileLink":true,"str_cfg_tog_hasIM":true,"str_cfg_tog_hasSMS":true,"str_cfg_tog_hasUnlimitedStorage":true,"str_cfg_tog_hide_RECAd":true,"str_cfg_tog_hide_tocc_info":false,"str_cfg_tog_hkr_siu":false,"str_cfg_tog_hydra":true,"str_cfg_tog_hydraOverrideEnabled":false,"str_cfg_tog_hydra_attachments_state":"1","str_cfg_tog_hydra_birthday":true,"str_cfg_tog_hydra_birthday_state":"1","str_cfg_tog_hydra_calendar":true,"str_cfg_tog_hydra_calendar_state":"1","str_cfg_tog_hydra_cue":true,"str_cfg_tog_hydra_cue_state":"1","str_cfg_tog_hydra_deals":true,"str_cfg_tog_hydra_facebook":true,"str_cfg_tog_hydra_facebook_state":"1","str_cfg_tog_hydra_flagged":true,"str_cfg_tog_hydra_flagged_state":"1","str_cfg_tog_hydra_flickr":true,"str_cfg_tog_hydra_flickr_state":"1","str_cfg_tog_hydra_groups":true,"str_cfg_tog_hydra_groups_state":"1","str_cfg_tog_hydra_local_news":true,"str_cfg_tog_hydra_local_news_state":"1","str_cfg_tog_hydra_lrec":true,"str_cfg_tog_hydra_news":true,"str_cfg_tog_hydra_news_state":"1","str_cfg_tog_hydra_omg":true,"str_cfg_tog_hydra_omg_state":"1","str_cfg_tog_hydra_photos":true,"str_cfg_tog_hydra_photos_state":"1","str_cfg_tog_hydra_rss_slot1_state":"1","str_cfg_tog_hydra_rss_slot2_state":"1","str_cfg_tog_hydra_rss_slot3_state":"1","str_cfg_tog_hydra_ruefc":true,"str_cfg_tog_hydra_ruefc_state":"1","str_cfg_tog_hydra_sports":true,"str_cfg_tog_hydra_sports_state":"1","str_cfg_tog_hydra_storage_meter":false,"str_cfg_tog_hydra_storage_meter_state":"","str_cfg_tog_hydra_today":true,"str_cfg_tog_hydra_today1_state":"1","str_cfg_tog_hydra_today2_state":"1","str_cfg_tog_hydra_today_state":"1","str_cfg_tog_hydra_weather":true,"str_cfg_tog_hydra_weather_state":"1","str_cfg_tog_hydra_world":true,"str_cfg_tog_hydra_world_state":"1","str_cfg_tog_insert_signature_bottom":false,"str_cfg_tog_mailBlogEnabled":true,"str_cfg_tog_mailSearchEnabled":true,"str_cfg_tog_mailUpgradeEnabled":true,"str_cfg_tog_monster_ad_empty_l10n":true,"str_cfg_tog_monster_ad_send_l10n":true,"str_cfg_tog_msgListColorIndic":false,"str_cfg_tog_newsModuleEnabled":true,"str_cfg_tog_news_body_enabled_l10n":true,"str_cfg_tog_news_header_enabled_l10n":true,"str_cfg_tog_notepadEnabled":true,"str_cfg_tog_old_imageblock":false,"str_cfg_tog_open_by_dblclick":false,"str_cfg_tog_optout_return_to_original":false,"str_cfg_tog_preserve_msglist_scroll":false,"str_cfg_tog_rec_pos_on_empty_folder":false,"str_cfg_tog_renderExternalAccounts":false,"str_cfg_tog_replace_sender_icon":false,"str_cfg_tog_search_expand_date":false,"str_cfg_tog_sendconfirm_keep_draft":false,"str_cfg_tog_set_spam_read_flag":true,"str_cfg_tog_showMobilizer":true,"str_cfg_tog_showMyYahooMenu":true,"str_cfg_tog_showStationaryEnabled":true,"str_cfg_tog_showThemeOption":true,"str_cfg_tog_showTos":true,"str_cfg_tog_showUsageMeter":false,"str_cfg_tog_show_contact_name":false,"str_cfg_tog_show_dk":false,"str_cfg_tog_show_search_desc":false,"str_cfg_tog_simple_add_contact_dialog":false,"str_cfg_tog_sky_pos_fixed":true,"str_cfg_tog_snippet_highlight":true,"str_cfg_tog_themeOverrideEnabled":false,"str_cfg_tog_theme_cancel":false,"str_cfg_tog_timed_alert_dialog":false,"str_cfg_tog_toolbarTrapPageEnabled":true,"str_cfg_tog_trendingNowEnabled":true,"str_cfg_tog_trendingNowEnabledUH":true,"str_cfg_tog_uhShowReturnToOriginal":false,"str_cfg_tog_ulm_locale_l10n":"en-US","str_cfg_tog_unescape_ncr":false,"str_cfg_tog_use_accountbased_signature ":false,"str_cfg_tog_use_ctc_details_link":false,"str_cfg_tog_use_default_fromname":true,"str_cfg_tog_use_reedit":false,"str_cfg_tog_use_roundtrip":true,"str_cfg_tog_weather_default_temp_units_l10n":"F","str_cfg_tog_weather_detailedForecast_toggle_l10n":true,"str_cfg_tog_weather_weatherURL_toggle_l10n":true,"str_cfg_tog_ybox_enabled":false,"str_cfg_tog_ycw_turn_on_fb":true,"str_cfg_tog_ycw_turn_on_tw":true,"str_cfg_url_TAEHelpPages":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/taes\/","str_cfg_url_abhost":"address.mail.yahoo.com","str_cfg_url_abhost_api":"api.address.yahoo.com","str_cfg_url_about_our_ads":"http:\/\/info.yahoo.com\/privacy\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/relevantads.html","str_cfg_url_account":"http:\/\/edit.yahoo.com\/config\/eval_profile?.done=http:\/\/mail.yahoo.com\/","str_cfg_url_address":"http:\/\/address.mail.yahoo.com","str_cfg_url_antispam":"","str_cfg_url_arc_help":"http:\/\/arc.help.yahoo.com\/arc\/","str_cfg_url_attbrowseatoz":"http:\/\/elportal.att.net\/s\/s.dll?ep=10111&ch=wd&_lid=135&_lnm=home.channelNav.att.webdirectory","str_cfg_url_attcom":"http:\/\/att.com\/","str_cfg_url_attmyaccount":"http:\/\/att.yahoo.com\/myaccount","str_cfg_url_attnet":"http:\/\/elportal.att.net\/","str_cfg_url_attspanish":"http:\/\/www.att.net ","str_cfg_url_attsupport":"http:\/\/www.att.com\/esupport\/","str_cfg_url_birthday_eCard_url":"http:\/\/www.yahoo.americangreetings.com\/ecards\/yahoomail.pd?source=yahoo209","str_cfg_url_bizmail":"http:\/\/smallbusiness.yahoo.com","str_cfg_url_bk_mail_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/context\/migrationv2.html","str_cfg_url_calendar":"http:\/\/calendar.mail.yahoo.com","str_cfg_url_captcha":"http:\/\/www.captcha.net","str_cfg_url_captcha_need_help_URL":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/yahoomail\/context\/context-14.html","str_cfg_url_clear_cache_cookie":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/yahoo\/mail\/ymail\/settings\/settings-15.html","str_cfg_url_communications_terms_of_service":"http:\/\/info.yahoo.com\/legal\/us\/yahoo\/mail\/atos.html","str_cfg_url_contact_customer_care":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/abuse\/mltatempblock.html","str_cfg_url_contacts":"http:\/\/pulse.yahoo.com\/y\/connections","str_cfg_url_copyright":"http:\/\/info.yahoo.com\/copyright\/{{str_cfg_base_intl}}\/details.html","str_cfg_url_darla_third_party_beacon_uri_l10n":"","str_cfg_url_disclosure_link1_url_l10n":"http:\/\/profiles.yahoo.com","str_cfg_url_dm_static_content_mail_search_tip":"http:\/\/{{str_cfg_base_intl}}.overview.mail.yahoo.com\/howtos#d_11","str_cfg_url_download_firefox":"http:\/\/www.mozilla.org\/en-US\/firefox\/fx\/","str_cfg_url_download_internetexplorer":"http:\/\/downloads.yahoo.com\/internetexplorer\/","str_cfg_url_download_safari":"http:\/\/www.apple.com\/safari\/","str_cfg_url_emptymfmc_learn_url":"http:\/\/overview.mail.yahoo.com\/connectmore","str_cfg_url_exlink_alert_page":"","str_cfg_url_featureCue_contactImport_URL":"http:\/\/address.yahoo.com\/?VPC=contact_import_landing","str_cfg_url_featureCue_learnMoreLink":"http:\/\/features.mail.yahoo.com\/howitworks","str_cfg_url_feedback":"http:\/\/feedback.help.yahoo.com\/feedback.php?.src=YAHOOMAIL&.done=http:\/\/mail.yahoo.com","str_cfg_url_feedback_link_mongo_l10n":"http:\/\/feedback.mail.yahoo.com\/feedback_mail.php?idf=gx","str_cfg_url_finance":"http:\/\/finance.yahoo.com","str_cfg_url_footer_guideline":"","str_cfg_url_geo_image":"\/geo\/","str_cfg_url_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/","str_cfg_url_help_connections":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/yahoomail\/connections\/upcomcon-01.html","str_cfg_url_help_features":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/migrating\/","str_cfg_url_help_tutorials":"http:\/\/help.yahoo.com\/tutorials\/cg\/mail\/cg_receive2.html","str_cfg_url_hydra_entertainment_empty":"http:\/\/{{optional_intl}}news.yahoo.com","str_cfg_url_hydra_flickr_empty":"http:\/\/www.flickr.com","str_cfg_url_hydra_local_news_empty":"http:\/\/{{optional_intl}}news.yahoo.com\/local\/","str_cfg_url_hydra_rss1_feed":"http:\/\/news.yahoo.com\/rss\/entertainment","str_cfg_url_hydra_rss2_feed":"http:\/\/news.yahoo.com\/rss\/world","str_cfg_url_hydra_rss3_feed":"http:\/\/l.yimg.com\/j\/top\/rss.xml","str_cfg_url_hydra_rss_slot1_empty":"http:\/\/us.mobile.yahoo.com\/yahoo","str_cfg_url_hydra_sports_empty":"http:\/\/{{optional_intl}}sports.yahoo.com","str_cfg_url_hydra_today1_empty":"http:\/\/{{optional_intl}}yahoo.com","str_cfg_url_hydra_today2_empty":"http:\/\/{{optional_intl}}yahoo.com","str_cfg_url_hydra_today_empty":"http:\/\/{{optional_intl}}yahoo.com","str_cfg_url_hydra_topstories_empty":"http:\/\/{{optional_intl}}news.yahoo.com","str_cfg_url_hydra_world_empty":"http:\/\/{{optional_intl}}news.yahoo.com","str_cfg_url_import_contacts_help":"\t\n \nhttp:\/\/{{str_cfg_base_intl}}.overview.mail.yahoo.com\/howtos#d_3","str_cfg_url_mail":"http:\/\/mail.yahoo.com","str_cfg_url_mail_bg_img_trap":"http:\/\/mail.yimg.com\/nq\/ued\/assets\/img\/trap\/mail-bg-v2.jpg","str_cfg_url_mail_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/","str_cfg_url_mail_terms":"https:\/\/account.nokia.com\/acct\/public\/serviceSpecificTerms?serviceId=Ovimail&tlang=en&country=US","str_cfg_url_mail_yahoo":"mail.yahoo.com","str_cfg_url_mailplus":"http:\/\/overview.mail.yahoo.com\/enhancements\/mailplus","str_cfg_url_maps":"http:\/\/maps.ovi.com\/","str_cfg_url_messenger":"http:\/\/messenger.yahoo.com","str_cfg_url_messenger_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/chat\/","str_cfg_url_migration_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/migration\/mltamunsup.html","str_cfg_url_mininux_tosUrl":"http:\/\/info.yahoo.com\/legal\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/utos\/utos-173.html","str_cfg_url_mobilizer":"http:\/\/{{str_cfg_base_intl}}.mobile.yahoo.com\/yahoo","str_cfg_url_mts_customer_care":"http:\/\/www.selfcare.mtsindia.in\/","str_cfg_url_mts_games_ondemand":"http:\/\/games.mtsindia.in\/","str_cfg_url_mts_tv":"http:\/\/www.mtsindia.in\/mblaze\/mtstv.html","str_cfg_url_mts_web_chat":"http:\/\/chat.mtsindia.in\/MTSINDIAChat\/MTSINDIA-Chat.htm","str_cfg_url_mts_yahoo":"http:\/\/in.my.yahoo.com\/mtsindia","str_cfg_url_music":"http:\/\/musicstore.nokia.com\/","str_cfg_url_myyahoo":"http:\/\/my.yahoo.com","str_cfg_url_new_features":"http:\/\/{{str_cfg_base_intl}}.overview.mail.yahoo.com\/howtos","str_cfg_url_news":"http:\/\/news.yahoo.com","str_cfg_url_news_mailblogURL_l10n":"http:\/\/www.ymailblog.com\/blog\/feed\/","str_cfg_url_norton_security":"http:\/\/buy.norton.com\/estore\/mf\/landingProductFeatures","str_cfg_url_notepad":"http:\/\/notepad.mail.yahoo.com","str_cfg_url_notifications_connect_url_l10n":"http:\/\/overview.mail.yahoo.com\/connectmore\/updates","str_cfg_url_notifications_connections_cg_url_l10n":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/yahoomail\/connections\/mltamssgcontct.html","str_cfg_url_notifications_connections_mg_url_l10n":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/classic\/connections\/mltamssgcontct.html","str_cfg_url_openmail":"http:\/\/overview.mail.yahoo.com\/whatsinside","str_cfg_url_options_learn_more":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/yahoomail\/manage\/manage-69.html","str_cfg_url_overview":"http:\/\/overview.mail.yahoo.com","str_cfg_url_ovi":"http:\/\/www.nokia.com\/","str_cfg_url_ovi_terms":"https:\/\/account.nokia.com\/acct\/public\/termsAndConditions?tlang=en&country=US","str_cfg_url_privacy_beta_faq":"http:\/\/info.yahoo.com\/privacy\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymailfaq\/details.html","str_cfg_url_privacy_policy":"http:\/\/info.yahoo.com\/privacy\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/details.html","str_cfg_url_privacy_policy_trap":"http:\/\/info.yahoo.com\/privacy\/us\/yahoo\/mail\/beta\/details.html","str_cfg_url_profiles":"http:\/\/pulse.yahoo.com\/","str_cfg_url_replace_sender_icon":"","str_cfg_url_search":"http:\/\/{{str_cfg_base_intl}}.search.yahoo.com\/search","str_cfg_url_sendfeedback":"http:\/\/feedback.help.yahoo.com\/feedback.php?.src=YAHOOMAIL&.done=http:\/\/mail.yahoo.com","str_cfg_url_shortcuts_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/basics\/basics-65.html","str_cfg_url_signout":"http:\/\/login.yahoo.com\/config\/login?logout=1&.src=cdgm&.intl=us&.direct=2&.done=http:\/\/www.yahoo.com&.last=http:\/\/mail.yahoo.com","str_cfg_url_sort_email_help":"http:\/\/help.yahoo.com\/kb\/index?page=content&y=PROD_MAIL_ML&locale={{tog_ulm_locale_l10n}}&id=SLN3535&impressions=true","str_cfg_url_sports":"http:\/\/sports.yahoo.com","str_cfg_url_store":"http:\/\/store.ovi.com\/","str_cfg_url_sync_contacts_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/newcontacts\/sync\/","str_cfg_url_tos":"http:\/\/info.yahoo.com\/legal\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/atos.html","str_cfg_url_tos_reject_redirect":"","str_cfg_url_ulm_helpurl_l10n":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/help\/ulm\/","str_cfg_url_updates_closing":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/context\/mltaycweol.html","str_cfg_url_upsell":"http:\/\/overview.mail.yahoo.com\/enhancements\/mailplus","str_cfg_url_vitality_flickr_learnMore_url_l10n":"http:\/\/www.flickr.com\/help\/sharing\/#737966","str_cfg_url_weather_weatherURL_l10n":"http:\/\/www.weather.com","str_cfg_url_wn_attachments_empty_action":"http:\/\/help.yahoo.com\/kb\/index?page=content&y=PROD_MAIL_ML&locale=en_US&id=SLN5933","str_cfg_url_wn_facebook_empty_action":"http:\/\/us.mobile.yahoo.com\/yahoo","str_cfg_url_wn_flagged_empty_action":"http:\/\/help.yahoo.com\/kb\/index?page=content&y=PROD_MAIL_ML&locale=en_US&id=SLN3535&impressions=true","str_cfg_url_wn_groups_empty_action":"http:\/\/us.mobile.yahoo.com\/yahoo","str_cfg_url_wn_ruefc_empty_action":"http:\/\/us.overview.mail.yahoo.com\/howtos#d_3","str_cfg_url_wn_today1_empty_action":"http:\/\/news.yahoo.com","str_cfg_url_wn_today_empty_action":"http:\/\/news.yahoo.com","str_cfg_url_wnux_learn_more":"http:\/\/help.yahoo.com\/kb\/index?page=content&id=SLN5651&locale=en_US","str_cfg_url_yahoo":"http:\/\/www.yahoo.com","str_cfg_url_yahoo_base":"yahoo.com","str_cfg_url_yahoo_login":"https:\/\/login.yahoo.com\/","str_cfg_url_yahoo_mail_help":"http:\/\/help.yahoo.com\/l\/{{str_cfg_base_intl}}\/{{str_cfg_partner}}\/mail\/ymail\/","str_cfg_url_yahoo_mail_help_tae45":"http:\/\/help.yahoo.com\/kb\/index?page=content&id=SLN6628&locale=en_US","str_cfg_url_yahoo_relogin":"https:\/\/login.yahoo.com\/config\/login_verify2?.intl={{str_cfg_base_intl}}&.src=cdgm&.done=","str_cfg_url_yahoo_url":"yahoo.com","str_cfg_url_ymail_blog":"http:\/\/ymailupdates.com\/blog","str_cfg_url_ymail_logo_img_trap":"http:\/\/mail.yimg.com\/ok\/u\/assets\/theme\/brand\/logo-ymail-wh.gif","str_cfg_yahoo_mail_url_trap":"http:\/\/mail.yahoo.com"});
