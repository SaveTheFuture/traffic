YUI.add("mail-ui-messagepane-utils-shared",function(A){A.namespace("mail.ui.MessagePaneUtils");var B=A.mail.ui.MessagePaneUtils;function D(Q){var M="",K,P,O,L,J=Q.toLowerCase();if(J.indexOf("http://")==0||J.indexOf("https://")==0||J.indexOf("ftp://")==0){return"";}if(J.indexOf("mailto:")==0){Q=Q.substring(7);}K=Q.indexOf("?");if(K>-1){Q=Q.substring(0,K);}if(Q&&Q.length){P=/\s*([^@ ;,<>]+@[^@ ;,<>]+\.[^@^? ;,<>]+)*/ig;O=Q.match(P);for(var N=0;N<O.length;N++){L=O[N].replace(/^\s+/,"");if(L.length){M+=(M.length)?(","+L):L;}}}return M;}function I(M){var J="";if(M&&M.length){var L=/^(http:\/\/opi.yahoo.com\/online\?u=[a-zA-Z0-9.@_]+)/i,K=M.match(L);J=K?K[K.length-1]:"";}return J;}function G(M){var K="",N="";var L=M&&M.all("tt");if(L&&!L.isEmpty()){N=L.get("innerHTML").join("");}else{N=M&&M.get("innerHTML");}if(N&&N.length){N=N.replace(/&amp;/gi,"&");var J=/^(http:\/\/mrd.mail.yahoo.com\/)(\w+)\?*(.*)/i;K=N.match(J)?N:false;}return K;}function H(K,N,M){var L=N||(K&&((!M&&K.one(".tripane.content"))||K.one(".message.content"))),J=L&&L.all(".yshortcuts");if(J){J.each(function(P){var O=P.get("innerHTML"),T=D(O);if(T&&T.length){var U=P.get("parentNode");if(U.get("tagName")=="A"&&U.hasAttribute("ymailto")){}else{var S=[];S.push('<a href="mailto:'+T+'" ');S.push('target="_blank" ymailto="mailto:'+T+'" rel="nofollow">');S.push('<span id="'+P.get("id")+'" class="yshortcuts">');S.push(O);S.push("</span></a>");var W=A.Node.create(S.join(""));try{P.replace(W);}catch(Q){}}}else{var V=I(O);if(V){var S=[];S.push('<span id="'+P.get("id")+'" class="yshortcuts">');S.push('<img src="'+V+'" alt="'+V+'"/>');S.push("</span>");var W=A.Node.create(S.join(""));P.replace(W);}else{var R=G(P);if(R){var S=[];S.push('<a href="#" target="_blank" rel="nofollow">');S.push('<span id="'+P.get("id")+'" class="yshortcuts">');S.push(O);S.push("</span></a>");var W=A.Node.create(S.join(""));W.setAttribute("ymrd",R);P.replace(W);}}}});}}function F(J){var Q=0,L=0,K=0,S=0,M=J.one(".message-header h3 span.btn"),R="",O=J.one(".message-header h3"),N=J.one(".header-expand"),P=J.one(".subanchor");if(M){S=M.get("offsetWidth");}if(O&&N){Q=(O.get("offsetWidth"))-29;L=N.get("offsetWidth");K=(Q-(L+S));R="max-width:"+K+"px";if(P){P.setAttribute("style",R);}}}function E(L){var J=L?A.one(L).one("body"):A.one("body");if(!J.one("#copyText")){var K=500;J.append('<input type = "text" value = "" style = "opacity: 0;  filter: alpha(opacity = 0); position:absolute; width:1px; height: 1px; left:'+K+'px;" id = "copyText">');}}function C(N,L,M){var J=L?A.one(L).one("body"):A.one("body"),K=J.one("#copyText");K._node.value=N;K.setY(J.get("scrollTop")+20);K.focus();K.select();setTimeout(function(){if(M){M.focus();}},200);}A.mix(B,{extractEmailAddress:D,extractOPILink:I,extractMRDLink:G,convertShortcuts:H,resizeSubject:F,initializeCopyText:E,copyToClipboard:C});},"1.0.0");YUI.add('openmail_strings', function(Y) {
Y.namespace("mail");
Y.mix(strings,{"str_om_error_legaldialog_fail":"Sorry, but we are unable to load this application at this time. Please try again in a moment.","str_om_app_uninstall_title":"Remove Application","str_om_app_uninstall_body":"Are you sure you want to remove \"{{app_name}}\" from {{str_branding_mail}}?<br\/>Removing this application means that all permissions for this application will be removed as well.","str_om_app_description_label":"Description","str_om_instance_list_loading":"The application list is still loading.","str_comp_captcha_reader_hint":"Attention users who are both hearing- and vision-impaired: To complete this form you must enter a word that is part of an image or a few digits from an audio recording. If you cannot read the image or hear the audio, {{str_branding}} is happy to assist you. A representative from Customer Care will need to contact you. Please provide your phone number and email address and send your request by visiting this URL - <a href=\"{{conf_url_help_general}}\">{{conf_url_help_general}}<\/a> To request assistance with registration, please first read the {{str_branding}} Terms of Service located at <a href=\"{{conf_url_tos}}\">{{conf_url_tos}}<\/a> before submitting your request.","str_comp_captcha_header":"To help fight spam, please type in the characters from the box below.","str_comp_captcha_help":"Need help?","str_comp_captcha_enter_code":"Enter the code","str_comp_captcha_img_title":"Enter the characters displayed","str_comp_captcha_img_alt":"CAPTCHA Image","str_comp_captcha_numbers_only":"NUMBERS ONLY","str_comp_captcha_audio_playing":"Audio code is playing...","str_comp_captcha_replay":"Replay","str_comp_captcha_type_code":"Type the code below","str_comp_captcha_type_numbers":"Type the numbers you hear","str_comp_captcha_btn_audio_code_attr":"Click here for an audio code","str_comp_captcha_btn_audio_code":"Audio code","str_comp_captcha_back_to_visual":"Back to visual code","str_cascd_ExceededMaxTo":"The message To: field exceeds the maximum number of recipients","str_cascd_ExceededMaxCc":"The message Cc: field exceeds the maximum number of recipients","str_cascd_ExceededMaxBcc":"The message Bcc: field exceeds the maximum number of recipients","str_cascd_ExceededMaxRecipients":"The message address fields exceed the maximum number of recipients","str_cascd_ExceededMaxHourlyMessages":"Number of hourly messages exceeded","str_cascd_ExceededMaxDailyMessages":"Number of daily messages exceeded","str_cascd_InvalidRecipientAddress":"The message To: Cc: or Bcc: field contains a malformed email address","str_comp_send_error":"Sorry, there was a problem sending your message","str_comp_send_abuse_error":"Message was sent but not saved in your Sent folder due to unusually heavy activity from this mailbox.","str_btn_add_recipient_attr":"Add {{email_id}} to your Contacts","str_comp_original_msg":"Original Message","str_comp_email_sent":"Email Sent","str_comp_done":"Done","str_btn_recipient_lozenge_attr":"{{email_id}}","str_comp_auto_add_to_contacts":"Automatically add new recipients to Contacts","str_comp_recipients":"Recipients","str_toolbar_back_to_message":"Back to Message","str_comp_back_to_msg_attr":"Go back to editing the email","str_comp_back_to_msg":"Back to Email","str_comp_try_again_attr":"Try sending again","str_comp_try_again":"Try Again","str_comp_captcha_msg":"Your message was not sent","str_comp_captcha_msg_suspicious_activity":"Suspicious activity was detected on your account. To protect your account and those of our users, your message was not sent. Please follow the <a href=\"http:\/\/help.yahoo.com\/l\/us\/yahoo\/mail\/ymail\/abuse\/mltatempblock.html\">guidelines<\/a> outlined on our help page to resume sending mail.","str_comp_captcha_msg_contact_cust_care":"If this error continues, please contact <a href=\"{{str_cfg_url_contact_customer_care}}\" target=\"_blank\">{{str_branding}} Customer Care<\/a> for further help.","str_comp_captcha_apology":"We apologize for the inconvenience.","str_comp_captcha_account":"Account has been blocked from sending","str_comp_captcha_account_suspicious_activity":"Suspicious activity was detected on your account. To protect your account and those of our users, your message was not sent. Please follow the <a href=\"http:\/\/help.yahoo.com\/l\/us\/yahoo\/mail\/ymail\/abuse\/mltatempblock.html\">guidelines<\/a> outlined on our help page to resume sending mail.","str_comp_captcha_account_contact_cust_care":"To restore the ability to send from your account, please contact <a href=\"{{str_cfg_url_contact_customer_care}}\" target=\"_blank\">{{str_branding}}<\/a> Customer Care for further help."});
}, '1.0.0');YUI.add("om-ui-sandbox-utils",function(B){function A(E,C,D){openmail.Application.callWebService({url:"apps://",method:"GET",parameters:{cmd:E,args:C}},D);}B.namespace("om.ui.sandbox.Utils");B.mix(B.om.ui.sandbox.Utils,{callInternalAPI:A});},"1.0.0",{requires:[]});YUI.add("om-ui-sandbox-view",function(A){var L=["attachments_css","mod-conversation-history_css"],H=".panescroll .tripane{top:0px; border:0;} body, .fullpage{min-width:0px;} .sb-padding{padding-top:1px;}",D=0,T=0,O=0,Q=null,I=null,M=false,S=".message-header",R=".msg-body.inner",G=".msg-blocked .left",E=".msg-truncated .left",V=".msg-blocked .right",F=".msg-attachments span.rht .btn.left.right a",J=new RegExp("/om/api/1.0/openmail.app.invoke","i"),N=A.mail.ui.MessagePaneUtils,U=A.om.ui.sandbox.Utils.callInternalAPI,B=A.om.ui.sandbox.MessageRead;function C(a){var Z=a.target,Y=a.currentTarget,W=Z.ancestor(function(b){return b.hasAttribute("data-action")||b===Y;},true),X=W?W.getAttribute("data-action"):0;return{node:W,action:X};}function K(Y,b){var n=b.contacts,m=n.modified,a=n.created,W,d=[],g=[],f,h;function k(l,i){W=Y.all("span.lozenge");W.each(function(o){h=X(o.getAttribute("data-address"),l);if(h!=-1){if(o.hasClass("lozengeadd")){o.remove();}else{o.addClass("right");if(i[h]){o.one("a").setContent(A.common.Utils.substitute(strings["str_name_format"],{given_name:i[h].givenName,family_name:i[h].familyName}));}}}});}function X(q,p){for(var r=0,o=p.length;r<o;r+=1){if(p[r]==q){return r;}}return -1;}for(f in a){var e=a[f]["fields"],c,Z,j;for(c=0,Z=e.length;c<Z;c++){j=e[c];if(j["type"]=="email"){d=d.concat(j["value"]);}else{if(j["type"]=="name"){g=g.concat(j["value"]);}}}}k(d,g);}function P(W){P.superclass.constructor.apply(this,arguments);}P.NAME="omSandboxView";A.extend(P,A.Base,{initializer:function(W){this.id=W.id;this.win=W.win;this.doc=W.doc;this.fullView=W.fullView||null;this.postRenderTimer=W.postRenderTimer||null;this.currentMessageId=W.currentMessageId||null;this.cssLinks=W.cssLinks||[];this.yuiDoc=A.one(this.doc);},callConvPaneInternalAPI:function(Z,W,Y){var X={cmd:Z,viewId:this.id,appArgs:W};U("conv.dispatchToConvPane",X,Y);},loadCss:function(Z){var c=this,Y=c.win,q=c.doc,W=c.yuiDoc,X=[],f=A.config.groups.mail_css,a=f.root,m=f.modules,Z=Z||false;if(A.UA.ie){A.Get.css(cssLinks.slice(0),{win:Y});var h=q.getElementsByTagName("head")[0],n=q.createElement("style");n.setAttribute("type","text/css");n.styleSheet.cssText=H;h.appendChild(n);}else{var j="",h=W.one("head");for(var d=0,b=cssLinks.length;d<b;++d){j=j+'<link type="text/css" rel="stylesheet" href="'+cssLinks[d]+'" />';}j+='<style type="text/css">'+H+"</style>";if(h){h.append(j);}}if(Z){U("sandboxViewReady",{viewId:c.id});}var o,p,k=[],g=AppConfig.msgReadAppIdList,e=AppConfig.msgReadAppConfigs;for(var d=0,b=L.length;d<b;++d){X.push(a+m[L[d]].path);}k.push(f.comboBase+X.join("&"));if(AppConfig.preloadCssCombo){k.push(AppConfig.preloadCssCombo);}A.each(g,function(i){o=e[i];p=o.msg_read_data;if(p.preload){A.each(p.css,function(l){k.push(l);});}});A.Get.css(k,{win:Y});},highlightLozenge:function(Z,X){var W=false,a,Y;if(!X){return;}if(X.hasClass("lozenge")&&!X.hasClass("lozengeadd")){Y=X.get("parentNode");if(!Y.hasClass("pressed")){W=true;}else{Y.removeClass("pressed");}}if(W&&Y){X.blurEvt=Y.one(".lozenge.left a").on("blur",function(){X.tmFocus=A.Lang.later(100,this,function(){Y.removeClass("pressed");X.blurEvt.detach();X.focusEvt.detach();});});X.focusEvt=Y.one(".lozenge.left a").on("focus",function(){X.tmFocus&&X.tmFocus.cancel();});Y.addClass("pressed");}},fireLastOnUpdate:function(){I&&I();},onUpdate:function(){if(NeoConfig.fullPage&&!NeoConfig.hasConv){var c=this,a=c.doc,X=c;if(!A.one(a).one(".tripane.message.content")){return;}var W=A.one(a).one("body").get("offsetHeight");if(W>0&&W!=D){D=W;U("sandboxDOMSubtreeModified",{viewId:X.id,height:D});clearTimeout(Q);Q=setTimeout(c.fireLastOnUpdate,200);}var b=A.one(a).one("body").one(".msg-body");if(b){if(O==0){try{O=parseInt(b.getStyle("marginRight"))+parseInt(b.getStyle("marginLeft"));}catch(Z){}}var Y=b.get("scrollWidth")+O;if(Y>O&&Y!=T){T=Y;U("sandboxDOMSubtreeModifiedWidth",{viewId:X.id,scrollWidth:T});}}}},dataActionClickHandler:function(s){var n=this,Y={},h=this,t=this.id,v=this.doc,u=C(s),b=u.node,r=u.action,l=s.target.get("parentNode"),o;if(!b){return;}if(r||b.hasAttribute("data-action")){s.halt();}n.highlightLozenge(v,l);switch(r){case"compose":U("newMessage",Y);break;case"new-conv":case"loadContent":U("newConv",{action:b.getAttribute("class")});break;case"search":var i=A.Lang.trim(b.get("innerHTML")),k=new RegExp("^(\\b("+strings["str_comp_reply_spRE"]+"|"+strings["str_comp_reply_spFWD"]+")(\\s*)?)*","i");if(i.indexOf("&nbsp;")>0){i=i.replace("&nbsp;","");}i=i.replace(/\s{1,}:/g,":");Y={query:i.replace(k,"")};U("subjectSearch",Y);break;case"show-images":var W=s.target.hasClass("thread-item")?s.target:s.target.ancestor(".thread-item"),f=W&&W.get("id").split("-")[1],X=!W.one(".thread-reply").hasClass("hidden");n.callConvPaneInternalAPI("showImages",{msgItem:f,openReply:X});break;case"thread-item-download":var W=s.target.hasClass("thread-item")?s.target:s.target.ancestor(".thread-item"),f=W&&W.get("id").split("-")[1];n.callConvPaneInternalAPI("threadItemDownload",{msgItem:f});break;case"attach-download":var W,f;if(NeoConfig.hasConv){W=s.target.hasClass("thread-item")?s.target:s.target.ancestor(".thread-item"),f=W&&W.get("id").split("-")[1];}Y={viewId:t,partId:b.getAttribute("id"),tnefId:b.getAttribute("tnefid"),msgItem:f};U("msgAttachmentDownloadSingle",Y);break;case"attach-download-all":var W,f;if(NeoConfig.hasConv){W=s.target.hasClass("thread-item")?s.target:s.target.ancestor(".thread-item"),f=W&&W.get("id").split("-")[1];}U("msgAttachmentDownloadAll",{viewId:t,msgItem:f});break;case"attach-download-all-photos":var W,f;if(NeoConfig.hasConv){W=s.target.hasClass("thread-item")?s.target:s.target.ancestor(".thread-item"),f=W&&W.get("id").split("-")[1];}U("msgAttachmentDownloadAllPhotos",{viewId:t,msgItem:f});break;case"msg-flag":U("setMsgFlag",{viewId:t});break;case"select-thread":var W=s.target.hasClass("thread-item")?s.target:s.target.ancestor(".thread-item"),f=W&&W.get("id").split("-")[1];if(!W.hasClass("expanded")){n.callConvPaneInternalAPI("selectThread",{msgItem:f});}break;case"quoted-text":var W=s.target.hasClass("thread-item")?s.target:s.target.ancestor(".thread-item"),g=W.one(".thread-quoted-body");
g&&g.toggleClass("hidden");break;case"thread-item-flag":var W=s.target.hasClass("thread-item")?s.target:s.target.ancestor(".thread-item"),f=W&&W.get("id").split("-")[1];n.callConvPaneInternalAPI("threadItemFlag",{msgItem:f});break;case"thread-item-unread":var W=s.target.hasClass("thread-item")?s.target:s.target.ancestor(".thread-item"),f=W&&W.get("id").split("-")[1];n.callConvPaneInternalAPI("threadItemUnread",{msgItem:f});break;case"toggle-msg-header":var d=A.one(v).one("body "+S),a=d.one("#msg_details"),Z=d.one(".date span"),p=d.one(".ccto"),m=d.one(".flag"),j=d.one("h3 a"),c=d.one("h3");if(!a){break;}b.setContent(b.getAttribute(a.hasClass("expanded")?"toggle-on":"toggle-off"));b.set("title",(a.hasClass("expanded")?strings["str_show_details_tooltip"]:strings["str_hide_details_tooltip"]));a.toggleClass("expanded");a.toggleClass("hidden");Z&&Z.toggleClass("hidden");p&&p.toggleClass("hidden");m&&m.toggleClass("hidden");j&&j.toggleClass("subanchor");c&&c.toggleClass("details");if(a.hasClass("expanded")&&a.one(".update img")){a.addClass("mentos-enabled");}U("toggleShowDetails",{viewId:t});N.resizeSubject(A.one(v));n.onUpdate();break;case"more":o=b&&b.getAttribute("data-id");U("showMore",{viewId:t,field:o});break;case"msg-attachments":U("msgAttachmentDownloadEverything",{viewId:t});break;case"retry-msg-load":U("retryLoad",{viewId:t});break;case"modal":if(b.hasClass("btn-kiosk-addcontact")){Y={name:b.getAttribute("data-name"),email:b.getAttribute("data-address")};U("addContact",Y);}break;}},triggerIframeEvent:function(Z,Y){var X={};for(var W in Z){if(!A.Lang.isFunction(Z[W])&&!A.Lang.isObject(Z[W])){X[W]=Z[W];}}X.target={className:Z.target.get("className"),nodeName:Z.target.get("nodeName")};X.parentNode={className:Y.get("className"),nodeName:Y.get("nodeName")};U("iframe:event",X);},registerClickHandler:function(){var b=this,Y={},X=this.id,a=this.win,Z=this.doc,W=Z.body;A.delegate("keydown",function(c){if(c.keyCode===32){c.preventDefault();b.dataActionClickHandler(c);}},W,".message-header .flag");A.delegate("keydown",function(c){if(c.keyCode===13){b.dataActionClickHandler(c);}},W,".file-attach li");A.on("click",function(c){b.dataActionClickHandler(c);b.triggerIframeEvent(c,c.target.get("parentNode"));},W);A.delegate("click",function(i){var j=i.currentTarget,f=0,l=0,c=j.getAttribute("href"),d,n,m=parseInt(W.getAttribute("data-truncated"));if(!j){return;}if(j.hasClass("retryLoad")){i.halt();U("retryLoad",{viewId:X});}else{if(j.hasClass("switchFolder")){i.preventDefault();if(j){f=j.getAttribute("sourcefolder");l=j.get("innerHTML");}if(f){U("switchFolder",{newFid:f,newName:l});}}else{if(m&&/^\#/.test(c)){var d=A.one(W).one(".content"),n={viewId:X,scrollTop:d.get("scrollTop"),href:c};i.halt();U("viewFullMsg",n);}else{var h=j.get("parentNode"),o=null;if(j.hasAttribute("ymailto")){o=j.getAttribute("ymailto");}else{if(h.hasAttribute("ymailto")){o=h.getAttribute("ymailto");}}if(o){var k=N.extractEmailAddress(o);i.preventDefault();U("openMailToCompose",{viewId:X,email:k,mailto:o});}var g=null;if(j.hasAttribute("ymrd")){g=j.getAttribute("ymrd");}else{if(h.hasAttribute("ymrd")){g=h.getAttribute("ymrd");}}if(g){i.preventDefault();U("openMailToMRD",{viewId:X,mrdLink:g});}var c=j.getAttribute("href");if(A.UA.gecko&&c.charAt(0)=="#"){A.one(Z).one("body *[name="+c.slice(1)+"]").scrollIntoView(true);i.preventDefault();}if(J.test(c)){i.preventDefault();}}}}},W,R+" a");A.delegate("click",function(f){var d=A.one(W).one(".content"),c={viewId:X,scrollTop:d.get("scrollTop")};f.halt();U("viewFullMsg",c);},W,E);A.delegate("click",function(c){c.halt();U("unblockImages",{viewId:X});},W,G);A.delegate("click",function(c){c.halt();U("loadOptions",{viewId:X});},W,V);A.delegate("click",function(c){c.halt();},W,F);a.theMainWindow=window.theMainWindow?window.theMainWindow:{showFormWarning:function(){return true;},showLinkWarning:function(){return true;},showPasswordWarning:function(){return true;}};},registerContextMenuHandler:function(){var Z={},b=this,Y=b,X=b.id,a=b.doc,W=a.body;A.delegate("contextmenu",function(i){var f=C(i),j=f.node,c=i.target,d=f.action;if(!j){return;}if(d||j.hasAttribute("data-action")){i.halt();}if(d&&d=="contact-card-menu"){var m;if(j.hasClass("lozenge")){m=j;}else{var g=j.get("parentNode");if(g&&g.hasClass("lozenge")){m=g;}}var k=m.getAttribute("data-name"),l=m.ancestor(".lozengeContainer"),h=!A.Lang.isNull(l.one(".lozengeadd"));Z={viewId:X,x:m.getX(),y:m.getY()+m.get("region").height-m.get("docScrollY"),email:m.getAttribute("data-address")||k,name:k,region:m.get("region"),isInAB:h};if(c&&c.get("id")){Z.targetId=c.get("id");}U("contact-card-menu",Z);A.once("scroll",function(e){U("iframe:event",{"type":"click"});},b.yuiDoc.one("body > div.message"));}},W,S);},handleSetFocus:function(W){var c=this,b=c.yuiDoc,Z=b.one(W),X;if(A.UA.chrome){X=b.one(".info a");X&&X.focus();}if(!Z){return;}if(!Z.hasAttribute("tabIndex")){Z.setAttribute("tabIndex","0");}try{Z.focus();}catch(Y){}},registerKeyHandler:function(){var b=this,Y=b,X=b.id,a=b.doc,W=a.body,Z={"input":1,"textarea":1,"select":1};A.delegate("keydown",function(l){var m=l.metaKey||l.ctrlKey,n,c,d="",f,j,h=A.UA.os,i=(h=="windows"||h=="win"),k=l.target,g;if(l.keyCode==9&&(g=this.one(".hidefocus"))){if(k.get("nodeName").toLowerCase()==="a"&&k.get("parentNode").hasClass("hidefocus")){l.preventDefault();}g.removeClass("hidefocus");}if(l.keyCode==67){if(m){l.stopPropagation();j=A.one(W).one(".message-header").one(".lozengeContainer.pressed .lozenge");if(j){var f=a.activeElement;n=j.getAttribute("data-address");c=j.getAttribute("data-name");if(c){d=c+" <"+n+">";}else{d=n;}N.initializeCopyText(a);N.copyToClipboard(d,a,null);setTimeout(function(){f.focus();},0);}}}else{if((i&&l.shiftKey&&l.keyCode==121)||(!i&&l.ctrlKey&&l.shiftKey&&l.altKey&&l.keyCode==77)){l.preventDefault();A.common.Utils.simulateContextMenu(l.target,false);}}},W,S);A.on("keydown",function(h){var g=h.keyCode,c={viewId:X,keyCode:g||0,charCode:h.charCode||0,type:h.type||"keydown",ctrlKey:h.ctrlKey||false,altKey:h.altKey||false,shiftKey:h.shiftKey||false,metaKey:h.metaKey||false},f=h.target,d=f?f.get("tagName").toLowerCase():"";
if(d in Z){return;}if(!Y.fullView&&M){b.handleSetFocus(".message.content");M=false;}if(g==8||g==46){g==8&&h.preventDefault();if(!Y.fullView){b.handleSetFocus("body");M=true;}}if((g==219||g==221)&&(c.ctrlKey||c.metaKey)){h.preventDefault();}U("sendKeyEvent",c);},a);},showMore:function(W){var Y=this,X=Y.yuiDoc.one("#msg-header-"+W.field);X&&X.setContent(W.markup);Y.onUpdate();},handleActiveChange:function(W){var Z=this,Y=Z.yuiDoc,X;if(W==1&&A.UA.ie>=9&&Y.one("body").hasClass("showqr-expanded")){X=Y.one("textarea.qr_reply_field");X&&X.focus().blur();if(!Z.fullView){Z.handleSetFocus(".message.content");}}},onResetWidth:function(){if(NeoConfig.fullPage&&!NeoConfig.hasConv){if(!this.yuiDoc.one(".tripane.message.content")){return;}T=0;}},updateHeaderProfileImage:function(b){var a=A.one(this.doc.body),d=a.one(".message-header"),c=d.one(".update"),Z=d.one(".date"),W=d.one(".flag"),Y=a.one(".message-header .info.expanded"),X="mentos-enabled";if(Z&&W&&Y){Z.addClass(X);W.addClass(X);if(!c){Z.insert(b.html,"after");}else{c.insert(b.html,"replace");}Y.addClass(X);}},handleUpdateLozenges:function(W){K(A.one(this.doc.body),W);},handleMessageFlagStatus:function(){var X=this.yuiDoc.one("body "+S+" div.flag"),W=X&&X.hasClass("flagged");X&&X.toggleClass("flagged").set("title",strings[W?"str_msg_list_flag_attr":"str_msg_list_flagged_attr"]);X.one("a").set("aria-checked",!W);},updateConvFlagMarkup:function(W){var X=this.yuiDoc.one(".message-header .flag");if(X){W?X.addClass("flagged"):X.removeClass("flagged");}},updateMessageFlagMarkup:function(b,Z){var X=this.yuiDoc.one("#"+Z+"-"+b),Y,a=X&&X.one(".flag"),W;if(a){W=a.hasClass("flagged");Y=a.one("a");a&&a.toggleClass("flagged").set("title",strings[W?"str_msg_list_flag_attr":"str_msg_list_flagged_attr"]);Y&&Y.set("aria-checked",!W);}},updateConvReadMarkup:function(W){var X=this.yuiDoc.one(".message-header");if(X){W?X.removeClass("unread"):X.addClass("unread");}},updateMessageReadMarkup:function(Y,X,Z){var W=this.yuiDoc.one("#"+X+"-"+Y);if(W){Z?W.removeClass("unread"):W.addClass("unread");}},renderProfileImage:function(W,X){var Z=this,Y;A.each(X,function(b,a){Y=Z.yuiDoc.one("#"+W+"-"+a).one(".avatar");if(Y){Y.setContent(b.html);}});},showMessageWithBody:function(a){var b=this,Y=a.guid,X=a.msgItem,W=this.yuiDoc.one("#"+Y+"-"+X),Z=a.body;B.runMatchedAppJSBeforeRender(b,a.matchedAppIdList,a,function(c){try{W.replace(c);W=b.yuiDoc.one("#"+Y+"-"+X);if(Z.quotedText){W.one(".thread-quoted-body").setContent(Z.quotedText);}W.one(".thread-reply ").addClass("hidden");B.executePostRenderMsgReadApps(b,a);}catch(d){}});},replaceDocHTML:function(a,W){var d=this,f=d,c=a.loading,g=d.doc,Z=d.yuiDoc,X=g.body,b=a.body;if(!NeoConfig.fullPage||NeoConfig.hasConv){X.scrollIntoView();}var Y,e=f.cssLinks;while(Y=e.shift()){if(Y.parentNode){Y.parentNode.removeChild(Y);}}if(A.UA.ie){Z.all("iframe.om-messageread-app").each(function(i){var h=i._node,j=h.contentWindow.document;j.open();j.close();X.removeChild(h);});}if(b.truncated){X.setAttribute("data-truncated",1);}X.setAttribute("dir",NeoConfig.isRTL?"rtl":"ltr");if(NeoConfig.hasConv){X.className="threaded panescroll";}else{if(NeoConfig.fullPage){X.className="om-fullpage fullpage";}else{X.className="panescroll";}}Z.one("body").setContent(W);f.currentMessageId=a.messageid;!c&&U("sandboxStartStopwatch",{viewId:f.id,lv:1,msg:"OMMessageInDOM"},function(){if(f.postRenderTimer){clearTimeout(f.postRenderTimer);f.postRenderTimer=null;}f.postRenderTimer=setTimeout(function(){f.postRenderTimer=null;if(f.currentMessageId!==a.messageid){return;}if(b.scrollTop){node=Z.one(".content");node.set("scrollTop",b.scrollTop);}I=null;if(b.href&&!c){I=function(){g.location.hash=b.href;I=null;};if(!NeoConfig.fullPage||NeoConfig.hasConv){I();}}N.convertShortcuts(Z.one("body"),null,NeoConfig.fullPage);if(NeoConfig.fullPage&&!NeoConfig.hasConv){D=0;T=0;}if(!c){B.executePostRenderMsgReadApps(f,a);}if(NeoConfig.fullPage&&!NeoConfig.hasConv){d.onUpdate();}},0);});!c&&(A.UA.ie?setTimeout(function(){U("sandboxRenderComplete",{viewId:f.id});},0):U("sandboxRenderComplete",{viewId:f.id}));if(!c&&a.matchedAppIdList&&a.matchedAppIdList.length){B.runMatchedAppEvent("userEvent",f,a,B.userEventCallback);}},handleOnRender:function(W){var Y=this,X=W.data.matchedAppIdList;B.runMatchedAppJSBeforeRender(Y,X,W.data,function(Z){Y.replaceDocHTML(W.data,Z);});},initSandboxView:function(W){var X=this;X.fullView=W.fullView;X.loadCss(true);X.registerClickHandler();X.registerContextMenuHandler();X.registerKeyHandler();A.on("windowresize",function(){N.resizeSubject(X.yuiDoc);},X.win);if(NeoConfig.fullPage&&!NeoConfig.hasConv){A.Node.DOM_EVENTS.DOMSubtreeModified=true;X.yuiDoc.one("body").on("DOMSubtreeModified",function(){X.onUpdate();});}}});A.namespace("om.ui.sandbox").View=P;},"1.0.0",{requires:["base-base","mail-ui-messagepane-utils-shared","om-ui-sandbox-utils","om-ui-sandbox-messageread"]});YUI.add("om-ui-sandbox-datastore",function(A){_ds=A.namespace("om.ui.sandbox").DataStore={};_ds.ViewRegistry=(function(){var B={};return{get:function(F){var C=B[F];if(!C){var E=top.frames[F];B[F]=new A.om.ui.sandbox.View({id:F,win:E,doc:E.document});C=B[F];}else{if(C.win&&!C.doc){var D=C.win.document;C.doc=D;C.yuiDoc=A.one(D);}}return C;},getAll:function(){return B;},set:function(C){B[C.id]=C;},del:function(C){delete B[C];}};})();_ds.AppRegistry=(function(){var B={};return{set:function(D,C){return B[D]=C;},get:function(C){return B[C];},getListeners:function(C){return B[C]&&B[C].listeners;},del:function(C){delete B[C];},clear:function(E){var D,C;for(D in B){C=B[D].frame;if(C&&C.parentNode){C.parentNode.removeChild(C);}}B={};}};})();},"1.0.0",{requires:["om-ui-sandbox-view"]});YUI.add("om-ui-sandbox-messageread",function(E){var b=E.om.ui.sandbox.DataStore,M=b.ViewRegistry,a=b.AppRegistry;function W(c,Y){this.now=null;this.appId=c;this.viewId=Y;}W.prototype.start=function(){this.now=new Date().getTime();};W.prototype.stop=function(){if(this.now&&NeoUrlParams&&NeoUrlParams.mrtb){E.om.ui.sandbox.Utils.callInternalAPI("message.readAppTime",{time:(new Date().getTime())-this.now,appId:this.appId,viewId:this.viewId});this.now=null;}};function V(Y,c){window.onerror(c||Y.message,Y.fileName||null,Y.lineNumber||null);}function Q(d,Y,c){var f=[d.message," in ",c," function from ",Y.name," App (",Y.app,") "].join("");V(d,f);}function U(Y,e,h,g){h=h||document;var c=M.get(Y),d=h.createElement("link"),f=h.getElementsByTagName("head")[0];d.type="text/css";d.rel="stylesheet";d.href=e;c.cssLinks.push(d);f.insertBefore(d,g);}function H(Y){return Y.match(/\.js\s*$/);}function Z(c,Y){if(c.match(/http(?:s)?:\/\//)){return c;}if(c.charAt(0)!="/"){return c;}return Y.invokePrefix+c;}function G(Y,d){var f,c,e=[],g;for(f=0,c=Y.length;f<c;++f){g=Y[f];e.push(H(g)?'<script src="'+Z(g,d)+'"><\/script>':"<script>"+g+"<\/script>");}return e.join("");}function I(Y,g,c){var h=Y.shift(),d;if(!h){return;}if(H(h)){d=g.document.createElement("script");d.src=Z(h,c);d.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){I(Y,g,c);}};g.document.getElementsByTagName("head")[0].appendChild(d);}else{try{g.execScript(h);}catch(f){}I(Y,g,c);}}function L(i,g,c,Y){getDocument=function(){return parent.document;};getYUI=function(){return d(c).YUI;};var d=function(j){return top.frames[j];};var h=getDocument(),f=d(c),e=h.getElementsByTagName("head")[0].firstChild;YUI_config=(typeof YUI_config=="undefined")?{}:YUI_config;YUI_config.doc=h;YUI_config.onCSS=function(){var j=document.getElementsByTagName("link"),k;while(k=j[0]){f.insertAppCSS(Y,k.href,h,e);if(k.parentNode){k.parentNode.removeChild(k);}}};openmail=f.openmail.makeContextualApi({appId:i,instanceId:g,viewId:Y});}function F(Y,c){return["(",L,")(",'"',c.appId,'",','"',c.instanceId,'",','"',controllerViewId,'",','"',Y.id,'"',")"].join("");}function D(h,c,d){var i=a.get(h),Y=AppConfig.msgReadAppConfigs[h],f=Y?Y.msg_read_data:{};if(i){if(!E.Lang.isObject(i.listeners)){i.listeners={};}switch(c.event){case"message.read":i.listeners=E.mix(i.listeners,d,true);if(d.init){try{d.init.apply(i.win,[{YUI:YUI}]);}catch(g){Q(g,Y,"init");}}E.fire("msgRead:afterRender:"+h);break;case"message.user_event":i.listeners.userEvent=E.mix({cb:d},c,true,["label","tooltip"]);E.fire("msgRead:userEvent:"+h);break;}E.fire("msgRead:registered:"+h);if(d.beforeRender&&!f.preload){V({},['App "',Y.name,'" is NOT allowed to use beforeRender handler.'].join(""));}}}function K(c,Y){(function(){openmail=parent.openmail.makeContextualApi({appId:c,instanceId:Y});openmail.MessageRead={YUI:parent.YUI,setListeners:function(e){parent.yui.om.ui.sandbox.MessageRead.setAppMessageListeners(c,{event:"message.read"},e);}};var d=openmail.Application.setListener;openmail.Application.setListener=function(e,f){switch(e.event){case"message.read":case"message.user_event":parent.yui.om.ui.sandbox.MessageRead.setAppMessageListeners(c,e,f);break;default:d.call(openmail.Application,e,f);}};})();}function T(Y){return["(",K,")(",'"',Y.appId,'",','"',Y.instanceId,'"',")"].join("");}function P(c,d){var h=c.win,g=c.doc,Y=c.id,e=AppConfig.msgReadAppConfigs,f=g.getElementsByTagName("head")[0].firstChild;E.each(d,function(k){if(e[k]){var i=e[k],j=i.msg_read_data;if(!j.preload){E.each(j.css,function(l){U(Y,l,g,f);});}if(j.cssCombo){U(Y,j.cssCombo,g,f);}}});}function S(f,c,Y,e){var d,g=f.createElement("iframe");e=e||{};g.className="om-messageread-app";if(e.title){g.title=e.title;}f.body.appendChild(g);d=g.contentWindow.document;if(e.cb){e.cb(g);}if(e.view){Y.unshift(F(e.view,c));}else{Y=Y.slice();Y.unshift(T(c));}if(typeof _yuitest_coverage!="undefined"){Y.unshift("_yuitest_coverline = parent._yuitest_coverline;"+"_yuitest_coverfunc = parent._yuitest_coverfunc;");}if(E.UA.ie){d.open();d.close();I(Y,g.contentWindow,c);}else{d.open();d.write(["<!DOCTYPE html><html><head>",'<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',NeoConfig.ieCompatibleMode.ie9_ie8Compatible&&'<meta http-equiv="X-UA-Compatible" content="IE=8">',NeoConfig.ieCompatibleMode.ie8_ie7Compatible&&'<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">',G(Y,c),"</head></html>"].join(""));d.close();}return g;}var B=function(Y,c){var e=Y.doc,d=e.getElementsByTagName("head")[0].firstChild;E.each(c,function(h){var f=h.scripts,g=h.APIContext;E.each(h.css,function(l,k,j){U(Y.id,l,e,d);});if(f){S(e,g,f,{view:Y});}});};function R(i,Y,d,g){var f=a.getListeners(i),c=AppConfig.msgReadAppConfigs[i],j=new W(i,Y.id);try{f.afterRender({YUI:YUI,message:d,messageObject:d,messageNode:g._node,view:Y,document:Y.doc,timer:j});}catch(h){Q(h,c,"afterRender");}}function O(k,h,e,Y){var j=h.doc,g=a.getListeners(k),f=g.userEvent,c=AppConfig.msgReadAppConfigs[k],i=['<span class="btn left right small"><a title="',f.tooltip||c.name,'" href="#" role="button"><i>',f.label||c.name,"</i></a></span>"].join(""),d=E.Node.create(i,j);E.one(j).one(".message-header h3").appendChild(d);d.on("click",function(){try{g.userEvent.cb({YUI:YUI,message:e,messageObject:e,messageNode:Y._node,view:h,document:h.doc});}catch(l){Q(l,c,"userEvent");}});}function A(Y,d){var c=d.matchedAppIdList;if(c&&c.length){P(Y,c);C("afterRender",Y,d,R);}B(Y,d.appCodes);}function N(g,f,e,h){var i=g.doc,c=e.body,d=e.loading,j=NeoConfig.hasConv?c.content:['<div class="tripane message content">',c.content,NeoConfig.fullPage?'<div class="sb-padding"></div>':"","</div>"].join(""),Y=E.Node.create(j,i),k=NeoConfig.hasConv?Y:i.createDocumentFragment();if(!NeoConfig.hasConv){k.appendChild(Y._node);}if(c.msgBody&&!c.isChat){if(NeoConfig.hasConv){Y.one(".thread-body > .body").prepend(c.msgBody);}else{Y.one(".msg-body").prepend(c.msgBody);}}if(!d){E.each(f,function(o){var l=a.getListeners(o),n=new W(o,g.id);
if(l&&l.beforeRender){e.node=k;try{l.beforeRender({YUI:YUI,message:e,messageObject:e,messageNode:k,view:g,document:i,timer:n});}catch(m){Q(m,AppConfig.msgReadAppConfigs[o],"beforeRender");}}});}h(k);}function C(e,i,f,l){var j=i.doc,h=f.guid,c=f.msgItem,g=f.matchedAppIdList,d=NeoConfig.hasConv?"#"+h+"-"+c:".tripane.message.content",Y=E.one(j).one(d),k=AppConfig.msgReadAppConfigs;if(!Y){return;}E.each(g,function(p){if(k[p]){var m=k[p],o=a.get(p),n=a.getListeners(p);f.node=Y._node;if(n&&n[e]){l(p,i,f,Y);}else{E.once("msgRead:"+e+":"+p,function(){var q=a.getListeners(p);if(q&&q[e]){l(p,i,f,Y);}});!o&&X(p);}}});}function X(e){var d=[],c=AppConfig.msgReadAppConfigs[e],Y=c?c.msg_read_data:{};d=d.concat(Y.js);if(Y.preload&&Y.preloadJsCombo){d.push(Y.preloadJsCombo);}else{if(Y.jsCombo){d.push(Y.jsCombo);}}if(d.length){S(document,Y.context,d,{title:c.name,appId:e,cb:function(f){a.set(e,{frame:f,win:f.contentWindow,doc:f.contentWindow.document});}});}}function J(){var d,c,Y=AppConfig.msgReadAppConfigs;E.each(AppConfig.msgReadAppIdList,function(e){d=Y[e];c=d?d.msg_read_data:{};c.preload&&X(e);});}E.namespace("om.ui.sandbox.MessageRead");E.mix(E.om.ui.sandbox.MessageRead,{registerPreloadApps:J,runMatchedAppJSBeforeRender:N,executePostRenderMsgReadApps:A,runMatchedAppEvent:C,userEventCallback:O,afterRenderCallback:R,insertAppCSS:U,setAppMessageListeners:D});},"1.0.0",{requires:["om-ui-sandbox-datastore"]});var yui,cssLinks=null,AppConfig=null,NeoConfig=null,NeoUrlParams=null,controllerViewId=null;YUI.add("om-ui-messagepane-sandbox-controller",function(C){var E=C.mail.ui.MessagePaneUtils,B=C.om.ui.sandbox.DataStore,K=C.om.ui.sandbox.MessageRead,A=C.om.ui.sandbox.Utils.callInternalAPI,G=B.ViewRegistry,D=B.AppRegistry;yui=C;function F(M){var L=window.location.href.match(new RegExp(M+"=([^#&]*)","i"));return L?decodeURIComponent(L[1]):"";}function H(M){var R,Q,P,L=0,O=AppConfig.msgReadAppConfigs,N=G.getAll();AppConfig=M;C.each(N,function(S){R=C.one(S.doc);R.all("link").remove();R.all("style").remove();S.loadCss();});D.clear();C.each(AppConfig.msgReadAppIdList,function(S){Q=O[S];P=Q?Q.msg_read_data:{};if(P.preload){++L;C.on("msgRead:registered:"+S,function(){--L;if(!L){A("restartMessageRead");}});}});K.registerPreloadApps();}function J(O){var N=O.cmd,L=null,M=O.args;if(M.viewId){try{L=G.get(M.viewId);}catch(Q){return;}}switch(N){case"apprefresh":H(M.appConfig);break;case"initsandboxview":L.initSandboxView(M.data);break;case"closesandboxview":G.del(L.id);break;case"messageflagstatus":L.handleMessageFlagStatus();break;case"updateConvFlagMarkup":L.updateConvFlagMarkup(M.data.shouldFlag);break;case"updateMessageFlagMarkup":L.updateMessageFlagMarkup(M.data.msgId,M.data.guid);break;case"updateConvReadMarkup":L.updateConvReadMarkup(M.data.shouldMaskAsRead);break;case"updateMessageReadMarkup":L.updateMessageReadMarkup(M.data.msgIdx,M.data.guid,M.data.shouldMarkAsRead);break;case"showMessageWithBody":L.showMessageWithBody(M.data);break;case"handleupdatelozenges":L.handleUpdateLozenges(M.data);break;case"updateheaderprofileimage":L.updateHeaderProfileImage(M.data);break;case"renderProfileImage":var O=M.data;L.renderProfileImage(O.guid,O.msgs);break;case"updateheight":L.onUpdate();break;case"resetwidth":L.onResetWidth();break;case"setfocus":L.handleSetFocus(M.selector);break;case"activechange":L.handleActiveChange(M.newVal);break;case"render":L.handleOnRender(M.data);break;case"resizeSubject":var P=C.one(L.doc);E.resizeSubject(P);break;case"showMore":L.showMore(M);break;}}function I(){controllerViewId=F("vid");A("getSandboxPostLaunchConfig",{},function(L){cssLinks=L.cssLinks;NeoConfig=L.NeoConfig;AppConfig=L.appConfig;NeoUrlParams=L.NeoUrlParams;openmail.Application.setListener({event:"sandbox.controller"},J);A("registerSandboxController",{});K.registerPreloadApps();});}C.namespace("om.ui.OMMessagePaneSandboxController");C.mix(C.om.ui.OMMessagePaneSandboxController,{init:I});},"1.0.0",{requires:["mail-ui-messagepane-utils-shared","om-ui-sandbox-utils","om-ui-sandbox-view","om-ui-sandbox-datastore","om-ui-sandbox-messageread"]});YUI.add("common-utils",function(E){E.namespace("common.Utils");var B=E.common.Utils,D=E.Object,C=E.Lang,A=C.trim,F=/{{([^{}]*)}}/g;E.mix(B,{isEmpty:function(H){var G;if(H){for(G in H){return false;}}return true;},size:function(I){var G,H=0;for(G in I){H++;}return H;},congruent:function(I,H,G,K){var J=((I===H)||(G||(B.size(I)==B.size(H))));if(C.isString(I)){J=(I===H);}if(J&&(I!=H)){D.some(I,function(M,L){J=(K&&!!K[L])||(C.isObject(M)?B.congruent(M,H[L],G):(M==H[L]));return !J;},null,true);}return J;},diff:function(J,I,H){var G,K=H?J:B.merge({},J);if(I){D.each(K,function(M,L){G=C.isObject(M)?B.diff(M,I[L],true):(M!=I[L]);if(!G){delete K[L];}},null,true);}return(!B.isEmpty(K)||(J&&!I))&&K;},wcopy:function(I,G){var K=I&&(I.length||(I.length===0))&&Object.prototype.toString.call(I)=="[object Array]",H,J=I?(K?E.clone(I):E.Object(I)):I;G=G||{};if(!K){for(H in J){if((typeof J[H]=="object")&&J[H]){J[H]=G[H]?I[H]:B.wcopy(J[H]);}}}return J;},merge:function(M,L,K,I){var J,H,G;if(C.isObject(L)){M=(C.isObject(M)&&M)||{};for(J in L){if(I&&!L.hasOwnProperty(J)){continue;}if(C.isArray(L[J])){H=L[J];if(!M[J]||K){M[J]=[];}for(G=0;G<H.length;G++){M[J].push(B.merge(M[J][G],H[G],K,I));}}else{if(C.isObject(L[J])){if(!M[J]){M[J]={};}M[J]=B.merge(M[J],L[J],K,I);}else{if((K&&(M[J]!=L[J]))||C.isUndefined(M[J])){M[J]=L[J];}}}}}else{M=L;}return M;},assert:function(H,I,G,J){if(!H){I=I||"assertfail";E.use("common-utils-error",function(){var K=(J&&J())||"";B.error.report(I+" "+K,1,G);});}},substitute:function(M,L,I,H,G,K,J){if(typeof M!=="string"){return;}if(J){M=J.str||M;L=J.obj||L;I=J.formatters||I;H=J.args||H;G=J.strings||G;K=J.templates||K;}return M.replace(F,function(O,N){var Q,P,R=B.substitute;if(I&&(Q=(J&&J.formatters)?J.formatters[N]:I[N])){return(Q(L,H,J))||"";}else{if(L&&N in L){P=L[N];return typeof P==="string"&&P.match(F)?R(P,L,I,H,G,K,J):P;}else{if(G&&N in G){P=G[N];return P.match(F)?R(P,L,I,H,G,K,J):P;}else{if(K&&N in K){return R(K[N].base||K[N],L,I,H,G,K,J);}else{return"";}}}}});},regexpEscape:function(G){if(G==null){return null;}G=""+G;return G.replace(/([\^\/.*+?|()[\]{}\\=!:$])/g,"\\$1");},escapeHtml:function(H,G){if(H==null){return null;}H=""+H;H=H.replace(/&/g,"&amp;");H=H.replace(/</g,"&lt;");H=H.replace(/>/g,"&gt;");H=H.replace(/\"/g,"&quot;");H=H.replace(/\'/g,"&#39;");H=H.replace(/\\/g,"&#92;");H=H.replace(/&(?:amp;)+/g,"&amp;");if(G){H=H.replace(/&amp;#([A-Za-z0-9]+);/g,"&#$1;");}return H;},unescapeHtml:function(G){if(G==null){return null;}G=""+G;G=G.replace(/&amp;/g,"&");G=G.replace(/&lt;/g,"<");G=G.replace(/&gt;/g,">");G=G.replace(/&quot;/g,'"');G=G.replace(/&#39;/g,"'");G=G.replace(/&#92;/g,"\\");return G;},escapeStringField:function(G){return B.escapeHtml(B.unescapeHtml(G));},escapeEmailObject:function(G){return{email:B.escapeStringField(G.email),name:B.escapeStringField(G.name)};},escapeEmailObjectArray:function(J){var G=J.length,H=[],I=0;for(;I<G;I++){H.push(B.escapeEmailObject(J[I]));}return H;},removeHtml:function(G){if(G==null){return null;}G=""+G;G=G.replace(/<[^>]*>/g,"");return G;},getDataAction:function(K){var J=K.target,I=K.currentTarget,G=J.ancestor(function(L){return L.getAttribute("data-action")||L===I;},true),H=G?G.getAttribute("data-action"):0;return{node:G,action:H};},dateFormatter:function(H,G){if(Neo&&Neo.dateFormatter){return Neo.dateFormatter(H,G);}return"";},triggerDarla:function(G,H){!NeoConfig.noDarla&&E.use("mail-ui-darla",function(J){var I=J.mail.ui.darla;I&&I.trigger(G,H);});},loadDarlaAndExecute:function(G,H){if(H){E.use("darla-base","mail-ui-darla",function(){G(E);E.use("mail-track");});}else{E.use("darla-base","mail-ui-darla","mail-track",function(){G(E);});}},parseQueryString:function(G){var H,I={};G=G||window.location.search.replace(/^\?/,"");if(G&&G.length>1){H=G.split("?");I=E.QueryString.parse(H.length>1?H[1]:H[0]);}return I;},sanitizeString:function(H){var G=/[\u0000-\u001f\u007f]/g;return typeof H==="string"?A(H.replace(G,"")):H;},mergeQueryString:function(H,I){var G;if(E.Lang.isObject(I)){G=H.replace(/\?.*$/,"");I=E.merge(B.parseQueryString(H),I);H=G+"?"+E.QueryString.stringify(I);}return H;},setSelect:function(H,G){if(typeof H.addClass!=="undefined"){H=[H];}E.Array.each(H,function(I){var J=E.Node.getDOMNode(I);if(typeof J.onselectstart!=="undefined"){J.onselectstart=function(){if((window.event.srcElement||window.event.target).tagName==="INPUT"){return true;}else{return G;}};}else{if(typeof J.style.MozUserSelect!=="undefined"){J.style.MozUserSelect=G?"inherit":"-moz-none";}else{J.onmousedown=function(){return G;};}}});},onDemand:function(G,H){return function(){var J=this,I=arguments;E.use(H,function(){J[G].apply(J,I);});};},escapeRegexp:function(H){var G=/([\[|\]|\(|\)|])/g;return H.replace(G,"\\$1");},simulateContextMenu:function(K,H){var I,G=2,J,L;if(!K){return false;}K=(K._node)?K._node:K;if(K.ownerDocument.createEvent){J=E.one(K);L=J.getXY();if(H!==false&&(L[1]-E.DOM.docScrollY())<0){J.scrollIntoView();L=J.getXY();}L[1]-=E.DOM.docScrollY();I=K.ownerDocument.createEvent("MouseEvents");I.initMouseEvent("contextmenu",true,true,K.ownerDocument.defaultView,1,0,0,L[0],L[1],false,false,false,false,G,null);return !K.dispatchEvent(I);}else{if(K.ownerDocument.createEventObject){I=K.ownerDocument.createEventObject();I.button=G;return K.fireEvent("oncontextmenu",I);}}return false;},isBrowserCORSCapable:function(){return(("withCredentials" in new XMLHttpRequest())||typeof XDomainRequest!=="undefined");},convertToPlain:function(G){var H=document.createElement("div");H.innerHTML=G;return H.textContent||H.innerText;},makeHttpsUrl:function(G){if(G&&typeof G=="string"){G=G.replace(/^http:/,"https:");G=G.replace(/:80\//,":443/");}return G;}});if(NeoConfig&&NeoConfig.intl==="jp"){E.use("common-utils-jp");}},"1.0.0",{requires:["querystring-parse-simple"]});YUI.add("mail-ui-messagepane-warnings",function(D){D.namespace("mail.ui");var A=D.common.Utils.substitute,C=strings;function B(G){if(confirm(A([C["str_warning_msg_read_form_part1"],C["str_warning_msg_read_form_part2"]].join("  "),C))){G.submit();}return false;}function F(G){if(strings.str_cfg_tog_exlink_alert_page){window.open(strings.str_cfg_url_exlink_alert_page+encodeURIComponent(G),"new");return false;}if(confirm(A([C["str_warning_msg_read_link_part1"],C["str_warning_msg_read_link_part2"],C["str_warning_msg_read_link_part3"]].join("  "),C))){window.open(G.href);}return false;}function E(G){if(!G.warningShown){alert(A([C["str_warning_msg_read_password_part1"],C["str_warning_msg_read_password_part2"]].join("  "),C));G.warningShown=1;}}D.mail.ui.Warnings={showFormWarning:B,showLinkWarning:F,showPasswordWarning:E};},"1.0.0",{requires:["common-utils"]});