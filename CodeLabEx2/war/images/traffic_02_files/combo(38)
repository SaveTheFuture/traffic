YUI.add("lang/yim-lang_en-US",function(A){A.Intl.add("yim-lang","en-US",{"str_branding_mail":"Yahoo! Mail","str_btn_cancel":"Cancel","str_btn_ok":"OK","str_cancel":"Cancel","str_close":"Close","str_comp_font_menu_attr":"Font menu","str_comp_font_size_attr":"Font size menu","str_comp_loadheader":"Loading ...","str_comp_send_error":"Sorry, there was a problem sending your message","str_cont_add_contact_error_general":"An error occurred while trying to add the contact.","str_cont_add_contact_error_id_already_in_list":"{{user}} already exists in your {{str_cfg_branding_messenger}} List.","str_cont_add_contact_error_invalid_email":"Please enter a valid email address format: name@domain.com.","str_cont_add_contact_error_invalid_id":"{{user}} is not a valid {{str_cfg_branding_messenger}} ID.","str_cont_add_contact_error_max_reached":"You reached 1000 contacts, the maximum allowed number.","str_cont_add_email_label":"Email:","str_cont_add_email_option_primary":"Primary","str_cont_add_first_name_label":"First","str_cont_add_im_label":"Instant Message:","str_cont_add_last_name_label":"Last","str_cont_add_phone_label":"Phone:","str_cont_add_phone_option_home":"Home","str_cont_add_phone_option_mobile":"Mobile","str_cont_add_phone_option_work":"Work","str_cont_add_request_denied_body":"{{user}} has denied your request to add them to your {{str_cfg_branding_messenger}} List.","str_cont_add_request_denied_header":"Add to {{str_cfg_branding_messenger}} List Request Denied","str_cont_add_request_denied_message":"They responded with the following message:  {{response_text}}","str_cont_add_to_cont":"Add to Contacts","str_cont_list_default_group_empty":'Send IM and SMS from {{str_cfg_branding_messenger}}. <a href="javascript:;">Add a Contact</a>',"str_cont_list_default_group_id":"0","str_cont_list_default_group_name":"Online Contacts","str_cont_list_default_group_offline":"All contacts are currently offline.","str_cont_list_default_group_sign_out_msg":"You are signed out of {{str_cfg_branding_messenger}}. Click the{{bttn_img}}to sign in.","str_cont_list_default_mobile_group_id":"997","str_cont_list_default_mobile_group_name":"Mobile Contacts","str_cont_list_facebook_appname":'"Facebook Chat"',"str_cont_list_facebook_down_header":"Problem Connecting to Facebook","str_cont_list_facebook_down":"We are unable to sign you into Facebook Chat. Facebook is currently unavailable. Try again later.","str_cont_list_facebook_group_id":"999","str_cont_list_facebook_group_name":"Facebook Friends","str_cont_list_facebook_invalid_cred":"Link your Facebook account to {{str_cfg_branding}} and chat with your Facebook Friends from {{str_cfg_branding_messenger}}","str_cont_list_facebook_missing_cred":"Update your linked Facebook account to include Facebook Chat. Re-link your Facebook account so that you can chat with your Facebook Friends.","str_cont_list_facebook_sign_out_msg":"You are signed out of Facebook Chat. Click the{{bttn_img}}to sign in.","str_cont_list_status_away":"Away","str_cont_list_status_be_right_back":"Be right back","str_cont_list_status_busy":"Busy","str_cont_list_status_idle":"Idle","str_cont_list_status_not_at_home":"Not at home","str_cont_list_status_not_at_my_desk":"Not at my desk","str_cont_list_status_not_in_the_office":"Not in the office","str_cont_list_status_on_the_phone":"On the phone","str_cont_list_status_on_vacation":"On vacation","str_cont_list_status_out_to_lunch":"Out to lunch","str_cont_list_status_pending_add_request":"Pending add request","str_cont_list_status_stepped_out":"Stepped out","str_cont_list_top_contacts_group_name":"Top Contacts","str_cont_search_for":"Type contact information...","str_conv_add_requests":"Add Requests","str_conv_btn_accept":"Accept","str_conv_btn_accept_attr":"Allow {{conversation_yid}} to add me and see when I’m online","str_conv_btn_add_to_contacts":"Add to Contacts","str_conv_btn_add_to_contacts_attr":"Add {{conversation_yid}} to your Contacts","str_conv_btn_block":"Block","str_conv_btn_block_user_attr":"Add to Blocked List","str_conv_btn_block_user":"Block User","str_conv_btn_decline_attr":"Don't allow {{conversation_yid}} to add me or see when I'm online","str_conv_btn_decline":"Decline","str_conv_btn_hide_recent_conv":"Hide Recent Conversations","str_conv_btn_show_recent_conv":"Show Recent Conversations","str_conv_btn_start_conversation":"Start Conversation","str_conv_btn_unblock_user_attr":"Remove {{conversation_yid}} from your Blocked List","str_conv_btn_unblock_user":"Unblock User","str_conv_close_confirm":"You have unread messages, are you sure you want to close the window?","str_conv_conversations":"Conversations","str_conv_default_group":"Friends","str_conv_dialog_alert":"Alert","str_conv_dialog_confirm":"Confirm","str_conv_enter_phone_number_label":"Enter a mobile phone number for <b>{{conversation_user}}</b>:","str_conv_enter_phone_number_label_no_user":"a mobile phone number for <b>{{conversation_user}}</b>:","str_conv_error_empty_general":"All fields are required.","str_conv_example":"Example:","str_conv_imconv_new_hint":"Start a new instant message.<br>Enter a Messenger ID or an email address.","str_conv_im":"IM","str_conv_look_for":"Look for...","str_conv_mode-tray_btn_sms_attr":"Switch to SMS","str_conv_new_hint":"Start a new instant message or SMS message.<br>Enter a Messenger ID, email, or mobile number.","str_conv_new_message_browser_title":"{{conversation_user}} sent you a new message.","str_conv_no_contact_add_request":"<b>{{conversation_yid}}</b> would like to add you to his or her {{str_cfg_branding_messenger}} List.","str_conv_non_users_blocked":"<em>You are currently blocking messages from users who are not in your contact list.  To communicate with this user you will need to either add them to your contacts or change your privacy settings.</em>","str_conv_ntf_spam_reported":"<em>This message from <span><strong>{{userid}}</strong></span> has been reported as spam.</em>  They were also added to your Block List.  Unblock this person if you want to contact them.","str_conv_ntf_user_blocked":"<em>You have blocked <span><strong>{{userid}}</strong></span>.</em> You cannot send and receive instant messages from blocked users.","str_conv_ntf_user_unblocked":"<em><span><strong>{{userid}}</strong></span> has been removed from your Blocked List.</em>","str_conv_prompt_tab_btn_attr":"Change to display your conversations in a tab by default.","str_conv_prompt_tab_btn":"Change to Tab","str_conv_prompt_tab":"View {{str_cfg_branding_messenger}} Conversations in a tab!","str_conv_report_abuse_attr":"Report Abuse","str_conv_report_abuse":"Report Abuse","str_conv_report_abuse_title":"{{str_cfg_branding_messenger}} Report Abuse","str_conv_self_objective":"Me","str_conv_send_sms":"Send SMS","str_conv_signed_out_hint":"You are not signed in to {{str_cfg_branding_messenger}}. Please sign in to start a new conversation.","str_conv_smsconv_new_hint":"Start a new SMS message.<br>Enter a name or mobile number.","str_conv_sms_fees":"Wireless carrier charges may apply.","str_conv_sms_input_title":"Compose SMS","str_conv_sms":"SMS","str_conv_spam_reported_description_bl":"To permanently block this contact from sending you messages, add {{user}} to your Block list in {{str_cfg_generic_messenger}} Options.","str_conv_spam_reported_description_bnc":"To permanently block this contact from sending you messages, delete {{user}} from your Contacts list. Right click on display image, then choose Delete.","str_conv_spam_reported_description_bottom":"<strong>{{userid}}</strong> has also been blocked, and you will no longer receive messages from this user.","str_conv_spam_reported_description_top":"Thank you. Every IM you report as spam helps SpamGuard work better.","str_conv_spam_reported_title":"Spam Report Submitted","str_conv_tab_close_confirm":"You have unread messages, are you sure you want to close this conversation?","str_conv_typing":"{{conversation_user}} is typing...","str_conv_user_appears_offline":"<b>{{user}}</b> appears to be offline.","str_conv_user_invisible":"You currently appear offline to {{conversation_user}} (manage with Stealth Settings)","str_conv_user_notification_ssa_button":"Open {{str_cfg_branding_messenger}} Options","str_conv_user_offlineMessage_notice":"Messages sent to you while you were signed out:","str_conv_user_signed_back_in":"<b>{{conversation_user}}</b> has signed back in.","str_conv_user_signed_out":"<b>{{conversation_user}}</b> has signed out.","str_conv_user_sms_edit_number_attr":"Edit number","str_conv_user_sms_edit_number":"Edit number","str_conv_user_sms_learn_more_btn_attr":"Learn more","str_conv_user_sms_learn_more_btn":"Learn more","str_conv_user_sms_notice":"<b>{{conversation_user}}</b> ({{msg_sms_number}}) will receive your instant message as an SMS.","str_conv_user_sms_notice_error_failed_to_deliver":"SMS could not be sent to <b>{{number}}</b>. It may be an invalid mobile number, formatted incorrectly, or no longer in service.","str_conv_user_sms_notice_error_msg_blocked":"Phone number {{number}} cannot receive SMS messages at this time.","str_conv_user_sms_notice_error_number_empty":"An empty number is not supported.","str_conv_user_sms_notice_error_number_not_supported":"The number <b>{{number}}</b> is not supported.","str_conv_user_sms_notice_error_ration_breached":"<b>{{user}}</b> must reply to one of your messages before you can send any more.","str_conv_user_sms_notice_error_system_busy":"SMS could not be sent to {{number}}. The system is currently busy. Please try again later.","str_conv_user_statexfer_notice":"Your ongoing conversation with {{conversation_user}}...","str_conv_wrn_interop_add_request_pending_2":"Send {{user}} an SMS instead.","str_conv_wrn_interop_add_request_pending":"To IM with {{user}}, they must first accept your request to add them to your {{str_cfg_generic_messenger}} List contacts. Your request is still pending.","str_conv_wrn_unknown_interop_user_2":"To contact {{user}} right now, send an SMS.","str_conv_wrn_unknown_interop_user":"To send IM to {{user}}, they must first accept your request to add them to your {{str_cfg_generic_messenger}} List contacts.","str_conv_wrn_unknown_user":"<em><span><strong>{{userid}}</strong></span> is not in your contacts.</em>  Be careful when corresponding with people you don’t know. Never share private information with them.","str_country_argentina":"Argentina","str_country_australia":"Australia","str_country_brazil":"Brazil","str_country_canada":"Canada","str_country_chile":"Chile","str_country_china":"China","str_country_denmark":"Denmark","str_country_finland":"Finland","str_country_france":"France","str_country_germany":"Germany","str_country_greece":"Greece","str_country_hong_kong":"Hong Kong","str_country_india":"India","str_country_indonesia":"Indonesia","str_country_ireland":"Ireland","str_country_italy":"Italy","str_country_kuwait":"Kuwait","str_country_malaysia":"Malaysia","str_country_mexico":"Mexico","str_country_netherlands":"Netherlands","str_country_new_zealand":"New Zealand","str_country_norway":"Norway","str_country_pakistan":"Pakistan","str_country_peru":"Peru","str_country_philippines":"Philippines","str_country_poland":"Poland","str_country_romania":"Romania","str_country_singapore":"Singapore","str_country_south_korea":"South Korea","str_country_spain":"Spain","str_country_sweden":"Sweden","str_country_taiwan":"Taiwan","str_country_thailand":"Thailand","str_country_turkey":"Turkey","str_country_united_kingdom":"United Kingdom","str_country_united_states":"United States","str_country_venezuela":"Venezuela","str_country_vietnam":"Vietnam","str_del_contact_msg_ab_only_desc":"Are you sure you want to delete {{contact_highlighted}} from your {{str_cont_list_default_group_name}}?{{line_spacing}}This is a contact shared by {{str_cfg_generic_messenger}} and Mail. Deleting {{contact}} will also delete this contact from Mail.{{line_spacing}}Instead of deleting, you can change {{str_cont_list_default_group_name}} to show only {{str_cfg_generic_messenger}} List contacts in {{open_msg_link}}{{str_messenger_options}}{{close_msg_link}}.","str_del_contact_msg_also_delete_ab":"Also delete from {{str_cfg_branding_mail}} Contacts","str_del_contact_msg_header":"Delete Contact","str_del_contact_msg_messenger_desc":"Are you sure you want to delete {{contact_highlighted}} from your {{str_cfg_generic_messenger}} List contacts?","str_del_contact_msg_not_deleted_ab":"Because {{contact_highlighted}} is a contact shared by {{str_cfg_generic_messenger}} and Mail, {{contact_highlighted}} may continue to show in {{str_cont_list_default_group_name}}.{{line_spacing}}You can change {{str_cont_list_default_group_name}} to show only {{str_cfg_generic_messenger}} List contacts in {{open_msg_link}}{{str_messenger_options}}{{close_msg_link}}.","str_delete":"Delete","str_error_btn_reconnect":"Reconnect","str_error_disconnected_error":"You have been disconnected from {{str_cfg_branding_messenger}}.","str_error_loading_recent_messages":"Sorry, problem loading conversation history.","str_error_logged_out_another":"You have been signed out because you signed into a different computer or device.","str_error_recent_messages_empty":"You have no recent conversations with {{contact}}.","str_error_reconnected_message":"You have successfully signed in.","str_form_lbl_im_lotus":"Lotus Sametime","str_form_lbl_im_mslcs":"Microsoft LCS","str_form_lbl_im_msn":"Windows Live (MSN)","str_label_sign_in_facebookchat":"Sign In To Facebook Chat button","str_label_sign_in_messenger":"Sign In To {{str_cfg_branding_messenger}} button","str_mail_dateformat_AM_l10n":"AM","str_mail_dateformat_PM_l10n":"PM","str_mail_month_abbr_april":"Apr","str_mail_month_abbr_august":"Aug","str_mail_month_abbr_december":"Dec","str_mail_month_abbr_february":"Feb","str_mail_month_abbr_january":"Jan","str_mail_month_abbr_july":"Jul","str_mail_month_abbr_june":"Jun","str_mail_month_abbr_march":"Mar","str_mail_month_abbr_may":"May","str_mail_month_abbr_november":"Nov","str_mail_month_abbr_october":"Oct","str_mail_month_abbr_september":"Sep","str_mail_month_april":"April","str_mail_month_august":"August","str_mail_month_december":"December","str_mail_month_february":"February","str_mail_month_january":"January","str_mail_month_july":"July","str_mail_month_june":"June","str_mail_month_march":"March","str_mail_month_may":"May","str_mail_month_november":"November","str_mail_month_october":"October","str_mail_month_september":"September","str_mail_weekday_abbr_friday":"Fri","str_mail_weekday_abbr_monday":"Mon","str_mail_weekday_abbr_saturday":"Sat","str_mail_weekday_abbr_sunday":"Sun","str_mail_weekday_abbr_thursday":"Thu","str_mail_weekday_abbr_tuesday":"Tue","str_mail_weekday_abbr_wednesday":"Wed","str_mail_weekday_friday":"Friday","str_mail_weekday_monday":"Monday","str_mail_weekday_saturday":"Saturday","str_mail_weekday_sunday":"Sunday","str_mail_weekday_thursday":"Thursday","str_mail_weekday_tuesday":"Tuesday","str_mail_weekday_wednesday":"Wednesday","str_menu_appear_offline":"Appear Offline to {{contact_name}}","str_menu_appear_online":"Appear Online to {{contact_name}}","str_menu_appear_permanently_offline":"Appear Permanently Offline to {{contact_name}}","str_menu_available":"Available","str_menu_busy":"Busy","str_menu_contact_delete":"Delete Contact","str_menu_email":"Email","str_menu_im_attr":"Instant Message","str_menu_im":"Instant Message","str_menu_im_shortcut":"I","str_menu_invisible":"Invisible to Everyone","str_menu_messenger_options":"{{str_cfg_branding_messenger}} Options","str_menu_new_im":"Instant Message","str_menu_report_abuse":"Report Abuse","str_menu_report_spam":"Report as Spam","str_menu_send_text":"SMS","str_menu_sign_in_facebookchat":"Sign In To Facebook Chat","str_menu_sign_in_messenger":"Sign In To {{str_cfg_branding_messenger}}","str_menu_sign_out_facebookchat":"Sign Out of Facebook Chat","str_menu_sign_out_messenger":"Sign Out of {{str_cfg_branding_messenger}}","str_menu_sms_shortcut":"T","str_menu_sms":"SMS","str_menu_view_facebook_profile":"View Facebook Profile","str_menu_view_profile":"View Profile","str_more":"More","str_msgr_em_angel":"angel","str_msgr_em_angry":"angry","str_msgr_em_applause":"applause","str_msgr_em_batting_eyelashes":"batting eyelashes","str_msgr_em_big_grin":"big grin","str_msgr_em_big_hug":"big hug","str_msgr_em_blushing":"blushing","str_msgr_em_broken_heart":"broken heart","str_msgr_em_call_me":"call me","str_msgr_em_catch":"catch","str_msgr_em_cheer":"cheer","str_msgr_em_clown":"clown","str_msgr_em_cold":"cold","str_msgr_em_confused":"confused","str_msgr_em_cook":"cook","str_msgr_em_cool":"cool","str_msgr_em_cowboy":"cowboy","str_msgr_em_crying":"crying","str_msgr_em_daydreaming":"day dreaming","str_msgr_em_devilish":"devilish","str_msgr_em_dizzy":"dizzy","str_msgr_em_doh":"d'oh!","str_msgr_em_down_on_luck":"down on luck","str_msgr_em_drooling":"drooling","str_msgr_em_eat":"eat","str_msgr_em_exercise":"exercise","str_msgr_em_fight":"fight","str_msgr_em_gift":"gift","str_msgr_em_give_up":"give up","str_msgr_em_high_five":"high five","str_msgr_em_hot":"hot","str_msgr_em_hypnotized":"hypnotized","str_msgr_em_kiss":"kiss","str_msgr_em_label":"{{shortcut}} {{description}}","str_msgr_em_laughing":"laughing","str_msgr_em_liar":"liar","str_msgr_em_loser":"loser","str_msgr_em_lovestruck":"lovestruck","str_msgr_em_music":"music","str_msgr_em_nail_biting":"nail biting","str_msgr_em_nerd":"nerd","str_msgr_em_not_talking":"not talking","str_msgr_em_on_the_phone":"on the phone","str_msgr_em_party":"party","str_msgr_em_phbbbt":"phbbbt","str_msgr_em_play_game":"play game","str_msgr_em_puke":"puke","str_msgr_em_raised_eyebrow":"raised eyebrow","str_msgr_em_rofl":"rolling on the floor laughing","str_msgr_em_rolling_eyes":"rolling eyes","str_msgr_em_sad":"sad","str_msgr_em_searching":"searching","str_msgr_em_shh":"don't tell anyone shh!","str_msgr_em_sick":"sick","str_msgr_em_sigh":"sigh","str_msgr_em_silly":"silly","str_msgr_em_sing":"sing","str_msgr_em_sleepy":"sleepy","str_msgr_em_smile":"smile","str_msgr_em_smug":"smug","str_msgr_em_spooky":"spooky","str_msgr_em_straight_face":"straight face","str_msgr_em_studying":"studying","str_msgr_em_surprise":"surprise","str_msgr_em_talk_to_the_hand":"talk to the hand","str_msgr_em_thinking":"thinking","str_msgr_em_time_out":"time out","str_msgr_em_tongue":"tongue","str_msgr_em_tv":"tv","str_msgr_em_unlucky":"unlucky","str_msgr_em_waiting":"waiting","str_msgr_em_wave":"wave","str_msgr_em_whew":"whew!","str_msgr_em_wink":"wink","str_msgr_em_wits_end":"at wits' end","str_msgr_em_worried":"worried","str_msgr_em_yawn":"yawn","str_msgr_server_error_10":"The operation failed because you have reached the maximum number of ignored users.","str_msgr_server_error_12":"The operation failed because the user is in your Contact List.","str_msgr_server_error_1":"There was a problem handling your request, please retry the operation.","str_msgr_server_error_28":"Your session has expired, please login and try again.","str_msgr_server_error_2":"The operation failed because the user already exists.","str_msgr_server_error_32":"The operation failed because the Group ID is invalid.","str_msgr_server_error_33":"The operation failed because the user is in your Ignore List.","str_msgr_server_error_3":"The operation failed because the user does not exist.","str_msgr_server_error_42":"The operation failed because you have reached the maximum number of pending Add Requests.","str_msgr_server_error_4":"Authentication failed.","str_msgr_server_error_53":"The login failed because you have reached the maximum number of simultaneous sessions.","str_msgr_server_error_59":"Failed to send the message because the user appears to be offline.","str_msgr_server_error_6":"The operation failed because you have reached the maximum number of contacts.","str_msgr_server_error_7":"The operation failed because you have reached the maximum number of groups.","str_msgr_server_error_8":"The operation failed because the group already exists.","str_msgr_server_error_self":"The operation failed because this is the signed in user.","str_nav_opt_msg_title":"Messenger Options","str_new_conversation":"New Conversation","str_new_im":"New Instant Message","str_new_sms":"New SMS Message","str_offline_msg_reportasspam":'<em>This message from <span style="font-weight:bold;">{{user}}</span> has been reported as spam</em>.',"str_offline_msg_report_spam":"Report Spam","str_opt_msg_blocked_ids_add_title":"Ignore User","str_opt_msg_general_history_attr":"Click to disable conversation archiving","str_opt_msg_general_history_description":"{{str_cfg_branding_messenger}} can keep a history of all your conversations. You can browse and search your history from any computer you sign in to.","str_opt_msg_general_history_disabled_attr":"Click to enable conversation archiving","str_opt_msg_phonecountry_label":"{{country_name}} (+{{country_code}})","str_save":"Save","str_session_display_name_order_no_trans":"{{first}} {{last}}","str_start_new_conversation_attr":"Start new conversation","str_window_btn_minimize":"Minimize","str_window_btn_popin":"Pop in conversation back to {{str_cfg_branding_messenger}}","str_window_btn_popout":"Pop out conversation to a separate window","str_window_btn_restore":"Restore","str_window_title_addcontact":"{{str_cfg_branding_messenger}} Add Contact Dialog","str_window_title_alert":"{{str_cfg_branding_messenger}} Confirm Dialog","str_window_title_conversation":"{{str_cfg_branding_messenger}} Conversation Window","str_window_title_main":"{{str_cfg_branding_messenger}} Contact List","str_window_title_options":"{{str_cfg_branding_messenger}} Options Dialog","str_window_title_signout":"{{str_cfg_branding_messenger}} Sign Out Confirmation Dialog","str_window_title_smsinput":"{{str_cfg_branding_messenger}} SMS Number Input Dialog"});
},"@VERSION@");YUI.add("yim-lang",function(C){var B="yim-lang";var A={NAME:B,STRINGS:C.Intl.get(B),getLang:function(){return C.Intl.getLang(B);},get:function(E){var D=A.STRINGS[E];return D;},isCJKV:function(){if(A.getLang()=="ko-KR"||A.getLang()=="zh-Hans-CN"||A.getLang()=="zh-Hant-HK"||A.getLang()=="zh-Hant-TW"||A.getLang()=="vi-VN"){return true;}else{return false;}},isCJK:function(){return(A.isCJKV()&&A.getLang()!="vi-VN");},isRTL:function(){var D=window.launchData;if(D){return D.rtl;}return false;},isBIDI:function(){var D=window.launchData;if(D){if(D.urlParams&&D.urlParams.ymsgrrtl){return true;}if(D.intl=="xa"||D.intl=="xe"||A.getLang().indexOf("ar-JO")>-1||A.getLang().indexOf("ur-PK")>-1||A.getLang().indexOf("he-IL")>-1){return true;}}return false;}};C.namespace("Messenger").Lang=A;},"@VERSION@",{requires:["intl"],lang:["ar-JO","bg-BG","bn-BD","bn-IN","cs-CZ","da-DK","de-AT","de-CH","de-DE","el-GR","en-GB","en-US","es-AR","es-ES","es-MX","es-US","et-EE","fi-FI","fil-PH","fr-BE","fr-CA","fr-CH","fr-FR","gu-IN","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-CH","it-IT","kn-IN","ko-KR","lt-LT","lv-LV","ml-IN","mr-IN","ms-MY","nb-NO","nl-BE","nl-NL","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","sr-Cyrl-RS","sv-SE","ta-IN","te-IN","th-TH","ti-PH","tl-PH","tr-TR","uk-UA","ur-PK","vi-VN","zh-Hans-CN","zh-Hant-HK","zh-Hant-TW"]});YUI.add("lang/yim-intl_en-US",function(A){A.Intl.add("yim-intl","en-US",{"str_urls_report_abuse":"http://help.yahoo.com/l/us/yahoo/messenger/forms/abusetranscript.html","str_urls_sms_learn_more":"http://help.yahoo.com/l/us/yahoo/mail/ymail/chat/sms-11.html","str_cfg_branding_messenger":"Yahoo! Messenger","str_cfg_generic_messenger":"Messenger","str_cfg_branding":"Yahoo!"});},"@VERSION@");YUI.add("yim-intl",function(C){var B="yim-intl";var A={NAME:B,STRINGS:C.Intl.get(B),getLang:function(){return C.Intl.getLang(B);},get:function(E){var D=C.Messenger.Lang.get(E)||A.STRINGS[E];if(C.Lang.isUndefined(D)||C.Lang.isNull(D)){if(launchData&&launchData.strings&&launchData.strings[E]){return launchData.strings[E];}else{return"";}}return D;},isCJKV:function(){return C.Messenger.Lang.isCJKV();},isCJK:function(){return C.Messenger.Lang.isCJK();},isRTL:function(){return C.Messenger.Lang.isRTL();},isBIDI:function(){return C.Messenger.Lang.isBIDI();}};C.namespace("Messenger").Intl=A;},"@VERSION@",{requires:["intl"],lang:["ar-EG","ar-JO-nokia","ar-JO","ar-MA","ar-SA","bg-BG","bn-BD","bn-IN","cs-CZ","da-DK","de-AT","de-CH","de-DE","el-GR","en-AU","en-CA-rogers","en-CA","en-GB-bt","en-GB","en-IE","en-IN-mts","en-IN","en-MY","en-NZ","en-PH","en-SG","en-US-ftr","en-US-sbc","en-US-vzn","en-US","en-ZA","es-AR-nokia","es-AR","es-CL-nokia","es-CL","es-CO-nokia","es-CO","es-ES-nokia","es-ES","es-MX-nokia","es-MX","es-PE-nokia","es-PE","es-US-nokia","es-US","es-VE-nokia","es-VE","et-EE","fi-FI","fil-PH","fr-BE","fr-CA-rogers","fr-CA","fr-CH","fr-FR","gu-IN","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-CH","it-IT","kn-IN","ko-KR-nokia","ko-KR","lt-LT","lv-LV","ml-IN","mr-IN","ms-MY-nokia","ms-MY","nl-BE","nl-NL","no-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU-nokia","ru-RU","sk-SK","sl-SL","sr-Cyrl-RS","sv-SE","ta-IN","te-IN","th-TH","tr-TR-nokia","tr-TR","uk-UA","ur-PK-nokia","ur-PK","vi-VN","zh-Hans-CN-nokia","zh-Hans-CN","zh-Hant-HK-nokia","zh-Hant-HK","zh-Hant-TW-nokia","zh-Hant-TW"]});YUI.add("classnamemanager",function(C){var B="classNamePrefix",D="classNameDelimiter",A=C.config;A[B]=A[B]||"yui3";A[D]=A[D]||"-";C.ClassNameManager=function(){var E=A[B],F=A[D];return{getClassName:C.cached(function(){var G=C.Array(arguments);if(G[G.length-1]!==true){G.unshift(E);}else{G.pop();}return G.join(F);})};}();},"@VERSION@");YUI.add("substitute",function(g){var b=g.Lang,d="dump",f=" ",c="{",e="}",a=function(A,l,t,h){var q,p,n,y,x,z,w=[],m,r,u=A.length;for(;;){q=A.lastIndexOf(c,u);if(q<0){break;}p=A.indexOf(e,q);if(q+1>=p){break;}m=A.substring(q+1,p);y=m;z=null;n=y.indexOf(f);if(n>-1){z=y.substring(n+1);y=y.substring(0,n);}x=l[y];if(t){x=t(y,x,z);}if(b.isObject(x)){if(!g.dump){x=x.toString();}else{if(b.isArray(x)){x=g.dump(x,parseInt(z,10));}else{z=z||"";r=z.indexOf(d);if(r>-1){z=z.substring(4);}if(x.toString===Object.prototype.toString||r>-1){x=g.dump(x,parseInt(z,10));}else{x=x.toString();}}}}else{if(!b.isString(x)&&!b.isNumber(x)){x="~-"+w.length+"-~";w[w.length]=m;}}A=A.substring(0,q)+x+A.substring(p+1);if(!h){u=q-1;}}for(q=w.length-1;q>=0;q=q-1){A=A.replace(new RegExp("~-"+q+"-~"),c+w[q]+e,"g");}return A;};g.substitute=a;b.substitute=a;},"@VERSION@",{optional:["dump"]});YUI.add("base-base",function(b){var i=b.Object,k=b.Lang,j=".",g="destroy",p="init",o="initialized",h="destroyed",d="initializer",m="bubbleTargets",e="_bubbleTargets",c=Object.prototype.constructor,l="deep",q="shallow",n="destructor",a=b.Attribute;function f(){b.stamp(this);a.call(this);var r=b.Plugin&&b.Plugin.Host;if(this._initPlugins&&r){r.call(this);}if(this._lazyAddAttrs!==false){this._lazyAddAttrs=true;}this.name=this.constructor.NAME;this._eventPrefix=this.constructor.EVENT_PREFIX||this.constructor.NAME;this.init.apply(this,arguments);}f._ATTR_CFG=a._ATTR_CFG.concat("cloneDefaultValue");f.NAME="base";f.ATTRS={initialized:{readOnly:true,value:false},destroyed:{readOnly:true,value:false}};f.prototype={init:function(r){this._yuievt.config.prefix=this._eventPrefix;this.publish(p,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defInitFn});this._preInitEventCfg(r);this.fire(p,{cfg:r});return this;},_preInitEventCfg:function(s){if(s){if(s.on){this.on(s.on);}if(s.after){this.after(s.after);}}var t,r,v,u=(s&&m in s);if(u||e in this){v=u?(s&&s.bubbleTargets):this._bubbleTargets;if(k.isArray(v)){for(t=0,r=v.length;t<r;t++){this.addTarget(v[t]);}}else{if(v){this.addTarget(v);}}}},destroy:function(){this.publish(g,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defDestroyFn});this.fire(g);this.detachAll();return this;},_defInitFn:function(r){this._initHierarchy(r.cfg);if(this._initPlugins){this._initPlugins(r.cfg);}this._set(o,true);},_defDestroyFn:function(r){this._destroyHierarchy();if(this._destroyPlugins){this._destroyPlugins();}this._set(h,true);},_getClasses:function(){if(!this._classes){this._initHierarchyData();}return this._classes;},_getAttrCfgs:function(){if(!this._attrs){this._initHierarchyData();}return this._attrs;},_filterAttrCfgs:function(v,s){var t=null,r,u=v.ATTRS;if(u){for(r in u){if(u.hasOwnProperty(r)&&s[r]){t=t||{};t[r]=s[r];delete s[r];}}}return t;},_initHierarchyData:function(){var t=this.constructor,s=[],r=[];while(t){s[s.length]=t;if(t.ATTRS){r[r.length]=t.ATTRS;}t=t.superclass?t.superclass.constructor:null;}this._classes=s;this._attrs=this._aggregateAttrs(r);},_aggregateAttrs:function(y){var v,z,u,r,A,s,x,t=f._ATTR_CFG,w={};if(y){for(s=y.length-1;s>=0;--s){z=y[s];for(v in z){if(z.hasOwnProperty(v)){u=b.mix({},z[v],true,t);r=u.value;x=u.cloneDefaultValue;if(r){if((x===undefined&&(c===r.constructor||k.isArray(r)))||x===l||x===true){u.value=b.clone(r);}else{if(x===q){u.value=b.merge(r);}}}A=null;if(v.indexOf(j)!==-1){A=v.split(j);v=A.shift();}if(A&&w[v]&&w[v].value){i.setValue(w[v].value,A,r);}else{if(!A){if(!w[v]){w[v]=u;}else{b.mix(w[v],u,true,t);}}}}}}}return w;},_initHierarchy:function(w){var t=this._lazyAddAttrs,x,y,z,u,s,v=this._getClasses(),r=this._getAttrCfgs();for(z=v.length-1;z>=0;z--){x=v[z];y=x.prototype;if(x._yuibuild&&x._yuibuild.exts){for(u=0,s=x._yuibuild.exts.length;u<s;u++){x._yuibuild.exts[u].apply(this,arguments);}}this.addAttrs(this._filterAttrCfgs(x,r),w,t);if(y.hasOwnProperty(d)){y.initializer.apply(this,arguments);}}},_destroyHierarchy:function(){var v,s,u,r,t=this._getClasses();for(u=0,r=t.length;u<r;u++){v=t[u];s=v.prototype;if(s.hasOwnProperty(n)){s.destructor.apply(this,arguments);}}},toString:function(){return this.name+"["+b.stamp(this,true)+"]";}};b.mix(f,a,false,null,1);f.prototype.constructor=f;b.Base=f;},"@VERSION@",{requires:["attribute-base"]});YUI.add("base-pluginhost",function(c){var a=c.Base,b=c.Plugin.Host;c.mix(a,b,false,null,1);a.plug=b.plug;a.unplug=b.unplug;},"@VERSION@",{requires:["base-base","pluginhost"]});YUI.add("base-build",function(d){var b=d.Base,a=d.Lang,c;b._build=function(f,n,r,v,u,q){var w=b._build,g=w._ctor(n,q),k=w._cfg(n,q),t=w._mixCust,p=k.aggregates,e=k.custom,j=g._yuibuild.dynamic,o,m,h,s;if(j&&p){for(o=0,m=p.length;o<m;++o){h=p[o];if(n.hasOwnProperty(h)){g[h]=a.isArray(n[h])?[]:{};}}}for(o=0,m=r.length;o<m;o++){s=r[o];d.mix(g,s,true,null,1);t(g,s,p,e);g._yuibuild.exts.push(s);}if(v){d.mix(g.prototype,v,true);}if(u){d.mix(g,w._clean(u,p,e),true);t(g,u,p,e);}g.prototype.hasImpl=w._impl;if(j){g.NAME=f;g.prototype.constructor=g;}return g;};c=b._build;d.mix(c,{_mixCust:function(g,f,i,h){if(i){d.aggregate(g,f,true,i);}if(h){for(var e in h){if(h.hasOwnProperty(e)){h[e](e,g,f);}}}},_tmpl:function(e){function f(){f.superclass.constructor.apply(this,arguments);}d.extend(f,e);return f;},_impl:function(h){var n=this._getClasses(),m,f,e,k,o,g;for(m=0,f=n.length;m<f;m++){e=n[m];if(e._yuibuild){k=e._yuibuild.exts;o=k.length;for(g=0;g<o;g++){if(k[g]===h){return true;}}}}return false;},_ctor:function(e,f){var h=(f&&false===f.dynamic)?false:true,i=(h)?c._tmpl(e):e,g=i._yuibuild;if(!g){g=i._yuibuild={};}g.id=g.id||null;g.exts=g.exts||[];g.dynamic=h;return i;},_cfg:function(e,f){var g=[],j={},i,h=(f&&f.aggregates),l=(f&&f.custom),k=e;while(k&&k.prototype){i=k._buildCfg;if(i){if(i.aggregates){g=g.concat(i.aggregates);}if(i.custom){d.mix(j,i.custom,true);}}k=k.superclass?k.superclass.constructor:null;}if(h){g=g.concat(h);}if(l){d.mix(j,f.cfgBuild,true);}return{aggregates:g,custom:j};},_clean:function(m,k,g){var j,f,e,h=d.merge(m);for(j in g){if(h.hasOwnProperty(j)){delete h[j];}}for(f=0,e=k.length;f<e;f++){j=k[f];if(h.hasOwnProperty(j)){delete h[j];}}return h;}});b.build=function(g,e,h,f){return c(g,e,h,null,null,f);};b.create=function(e,h,g,f,i){return c(e,h,g,f,i);};b.mix=function(e,f){return c(null,e,f,null,null,{dynamic:false});};b._buildCfg={custom:{ATTRS:function(j,h,f){h.ATTRS=h.ATTRS||{};if(f.ATTRS){var g=f.ATTRS,i=h.ATTRS,e;for(e in g){if(g.hasOwnProperty(e)){i[e]=i[e]||{};d.mix(i[e],g[e],true);}}}}},aggregates:["_PLUG","_UNPLUG"]};},"@VERSION@",{requires:["base-base"]});YUI.add("base",function(a){},"@VERSION@",{after:["attribute-complex"],use:["base-base","base-pluginhost","base-build"]});YUI.add("globalconfig",function(F){var A=YUI.namespace("Messenger"),D=window.launchData||{},B=D.userPrefs||{},C=F.Messenger.RequestManager,E={},G={"us":{name:"united_states",format:"408-345-1212",code:"1",idd:["011"],ndd:["1"],examples:["(408) 345-1212","+1 408-345-1212","+91 98-2424-5353"]},"ca":{name:"canada",format:"604-345-1212",code:"1",idd:["011"],ndd:["1"],examples:["(604) 345-1212","+1 604-345-1212","+91 98-2424-5353"]},"hk":{name:"hong_kong",format:"9234-5678",code:"852",idd:["001"],ndd:[],examples:["9234-5678","+852 9234-5678","+1 (408) 345-1212"]},"id":{name:"indonesia",format:"86-2424-5353",code:"62",idd:["001","008"],ndd:["0"],examples:["86-2424-5353","+62 86-2424-5353","+1 (408) 345-1212"]},"in":{name:"india",format:"98-2424-5353",code:"91",idd:["00"],ndd:["0"],examples:["98-2424-5353","+91 98-2424-5353","+1 (408) 345-1212"]},"kr":{name:"south_korea",format:"14-567-890",code:"82",idd:["001","002"],ndd:["0"],examples:["14-567-890","+82 14-567-890","+1 (408) 345-1212"]},"kw":{name:"kuwait",format:"9123-4567",code:"965",idd:["00"],ndd:["0"],examples:["9123-4567","+965 9123-4567","+1 (408) 345-1212"]},"my":{name:"malaysia",format:"12-345-6789",code:"60",idd:["00"],ndd:["0"],examples:["12-345-6789","+60 12-345-6789","+1 (408) 345-1212"]},"ph":{name:"philippines",format:"917-234-5678",code:"63",idd:["00"],ndd:["0"],examples:["917-234-5678","+63 917-234-5678","+1 (408) 345-1212"]},"pk":{name:"pakistan",format:"32-3456-7890",code:"92",idd:["00"],ndd:["0"],examples:["32-3456-7890","+92 32-3456-7890","+1 (408) 345-1212"]},"th":{name:"thailand",format:"8-1234-5678",code:"66",idd:["001"],ndd:["0"],examples:["8-1234-5678","+66 8-1234-5678","+1 (408) 345-1212"]},"vn":{name:"vietnam",format:"902-345-678",code:"84",idd:["00"],ndd:["0"],examples:["902-345-678","+84 902-345-678","+1 (408) 546-1212"]}};if(!A.GlobalConfig){A.GlobalConfig=(function(){var H=F.Messenger.Intl;function I(J){I.superclass.constructor.apply(this,arguments);}I.NAME="yim-globalconfig";I.NETWORK_CAPABILITIES={"yahoo":{"video":true,"voice":true,"filetransfer":true,"stealthsettings":true,"ssa":true,"photosharing":true,"addbuddy":true,"sms":true},"sms":{"addbuddy":true,"sms":true},"facebook":{"video":false,"voice":false,"filetransfer":false,"stealthsettings":false,"ssa":false,"addbuddy":false,"sms":false},"msn":{"video":false,"voice":false,"filetransfer":false,"stealthsettings":true,"ssa":false,"addbuddy":true,"sms":true},"lcs":{},"ibm":{}};I.REQUESTS={"SSP_SET":{method:"PUT",path:"/v1/preferences",server:"ssp"},"SSP_GET":{method:"GET",path:"/v1/preferences",server:"ssp"}};I.PERSISTED_ATTRS=["contactListImageSize","blockNonContacts","useTopContacts","conversationStyle"];I.SSP_MAP={"ssaEnabled":{"key":"server.archive.enable","defaultValue":"1"}};I.persistAttrSetter=function(M,J){var K=this.get(J),L={};if(typeof(K)!="undefined"&&M!==K){if(F.Messenger.OMAPI){L.keys={};L.keys[J]=M;F.Messenger.OMAPI.setData(L);}}return M;};I.sspAttrSetter=function(O,K){var L=!E[K]?this.get(K):undefined,N=I.REQUESTS.SSP_SET,J={},M={};if(typeof(L)!="undefined"&&O!==L){J.preferences=[];M.preference={};M.preference.key=I.SSP_MAP[K].key;M.preference.value=[];M.preference.value.push(O);J.preferences.push(M);C.issueRequest({type:"SSP_SET",server:N.server,postBody:J,method:N.method,path:N.path});}return O;};I.sspAttrGetter=function(M,J){var L=I.REQUESTS.SSP_GET,K=["pref="+I.SSP_MAP[J].key];if(typeof(M)=="undefined"&&!E[J]){E[J]=true;C.issueRequest({type:"SSP_GET",server:L.server,args:K,method:L.method,path:L.path,successCallback:F.bind(function(N){var O=N&&N.preferences?N.preferences[0].preference.value[0]:null;if(O==null){O=I.SSP_MAP[J].defaultValue;}this.set(J,O);delete E[J];},this),failureCallback:function(){delete E[J];}});}return M;};I.ATTRS={smsEnabled:{value:typeof(D.smsSupported)!="undefined"?D.smsSupported:true,validator:F.Lang.isBoolean},videoEnabled:{value:false,validator:F.Lang.isBoolean},useSingleAddReq:{value:true},lastActive:{setter:I.persistAttrSetter,value:B.lastActive||"never"},ssaEnabled:{getter:I.sspAttrGetter,setter:I.sspAttrSetter},mpopSignOutType:{setter:I.persistAttrSetter,value:B.mpopSignOutType?B.mpopSignOutType:"local"},conversationStyle:{setter:I.persistAttrSetter,value:D.isSecure?"text":(B.conversationStyle?B.conversationStyle:"bubbles")},bidiEnabled:{value:false,validator:F.Lang.isBoolean},showModeTray:{value:"1"},tabbedMessaging:{value:true},tabDragDropSupported:{value:false},latintls:{value:["ar","e1","mx","pe","ve","co","cl"]},allowInteropAdd:{value:true},conversationPopOutSupported:{value:D.urlParams&&D.urlParams.ymsgrpopout?true:false},convWindowStyle:{setter:I.persistAttrSetter,value:B.convWindowStyle&&B.convWindowStyle!="browserWindow"?B.convWindowStyle:"iframe"},showPresenceTransitions:{value:((D.urlParams&&D.urlParams.showTransitions==0)||F.UA.ie!=0)?false:true},getImagesFromFB:{value:false},contactListImageSize:{setter:I.persistAttrSetter,value:D.isSecure?"none":B.contactListImageSize?B.contactListImageSize:"none"},blockNonContacts:{setter:I.persistAttrSetter,value:B.blockNonContacts?B.blockNonContacts:false},useTopContacts:{setter:I.persistAttrSetter,value:(typeof(B.useTopContacts)!="undefined")&&B.useTopContacts!==""?B.useTopContacts:B.mimContactScoringData&&B.mimContactScoringData.scoreThresholdReached?true:false},topContactsEnabled:{value:window.openmail?true:false},fbEnabled:{value:window.openmail?((D.fbEnabled)?true:false):true},ssaNotificationSeen:{setter:I.persistAttrSetter,value:B.ssaNotificationSeen?B.ssaNotificationSeen:false},enableSounds:{setter:I.persistAttrSetter,value:typeof(B.enableSounds)!="undefined"?B.enableSounds:true},showOfflineContacts:{value:false},hideAddressBookContacts:{setter:I.persistAttrSetter,value:typeof(B.hideAddressBookContacts)!="undefined"?B.hideAddressBookContacts:false},showOfflineImages:{value:true},enableRTE:{value:true},themeInfo:{value:D.themeinfo},homeCountry:{setter:function(K,J){if(K){switch(K){case"e1":case"":K="us";break;case"cf":K="ca";break;case"hi":K="in";break;default:if(G[K]){return I.persistAttrSetter.call(this,K,J);
}else{return"us";}}}},value:(function(){var J="";if(B){J=B.homeCountry?B.homeCountry:D.intl;}else{J="us";}return J;})()}};F.extend(I,F.Base,{initializer:function(){var K,J;if(window.openmail){if(D.urlParams&&D.urlParams.vnv){this.set("videoEnabled",true);}}else{if(window.frameElement&&window.frameElement.baseURI&&window.frameElement.baseURI.indexOf("vnv=1")!=-1){this.set("videoEnabled",true);}}if(!this.get("topContactsEnabled")){this.set("useTopContacts",false);}},getNetworkCapabilities:function(J){return J?I.NETWORK_CAPABILITIES[J]:I.NETWORK_CAPABILITIES;},getLATIntls:function(){var J=this.get("latintls");return J.join(",");},getAppName:function(){return H.get("str_cfg_branding_messenger");},getGenericAppName:function(){return H.get("str_cfg_generic_messenger");},preferenceUpdated:function(J){var K,L;F.some(I.SSP_MAP,function(N,M){if(J.key==N.key){K=M;return true;}});if(this.attrAdded(K)&&J.value&&J.value.length){L=J.value[0];this.set(K,L);}}});return new I();})();A.GlobalConfig.COUNTRY_CODES_MAP=G;}F.namespace("Messenger").GlobalConfig=A.GlobalConfig;},"@VERSION@",{requires:["base-base","yim-intl"]});YUI.add("delayloader",function(A){if(!YUI.namespace("Messenger").DelayLoader){YUI.Messenger.DelayLoader=(function(){var F=A.Messenger.GlobalConfig,K=A.Messenger.Events,I=A.Messenger.RequestManager,J,G,H,E={"initModules":{modules:[{"use":"ommenus","className":"OMMenus"}],events:[K.APP_INIT_COMPLETE],skipRefire:true},"conversations":{modules:[{"use":"conversationmanager","className":"ConversationManager"},{"use":"conversationapi","className":"ConversationAPI"}],events:[K.LOGGED_IN],notifications:["message","offlineMessage","sms","recentMessages","stateTransfer"]}},B={},D=function(S,T,N){var L=E[S],Q,O,P,M=[],R;if(!L){return;}for(O=0,P=L.modules.length;O<P;O++){if(!A.Messenger[L.modules[O].className]){M.push(L.modules[O].use);}}if(M.length){if(!B[S]){B[S]=[{evt:T,data:N}];M.push(function(V){if(!L.skipRefire){for(O=0,P=B[S].length;O<P;O++){R=B[S][O];if(R.evt){try{V.Global.fire(R.evt,R.data);}catch(U){}}}}delete B[S];for(Q in L.listeners){L.listeners[Q].detach();}for(Q in L.notificationListeners){L.notificationListeners[Q].detach();}delete E[S];});A.use.apply(A,M);}else{B[S].push({evt:T,data:N});}}else{for(Q in L.listeners){L.listeners[Q].detach();}delete E[S];}},C=function(){for(J in E){E[J].listeners=[];E[J].notificationListeners=[];for(G=0,H=E[J].events.length;G<H;G++){(function(M,L){E[M].listeners.push(A.Global.on(L,function(N){D(M,L,N);}));})(J,E[J].events[G]);}if(E[J].notifications){for(G=0,H=E[J].notifications.length;G<H;G++){(function(M,L){E[M].notificationListeners.push(I.watchNotifications(L,function(N){D(M,null,N);}));})(J,E[J].notifications[G]);}}}};return{start:C};})();}A.namespace("Messenger").DelayLoader=YUI.Messenger.DelayLoader;},"@VERSION@",{requires:["events","requestmanager","globalconfig"]});YUI.add("command",function(B){if(!YUI.Command){var A={};YUI.Command={exec:function(E){var G=E.split(":"),H=G[0],D=G[1],C=Array.prototype.slice.apply(arguments,[1]);var F=A[H],I;if(!F){return;}I=F[D]||null;if(I===null){I=F["default"]||null;if(I===null){YUI.log("could not resolve command "+E+".","warn","Y.Command");return;}C.unshift(D);}YUI.log("executing "+E+".","info","Y.Command");return I.f.apply(I.c,C);},registerModule:function(E,F,G,D){if(!F){return;}if(!A[E]){A[E]={};}D=D||F;for(var C in F){if(typeof(F[C])=="function"&&C.indexOf("_")!==0){A[E][C]={f:F[C],c:D};}}if(G){A[E]["default"]={f:G,c:D};}},registerHandler:function(D,E,F,C){if(!A[D]){A[D]={};}A[D][E]={f:F,c:C};}};}B.Command=YUI.Command;},"@VERSION@");YUI.add("globalconstants",function(A){if(!YUI.namespace("Messenger").GlobalConstants){YUI.Messenger.GlobalConstants={NOTIFICATION_INLINE:0,NOTIFICATION_STATICTOP:1,NOTIFICATION_INLINE_PLAINTEXT:2,NOTIFICATION_STATIC_RED:3,NOTIFICATION_INLINE_RED:4,NOTIFICATION_INLINE_TOP:5,SSA_NOTIFICATION:"SSA_NOTIFICATION",ACK_DELAY:7000,SMS_INPUT_WINDOW:"SMSInputWindow",ADD_CONTACT_WINDOW:"AddContactWindow",SIGNOUT_WINDOW:"SignoutWindow",DIALOG_WINDOW:"DialogWindow",CONTACT_MENU_WINDOW:"ContactMenuWindow",REPORT_ABUSE_WINDOW:"ReportAbuseDialog",DEFAULT_IMAGE:"http://mail.yimg.com/ok/u/assets/img/display-img/profile_{{pixels|32|48}}e.png",DEFAULT_IMAGE_SSL:"https://s.yimg.com/ok/u/assets/img/display-img/profile_{{pixels|32|48}}e.png"};}A.namespace("Messenger").GlobalConstants=YUI.Messenger.GlobalConstants;},"@VERSION@");YUI.add("commonutils",function(C){var F=YUI.namespace("Messenger");if(!F.CommonUtils){F.CommonUtils={};var J=F.CommonUtils,B=C.Object,I=C.Lang,G=C.Messenger.GlobalConfig,D=C.Messenger.GlobalConstants,K=G.COUNTRY_CODES_MAP,H=window.logRocketStats||function(){},A=C.Messenger.Intl,E=window.launchData;J.domainToNetworkMap={"ameritech.net":"yahoo","btinternet.com":"yahoo","btopenworld.com":"yahoo","demobroadband.com":"yahoo","flash.net":"yahoo","hotmail.co.jp":"msn","hotmail.co.th":"msn","hotmail.co.tr":"msn","hotmail.co.uk":"msn","hotmail.com":"msn","hotmail.com.ar":"msn","hotmail.de":"msn","hotmail.fr":"msn","hotmail.it":"msn","live.com":"msn","messengeruser.com":"msn","msn.co":"msn","msympatico.ca":"msn","nl.rogers.com":"yahoo","nvbell.net":"yahoo","pacbell.net":"yahoo","passport.co":"msn","prodigy.net":"yahoo","rogers.com":"yahoo","sbcglobal.net":"yahoo","snet.net":"yahoo","swbell.net":"yahoo","talk21.com":"yahoo","verizon.net":"yahoo","wans.net":"yahoo","webtv.net":"msn","ymail.com":"yahoo"};J.PartnerDomains={"ameritech.net":1,"btinternet.com":1,"btopenworld.com":1,"demobroadband.com":1,"flash.net":1,"nl.rogers.com":1,"nvbell.net":1,"pacbell.net":1,"prodigy.net":1,"rocketmail.com":1,"rogers.com":1,"sbcglobal.net":1,"snet.net":1,"swbell.net":1,"talk21.com":1,"verizon.net":1,"wans.net":1,"yahoo.cn":1,"ymail.com":1};J.TLD={"aero":1,"asia":1,"biz":1,"com":1,"edu":1,"gov":1,"info":1,"jobs":1,"mil":1,"mobi":1,"museum":1,"name":1,"net":1,"org":1};J.CountryCodes={};cc=["ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","br","bs","bt","bv","bw","by","bz","ca","cc","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cs","cu","cv","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","es","et","fi","fj","fk","fm","fo","fr","fx","ga","gb","gd","ge","gh","gi","gl","gp","gq","gf","gm","gn","gr","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","in","io","iq","ir","is","it","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","mg","mh","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nt","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pt","pr","pw","py","qa","re","ro","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","st","su","sv","sy","sz","tc","td","tf","tg","th","tj","tk","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","um","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yu","za","zm","zr","zw"];cci=cc.length;while(cci--){J.CountryCodes[cc[cci]]=1;}J.YidPattern=/^[a-z][a-z0-9\._]*$/i;J.DmnPattern=/^[a-z0-9][a-z0-9-]*[a-z0-9]$/i;J.MbxPattern=/^[a-z0-9._%+-]+$/i;C.mix(J,{isEmpty:function(M){var L;if(M){for(L in M){return false;}}return true;},arrayFire:function(Q,P,N){if(!this._arrayCache){this._arrayCache={};}var M=this._arrayCache,O,L=this;if(!M[Q]){O={t:0,a:[],id:Q};M[Q]=O;}else{O=M[Q];clearTimeout(O.t);}O.a=O.a.concat(P);O.t=setTimeout(function(){var R=O.a,S=O.id;C.Global.fire(S,R);delete L._arrayCache[S];},N||0);},parseURI:function(P){var R=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,N=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Q=/(?:^|&)([^&=]*)=?([^&]*)/g,L=R.exec(P),O={queryKey:{}},M=N.length;while(M--){O[N[M]]=L[M]||"";}O.query.replace(Q,function(T,S,U){if(S){O.queryKey[S]=U;}});return O;},congruent:function(N,M,L){var P=L||(B.size(N)==B.size(M));if(P){try{if(N!=M){B.each(N,function(R,Q){P=I.isObject(R)?J.congruent(R,M[Q]):(R==M[Q]);if(!P){throw new Error();}});}}catch(O){P=false;}}return P;},wcopy:function(M){var L,N=M?C.Object(M):M;for(L in N){if(I.isObject(N[L])){N[L]=J.wcopy(N[L]);}}return N;},merge:function(S,Q,P,N){var O,R,M,L;if(I.isObject(Q)){S=S||{};for(O in Q){if(N&&!Q.hasOwnProperty(O)){continue;}if(I.isArray(Q[O])){M=Q[O];if(!S[O]||P){S[O]=[];}for(L=0;L<M.length;L++){S[O].push(J.merge(S[O][L],M[L],P,N));}}else{if(I.isObject(Q[O])){if(!S[O]){S[O]={};}S[O]=J.merge(S[O],Q[O],P,N);}else{if((P&&(S[O]!=Q[O]))||I.isUndefined(S[O])){S[O]=Q[O];}}}}}else{S=Q;}return S;},assert:function(L){if(!L){alert("invalid parameter");}},isPhoneNumber:function(L){if(!L){return false;}if(L.search(/[0-9]/)===-1){return false;}if(L.search(/[^0-9\+\(\)\- \.]/)!==-1){return false;}return true;},substitute:function(S,R,N,M,L,O,Q){var P=/{{([^{}]*)}}/g;if(S){return S.replace(P,function(W,U){var Y,X,T=C.Messenger.CommonUtils.substitute;if(N&&(Y=N[U])){return(Y.call(null,R,M))||"";}else{if(R&&U in R){return R[U];}else{if(L&&U in L){X=L[U];return X.match(P)?T(X,R,N,M,L,O,Q):X;}else{if(O&&U in O){return T(O[U].base,R,N,M,L,O,Q);}else{if(Q){var V=Q.get(U,true);return V?V:"";}else{return"";}}}}}});}else{return"";}},escapeHtml:function(L){if(L==null){return null;}L=L.replace(/&/g,"&amp;");L=L.replace(/</g,"&lt;");L=L.replace(/>/g,"&gt;");L=L.replace(/\"/g,"&quot;");L=L.replace(/&(?:amp;)+/g,"&amp;");return L;},unescapeHtml:function(M){var L=M.replace(/&gt;/g,">");L=L.replace(/&lt;/g,"<");L=L.replace(/&quot;/g,'"');L=L.replace(/&apos;/g,"'");L=L.replace(/&amp;/g,"&");return L;},unencode:function(L){if(L==null||L==undefined||!C.Lang.isString(L)){return null;}L=L.replace(/&#39;/g,"'");L=L.replace(/&#34;/g,'"');L=L.replace(/&quot;/g,'"');return L;},getHtml5AudioSupport:function(){var L={audioObjectSupported:false,audioPlaySupported:false,oggSupported:false,wavSupported:false,mp3Supported:false,aacSupported:false},M;try{M=new Audio("");if(M.canPlayType){L.audioObjectSupported=true;if(M.play){L.audioPlaySupported=true;}if(M.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,"")!==""){L.oggSupported=true;}if(M.canPlayType("audio/wav").replace(/no/,"")!==""){L.wavSupported=true;}if(M.canPlayType("audio/mp3").replace(/no/,"")!==""){L.mp3Supported=true;
}if(M.canPlayType('audio/mp4; codecs="mp4a.40.2"').replace(/no/,"")!==""){L.mp3Supported=true;}}}catch(N){}return L;},getPresenceIconClass:function(M){var L="";switch(M){case -1:L="ymsg-offline";break;case 0:L="ymsg-available";break;case 2:L="ymsg-busy";break;case 999:L="ymsg-away";break;default:L="ymsg-busy";break;}return L;},getConversationId:function(M,L,N){return[M,L,N||"yahoo"].join("~");},getNetworkFromUserId:function(M){var L,O,N;L=M.indexOf("@");if(L!==-1){O=M.substr(L+1);N=this.domainToNetworkMap[O];if(!N){if(M.indexOf("@yahoo.")!==-1){N="yahoo";}}}else{N="yahoo";}return N;},_getImageServer:function(){var L;if(E.isSecure){L="http://ycpi-mail-rest-img.msg.yahoo.com";if(E.targetServer=="alpha"){L="https://rdis1.a1.msg.sp1.yahoo.com";}else{if(E.urlParams.ymsgrrdis){L=E.urlParams.ymsgrrdis;}}return L;}else{L="http://rest-img.msg.yahoo.com";if(E.targetServer=="alpha"){L="http://rdis1.a1.msg.sp1.yahoo.com";}else{if(E.urlParams.ymsgrrdis){L=E.urlParams.ymsgrrdis;}}return L;}},getImageUrl:function(P){if(E.isSecure){return D.DEFAULT_IMAGE_SSL;}var N=P.avatarPreference,M,O=this._getImageServer();if(P.network=="facebook"){if(!P.imageUrl){if(!G.get("getImagesFromFB")){if(P.checksum){return O+"/v1/displayImage/custom/facebook/"+encodeURIComponent(P.user)+"?size=square&chksum="+encodeURIComponent(P.checksum)+"&redirect=true&src=minty";}else{return O+"/v1/displayImage/custom/facebook/"+encodeURIComponent(P.user)+"?size=square&cachebuster="+(+new Date)+encodeURIComponent(Math.floor(Math.random()*10000))+"&redirect=true&src=minty";}}else{return E.protocol+"graph.facebook.com/"+encodeURIComponent(P.user.split("@")[0].replace("-",""))+"/picture?size=square";}}else{return P.imageUrl;}}if(+N===1){M=P.avatarHash?E.protocol+"avatars.zenfs.com/users/"+encodeURIComponent(P.avatarHash)+".medium.png":(E.isSecure?D.DEFAULT_IMAGE_SSL:D.DEFAULT_IMAGE);return M;}else{if(+N===2){if(C.Lang.isString(P.guid)&&P.guid.length>0){var L="";if(!C.Lang.isUndefined(P.checksum)){L+="?checksum="+encodeURIComponent(P.checksum);}return E.protocol+"msgr.zenfs.com/msgrDisImg/"+encodeURIComponent(P.guid)+L;}else{if(!P.checksum){return E.isSecure?D.DEFAULT_IMAGE_SSL:D.DEFAULT_IMAGE;}return O+"/v1/displayImage/custom/yahoo/"+encodeURIComponent(P.user)+"?height={{pixels|32|48}}&width={{pixels|32|48}}&chksum="+encodeURIComponent(P.checksum)+"&redirect=false&src=minty";}}else{if(+N===-1){if(P.network==="yahoo"){return O+"/v1/displayImage/yahoo/"+encodeURIComponent(P.user)+"?height=48&width=48&maxage=259200";}}}}return E.isSecure?D.DEFAULT_IMAGE_SSL:D.DEFAULT_IMAGE;},postToURL:function(M,P){var O=document.createElement("form");O.action=M;O.target="_blank";O.method="POST";for(var N in P){if(P.hasOwnProperty(N)){var L=document.createElement("input");L.type="hidden";L.name=N;L.value=P[N];O.appendChild(L);}}document.body.appendChild(O);O.submit();document.body.removeChild(O);},getYidFromEmailAddr:function(T,M){var R,O,Q,L={"yid":false,"value":T},N,S;if(typeof T==="string"){Q=T.split("@");S=Q[0];switch(Q.length){case 2:R=Q[1];if(this.PartnerDomains[R]){L.yid=true;}else{O=R.split(".");if(O.length==1){L.error="Incomplete domain";}else{if(M&&M!=="yahoo"){var P=O.length;var U=O[--P];if(this.TLD[U]||this.CountryCodes[U]){while(P--&&this.DmnPattern.test(O[P])){}if(P==-1){if(!this.MbxPattern.test(S)){L.error="Malformed mailbox name";}}else{L.error="Malformed domain";}}else{L.error="Invalid TLD";}}else{if(O[0]==="yahoo"){switch(O.length){case 3:if(this.CountryCodes[O[2].toLowerCase()]&&((N=O[1].toLowerCase())==="co"||this.TLD[N])&&(L.yid=S.length>=4&&S.length<=32&&this.YidPattern.test(S))){L.value=S;}else{L.error="Malformed YID";}break;case 2:if((this.CountryCodes[N=O[1].toLowerCase()]||this.TLD[N])&&(L.yid=S.length>=4&&S.length<=32&&this.YidPattern.test(S))){L.value=S;}else{L.error="Malformed YID";}break;default:L.error="Invalid Y! domain";}}}}}break;case 1:if(M&&M!="yahoo"){L.error="Missing domain";}else{if(S.length>=4&&S.length<=32&&this.YidPattern.test(S)){L.yid=true;L.value=S;}else{L.error="Malformed YID";}}break;default:L.error="Multiple @ found";}}else{L.error="Email is not a string";}return L;},createNodeInDoc:function(N,L){var M;if(C.UA.ie){if(!L){return;}M=L._node.ownerDocument.createElement("span");M.innerHTML=N;if(M.children.length==1){M=C.Node.one(M.firstChild);}else{M=C.Node.one(M);}}else{M=C.Node.create(N);}return M;},selectNode:function(N,P){var M,L,O,P;O=N.ownerDocument;if(O){P=P||O.defaultView||window;}else{P=P||window;O=P.document;}if(typeof(P.getSelection)!="undefined"&&typeof(O.createRange)!="undefined"&&(M=P.getSelection())&&typeof(M.removeAllRanges)!="undefined"){L=O.createRange();L.selectNode(N);M.removeAllRanges();M.addRange(L);}else{if(O.body&&typeof(O.body.createTextRange)!="undefined"&&(L=O.body.createTextRange())){L.moveToElementText(N);L.select();}}},clearSelection:function(O){if(O.getSelection){var M=O.getSelection();M.removeAllRanges();}else{try{if(O.document.selection.createRange){var L=O.document.selection.createRange();O.document.selection.empty();}}catch(N){}}},makeNonSelectable:function(L){if(typeof(L)==="string"){L=C.one(L);}if(L){L.set("unselectable","on");L.setStyle("MozUserSelect","none");L.setStyle("WebkitUserSelect","none");}},makeSelectable:function(L){if(typeof(L)==="string"){L=C.one(L);}if(L){L.set("unselectable","off");L.setStyle("MozUserSelect","");L.setStyle("WebkitUserSelect","");}},countUtf8Bytes:function(N){var P,O,M=N.length,L=0;for(P=0;P<M;P+=1){O=N.charCodeAt(P);if(O<128){L+=1;}else{if(O<2048){L+=2;}else{L+=3;}}}return L;},checkUtf8Bytes:function(O,N){var Q,P,M=O.length,L=0;for(Q=0;Q<M;Q+=1){P=O.charCodeAt(Q);if(P<128){L+=1;}else{if(P<2048){L+=2;}else{L+=3;}}if(L>N){break;}}return Q;},normalizeNumber:function(Q,L){var S,R,X;X=false;S=Q.search(/\+/);if(S>=0){R=Q.search(/[0-9]/);X=(S<R);if(L){L.leadingPlus=X;}}Q=Q.replace(/[^0-9]/g,"");if(L&&Q.length===0){L.noDigits=true;}if(X){return Q;}var P=G.get("homeCountry"),M=K[P],N,U,O,T,V,W;if(!M){return null;}U=M.idd;if(!U||U.length===0){}else{for(S=0,T=U.length;
S<T;S+=1){V=U[S];if(Q.indexOf(V)===0){Q=Q.slice(V.length);if(L){L.idd=V;}return Q;}}}N=M.code;if(!N){return null;}O=M.ndd;if(O){for(S=0,T=O.length;S<T;S+=1){W=O[S];if(Q.indexOf(W)===0){Q=N+Q.slice(W.length);if(L){L.ndd=W;}return Q;}}}Q=N+Q;if(L){L.noPrefix=true;}return Q;},logRocketStats:H,logRSTimeInterval:function(L,M){if(L&&M){H({key:L,value:((new Date()).getTime()-M)});}},addNativeEventListener:function(N,L,P,M){var O=N._node?N._node:N;M=!!M;if(typeof(O.addEventListener)!="undefined"){O.addEventListener(L,P,M);}else{if(typeof(O.attachEvent)!="undefined"){O.attachEvent("on"+L,function(){var Q=O.ownerDocument.parentWindow.event;Q.target=Q.srcElement;P(Q);});}else{O["on"+L]=function(Q){P(Q||O.ownerDocument.parentWindow.event);};}}},removeNativeEventListener:function(N,L,P,M){var O=N._node?N._node:N;M=!!M;if(typeof(O.removeEventListener)!="undefined"){O.removeEventListener(L,P,M);}else{O["on"+L]=null;}},haltEvent:function(L){if(L.stopPropagation){L.stopPropagation();L.preventDefault();}else{L.returnValue=false;L.cancelBubble=true;}},convertCloudId:function(L){var M;switch(L){case 0:case"0":M="yahoo";break;case 1:case"1":M="lcs";break;case 2:case"2":M="msn";break;case 9:case"9":M="ibm";break;default:}return M;},normalizePresenceState:function(L){var N={"1":"str_cont_list_status_be_right_back","2":"str_cont_list_status_busy","3":"str_cont_list_status_not_at_home","4":"str_cont_list_status_not_at_my_desk","5":"str_cont_list_status_not_in_the_office","6":"str_cont_list_status_on_the_phone","7":"str_cont_list_status_on_vacation","8":"str_cont_list_status_out_to_lunch","9":"str_cont_list_status_stepped_out","10":"str_cont_list_status_away"},O={state:L.presenceState,message:L.presenceMessage};switch(L.presenceState){case 99:O.state=({"0":0,"1":2,"2":999})[L.customDNDStatus];if(O.state===undefined){O.state=0;O.message=L.presenceMessage||A.get("str_menu_available");}break;case 999:O.message=L.presenceMessage||A.get("str_cont_list_status_idle");break;default:if(L.presenceState==0){O.state=0;O.message=L.presenceMessage||"";}else{var M=N[L.presenceState];if(M){O.state=2;O.message=L.presenceMessage||A.get(M);}}break;}O.anchoredMessage=O.message?this._replaceURLWithLink(O.message):"";return O;},_replaceURLWithLink:function(S){var M=/(\b(?:www\.|(telnet|(?:ht|f)tp(?:s?)):\/\/)[A-Z0-9][A-Z0-9\-_.!~*'();\/?:@&=+$,#%]*)|\b(?:mailto:|)([A-Z0-9._%+\-]+@(?:[A-Z0-9\-]+\.)+[A-Z]{2,4})\b/ig;var R,L,T=S,Q;var N=M.exec(S);if(!N){N=M.exec(S);}if(N){Q=RegExp.$1;R=S.indexOf(Q);var P=RegExp.$2!="";var O=RegExp.$3!="";if(R===0){if(P){T=S.replace(M,"<a href='$1' target='_blank' class='link' title='$1'>$1</a>");}else{if(!O){T=S.replace(M,"<a href='http://$1' target='_blank' class='link' title='$1'>$1</a>");}else{T=S.replace(M,"<a href='mailto:$3' target='_blank' class='link' title='$3'>$3</a>");}}}else{L=S.substring(S,R);L=C.Lang.trim(L);if(L==""){L=Q;}T=this.substitute("<a href='{{link}}' target='_blank' class='link' title='{{link}}'>"+L+"</a>",{link:(P?"":"http://")+Q});}}return T;},convertErrorToMessage:function(M){var L="";switch(M){case 0:break;case 1:L=A.get("str_msgr_server_error_1");break;case 2:L=A.get("str_msgr_server_error_2");break;case 3:L=A.get("str_msgr_server_error_3");break;case 4:L=A.get("str_msgr_server_error_4");break;case 6:L=A.get("str_msgr_server_error_6");break;case 7:L=A.get("str_msgr_server_error_7");break;case 8:L=A.get("str_msgr_server_error_8");break;case 10:L=A.get("str_msgr_server_error_10");break;case 12:L=A.get("str_msgr_server_error_12");break;case 28:L=A.get("str_msgr_server_error_28");break;case 32:L=A.get("str_msgr_server_error_32");break;case 33:L=A.get("str_msgr_server_error_33");break;case 42:L=A.get("str_msgr_server_error_42");break;case 53:L=A.get("str_msgr_server_error_53");break;case 55:L=A.get("str_msgr_server_error_55");break;case 58:L=A.get("str_msgr_server_error_58");break;case 59:L=A.get("str_msgr_server_error_59");break;default:L=A.get("str_msgr_server_error_1");break;}return L;}});}C.namespace("Messenger").CommonUtils=F.CommonUtils;},"@VERSION@",{requires:["globalconfig","yim-intl"]});YUI.add("sessionmanager",function(B){if(!YUI.namespace("Messenger").SessionManager){var D=window.launchData,F=D.fbEnabled,I=B.Messenger.RequestManager,E=B.Messenger.GlobalConfig,H=B.Messenger.CommonUtils,C=B.Messenger.GlobalConstants,A=B.Messenger.Intl,J=B.Messenger.Events;function G(K){G.superclass.constructor.apply(this,arguments);}G.ATTRS={presenceState:{value:-1},presenceMessage:{value:""},primaryId:{value:""},loggedInId:{value:""},aliases:{value:[]},online:{value:false},facebookOnline:{value:false},mpopInfo:{},presenceSubscriptionsMaxPerRequest:{value:D.loginData?D.loginData.constants.presenceSubscriptionsMaxPerRequest:30},displayImage:{value:D.isSecure?C.DEFAULT_IMAGE_SSL:C.DEFAULT_IMAGE},fbConnectSeen:{value:false}};G.REQUESTS={"LOGIN":{method:"POST",path:"/v1/session"},"LOGOUT":{method:"DELETE",path:"/v1/session"},"SET_PRESENCE":{method:"PUT",path:"/v1/presence"},"LOGIN_FB":{method:"POST",path:"/v1/federation/facebook"},"LOGOUT_FB":{method:"DELETE",path:"/v1/federation/facebook"},"WAKEUP":{method:"PUT",path:"/v1/session",args:["action=mpop-activate"]}};B.extend(G,B.Base,{start:function(){var K=D.loginData,M,L=[];if(K){this.set("presenceState",D.initialPresence);this._processLoginData(K);this.set("online",true);}else{if(D.failedLogin){this.login(D.initialPresence||0);}}this._previousState={state:D.initialPresence||0,message:""};I.addListeners([{id:"buddyStatus",callback:B.bind(this._processBuddyStatus,this)},{id:"disconnect",callback:B.bind(this._processDisconnect,this)},{id:"endPointState",callback:B.bind(this._processEndPointState,this)},{id:"setVisibilityState",callback:B.bind(this._processVisibilityState,this)},{id:"federationLogin",callback:B.bind(this._processFederationLogin,this)},{id:"federationLogoff",callback:B.bind(this._processFederationLogoff,this)}]);B.Global.on(J.FATAL_IO_ERROR,B.bind(this._processDisconnect,this));B.Global.on(J.LOGGED_OUT,B.bind(this._processDisconnect,this));B.Global.on(J.SESSION_EXPIRED,B.bind(this._processSessionExpired,this));if(B.UA.ie){window.attachEvent("onunload",B.bind(this.quickLogout,this));}else{window.addEventListener("unload",B.bind(this.quickLogout,this),false);}},isOnline:function(){return this.get("online");},isOnlineFacebook:function(){return this.get("online")&&this.get("facebookOnline");},isInvisible:function(){return this.get("online")&&this.get("presenceState")==-1;},getStateID:function(){if(this.isInvisible()){return"invisible";}switch(this.get("presenceState")){case -1:case"-1":return"offline";break;case 0:case"0":return"available";break;case 2:case"2":return"busy";break;case 999:case"999":return"idle";break;default:return"offline";}},getOwnDisplayImage:function(K){K=K||32;return H.substitute(this.get("displayImage"),{"pixels|32|48":K});},login:function(O,Q,R){if(this.get("online")){return;}O=O||0;Q=Q||"";var M=G.REQUESTS["LOGIN"],P=H.normalizePresenceState({presenceState:O,presenceMessage:Q}),N=[{"clientCapability":"smiley"},{"clientCapability":"mpop"},{"clientCapability":"richText"},{"clientCapability":"interop"},{"clientCapability":"activateSSA"},{"clientCapability":"typing"}],K,L;if(E.get("smsEnabled")){N.push({"clientCapability":"sms"});}if(E.get("fileTransferEnabled")){N.push({"clientCapability":"fileXfer"});}K={presenceState:P.state,presenceMessage:P.message,profileLogin:0,clientCapabilities:N,mpopLoginInfo:{"loginType":0}};K.loginTriggers=[{loginTrigger:"mpopStateTransfer"},{loginTrigger:"ignoreList"},{loginTrigger:"invisibleList"}];if(E.get("fbEnabled")){K.loginTriggers.push({loginTrigger:"fbAutoLogin"});N.push({"clientCapability":"fbInterop"});}L=["notifyServerToken=2","fieldsBuddyList="+encodeURIComponent("+groups"),"fieldsBuddyList="+encodeURIComponent("-uri")];if(!(window.openmail)){L.push("fieldsBuddyList="+encodeURIComponent("+addressbook"));}I.issueRequest({type:"LOGIN",method:M.method,path:M.path,args:L,postBody:K,successCallback:B.bind(function(S){this.set("presenceState",P.state);this.set("presenceMessage",P.message);I.setServerUrl("yim_core",D.protocol+S.server);I.setServerUrl("yim_notify",D.protocol+S.notifyServer);this._processLoginData(S);I.startListening();this.set("online",true);B.Command.exec("yim:processBuddies",S.contacts);B.Global.fire(J.CONNECTION_UPDATE,{isOnline:true});B.Global.fire(J.SELF_PRESENCE_CHANGED,{state:P.state,message:P.message});B.Global.fire(J.PRESENCE_PREF_UPDATED,O);B.Global.fire(J.EXPLICIT_LOGIN);R&&R();},this),errorCallback:B.bind(function(S){this.set("presenceState",-1);this.set("presenceMessage","");this.set("online",false);B.Global.fire(J.CONNECTION_UPDATE,{isOnline:false,reason:4});},this)});},logout:function(M){var L=G.REQUESTS["LOGOUT"],N=E.get("mpopSignOutType"),O=this.get("mpopInfo"),K;M=M?M:N=="always_local"?"local":N=="always_global"?"global":null;if(!M&&O&&O.totalEndpoints>1){B.Global.fire(J.SHOW_WINDOW,C.SIGNOUT_WINDOW);return;}if(M){K={logoffType:M=="local"?0:2};}I.issueRequest({type:"LOGOUT",method:L.method,path:L.path,postBody:K,successCallback:B.bind(function(P){this.set("presenceState",-1);this.set("presenceMessage","");this.set("online",false);this.set("facebookOnline",false);I.handleLogout();B.Global.fire(J.CONNECTION_UPDATE,{isOnline:false,reason:4});B.Global.fire(J.PRESENCE_PREF_UPDATED,9999);},this),errorCallback:B.bind(function(P){B.Global.fire(J.CONNECTION_UPDATE,{isOnline:true});},this)});},_processLoginData:function(M){var L=D.protocol+M.server+G.REQUESTS.LOGOUT.path,K=[],N;L+="/delete?logoffType=0";L+="&sid="+encodeURIComponent(M.sessionId);L+="&c="+encodeURIComponent(I.get("crumb"));L+="&msgrAppId=mim&blocking=0";I.setLogoutURL(L);this.set("primaryId",M.primaryLoginId);this.set("loggedInId",M.primaryLoginId);I.set("primaryLoginId",M.primaryLoginId);I.set("sessionId",M.sessionId);I.set("imToken",M.notifyServerToken.token);if(M.profileLoginIds){for(N=0;N<M.profileLoginIds.length;N++){K.push(M.profileLoginIds[N].profileLoginId);if(M.profileLoginIds[N]["default"]){this.set("loggedInId",M.profileLoginIds[N].profileLoginId);}}this.set("aliases",K);}this.set("mpopInfo",M.mpopInfo);
this._processOwnImageData(M.displayInfo);this.set("presenceSubscriptionsMaxPerRequest",M.constants.presenceSubscriptionsMaxPerRequest);B.Global.fire(J.LOGGED_IN);},_processOwnImageData:function(K){var L=K;L.user=this.get("loggedInId");L.network="yahoo";this.set("displayImage",H.getImageUrl(L));},quickLogout:function(){I.killConnections();this.set("presenceState",-1);this.set("presenceMessage","");this.set("online",false);this.set("facebookOnline",false);},toggleMessengerPresence:function(){if(this.get("online")){this.logout();}else{this.login();}},toggleFacebookPresence:function(){if(this.isOnlineFacebook()){this.logoutFacebook();}else{this.loginFacebook();}},isSelfUser:function(L){var K=this.get("aliases"),N=this.get("primaryId");if(L===N){return true;}else{for(var M=0;M<K.length;M++){if(K[M]===L){return true;}}}return false;},loginFacebook:function(K){var M=G.REQUESTS["LOGIN_FB"],L=K?[]:["updateAutoLoginPref=1"];if(!F){throw new Error("Attempt made to log in to facebook but facebook is disabled");}if(this.isOnlineFacebook()){return;}if(!this.isOnline()){this.login(0,"",B.bind(function(){this.loginFacebook(K);},this));return;}I.issueRequest({type:"LOGIN_FB",method:M.method,path:M.path,args:L,postBody:"",successCallback:B.bind(function(N){this.set("facebookOnline",true);B.Global.fire(J.LOGIN_FACEBOOK);},this),failureCallback:B.bind(function(){B.Global.fire(J.LOGOUT_FACEBOOK);},this)});},logoutFacebook:function(K){var M=G.REQUESTS["LOGOUT_FB"],L=K?[]:["updateAutoLoginPref=1"];if(!this.isOnlineFacebook()){return;}I.issueRequest({type:"LOGOUT_FB",method:M.method,path:M.path,args:L,postBody:"",successCallback:B.bind(function(N){this.set("facebookOnline",false);B.Global.fire(J.LOGOUT_FACEBOOK);},this)});},setPresence:function(M,N){if(!this.get("online")){this.login(M,N);}else{if(!this.isPrimary()){this.becomePrimary(B.bind(function(){this.setPresence(M,N);},this));return;}var L=G.REQUESTS["SET_PRESENCE"],K={presenceState:M};if(N){K.presenceMessage=N;}I.issueRequest({type:"PRESENCE",method:L.method,path:L.path,postBody:K,successCallback:B.bind(function(O){this.set("presenceState",M);this.set("presenceMessage",N||"");B.Global.fire(J.SELF_PRESENCE_CHANGED,{state:M,message:N});if(M==-1){this.logoutFacebook(true);}B.Global.fire(J.PRESENCE_PREF_UPDATED,M);},this)});}},becomePrimary:function(N){var L=G.REQUESTS.WAKEUP,M=this,K=this.get("mpopInfo");if(this.isOnline()&&K&&K.state!=0){I.issueRequest({type:"MPOP_ACTIVATE",method:L.method,path:L.path,args:L.args,successCallback:function(){K=M.get("mpopInfo");K.state=0;M.set("mpopInfo",K);B.Global.fire(J.MPOP_STATE_CHANGE,K);N&&N();}});}},isPrimary:function(){return this.get("mpopInfo").state==0?true:false;},_processBuddyStatus:function(N){if(N.echo){var M=this.get("presenceState"),K=this.get("presenceMessage"),L=H.normalizePresenceState(N);if(L.state!=M||L.message!=K){this.set("presenceState",L.state);this.set("presenceMessage",L.message);B.Global.fire(J.SELF_PRESENCE_CHANGED,L);}}},_processDisconnect:function(K){this.set("presenceState",-1);this.set("presenceMessage","");this.set("online",false);this.set("facebookOnline",false);I.handleLogout();B.Global.fire(J.CONNECTION_UPDATE,{isOnline:false,reason:K?K.reason:-1});},_processSessionExpired:function(L){var K=this.get("presenceState")||"0",M=this.get("presenceMessage")||"";this._processDisconnect();this.login(K,M);},_processEndPointState:function(L){var K=this.get("mpopInfo"),M=L.endPointInfo;if(M){M.totalEndpoints=M.totalEndpoints||M.numberOfEndPoints;this.set("mpopInfo",M);if(M.state!=0&&M.numberOfEndPoints==1){this.becomePrimary();}if(K.state!=M.state){B.Global.fire(J.MPOP_STATE_CHANGE,M);}}},_processVisibilityState:function(L){var K=this.get("presenceState");if(L.state==2){if(K!=-1){this._previousState={state:K,message:this.get("presenceMessage")};this.set("presenceState",-1);this.set("presenceMessage","");B.Global.fire(J.SELF_PRESENCE_CHANGED,{state:-1,message:""});}}else{if(K==-1){this.set("presenceState",this._previousState.state);this.set("presenceMessage",this._previousState.message);B.Global.fire(J.SELF_PRESENCE_CHANGED,this._previousState);}}},_processFederationLogin:function(N){if(N&&N.network=="facebook"){if(N.status==-1){B.Global.fire(J.LOGOUT_FACEBOOK,N);this.set("facebookOnline",false);var K=function(){this.set("fbConnectSeen",true);var R=(D&&D.lang)?D.lang:"en-US",P=(D&&D.isSecure)?"https://ycpi-mail-credstore.msg.yahoo.com/v1/credStore.php?lang="+R+"&c="+encodeURIComponent(I.get("crumb")):"http://credstore.msg.yahoo.com/v1/credStore.php?lang="+R+"&c="+encodeURIComponent(I.get("crumb")),Q=window.open(P,"","height=700,width=980"),O=420000,S=B.later(1000,null,B.bind(function(){O-=1000;if(O<0){S.cancel();return;}if(Q.closed){S.cancel();this.loginFacebook();}else{}},this),null,true);},L=A.get("str_cont_list_facebook_missing_cred"),M=H.substitute(A.get("str_cont_list_facebook_invalid_cred"),{str_cfg_branding:A.get("str_cfg_branding"),str_cfg_branding_messenger:E.getGenericAppName()});switch(N.errorCode){case 56:if(!this.get("fbConnectSeen")){B.Messenger.WindowManager.confirm(L,B.bind(K,this),null,A.get("str_cont_list_facebook_down_header").replace(/"/g,""),"warning");}else{this.set("fbConnectSeen",false);}break;case 57:if(!this.get("fbConnectSeen")){B.Messenger.WindowManager.confirm(M,B.bind(K,this),null,A.get("str_cont_list_facebook_down_header").replace(/"/g,""),"warning");}else{this.set("fbConnectSeen",false);}break;case 40:B.Messenger.WindowManager.alert(A.get("str_cont_list_facebook_down").replace(/"/g,""),null,A.get("str_cont_list_facebook_down_header").replace(/"/g,""),"warning");break;default:}}else{if(this.get("facebookOnline")){return;}this.set("facebookOnline",true);B.Global.fire(J.LOGIN_FACEBOOK,N);}}},_processFederationLogoff:function(K){if(K&&K.network=="facebook"){if(!this.get("facebookOnline")){return;}this.set("facebookOnline",false);B.Global.fire(J.LOGOUT_FACEBOOK,K);}}});YUI.Messenger.SessionManager=new G();B.Command.registerModule("yim",YUI.Messenger.SessionManager);}B.namespace("Messenger").SessionManager=YUI.Messenger.SessionManager;
},"@VERSION@",{requires:["base-base","requestmanager","command","commonutils","events","globalconstants"]});YUI.add("lang/datatype-date-format_en-US",function(a){a.Intl.add("datatype-date-format","en-US",{"a":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"A":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"b":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"B":["January","February","March","April","May","June","July","August","September","October","November","December"],"c":"%a, %b %d, %Y %l:%M:%S %p %Z","p":["AM","PM"],"P":["am","pm"],"x":"%m/%d/%y","X":"%l:%M:%S %p"});},"@VERSION@");YUI.add("lang/datatype-date_en-US",function(a){},"@VERSION@",{use:["lang/datatype-date-format_en-US"]});YUI.add("mim-dateformat",function(C){var B=C.Messenger.Intl,A=window.launchData;if(A.dateFormatter){C.Intl.add("datatype-date-format",A.lang,A.dateFormatter);C.Intl.setLang("datatype-date-format",A.lang);}else{if(B.get("str_mail_weekday_abbr_sunday")){A.dateFormatter={"a":[B.get("str_mail_weekday_abbr_sunday"),B.get("str_mail_weekday_abbr_monday"),B.get("str_mail_weekday_abbr_tuesday"),B.get("str_mail_weekday_abbr_wednesday"),B.get("str_mail_weekday_abbr_thursday"),B.get("str_mail_weekday_abbr_friday"),B.get("str_mail_weekday_abbr_saturday")],"A":[B.get("str_mail_weekday_sunday"),B.get("str_mail_weekday_monday"),B.get("str_mail_weekday_tuesday"),B.get("str_mail_weekday_wednesday"),B.get("str_mail_weekday_thursday"),B.get("str_mail_weekday_friday"),B.get("str_mail_weekday_saturday")],"b":[B.get("str_mail_month_abbr_january"),B.get("str_mail_month_abbr_february"),B.get("str_mail_month_abbr_march"),B.get("str_mail_month_abbr_april"),B.get("str_mail_month_abbr_may"),B.get("str_mail_month_abbr_june"),B.get("str_mail_month_abbr_july"),B.get("str_mail_month_abbr_august"),B.get("str_mail_month_abbr_september"),B.get("str_mail_month_abbr_october"),B.get("str_mail_month_abbr_november"),B.get("str_mail_month_abbr_december")],"B":[B.get("str_mail_month_january"),B.get("str_mail_month_february"),B.get("str_mail_month_march"),B.get("str_mail_month_april"),B.get("str_mail_month_may"),B.get("str_mail_month_june"),B.get("str_mail_month_july"),B.get("str_mail_month_august"),B.get("str_mail_month_september"),B.get("str_mail_month_october"),B.get("str_mail_month_november"),B.get("str_mail_month_december")],"c":"%a, %b %d, %Y %l:%M:%S %p %Z","p":[B.get("str_mail_dateformat_AM_l10n"),B.get("str_mail_dateformat_PM_l10n")],"P":[B.get("str_mail_dateformat_AM_l10n"),B.get("str_mail_dateformat_PM_l10n")],"x":"%m/%d/%y","X":"%l:%M:%S %p"};C.Intl.add("datatype-date-format",A.lang,A.dateFormatter);C.Intl.setLang("datatype-date-format",A.lang);}}},"@VERSION@",{requires:["yim-intl","datatype-date"]});YUI.add("abutils",function(B){function A(C){A.superclass.constructor.apply(this,arguments);}A.NAME="yim-abutils";A.ONE_PASS_TIMER=50;A.ATTRS={rawAddressBook:{value:false}};B.extend(A,B.Base,{initializer:function(){},destructor:function(){},isYUser:function(D){var E={"yahoo.com":true,"ymail.com":true,"rocketmail.com":true,"ameritech.net":true,"flash.net":true,"nvbell.net":true,"pacbell.net":true,"prodigy.net":true,"sbcglobal.net":true,"snet.net":true,"swbell.net":true,"wans.net":true,"btinternet.com":true,"btopenworld.com":true,"talk21.com":true,"rogers.com":true,"nl.rogers.com":true,"verizon.net":true,"demobroadband.com":true},C=D.split("@");if(C.length!==2||!E[C[1]]||(C[0].length<4)||(C[0].length>32)){return false;}return C[0];},parse:function(C,D){log("Begin parsing ABData");this._parseContacts(C||{},0,D);},parseUpdate:function(H,D,J){var L=H,K=[],E=[];if(!L||(typeof L!=="object")){}var I,F,G,C;for(I=0;I<L.length;I+=1){G=L[I].id;for(F=0;F<D.length;F+=1){if(G===D[F]){K.push(L[I]);break;}}}E=this._parseContacts(K,0,function(M){B.Command.exec("yim:abContactsUpdated",M);});},_parseContacts:function(C,E,F){var I=C.length,D=function(){return new Date().getTime();};this._parsedContacts=this._parsedContacts||[];var K=D();for(var Q=E;Q<I;Q++){var L=C[Q].fields,J,S,M=false,T={},P={},R=false,G=false,V,U;for(var O=0;L&&O<L.length;O++){if(L[O].type=="phone"){R=true;}if(L[O].type=="yahooid"){if(L[O].value&&L[O].value.length>=4&&L[O].value.length<=32){M=true;J=L[O].value;}break;}if(L[O].type=="email"&&!(L[O].id<=0)){S=B.Messenger.CommonUtils.getYidFromEmailAddr(L[O].value);if(S.yid){J=S.value;M=true;break;}else{}}if(L[O].type=="otherid"&&!B.Lang.isUndefined(L[O].flags)){if((L[O].flags[0]=="MSN")||L[O].flags[0]=="IBM"||L[O].flags[0]=="LCS"){G=true;V=L[O].value;U=L[O].flags[0].toLowerCase();break;}}}if(M||R||G){if(M){P.id=J;P.network="yahoo";}else{if(G){P.id=V;P.network=U;}}for(var N=0;L&&N<L.length;N++){switch(L[N].type){case"name":if(!T.firstname){T.firstname=L[N].value.givenName||"";}if(!T.lastname){T.lastname=L[N].value.familyName||"";}break;case"nickname":if(!T.nickname){T.nickname=L[N].value;}break;case"email":if(!T.email){T.email=L[N].value;T.sc_score=L[N].sc_score;}break;case"phone":if(!B.Lang.isUndefined(L[N].flags)&&B.Lang.isString(L[N].flags[0])){var H=L[N].flags[0];switch(H){case"HOME":if(!T.homeno){T.homeno=L[N].value;}break;case"WORK":if(!T.workno){T.workno=L[N].value;}break;case"MOBILE":if(!T.mobileno){T.mobileno=L[N].value;if(!P.id){P.id=B.Messenger.CommonUtils.normalizeNumber(T.mobileno);P.network="sms";}}break;default:}}else{}break;case"guid":P.guid=L[N].value;break;default:}}P.addressbookId=C[Q].id;P.addressbook=T;if(P.id&&P.network){this._parsedContacts.push(P);}}else{}if((D()-K)>A.ONE_PASS_TIMER){break;}else{}}if(Q<I){log("ABUtils parsed from "+E+" to "+Q+". But we have more, so scheduling next batch");B.later(50,this,B.bind(function(){this._parseContacts(C,Q+1,F);},this));}else{if(this._parsedContacts.length){F&&F(this._parsedContacts);}delete this._parsedContacts;}}});B.namespace("Messenger").ABUtils=A;},"@VERSION@",{requires:["base-base","commonutils"]});YUI.add("contactsmanager",function(C){if(!YUI.namespace("Messenger").ContactsManager){var E=window.launchData,I=0,A=C.Messenger.Intl,H=C.Messenger.CommonUtils,K=C.Messenger.Events,F=C.Messenger.GlobalConfig,D=C.Messenger.GlobalConstants,J=C.Messenger.RequestManager,G=C.Messenger.SessionManager;function B(L){B.superclass.constructor.apply(this,arguments);}B.ATTRS={ABDataReceived:{value:false},started:{value:false}};B.REQUESTS={"BLOCK_USER":{method:"PUT",path:"/v1/ignorelist"},"UNBLOCK_USER":{method:"DELETE",path:"/v1/ignorelist"},"ACCEPT_ADD":{method:"POST",path:"/v1/buddyrequest/{{network}}/{{user}}"},"DENY_ADD":{method:"DELETE",path:"/v1/buddyrequest/{{network}}/{{user}}"},"REPORT_SPAM":{method:"POST",path:"/v1/abuse/spim"},"SUBSCRIBE_PRESENCE":{method:"PUT",path:"/v1/subscription/presence",args:["blocking=0"]},"UNSUBSCRIBE_PRESENCE":{method:"DELETE",path:"/v1/subscription/presence",args:["blocking=0"]},"VISIBLE_LIST_ADD":{method:"PUT",path:"/v1/stealth/visiblelist"},"VISIBLE_LIST_DELETE":{method:"DELETE",path:"/v1/stealth/visiblelist"},"INVISIBLE_LIST_ADD":{method:"PUT",path:"/v1/stealth/invisiblelist"},"INVISIBLE_LIST_DELETE":{method:"DELETE",path:"/v1/stealth/invisiblelist"},"ADD_USER":{method:"PUT",path:"/v1/group/{{groupname}}/contact/{{network}}/{{user}}"},"DELETE_USER":{method:"DELETE",path:"/v1/group/{{groupname}}/contact/{{network}}/{{user}}"},"UPDATE_USER":{method:"PUT",path:"/v1/contact/{{network}}/{{user}}"}};C.extend(B,C.Base,{initializer:function(L){this._contacts={};this._ignoredUsers=[];this._invisibleList=[];this._visibleList=[];this._pendingAddRequests={};this._incomingAddRequests={};this._presenceReceived=false;this._bufferedAddRequests=[];this._imContacts=0;this._mobileContacts=0;},destructor:function(){if(this._abUtils){this._abUtils.destroy();delete this._abUtils;}if(this._addReqThrottleTimer){this._addReqThrottleTimer.cancel();delete this._addReqThrottleTimer;}},start:function(){var L=E.loginData,M=E.abData;if(L){this.processBuddies(L.contacts);}if(M){this._handleAddressBookData(M);delete E.abData;}C.Global.on(K.AB_DATA_RECEIVED,this._handleAddressBookData,this);this._startListening();C.Global.on(K.CONNECTION_UPDATE,C.bind(this._handleConnectionChange,this));this.set("started",true);},getIgnoreList:function(){return this._ignoredUsers;},addBuddy:function(M){var N=M.user,L=M.network||"yahoo",T=M.group||A.get("str_conv_default_group"),V=M.message||"",U=M.addressbook||{},Q={addressbook:M.addressbook},P=[N,L].join("~"),S=B.REQUESTS.ADD_USER,R=M.addAs,O;if(L!="yahoo"){this._pendingAddRequests[P]=M;}O={message:V,addressbook:U};if(R){O.addAs=R;}J.issueRequest({successCallback:C.bind(function(W){if(!this._contacts[P]){Q.user=N;Q.network=L;Q.groups=[T];Q.authorized=0;Q.type="buddy";this._addContact(Q);C.Global.fire(K.ADD_CONTACT_SENT,Q);}else{Q=this._contacts[P];Q.groups=Q.groups||[];if(Q.type=="buddy"){throw new Error("Attempted to send an add request to an existing Messenger Buddy");}Q.type="buddy";Q.authorized=0;Q.groups.push(T);this._updateContact(Q);}M.successCallback&&M.successCallback(W);},this),errorCallback:M.errorCallback,method:S.method,path:H.substitute(S.path,{user:encodeURIComponent(N),network:encodeURIComponent(L),groupname:encodeURIComponent(T)}),postBody:O});},acceptAddRequest:function(N){var P=N.alias,O=N.user,M=N.network||"yahoo",T=B.REQUESTS.ACCEPT_ADD,S=[O,M].join("~"),U=this._incomingAddRequests[S],Q=P?{authAs:P}:{},R=this.getContact(O,M),L;J.issueRequest({successCallback:C.bind(function(V){delete this._incomingAddRequests[S];N.successCallback&&N.successCallback(V);},this),errorCallback:N.errorCallback,method:T.method,path:H.substitute(T.path,{user:encodeURIComponent(O),network:encodeURIComponent(M)}),postBody:Q});if(!R||R.type!="buddy"){L={alias:P,user:O,network:M,addressbook:{firstname:U.fname||"",lastname:U.lname||"",nickname:U.nickName||"",mobileno:U.mobileNumber||""},successCallback:C.bind(function(V){this.addContacts([{user:O,network:M,authorized:0,firstname:U.fname,lastname:U.lname,nickname:U.nickName,mobileno:U.mobileNumber}]);},this)};this.addBuddy(L);}},abContactDeleted:function(L){var O=this.getContacts(),N,M;for(N=0;N<O.length;N++){if(O[N].addressbookId==L){this.unsubscribeForPresence([{id:O[N].user,network:O[N].network}]);M=[O[N].user,O[N].network].join("~");C.Global.fire(K.CONTACT_DELETED,this._contacts[M]);delete this._contacts[M];break;}}},abContactsUpdated:function(L){this.addContacts(L);this._subscribeABContacts();},getIMContactCount:function(){return this._imContacts;},getMobileContactCount:function(){return this._mobileContacts;},declineAddRequest:function(S){var O=S.alias,M=S.user,R=S.network||"yahoo",Q=B.REQUESTS.DENY_ADD,N=[M,R].join("~"),P=this._incomingAddRequests[N],L=O?{authAs:O}:{};if(S.message){L.authReason=S.message;}J.issueRequest({successCallback:C.bind(function(T){delete this._incomingAddRequests[N];S.successCallback&&S.successCallback(T);},this),errorCallback:S.errorCallback,method:Q.method,path:H.substitute(Q.path,{user:encodeURIComponent(M),network:encodeURIComponent(R)}),postBody:L});},removeContactFromGroup:function(S){var P=B.REQUESTS.DELETE_USER,N=S.user,Q=S.network||"yahoo",R=S.group,M=this._contacts[[N,Q].join("~")],O,L;J.issueRequest({method:P.method,path:H.substitute(P.path,{user:encodeURIComponent(N),network:encodeURIComponent(Q),groupname:encodeURIComponent(R)}),successCallback:function(T){for(O=0,L=M.groups.length;O<L;O++){if(M.groups[O]==R){M.groups.splice(O,1);break;}}C.Global.fire(K.CONTACT_REMOVED_FROM_GROUP,{"user":N,"network":Q,"group":R});S.successCallback&&S.successCallback(T);},errorCallback:S.errorCallback});},deleteContact:function(S){var Q,N,O=S.user,R=S.network,P=[O,R].join("~"),M=this._contacts[[O,R].join("~")],L=M.groups.slice(0);for(Q=0,N=L.length;Q<N;Q++){this.removeContactFromGroup({user:O,network:R,group:L[Q]});}M.groups=[];if(window.openmail){if(R=="facebook"){C.Global.fire(K.CONTACT_REMOVED_FROM_GROUP,{"user":O,"network":R,"group":A.get("str_cont_list_facebook_group_id")});}else{C.Global.fire(K.CONTACT_REMOVED_FROM_GROUP,{"user":O,"network":R,"group":A.get("str_cont_list_default_group_id")});
}}C.Global.fire(K.CONTACT_DELETED,M);delete this._contacts[P];},showDeleteConfirm:function(R){if(!(R&&R.user&&R.network)){return;}var O=R.user,N=R.network,M=O+"~"+N,Q=this.getContact(O,N);if(!Q){return;}var T,P,S=A.get("str_del_contact_msg_header"),L=C.bind(function(V){if(C.Lang.isObject(V)&&V.checked&&Q.type!=="addressbook"){this.unsubscribeForPresence([{id:O,network:N}]);C.Global.fire(K.DELETE_FROM_AB,Q);this.deleteContact(R);}else{if(P===undefined){this.unsubscribeForPresence([{id:O,network:N}]);C.Global.fire(K.DELETE_FROM_AB,Q);this.deleteContact(R);}else{var U=A.get("str_del_contact_msg_not_deleted_ab");U=H.substitute(U,{"contact_highlighted":"<strong>"+Q.displayname+"</strong>","str_cont_list_default_group_name":A.get("str_cont_list_default_group_name"),"str_cfg_generic_messenger":A.get("str_cfg_generic_messenger"),"str_messenger_options":H.substitute(A.get("str_menu_messenger_options"),{"str_cfg_branding_messenger":A.get("str_cfg_generic_messenger")}),"line_spacing":"<p>"});C.Messenger.WindowManager.alert(U,null,S,"warning");this.deleteContact(R);}}},this);if(Q.type==="addressbook"){T=A.get("str_del_contact_msg_ab_only_desc");T=H.substitute(T,{"contact_highlighted":"<strong>"+Q.displayname+"</strong>","contact":Q.displayname,"str_cont_list_default_group_name":A.get("str_cont_list_default_group_name"),"str_cfg_generic_messenger":A.get("str_cfg_generic_messenger"),"str_messenger_options":H.substitute(A.get("str_menu_messenger_options"),{"str_cfg_branding_messenger":A.get("str_cfg_generic_messenger")}),"line_spacing":"<p>"});}else{callInternal("getNeoString",{key:"str_branding_mail"},function(U){T=A.get("str_del_contact_msg_messenger_desc");T=H.substitute(T,{"contact_highlighted":"<strong>"+Q.displayname+"</strong>","str_cfg_generic_messenger":A.get("str_cfg_generic_messenger")});P=A.get("str_del_contact_msg_also_delete_ab");P=H.substitute(P,{"str_cfg_branding_mail":U.value});C.Messenger.WindowManager.confirm(T,L,null,S,null,P,A.get("str_delete"));});return;}C.Messenger.WindowManager.confirm(T,L,null,S,null,P,A.get("str_delete"));},blockUser:function(O){var M=B.REQUESTS.BLOCK_USER,L=O.user,N=O.network||"yahoo";C.Global.fire(K.ACK_CONVERSATION,{"alias":G.get("loggedInId"),"user":L,"network":N});J.issueRequest({successCallback:C.bind(function(P){this._ignoredUsers.push({user:L,network:N});C.Global.fire(K.USER_BLOCKED,{user:L,network:N});O.successCallback&&O.successCallback(P);},this),errorCallback:O.errorCallback,method:M.method,path:M.path,postBody:{members:[{"id":L,"network":N}]}});},unblockUser:function(L){this.unblockUsers({members:[{id:L.user,network:L.network}]});},unblockUsers:function(M){var L=B.REQUESTS.UNBLOCK_USER;J.issueRequest({method:L.method,path:L.path,postBody:{members:M.members},successCallback:C.bind(function(P){var O,N,Q;for(O=0;O<M.members.length;O++){Q=M.members[O];for(N=0;N<this._ignoredUsers.length;N++){if(this._ignoredUsers[N].user==Q.id){this._ignoredUsers.splice(N,1);break;}}C.Global.fire(K.USER_UNBLOCKED,{user:Q.id,network:Q.network||"yahoo"});}M.successCallback&&M.successCallback(P);},this),errorCallback:M.errorCallback});},showReportAbuseDialog:function(L){C.Global.fire(K.SHOW_WINDOW,D.REPORT_ABUSE_WINDOW,null,{user:L.user,alias:G.get("loggedInId"),network:L.network||"yahoo"});},reportSpam:function(O){var W=B.REQUESTS.REPORT_SPAM,X,V,P,S=O.alias,Q=O.user,N=O.network,M=O.initiatedBy,R,T,U=O.spims||[],L;if(!U.length){X=H.getConversationId(S,Q,N);V=C.Messenger.ConversationManager.getConversation(X);if(!P&&V){P=V.getMessages();}if(!P||!P.length){this.reportAbuse(O);return;}for(R=0,T=P.length;R<T&&R<50;R++){L={message:P[R].content,initiatedBy:P[R].fromSelf?1:2};if(P[R].hash){L.hash=P[R].hash;}U.push(L);}}if(!M){M=U[0].initiatedBy;}J.issueRequest({method:W.method,path:W.path,postBody:{spammerId:Q,spammedAs:S,initiatedBy:M,network:N,spims:U},successCallback:O.successCallback,errorCallback:O.errorCallback});},reportAbuse:function(R){if(R!==null){var M=H.getYidFromEmailAddr(R.user,R.network),L=M.value,P=R.network,N=R.alias||G.get("loggedInId");if(L&&P){var S=H.getConversationId(N,L,P),O,Q;if(S){Q=C.Messenger.ConversationManager.getConversation(S);O=Q.getMessages();this.openReportAbuseWindow(N,L,P,O);}}}},openReportAbuseWindow:function(V,S,O,R){var L=A.get("str_urls_report_abuse"),P,X="\r\n{{userid}} ({{time}}): {{message}}",U,W,M,Q="";if(window.launchData&&E.intl!=="us"){window.open(L,"_blank");return;}for(U=0,W=R.length;U<W;U++){M=R[U];var N=M.time?new Date(M.time*1000):new Date(),Y=C.DataType.Date.format(N,{format:E.dtf}),T=document.createElement("DIV");T.innerHTML=M.content;Q+=H.substitute(X,{userid:M.fromSelf===true?V:S,time:Y,message:T.textContent||T.innerText});}P={reporterYID:V,abuserYID:S,messengerAbuseChatLog:Q};H.postToURL(L,P);},addToVisibleList:function(M){var L=B.REQUESTS.VISIBLE_LIST_ADD;if(this.isContactOnInvisibleList(M.user,M.network)){this.removeFromInvisibleList(M);}J.issueRequest({method:L.method,path:L.path,postBody:{members:[{id:M.user,network:M.network}]},successCallback:C.bind(function(N){this._visibleList.push({user:M.user,network:M.network});M.successCallback&&M.successCallback(N);C.Global.fire(K.VISIBILITY_CHANGED,{user:M.user,network:M.network,visible:true});},this),errorCallback:M.errorCallback});},removeFromVisibleList:function(O){var M=B.REQUESTS.VISIBLE_LIST_DELETE,L=O.user,N=O.network;J.issueRequest({method:M.method,path:M.path,postBody:{members:[{id:L,network:N}]},successCallback:C.bind(function(S){var Q,P,R;for(Q=0,P=this._visibleList.length;Q<P;Q++){R=this._visibleList[Q];if(R.user==L&&R.network==N){this._visibleList.splice(Q,1);break;}}O.successCallback&&O.successCallback(S);C.Global.fire(K.VISIBILITY_CHANGED,{user:L,network:N,visible:this.isContactVisible(L,N)});},this),errorCallback:O.errorCallback});},addToInvisibleList:function(M){var L=B.REQUESTS.INVISIBLE_LIST_ADD;if(this.isContactOnVisibleList(M.user,M.network)){this.removeFromVisibleList(M);}J.issueRequest({method:L.method,path:L.path,postBody:{members:[{id:M.user,network:M.network}]},successCallback:C.bind(function(N){this._invisibleList.push({user:M.user,network:M.network});
M.successCallback&&M.successCallback(N);C.Global.fire(K.VISIBILITY_CHANGED,{user:M.user,network:M.network,visible:false});},this),errorCallback:M.errorCallback});},removeFromInvisibleList:function(O){var M=B.REQUESTS.INVISIBLE_LIST_DELETE,L=O.user,N=O.network;J.issueRequest({method:M.method,path:M.path,postBody:{members:[{id:L,network:N}]},successCallback:C.bind(function(S){var Q,P,R;for(Q=0,P=this._invisibleList.length;Q<P;Q++){R=this._invisibleList[Q];if(R.user==L&&R.network==N){this._invisibleList.splice(Q,1);break;}}O.successCallback&&O.successCallback(S);C.Global.fire(K.VISIBILITY_CHANGED,{user:L,network:N,visible:this.isContactVisible(L,N)});},this),errorCallback:O.errorCallback});},getContacts:function(P,N){var M=[],L;for(var O in this._contacts){L=this._contacts[O];if(this._contacts.hasOwnProperty(O)&&(!P||L.presence.state>-1)&&(N||L.network!="sms")){M.push(C.clone(L));}}return M;},getFacebookContacts:function(){var M=[],L;for(var N in this._contacts){L=this._contacts[N];if(this._contacts.hasOwnProperty(N)&&(L.network=="facebook")){M.push(C.clone(L));}}return M;},isContactInGroup:function(O,M){var L=this.getContactGroups(M),N;for(N=0;N<L.length;N++){if(L[N]==O){return true;}}return false;},findContactWithMobileNo:function(M){var N,L;for(N in this._contacts){if(this._contacts.hasOwnProperty(N)){L=this._contacts[N];if(L.mobileno&&H.normalizeNumber(L.mobileno)==M){return L;}}}},getContactById:function(P){var M=this._contacts[P];if(M){return C.clone(M);}else{var L=P.split("~"),N=L[0],O=L[1];return this._normalizeContact({user:N,network:O,type:"temporary"});}},isUserInContactList:function(L,M){if(this._contacts[[L,M].join("~")]){return true;}return false;},getContactGroups:function(L){if(!L.groups&&!L.displayGroup&&window.openmail){if(L.network==="facebook"){L.displayGroup=A.get("str_cont_list_facebook_group_id");}else{if(L.network=="sms"){L.displayGroup=A.get("str_cont_list_default_mobile_group_id");}else{L.displayGroup=A.get("str_cont_list_default_group_id");}}}return L.displayGroup?[L.displayGroup]:L.groups;},isPresenceAvailable:function(){return this._presenceReceived;},getIncomingAddRequests:function(){return this._incomingAddRequests;},_startListening:function(){J.addListeners([{id:"buddyInfo",callback:C.bind(this._handleBuddyInfo,this)},{id:"logOff",callback:C.bind(this._handleBuddyLogoff,this)},{id:"ignoreList",callback:C.bind(this._handleIgnoreList,this)},{id:"invisibleList",callback:C.bind(this._handleInvisibleList,this)},{id:"buddyStatus",callback:C.bind(this._handleBuddyStatus,this)},{id:"buddyAuthorize",callback:C.bind(this._handleBuddyAuthorize,this)},{id:"displayImage",callback:C.bind(this._handleDisplayImage,this)},{id:"removeBuddy",callback:C.bind(this._handleRemoveBuddy,this)},{id:"addResponse",callback:C.bind(this._handleAddResponse,this)},{id:"buddyMove",callback:C.bind(this._handleBuddyMove,this)},{id:"renameGroup",callback:C.bind(this._handleRenameGroup,this)},{id:"editIgnoreList",callback:C.bind(this._handleEditIgnore,this)},{id:"editInvisibleList",callback:C.bind(this._handleEditInvisible,this)},{id:"editVisibleList",callback:C.bind(this._handleEditVisible,this)},{id:"avatarImage",callback:C.bind(this._handleAvatarImage,this)},{id:"displayImagePrefs",callback:C.bind(this._handleDisplayImgPrefs,this)}]);},_handleAddressBookData:function(L){if(!this._abUtils){this._abUtils=new C.Messenger.ABUtils();}this._abUtils.parse(L,C.bind(function(M){this.addContacts(M);this.set("ABDataReceived",true);C.later(1000,this,this._subscribeABContacts);},this));},_subscribeABContacts:function(){if(!G.isOnline()){return;}var P,L,O,M=[],N=G.get("presenceSubscriptionsMaxPerRequest");for(P in this._contacts){if(this._contacts.hasOwnProperty(P)){L=this._contacts[P];if(!L.subscribed&&L.type=="addressbook"&&L.network!="sms"&&!G.isSelfUser(L.user)){O={id:L.user};if(L.network!="yahoo"){O.network=L.network;}L.subscribed=true;M.push(O);if(M.length==N){this.subscribeForPresence(M);M=[];}}}}if(M.length){this.subscribeForPresence(M);}},subscribeForPresence:function(L){var M=B.REQUESTS.SUBSCRIBE_PRESENCE;J.issueRequest({type:"PRESENCE",method:M.method,path:M.path,args:M.args,postBody:{members:L}});},unsubscribeForPresence:function(L){var M=B.REQUESTS.UNSUBSCRIBE_PRESENCE;J.issueRequest({type:"PRESENCE_OFF",method:M.method,path:M.path,args:M.args,postBody:{members:L}});},_handleConnectionChange:function(L){if(!L.isOnline){for(var M in this._contacts){if(this._contacts.hasOwnProperty(M)){this._contacts[M].presence={state:-1,message:""};if(this._contacts[M].type=="addressbook"){this._contacts[M].subscribed=false;}}}this._presenceReceived=false;}else{this._subscribeABContacts();}},isContactVisible:function(N,P){var Q=[N,P].join("~"),O,M,L;if(G.isInvisible()){return this.isContactOnVisibleList(N,P);}else{return !this.isContactOnInvisibleList(N,P);}},isContactOnVisibleList:function(N,P){var O,M,L;for(O=0,M=this._visibleList.length;O<M;O++){L=this._visibleList[O];if(L.user==N&&L.network==P){return true;}}return false;},isContactOnInvisibleList:function(N,P){var O,M,L;for(O=0,M=this._invisibleList.length;O<M;O++){L=this._invisibleList[O];if(L.user==N&&L.network==P){return true;}}return false;},isUserBlocked:function(L,M){return this.isUserIgnored(L,M)||this.isBlockedNonContact(L,M);},isUserIgnored:function(M,P){var N,L,O;for(N=0,L=this._ignoredUsers.length;N<L;N++){O=this._ignoredUsers[N];if(O.user==M&&O.network==P){return true;}}return false;},isBlockedNonContact:function(L,M){return F.get("blockNonContacts")&&(M!=="sms")&&!this.isUserInContactList(L,M);},getPendingAddRequest:function(L,M){return this._incomingAddRequests[[L,M||"yahoo"].join("~")];},getPendingAddRequests:function(){var M,L=[];for(M in this._incomingAddRequests){if(this._incomingAddRequests.hasOwnProperty(M)){L.push(this._incomingAddRequests[M]);}}return L;},addContacts:function(N){var M,L;for(M=0;M<N.length;M++){L=N[M].contact||N[M];this._addContact(L);}},processBuddies:function(O){var N,M,L;for(N=0,M=O.length;N<M;N++){L=O[N].contact||O[N];
L.type="buddy";O[N]=L;}this.addContacts(O);},_addContact:function(L){L.user=L.user||L.id||L.sender;L.network=L.network||"yahoo";var N=[L.user,L.network].join("~"),M;if(!this._contacts[N]){L.hash=I++;M=this._normalizeContact(L);if(L.network==="facebook"&&L.displayname===L.user){return null;}this._contacts[N]=M;H.arrayFire(K.CONTACTS_ADDED,[L]);}else{this._updateContact(L);}if(L.network=="sms"){this._mobileContacts++;}else{this._imContacts++;}return this._contacts[N];},_updateContact:function(M){M.user=M.user||M.id||M.sender;M.network=M.network||"yahoo";var N=[M.user,M.network].join("~"),L=this._contacts[N];if(!L){return this._addContact(M);}else{C.mix(L,this._normalizeContact(M,true),true,null,0,true);H.arrayFire(K.CONTACTS_UPDATED,[this._contacts[N]]);}return this._contacts[N];},viewFacebookProfile:function(L){var O="",N="",M=L.network;if(M=="facebook"){O=(L.user).replace("@chat.facebook.com","").replace("-","");O=encodeURIComponent(O);N="http://www.facebook.com/profile.php?id="+O;window.open(N,"_newtab");}},getContact:function(L,M){return this.getContactById([L,M].join("~"));},updateContact:function(N,P,M){var S=this._contacts[[N,P].join("~")],O,L,R=M.mobileno,Q=S.mobileno;if(!S){return null;}this._updateContact(M);if(R&&R!==Q){O=B.REQUESTS.UPDATE_USER;L={addressbook:{id:M.addressbookId,mobileno:R}};J.issueRequest({method:O.method,path:H.substitute(O.path,{user:encodeURIComponent(N),network:encodeURIComponent(P)}),postBody:L});}},getContactDisplayImage:function(L,M){if(typeof(L)!="object"){L=this._contacts[L];}M=M||"32";var N=L&&L.imageUrl?L.imageUrl:this._getContactDisplayImage(L);return H.substitute(N,{"pixels|32|48":M});},isNonBuddyInterOpUser:function(M,N){N=N||"yahoo";var P,L,O=false;if(N!=="yahoo"&&N!=="sms"&&N!=="facebook"){P=M+"~"+N;L=this._contacts[P];O=!(L&&L.type==="buddy"&&L.authorized);}return O;},_getContactDisplayImage:function(L){if(L.url){if(L.network=="facebook"){delete L.url;return H.getImageUrl(L);}else{return L.url;}}else{return H.getImageUrl(L);}},_normalizeContact:function(N,M){N.user=N.user||N.id||N.sender;N.network=N.network||"yahoo";var P,L;if(typeof N.presenceState!="undefined"){N.presence=H.normalizePresenceState(N);}else{if(!M){N.presence=N.presence||{state:-1,message:""};}}if(typeof(N.authorized)!="undefined"||!M){N.authorized=N.authorized===0?false:true;}var O=N.clientCapabilities;if(O!==undefined&&O!==""&&C.Lang.isNumber(O)){N.clientCapabilities={};N.clientCapabilities.richText=!!(O&1);N.clientCapabilities.smileys=!!(O&2);N.clientCapabilities.buzz=!!(O&4);N.clientCapabilities.fileXfer=!!(O&32768);N.clientCapabilities.voice=!!(O&65536);N.clientCapabilities.video=!!(O&4194304);N.clientCapabilities.typing=!!(O&8388608);N.clientCapabilities.videoDevice=!!(O&16777216);}else{if(!M){N.clientCapabilities={};if(N.network==="yahoo"){N.clientCapabilities.richText=true;N.clientCapabilities.smileys=true;N.clientCapabilities.buzz=true;N.clientCapabilities.fileXfer=true;N.clientCapabilities.voice=true;N.clientCapabilities.video=true;N.clientCapabilities.typing=true;N.clientCapabilities.videoDevice=true;}}}if(!M){N.clientType=N.clientType||"0";if(!N.type){N.type=N.addressbook?"addressbook":"buddy";}}if(N.addressbook){C.aggregate(N,N.addressbook,false);N.displayname=this.getContactDisplayName(N);}else{if(!M){N.displayname=N.displayName||N.user;}}if(window.openmail){if(N.network==="facebook"){N.displayGroup=A.get("str_cont_list_facebook_group_id");}else{if(N.network=="sms"){N.displayGroup=A.get("str_cont_list_default_mobile_group_id");}else{N.displayGroup=A.get("str_cont_list_default_group_id");}}}if(N.groups||!M){N.groups=N.groups||[];for(P=0,L=N.groups.length;P<L;P++){if(N.groups[P].group){N.groups[P]=N.groups[P].group;}if(N.groups[P].name){N.groups[P]=N.groups[P].name;}}}return N;},getContactDisplayName:function(N){var P="",M=C.Lang.trim,L,O;if(N.displayname){return N.displayname;}if(N.nickname&&N.nickname!=N.user){P=N.nickname;}else{if(N.firstname){if(N.lastname){L=A.get("str_session_display_name_order_no_trans");O=H.substitute(L?L:"{{first}} {{last}}",{first:N.firstname,last:N.lastname});P=O;}else{P=N.firstname;}}else{if(N.lastname){P=N.lastname;}else{if(N.user){P=N.user;}else{if(N.mobileno){P=N.mobileno;}}}}}P=H.escapeHtml(P);return P;},_handleBuddyInfo:function(O){this._presenceReceived=true;var N=O.contact,M;if(!N){return;}if(!N.length){N=[N];}for(M=0;M<N.length;M++){var L=N[M];L.user=L.sender;if(L.displayName){L.displayname=L.displayName;}this._updateContact(L);}},_handleBuddyLogoff:function(O){var M=O.buddy,N=O.network||"yahoo",L;if(O.echo){return;}L=this._contacts[[M,N].join("~")];if(L){L.presence.state=-1;L.presence.message="";H.arrayFire(K.CONTACTS_UPDATED,[L]);}},_handleIgnoreList:function(O){this._ignoredUsers=[];var P=O.ignoredUsers,L,M,N;for(M=0;M<P.length;M++){N=P[M].ignoredUser;this._ignoredUsers.push({user:N.id,network:N.network||"yahoo"});C.Global.fire(K.USER_BLOCKED,{user:N.id,network:N.network||"yahoo"});}},_handleInvisibleList:function(P){this._invisibleList=[];var R=P.users,L,N,Q,M,O;for(N=0;N<R.length;N++){Q=R[N].user;M=Q.id;O=Q.network||"yahoo";this._invisibleList.push({user:M,network:O});C.Global.fire(K.VISIBILITY_CHANGED,{user:M,network:O,visible:false});}},_handleEditIgnore:function(P){var M=P.userName,O=P.network||"yahoo",N,L;if(!P.errorCode&&P.type==1&&M){if(P.state==1){this._ignoredUsers.push({user:M,network:O});C.Global.fire(K.USER_BLOCKED,{user:M,network:O});}else{for(N=0,L=this._ignoredUsers.length;N<L;N++){if(this._ignoredUsers[N].user==M&&this._ignoredUsers[N].network==O){this._ignoredUsers.splice(N,1);C.Global.fire(K.USER_UNBLOCKED,{user:M,network:O});break;}}}}},_handleEditInvisible:function(Q){var S=Q.buddyList,O,N,L,M,P,R;if(!Q.errorCode&&Q.type==1){if(Q.command==3){while(this._invisibleList.length){M=this._invisibleList.pop();if(!G.isInvisible()||this.isOnVisibleList(M.user,M.network)){C.Global.fire(K.VISIBILITY_CHANGED,{user:M.user,network:M.network,visible:this.isContactVisible(M.user,M.network)});}}}else{for(O=0,L=S.length;O<L;O++){M=S[O].buddy;
P=S[O].network||"yahoo";if(Q.command==1){this._invisibleList.push({user:M,network:P});C.Global.fire(K.VISIBILITY_CHANGED,{user:M,network:P,visible:false});}else{for(N=0;N<this._invisibleList.length;N++){if(this._invisibleList[N].user==M&&this._invisibleList[N].network==P){this._invisibleList.splice(N,1);C.Global.fire(K.VISIBILITY_CHANGED,{user:M,network:P,visible:this.isContactVisible(M,P)});break;}}}}}}},_handleEditVisible:function(Q){var R=Q.buddyList,O,N,L,M,P;if(!Q.errorCode&&Q.type==1){if(Q.command==3){while(this._visibleList.length){M=this._visibleList.pop();C.Global.fire(K.VISIBILITY_CHANGED,{user:M.user,network:M.network,visible:this.isContactVisible(M.user,M.network)});}}else{for(O=0,L=R.length;O<L;O++){M=R[O].buddy;P=R[O].network||"yahoo";if(Q.command==1){this._visibleList.push({user:M,network:P});C.Global.fire(K.VISIBILITY_CHANGED,{user:M,network:P,visible:true});}else{for(N=0;N<this._visibleList.length;N++){if(this._visibleList[N].user==M&&this._visibleList[N].network==P){this._visibleList.splice(N,1);C.Global.fire(K.VISIBILITY_CHANGED,{user:M,network:P,visible:this.isContactVisible(M,P)});break;}}}}}}},_handleBuddyStatus:function(M){if(M.echo){return;}var L={contact:[M]};this._handleBuddyInfo(L);},_handleBuddyAuthorize:function(N){var M,L;N.network=N.network||"yahoo";N.user=N.user||N.sender;N.alias=N.receiver;L=[N.user,N.network].join("~");if(!N.echo&&N.status==0||N.status==3){if(this._addReqThrottleTimer){this._addReqThrottleTimer.cancel();delete this._addReqThrottleTimer;}this._incomingAddRequests[L]=N;this._addReqThrottleTimer=C.later(1000,this,function(){var O=this.getPendingAddRequests();if(O.length==1){C.Global.fire(K.CONTACT_AUTHORIZE_REQUEST,O[0]);}else{C.Global.fire(K.MULTIPLE_CONTACT_AUTHORIZE_REQUEST,O);}delete this._addReqThrottleTimer;});}else{if(N.status==1){N.authResponse=N.authState==1?"allow":"deny";if(this._contacts[L]){this._contacts[L].authorized=N.authState==1?1:0;}this._incomingAddRequests[L]&&delete this._incomingAddRequests[L];C.Global.fire(K.CONTACT_AUTHORIZE_RESPONSE,N);}else{M=[{user:N.receiver,network:N.network,authorized:0,mobileno:N.mobileNumber,firstname:N.fname,lastname:N.lname,nickname:N.nickName}];this.addContacts(M);C.Global.fire(K.CONTACTS_ADDED,M);}}},_handleDisplayImage:function(O){var M=O.sender,N=O.network||"yahoo",L=this._contacts[[M,N].join("~")];if(G.isSelfUser(M)){G.set("displayImage",O.url);C.Global.fire(K.SELF_IMAGE_UPDATED);}else{if(L){L.url=O.url;L.checksum=O.checksum;if(N=="facebook"){L.imageUrl=H.getImageUrl(L);delete L.url;}else{L.imageUrl=O.url;}C.Global.fire(K.CONTACT_IMAGE_UPDATED,L);}}},_handleAvatarImage:function(N){var M=N.sender,L=this._contacts[[M,"yahoo"].join("~")];if(L){L.avatarHash=N.avatarHash;L.url="";L.imageUrl=this._getContactDisplayImage(L);C.Global.fire(K.CONTACT_IMAGE_UPDATED,L);}},_handleDisplayImgPrefs:function(P){var M=P.sender,O=P.network||"yahoo",L=this._contacts[[M,O].join("~")],N;if(L){L.url="";L.imageUrl="";L.checksum=P.checksum;L.avatarHash=P.avatarHash;L.avatarPreference=P.avatarPreference;L.imageUrl=this._getContactDisplayImage(L);C.Global.fire(K.CONTACT_IMAGE_UPDATED,L);}else{if(!M&&G.isSelfUser(P.receiver)){P.network="yahoo";P.user=G.get("loggedInId");N=H.getImageUrl(P);G.set("displayImage",N);C.Global.fire(K.SELF_IMAGE_UPDATED);}}},_handleRemoveBuddy:function(R){if(R.type==1&&!R.errorCode){var N=R.buddy,Q=R.network||"yahoo",S=R.groupName,P=[N,Q].join("~"),M=this._contacts[P],O,L;if(M){if(S){for(O=0,L=M.groups.length;O<L;O++){if(M.groups[O]==S){M.groups.splice(O,1);break;}}}else{M.groups=[];}C.Global.fire(K.CONTACT_REMOVED_FROM_GROUP,{"user":N,"network":Q,"group":S});if(M.groups.length===0){C.Global.fire(K.CONTACT_DELETED,M);delete this._contacts[P];}}}},_handleAddResponse:function(N){var O=N.buddy?[{buddy:N.buddy,network:N.network||"yahoo"}]:N.buddyList,P,M,L;for(M=0,L=O.length;M<L;M++){P=[O[M].buddy,O[M].network||"yahoo"].join("~");if(this._pendingAddRequests[P]){if(N.errorCode){this._pendingAddRequests[P].errorCallback&&this._pendingAddRequests[P].errorCallback(N);}else{this._pendingAddRequests[P].successCallback&&this._pendingAddRequests[P].successCallback(N);}delete this._pendingAddRequests[P];}}},_handleBuddyMove:function(P){if(P.type==1&&P.buddyInfo){var O,N,R,S,Q,T,L,M;for(Q=0,T=P.buddyInfo.length;Q<T;Q++){if(!P.buddyInfo[Q].errorCode){O=P.buddyInfo[Q].buddy;N=P.buddyInfo[Q].network||"yahoo";R=[O,N].join("~");S=this._contacts[R];L=P.buddyInfo[Q].group;M=P.buddyInfo[Q].targetGroup;if(S){for(Q=0,T=S.groups.length;Q<T;Q++){if(S.groups[Q]==L){S.groups.splice(Q,1);break;}}S.groups.push(M);C.Global.fire(K.CONTACT_MOVED,{contact:S,oldGroup:L,newGroup:M});}}}}},_handleRenameGroup:function(P){if(P.type==1&&!P.errorCode){var R=P.groupName,O=P.newGroupName,M,N,L,Q;for(Q in this._contacts){if(this._contacts.hasOwnProperty(Q)){M=this._contacts[Q];for(N=0,L=M.groups.length;N<L;N++){if(M.groups[N]==R){M.groups[N]=O;break;}}}}C.Global.fire(K.GROUP_RENAMED,{groupName:R,newGroupName:O});}}});YUI.Messenger.ContactsManager=new B();}C.namespace("Messenger").ContactsManager=YUI.Messenger.ContactsManager;C.Command.registerModule("yim",C.Messenger.ContactsManager);},"@VERSION@",{requires:["base-base","requestmanager","command","yim-intl","commonutils","events","abutils"]});YUI.add("om-window-api",function(A){if(!YUI.namespace("Messenger").WindowAPI){YUI.Messenger.WindowAPI=(function(){var B=openmail.Application,C=10;return{LoadHidden:function(F,E,D){this.LoadWindow(F,E,{hidden:true});},LoadWindow:function(L,F,O,J){var N={id:F,view:launchData.blankHtml,target:O.target||"overlay",title:O.title,options:O},M=!O.hidden,G=0;N.options.hidden=true;if(N.target=="tab"){N.view=launchData.blankTabHtml;}if(F=="yimapp_mintymainwindow"){N.target="folderpane";}function P(Q){try{if(Q.document&&Q.document.body&&Q.document.body.className.indexOf("yim-basic-skin")>-1){return true;}}catch(R){}return false;}if(O.new_browser_window){var K,E,D=false,I;if(launchData.isSecure){I=window.location.href.split("messenger.html")[0]+"sblank.html?#vid="+F;}else{I=window.location.href.split("messenger.html")[0]+"blank.html?#vid="+F;}K=window.open(I,"_blank","resizable=1,status=0,toolbar=0,menubar=0,location=0,scrollbars=0,height="+O.height+",width="+O.width);if(K===null){throw new Error("Couldn't create a popout window - probably due to a popup blocker.  Window ID = "+F);}if(J){K.onabort=K.onunload=function(Q){if(K.closed){J({loadError:"Window closed before load completed."});}};if(!A.UA.ie){K.onload=function(Q){K.onabort=K.onunload=null;J(K);};}else{function H(Q){Q=Q||0;if(Q>200){return;}try{if(P(K)){K.onabort=K.onunload=null;D=true;J(K);}else{E=A.later(100,this,H,++Q);}}catch(R){}}E=A.later(100,this,H);K.attachEvent("onload",A.bind(function(){if(!D&&P(K)){if(E){E.cancel();E=null;}D=true;try{K.onabort=K.onunload=null;J(K);}catch(Q){}}},this));}}}else{G=B.openView(N,A.bind(function(){if((O.top||O.bottom)&&(O.left||O.right)){this.MoveTo(F,O.left,O.top,O.right,O.bottom);}if(M){this.Show(F);}if(!J){return;}function T(){var W=null;for(var V=top.frames.length;V--;){try{W=top.frames[V];if(W.openmail.Application.sendMessage.viewId==F){break;}}catch(X){}}return W;}var U,R=false,S=A.later(2000,null,function(){var V=T();R=true;J(V);});function Q(V,W){W=W||0;if(S){S.cancel();S=null;}if(W>1000){return;}if(R){return;}try{U=top.frames[V.id]||T();if(!P(U)){U=T();}if(P(U)){R=true;J(U);}else{A.later(10,null,function(){Q(V,W++);});}}catch(X){}}B.callWebService({url:"apps://",method:"GET",parameters:{cmd:"getFrameNameByViewId",args:{id:F}}},Q);},this));if(G){}}return G;},Unload:function(D){B.closeView({id:D});},GetViewport:function(D){callInternal("getViewport",null,function(E){D&&D({x0:E.scrollX,y0:E.scrollY,dx:E.width,dy:E.height});});},Restore:function(D){callInternal("restoreView",{id:D});A.Global.fire("ytogo.WindowRestored",D);},Minimize:function(F,E,D){D=D||27;callInternal("minimizeView",{id:F,width:E,height:D});A.Global.fire("ytogo.WindowMinimized",F);},Hide:function(D){callInternal("hideView",{id:D});A.Global.fire("ytogo.WindowHidden",D);},Show:function(D){callInternal("showView",{id:D});A.Global.fire("ytogo.WindowShown",D);},MakeTopMostDiv:function(D){callInternal("makeTopMostView",{id:D});A.Global.fire("ytogo.WindowBroughtToFront",D);},Focus:function(D){callInternal("focusView",{id:D});},SetTitle:function(E,D){D.id=E;callInternal("setTabTitle",D);},BeginMove:function(D){this.MakeTopMostDiv(D);callInternal("beginMoveView",{id:D});},Move:function(F,E,D){callInternal("moveView",{id:F,dx:E,dy:D});},EndMove:function(D){callInternal("endMoveView",{id:D});},MoveTo:function(I,H,G,E,D,F){callInternal("moveViewTo",{id:I,"left":H,"top":G,"right":E,"bottom":D});if(F){this.RestrictToViewport(I);}},MoveToCenter:function(G,D,E,F){this.GetViewport(A.bind(function(H){var J=(H.dx/2-D/2)+H.x0,I=(H.dy/2-E/2)+H.y0;this.MoveTo(G,J,I,J+D,I+E);if(F){F();}},this));},DemoDock:function(D){callInternal("dockView",{id:D});},DemoUndock:function(D){callInternal("undockView",{id:D});},BeginResize:function(D){callInternal("beginResizeView",{id:D});},Resize:function(H,E,D,G,F){callInternal("resizeView",{id:H,dx:E,dy:D,left:G,top:F});A.Global.fire("ytogo.WindowResized",H);},EndResize:function(D){callInternal("endResizeView",{id:D});A.Global.fire("ytogo.WindowResized",D);},SetSize:function(G,E,D,F){callInternal("setViewSize",{id:G,width:E,height:D});A.Global.fire("ytogo.WindowResized",G);if(F){this.RestrictToViewport(G);}},GetPosAndSize:function(E,D){callInternal("getViewRegion",{id:E},D);},RestrictToViewport:function(F,D){var E=D&&D.top&&D.left&&D.width&&D.height?D:null;if(!E){this.GetPosAndSize(F,A.bind(function(G){this.RestrictToViewport(F,G);},this));}else{this.GetViewport(A.bind(function(G){var H=G.dy-C,J=G.dx-C,K=D.left,I=D.top;if(D.left<0){K=0;}else{if(D.left+D.width>J){K=J-D.width;}}if(D.top<0){I=0;}else{if(D.top+D.height>H){I=H-D.height;}}if(I!=D.top||K!=D.left){this.MoveTo(F,K,I);}},this));}}};})();}A.namespace("Messenger").WindowAPI=YUI.Messenger.WindowAPI;},"@VERSION@");YUI.add("oui-window-modder",function(A){A.namespace("Messenger").WindowModder=function(Q,K){K=K||{};var i=Q||A.config.win,H=i.document,P,m;var W=false,q=(i.external&&typeof i.XMLHttpRequest=="undefined"),L=false,Y=A.Messenger.WindowAPI,l="",T=0,C=0,O,J=false,S=false,R=false,G,e=false,b=false,a=false,o={},V,j=K.rtl||false;if(typeof(i.IOWA)==="object"){if(typeof(i.IOWA.rpc)==="object"){L=i.IOWA.rpc;}}function k(r){if((typeof(console)==="object")&&(typeof(console.log)==="function")){console.log(H.URL+": "+r);}}function Z(t,s,u,r){if(typeof r==="undefined"){r=false;}if(t.addEventListener){t.addEventListener(s,u,r);}else{t.attachEvent("on"+s,u);}}function c(t,s,u,r){if(typeof r==="undefined"){r=false;}if(t.removeEventListener){t.removeEventListener(s,u,r);}else{t.detachEvent("on"+s,u);}}function N(r){if(typeof(r)==="string"){r=A.one(H.body).one(r);}if(r){r.set("unselectable","on");r.setStyle("MozUserSelect","none");r.setStyle("WebkitUserSelect","none");}}function g(r){if(typeof(r)==="string"){r=A.one(H.body).one(r);}if(r){r.set("unselectable","off");r.setStyle("MozUserSelect","");r.setStyle("WebkitUserSelect","");}if(i.getSelection){var s=i.getSelection();s.collapse(H.body,0);}}function D(){if(i.getSelection){var s=i.getSelection();s.removeAllRanges();}else{try{if(H.selection.createRange){var r=H.selection.createRange();H.selection.empty();}}catch(t){}}}function f(r){i=r;H=i.document;}function M(r){if(r.move_only_x){S=r.move_only_x;}if(r.move_only_y){R=r.move_only_y;}if(r.resize_only_x){b=r.resize_only_x;}if(r.resize_only_y){a=r.resize_only_y;}}function h(r){if(O!==undefined){c(O,"mousedown",F);O=undefined;}if(r&&r!==""){var s=H.getElementById(r);if(s){O=s;Z(s,"mousedown",F);}}}function I(s,r){if(o[s]!==undefined){c(o[s],"mousedown",U);o[s]=undefined;}if(r&&r!==""){var t=H.getElementById(r);if(t){o[s]=t;Z(t,"mousedown",U);}}}function F(r){if(J){return;}J=true;n(r);}function U(r){if(e){return;}e=true;n(r);}function n(s){s=s||i.event;var r;var t;D();N(A.one(H.body));t=s.target?s.target:s.srcElement;t&&t.setCapture&&t.setCapture();if(P){Y.MakeTopMostDiv(m);Y.Show(m);Y.MakeTopMostDiv(l);}r=(t&&t.setCapture)?t:H;Z(r,"mousemove",B,true);Z(r,"mouseup",p,true);if(P){if(A.UA.ie){Z(P.document,"mousemove",B,true);Z(P.document,"mouseup",p,true);}else{Z(P,"mousemove",B,true);Z(P,"mouseup",p,true);}}T=s.screenX;C=s.screenY;if(J){Y.BeginMove(l);}if(e){V=t.id;Y.BeginResize(l);}}function p(s){s=s||i.event;var r;var t=s.target?s.target:s.srcElement;if(J){J=false;Y.EndMove(l);}if(e){e=false;Y.EndResize(l);}P&&Y.Hide(m);r=(t&&t.setCapture)?t:H;H.releaseCapture&&H.releaseCapture();c(r,"mouseup",p,true);c(r,"mousemove",B,true);if(P){if(A.UA.ie){c(P.document,"mousemove",B,true);c(P.document,"mouseup",p,true);}else{c(P,"mousemove",B,true);c(P,"mouseup",p,true);}}V=undefined;g(A.one(H.body));}function B(u){u=u||i.event;var t=(u.screenX-T),s=(u.screenY-C);if(J){if(S){s=0;}if(R){t=0;}if(W){k("calling OUI.window.Move("+l+", "+t+", "+s+")");}Y.Move(l,t,s);}else{if(e){if(b){s=0;}if(a){t=0;}var r,v;if(V=="IowaWindowResizerTop"){t=0;r=false;v=true;}else{if(V=="IowaWindowResizerBottom"){t=0;r=false;v=false;}else{if(V=="IowaWindowResizerLeft"){s=0;r=true;v=false;}else{if(V=="IowaWindowResizerRight"){s=0;r=false;v=false;}else{if(V=="IowaWindowResizerTopLeft"){r=true;v=true;}else{if(V=="IowaWindowResizerTopRight"){r=false;v=true;}else{if(V=="IowaWindowResizerBottomLeft"){r=true;v=false;}else{if(V=="IowaWindowResizerBottomRight"){r=false;v=false;}}}}}}}}if(j){r=!r;}Y.Resize(l,t,s,r,v);}}}function X(r){if(r.oui_div_id){l=r.oui_div_id;}if(typeof(r.gripper_element_id)!="undefined"){h(r.gripper_element_id);}if(typeof(r.resizer_element_id)!="undefined"){I(3,r.resizer_element_id);}if(typeof(r.top_resizer_element_id)!="undefined"){I(0,r.top_resizer_element_id);}if(typeof(r.top_right_resizer_element_id)!="undefined"){I(1,r.top_right_resizer_element_id);}if(typeof(r.right_resizer_element_id)!="undefined"){I(2,r.right_resizer_element_id);}if(typeof(r.bottom_right_resizer_element_id)!="undefined"){I(3,r.bottom_right_resizer_element_id);}if(typeof(r.bottom_resizer_element_id)!="undefined"){I(4,r.bottom_resizer_element_id);}if(typeof(r.bottom_left_resizer_element_id)!="undefined"){I(5,r.bottom_left_resizer_element_id);}if(typeof(r.left_resizer_element_id)!="undefined"){I(6,r.left_resizer_element_id);}if(typeof(r.top_left_resizer_element_id)!="undefined"){I(7,r.top_left_resizer_element_id);}}function d(s,r){P=r;m=s;}function E(){var r={};r.oui_div_id="";r.gripper_element_id="";r.resizer_element_id="";r.top_resizer_element_id="";r.top_right_resizer_element_id="";r.right_resizer_element_id="";r.bottom_right_resizer_element_id="";r.bottom_resizer_element_id="";r.bottom_left_resizer_element_id="";r.left_resizer_element_id="";r.top_left_resizer_element_id="";X(r);}return{setConstraints:M,setElementIds:X,clearElementIds:E,setBackingDiv:d,setWindowContext:f};};},"@VERSION@",{requires:["om-window-api"]});YUI.add("oui-basewindow",function(B){var F=B.Node,H="oui-modalwindow-event",A="oui-modalwindow-closed",D="oui-window-shown",J="oui-window-hidden",E="drag-backing-div",C=B.Messenger.WindowAPI,G=window.WINDOW_MOVEMENT_BACKER;function I(K){I.superclass.constructor.apply(this,arguments);}I.NAME="oui-basewindow";I.ATTRS={windowName:{value:"BaseWindow"},contentClass:{},requires:{},showChrome:{value:true},visible:{value:false},disabled:{value:false},waiting:{value:false},minimized:{value:false},modal:{value:false},startHidden:{value:false},startMinimized:{value:false},showClose:{value:true},showMaximize:{value:false},showMinimize:{value:false},allowResize:{value:true},allowMove:{value:true},startPosition:{value:{top:400,left:400}},startHeight:{value:200},startWidth:{value:200},minWidth:{value:0},minHeight:{value:0},limitToViewport:{value:true},centerOnShow:{value:false},cssFiles:{value:[]},cssClass:{value:""},cssLoaded:{value:false},contentObject:{value:null},srcWindow:{value:""},allowDisable:{value:true},title:{setter:function(L){if(L&&this._rendered&&this.get("showChrome")&&this._win){var K=B.one(this._win.document.body);if(K.one("#titleText")){K.one("#titleText")._node.innerHTML=L;}}if((this.get("windowType")=="browserWindow")&&this._win&&this._win.document){this._win.document.title=L;}else{if(this.get("windowType")=="mailTab"&&this._rendered){C.SetTitle(this.get("windowName"),{title:L});}}return L;}},windowContentType:{value:""},elementTitle:{value:""},rendered:{value:false},showPopOut:{value:false},showPopIn:{value:false},windowType:{value:"iframe"},ariaRole:{value:""},rtl:{value:false},iframeLocation:{value:"overlay"}};B.extend(I,B.Base,{initializer:function(K){this._eh=[];this._unloaded=false;if(K.initData){this._initData=K.initData;}},render:function(P,L){var K=this.get("windowName"),N=this.get("centerOnShow")?{}:this.get("startPosition")||{},M=this.get("windowType");if(this._rendered){throw new Error("Tried to render the same OUI window twice.  Window name = "+K);}this._rendered=true;N.id=K;N.hidden=true;N.height=this.get("startHeight");N.width=this.get("startWidth");N.minWidth=this.get("minWidth");N.minHeight=this.get("minHeight");N.limit_to_viewport=this.get("limitToViewport");N.title=this.get("title");N.store=false;N.elementTitle=this.get("elementTitle");N.ariaRole=this.get("ariaRole");if(M=="browserWindow"){N.new_browser_window=true;this.set("showMaximize",false);this.set("showMinimize",false);this.set("showClose",false);this.set("allowResize",false);this.set("allowMove",false);this.set("showPopIn",this.get("showPopOut"));this.set("showPopOut",false);}else{if(M=="mailTab"){N.target="tab";N.inactive=this.get("startHidden");this.set("showMaximize",false);this.set("showMinimize",false);this.set("showClose",false);this.set("allowResize",false);this.set("allowMove",false);this.set("showPopIn",false);this.set("showPopOut",false);}else{if(M=="iframe"){N.new_browser_window=false;N.target=this.get("iframeLocation");}}}if(!L){try{C.LoadWindow({},K,N,B.bind(function(Q){if(Q.loadError){if(M==="browserWindow"){this.set("windowType","iframe");this._rendered=false;this.render(P);}}else{this.initWindow(Q,P);}},this));}catch(O){if(M==="browserWindow"){this.set("windowType","iframe");this._rendered=false;this.render(P);}}}else{this.initWindow(L,P);}},initWindow:function(L,N){var K=this,M=this.get("windowType");this.set("rendered",true);this._win=L;this._win.windowName=this.get("windowName");if(this.get("ariaRole")!==""){this._win.document.body.setAttribute("role",this.get("ariaRole"));}if(this.get("allowResize")||this.get("allowMove")){this._windowModder=new B.Messenger.WindowModder(L,{rtl:this.get("rtl")});if(this._windowModder){if(!G){B.later(100,this,function(){C.LoadWindow({},E,{hidden:true,width:5000,height:5000,top:-500,left:-500,id:E},function(P){var O=B.one(P.document.body).one(".window-loading-div");if(O){O.setStyle("display","none");}window.WINDOW_MOVEMENT_BACKER=G=P;G.windowName=E;K._windowModder.setBackingDiv(E,G);});});}else{this._windowModder.setBackingDiv(E,G);}}}if(this.get("windowType")=="browserWindow"||!this.get("startHidden")){this.show();}this._injectContent(L,B.bind(function(O){if(M!="iframe"){if(M=="browserWindow"){if(this.get("title")){this._win.document.title=this.get("title");}this._addEventListener(this._win,"focus",B.bind(this.focus,this));this._addEventListener(this._win,"unload",B.bind(function(P){this.hide(true);},this));}else{this._win.focusHandler=B.bind(this.focus,this);this._win.closeHandler=B.bind(function(){this._unloaded=true;B.later(0,this,function(){this.hide(true);});},this);this._win.blurHandler=B.bind(this.blur,this);}this._addEventListener(this._win,"resize",B.bind(function(P){B.Global.fire("ytogo.WindowResized",this.get("windowName"));},this));}else{if(this.get("startMinimized")){this.minimize();}}N&&N(O);},this));},destructor:function(){B.each(this._eh,function(M){M.detach();});var K=this.get("contentObject");if(K&&K.destroy){try{K.destroy();}catch(L){}}if(!(this.get("windowType")=="browserWindow")){if(!this._unloaded){C.Unload(this.get("windowName"));}}else{this._win.close();}this._win=null;},show:function(N){if(!this._rendered){this.render();B.later(100,this,function(){this.show(N);});return;}if(!this.get("rendered")){B.later(100,this,function(){this.show(N);});return;}if(!this._pendingShowListener){if(!this.get("visible")){if(!this.get("cssLoaded")){this._pendingShowListener=this.after("cssLoadedChange",B.bind(function(){this._pendingShowListener.detach();this._pendingShowListener=null;this.show(N);},this));return;}var L=this.get("windowName"),M,K;if(this.get("centerOnShow")){C.MoveToCenter(L,this.get("startWidth"),this.get("startHeight"),B.bind(function(){C.Show(L);if(this.get("windowType")=="iframe"&&!this.get("disabled")){this.bringToFront();}},this));}else{C.Show(L);if(this.get("windowType")=="iframe"&&!this.get("disabled")){this.bringToFront();}}}this.onWindowShow(N);}},hide:function(M){if(this.get("visible")||M){var K=this.get("contentObject");if(K&&K.blur){try{K.blur();
}catch(L){}}this.onWindowHide();if(M){if(K&&K.onClose){K.onClose();}}else{if(this.get("windowType")=="browserWindow"){this.destroy();}}}},bringToFront:function(){if(this.get("windowType")=="browserWindow"){this.getDOMWindow().focus();this.focus();}else{if(this.get("windowType")=="mailTab"){openmail.Application.openView({id:this.get("windowName"),target:"tab",view:launchData.blankHtml});}else{C.MakeTopMostDiv(this.get("windowName"));}}},restore:function(){if((this.get("windowType")=="iframe")&&this.get("minimized")){var L=this.getDOMWindow(),K=B.one(L.document.body);this.set("minimized",false);K.removeClass("minimized");K.addClass("visible");if(this._windowModder){this._windowModder.setElementIds(this._modderIds);}C.Restore(this.get("windowName"));this.onWindowRestored();}},minimize:function(N){if((this.get("windowType")=="iframe")&&!this.get("minimized")){var M=this.getDOMWindow(),L=B.one(M.document.body);this.set("minimized",true);L.addClass("minimized");L.removeClass("visible");if(this._windowModder){this._windowModder.clearElementIds();}var K=this.get("windowName");C.Minimize(K);this.onWindowMinimized(N);}},onWindowMinimized:function(L){var K=this.get("contentObject");if(K&&K.onWindowMinimized){K.onWindowMinimized(L);}},onWindowRestored:function(){var K=this.get("contentObject");if(K&&K.onWindowRestored){K.onWindowRestored();}},onWindowShow:function(M){var L=this.get("windowName");this.set("visible",true);if(this.get("modal")){B.Global.fire(H,L);}var K=this.get("contentObject");if(K&&K.onWindowShow){K.onWindowShow(M);}},onWindowHide:function(){var L=this.get("windowName");if(this.get("modal")){B.Global.fire(A,L);}if(!(this.get("windowType")=="browserWindow")){C.Hide(L);}else{B.Global.fire("ytogo.WindowHidden",L);}this.set("visible",false);if(B.UA.ie===7){B.later(0,this,function(){try{this._win.document.body.className=this._win.document.body.className;}catch(M){}});}var K=this.get("contentObject");if(K&&K.onWindowHide){K.onWindowHide();}},focus:function(){var K=this.get("contentObject");if(!this.get("disabled")&&K&&K.focus){K.focus();}},blur:function(){var K=this.get("contentObject");if(K&&K.blur){K.blur();}},startWaiting:function(){if(this.get("waiting")){return;}this.set("waiting",true);var K=B.one(this._win.document.body);K.addClass("waiting");this.disableWindow(true);},stopWaiting:function(){if(!this.get("waiting")){return;}this.set("waiting",false);var K=B.one(this._win.document.body);K.removeClass("waiting");this.enableWindow();},disableWindow:function(N){var M,L=B.one(this._win.document.body);if(!this.get("disabled")&&(this.get("allowDisable")||N)){M=L.one("#disableOverlay");if(!M){M=this._win.document.createElement("div");M.id="disableOverlay";this._win.document.body.appendChild(M);M=B.one(M);this._eh.push(M.on("click",function(O){O.halt();}));this._eh.push(M.on("keydown",function(O){O.halt();}));this._eh.push(M.on("contextmenu",function(O){O.halt();}));this._eh.push(M.on("mousedown",function(O){O.halt();}));}else{M.removeClass("hidden");}this.set("disabled",true);var K=this.get("contentObject");if(K&&K.onWindowDisabled){K.onWindowDisabled();}}},enableWindow:function(){if(this.get("disabled")){B.one(this._win.document.body).one("#disableOverlay").addClass("hidden");this.set("disabled",false);var K=this.get("contentObject");if(K&&K.onWindowEnabled){K.onWindowEnabled();}}},getDOMWindow:function(){return this._win;},getBackingDiv:function(){return G;},loadFiles:function(L,K,N){var M=this;YUI().use("get",function(P){P.config.win=M._win;P.config.doc=M._win.document;var U=M._win,O=L.length,W=K=="css"?P.Get.css:P.Get.script,S,V={};function Q(){O--;if(O===0){N();}}function T(Y,a){a=a||0;var Z,b=U?U.document:P.config.doc,d=b.styleSheets,c=false;for(Z=d.length-1;Z>-1;Z--){if(d[Z].href===Y){if(P.UA.webkit){c=true;}else{try{d[Z].cssRules;c=true;}catch(X){if(X.code==X.INVALID_ACCESS_ERR){}else{c=true;}}}break;}}if(c||a>100){Q();}else{P.later(50,this,T,[Y,++a]);}}if(U){V.win=U;}V.onSuccess=function(X){if(K=="css"&&(P.UA.webkit||P.UA.gecko)){T(X.nodes[0].href);}else{Q();}};V.onFailure=function(X){X.purge();Q();};if(P.UA.ie){V.onSuccess=N;W(L,V);}else{for(S=0;S<L.length;S++){try{W(L[S],V);}catch(R){}}}});},loadModule:function(L,N){var M=this,K=this._win.Y;window.Y.use(L,function(O){K.config.bootstrap=true;K.use(L,function(P){P.config.bootstrap=false;M._copyCSS();N&&N();});});},_injectContent:function(N,Q){var P,K,L,O=this;function M(){var S,R,Z=O.get("requires"),T=O.get("contentClass"),Y,W,X=window.Y,V,U=false;if(T){W=T.split(".");for(V=0;V<W.length;V++){X=X[W[V]];}if(!X&&Z){S=Z;S.push(function(){O._copyCSS();M();});R=window.Y;R.use.apply(R,S);return;}}log("Doing YUI.use call for window "+O._win.windowName);YUI({win:O._win,bootstrap:false}).use("*",function(a){log("YUI.use callback invoked for window "+O._win.windowName);O._win.Y=a;if(window.patchYUI&&a.Widget){a.Widget.prototype.oldWidgetDestructor=a.Widget.prototype.destructor;a.Widget.prototype.destructor=function(){var c=this.get("boundingBox"),b=this.get("contentBox");if(b===c){b.remove(true);c.remove=function(){};}this.oldWidgetDestructor();};}if(T){X=a;for(V=0;V<W.length;V++){X=X[W[V]];}Y=new X({windowName:O.get("windowName")});O.set("contentObject",Y);Y.render(P,O._initData);O._initData&&delete O._initData;}if(window.log){a["log"]=window.log;}if(!O.get("cssLoaded")){O.after("cssLoadedChange",function(){L.addClass("hidden");});}else{L.addClass("hidden");}Q&&Q(P);});}YUI().use("node",function(S){S.config.win=O._win;S.config.doc=O._win.document;P=S.one(N.document.body);L=P.one(".window-loading-div");function R(){var V=O.get("windowType"),U,T;if(!O.get("minimized")){P.addClass("visible");}if(V=="browserWindow"){P.addClass("poppedOut");}else{if(V=="mailTab"){P.addClass("mailTab");}}P.addClass(O.get("cssClass"));if(O.get("showChrome")){O._injectChrome(P);L=P.one(".window-loading-div");P=P.one("#iowaWindow-content-inner");}M();}O._copyCSS();R();});},_copyCSS:function(){this.set("cssLoaded",false);var M=document.getElementsByTagName("link"),L=this._win.document.getElementsByTagName("link"),K,O,P,R,N=[],Q=this.get("cssFiles")||[];
for(P=0;P<M.length;P++){K=M[P].href;if(K){R=false;for(O=0;O<L.length;O++){if(L[O].href==K){R=true;break;}}if(R){continue;}N.push(K);}}if(Q.length>0||N.length>0){this.loadFiles(N.concat(Q),"css",B.bind(function(){this.set("cssLoaded",true);},this));}else{this.set("cssLoaded",true);}},_injectChrome:function(P){var N,K,S,M,V=this.get("title"),O,Q=this.get("showClose"),T=this.get("showMinimize"),U=this.get("showPopOut"),L=this.get("showPopIn")&&!U;try{P.setContent(B.Messenger.OuiBaseWindow.baseTemplate);}catch(R){}B.later(0,this,function(){this._modderIds={oui_div_id:this.get("windowName")};if(this._windowModder){if(this.get("allowMove")){this._modderIds.gripper_element_id="titleBar";P.addClass("movable");}if(this.get("allowResize")){this._modderIds.resizer_element_id="resizeGripper";this._modderIds.left_resizer_element_id="IowaWindowResizerLeft";this._modderIds.right_resizer_element_id="IowaWindowResizerRight";this._modderIds.top_resizer_element_id="IowaWindowResizerTop";this._modderIds.bottom_resizer_element_id="IowaWindowResizerBottom";this._modderIds.top_left_resizer_element_id="IowaWindowResizerTopLeft";this._modderIds.top_right_resizer_element_id="IowaWindowResizerTopRight";this._modderIds.bottom_left_resizer_element_id="IowaWindowResizerBottomLeft";P.addClass("resizable");}this._windowModder.setElementIds(this._modderIds);}if(Q){K=P.one("#closeButton");O=K.get("parentNode");O.removeClass("hidden");this._eh.push(K.on("click",this.onCloseButtonClicked,this));this._eh.push(K.on("mousedown",function(W){W.halt();}));if(!T&&!U){O.addClass("left");}}if(T){N=P.one("#minMaxButton");O=N.get("parentNode");O.removeClass("hidden");this._eh.push(N.on("click",this.onMinimizeButtonClicked,this));this._eh.push(N.on("mousedown",function(W){W.halt();}));if(!Q&&!U){O.addClass("right");}}if(U){S=P.one("#popOutButton");O=S.get("parentNode");O.removeClass("hidden");this._eh.push(S.on("click",this.onPopOutButtonClicked,this));this._eh.push(S.on("mousedown",function(W){W.halt();}));if(!Q){O.addClass("right");}if(!T){O.addClass("left");}}if(L){M=P.one("#popInButton");O=M.get("parentNode");O.removeClass("hidden");if(!B.UA.ie){this._eh.push(M.on("click",this.onPopInButtonClicked,this));this._eh.push(M.on("mousedown",function(W){W.halt();}));}else{this._addEventListener(M._node,"click",B.bind(this.onPopInButtonClicked,this));}if(!Q){O.addClass("right");}if(!T){O.addClass("left");}}if(V){P.one("#titleText")._node.innerHTML=V;}else{P.one("#titleText").addClass("hidden");}});},_modifyChromeForNative:function(L){var M=L.one("#titleBar"),K=L.one("#resizeGripper");if(M){M.addClass("hidden");}if(K){K.addClass("hidden");}},onCloseButtonClicked:function(K){var L=this.get("contentObject");if(K){K.halt();}if(L&&L.onBeforeClose&&L.onBeforeClose()){return;}this.hide(true);},onMinimizeButtonClicked:function(K){var L=this.get("minimized");if(L){this.restore();}else{this.minimize(true);}K.halt();},onPopOutButtonClicked:function(K){var L=this.get("windowName");this.hide(false);B.Global.fire("ytogo:popoutWindow",L);},onPopInButtonClicked:function(K){B.Global.fire("ytogo:popinWindow",this.get("windowName"));},_addEventListener:function(M,L,K){if(M.addEventListener){M.addEventListener(L,K,false);}else{M.attachEvent("on"+L,K);}}});B.namespace("Messenger").OuiBaseWindow=I;I.baseTemplate='        <div id="IowaWindowDiv" class="iowa_window_div">\n\n	        <div class="header" id="titleBar">\n	            <h2 id="titleText"></h2>\n				<div class="shaded tools">\n		            <span class="btn small left hidden">\n		               <a id="minMaxButton" class="icon minimize" href="javascript:;"></a>\n		            </span>\n		            <span class="btn small hidden">\n                       <a id="popOutButton" class="icon pop_out" href="javascript:;"></a>\n                    </span>\n                    <span class="btn small hidden">\n                       <a id="popInButton" class="icon pop_in" href="javascript:;"></a>\n                    </span>\n		            <span class="btn small right hidden">\n		               <a id="closeButton" class="icon close" href="javascript:;"></a>\n		            </span>\n	            </div>\n	        </div>\n\n			<!-- CONTENT DIV -->\n			<div id="iowaWindow-content">\n                <div class="window-loading-div"></div>\n                <div id="iowaWindow-content-inner">\n                    <!-- Window content should be placed here -->\n                </div>\n			</div>\n\n	        <div id="resizeGripper">\n	        </div>\n	        \n	        <div class=\'iowa_window_div_overlay1\'></div>\n	        \n			<div id=\'IowaWindowResizerLeft\'  class=\'iowa_window_resizer_left\'></div>\n			<div id=\'IowaWindowResizerRight\' class=\'iowa_window_resizer_right\'></div>\n			\n			<div id=\'IowaWindowResizerTop\'    class=\'iowa_window_resizer_top\'></div>\n			<div id=\'IowaWindowResizerBottom\' class=\'iowa_window_resizer_bottom\'></div>\n			\n			<div id=\'IowaWindowResizerTopLeft\'  class=\'iowa_window_resizer_top_left\'></div>\n			<div id=\'IowaWindowResizerTopRight\' class=\'iowa_window_resizer_top_right\'></div>\n			\n			<div id=\'IowaWindowResizerBottomLeft\'  class=\'iowa_window_resizer_bottom_left\'></div>\n\n\n\n\n		</div>\n\n';},"@VERSION@",{requires:["oui-window-modder","om-window-api","node"]});YUI.add("omapi",function(A){if(!YUI.namespace("Messenger").OMAPI){(function(){var D=openmail.Application,C=A.Messenger.Events,B;YUI.Messenger.OMAPI={setData:function(F,E){E=E||function(){};D.setData(F,E);},persistGroupToggle:function(G){var E=G.groupId,F=G.state,H={keys:{}};switch(E){case A.Messenger.ContactList.FACEBOOK_GROUP_ID:H.keys.fbgroupExpandPref=F=="collapsed"?0:1;break;case A.Messenger.ContactList.DEFAULT_GROUP_ID:H.keys.expandGroups=F=="collapsed"?0:1;break;default:return;}this.setData(H);},loadAddressBook:function(){callInternal("getAddressbook",null,function(E){var F=E.contactsync?E.contactsync.contacts:(E.contacts?E.contacts.contact:null);A.Global.fire(C.AB_DATA_RECEIVED,F);});},toggleBrowserTitle:function(E){callInternal("browser.toggleTitle",{title:E});},sendEmail:function(E){var F=E.email;if(!F&&E.network=="yahoo"){if(E.user.indexOf("@")>-1){F=E.user;}else{F=E.user+"@yahoo.com";}}openmail.Mail.compose({to:F});},deleteFromAB:function(G){if(!launchData.guid||!G.addressbookId){return;}var F=openmail.Application.getAuthService("delete"+G.addressbookId),E=["http://social.yahooapis.com/v1/user/",launchData.guid,"/contact/",G.addressbookId].join("");F.callWebService({url:E,method:"DELETE",parameters:{"format":"json"}},function(H){if(H.error){}else{callInternal("contactChanged",{});}});},showDialog:function(H,F){var G={hd:H,bd:F};var E=function(){};callInternal("alertDialog",G,E);}};A.Global.on(C.GROUP_COLLAPSE_CHANGE,YUI.Messenger.OMAPI.persistGroupToggle,YUI.Messenger.OMAPI);A.Global.on(C.DELETE_FROM_AB,YUI.Messenger.OMAPI.deleteFromAB);callInternal("setListener",{event:"mail.signout"},function(E){A.Messenger.SessionManager.quickLogout();});callInternal("setListener",{event:"contacts.changed"},function(J){var H=J.data.type,I=J.data.list,G,F,E;if(!I){A.Messenger.OMAPI.loadAddressBook();return;}for(G=0,F=I.length;G<F;G+=1){I[G]=+(I[G]);}if(H==="delete"){for(G=0,F=I.length;G<F;G+=1){A.Messenger.ContactsManager.abContactDeleted(I[G]);}}else{if(H==="add"||H==="update"){callInternal("getAddressbook",null,function(K){var L=K.contactsync?K.contactsync.contacts:(K.contacts?K.contacts.contact:null);if(L){A.Messenger.ABUtils.parseUpdate(L,I,H);}});}}});callInternal("setListener",{event:"themes:change"},function(E){if(!E||!E.css||!E.name){return;}A.Messenger.GlobalConfig.set("themeInfo",E);});openmail.Mail.sendKeyEvent=function(F){var E={keyCode:F.keyCode||0,charCode:F.charCode||0,type:F.type||"keydown",ctrlKey:F.ctrlKey||false,altKey:F.altKey||false,shiftKey:F.shiftKey||false,metaKey:F.metaKey||false};callInternal("sendKeyEvent",E);};A.Global.on(C.PRESENCE_PREF_UPDATED,function(F){var E=-1;F=Number(F);switch(F){case 9999:E=9999;break;case -1:E=12;break;case 0:E=0;break;case 2:E=2;break;case 999:default:}if(E!==-1){callInternal("setLoginPref",{value:E});}});A.Global.on(C.MESSAGE_SENT,function(){if(!B){B=A.later(0,null,function(){B=null;callInternal("triggerAds",{spaceId:"978500261",trace:"messenger",pageView:false});});}callInternal("trackEvent",{spaceId:"978500255",trace:"messenger"});});A.Global.on(C.IM_TAB_SWITCHED,function(){if(!B){B=A.later(500,this,function(){B=null;callInternal("triggerAds",{spaceId:"978500262",trace:"messenger",pageView:false});});}});A.Global.on(C.ADD_CONTACT_SENT,function(){callInternal("contactChanged",{});});})();A.Command.registerModule("yim",YUI.Messenger.OMAPI);}A.namespace("Messenger").OMAPI=YUI.Messenger.OMAPI;},"@VERSION@",{requires:["events"]});YUI.add("windowmanager",function(B){var H=YUI.namespace("Messenger"),K=B.Messenger.CommonUtils,L=H.Events,A=B.Messenger.Intl,J=B.Messenger.GlobalConfig,C=B.Messenger.GlobalConstants,G=B.Messenger.WindowAPI,I=window.log,E=B.Messenger.OMAPI,F=B.UA.ie===7?false:true,D=0;if(!H.WindowManager){H.WindowManager=(function(){function M(N){M.superclass.constructor.apply(this,arguments);}M.NAME="yim-windowmanager";M.ATTRS={};M.WINDOW_DEFINITIONS={"MintyMainWindow":{contentClass:"Messenger.MintyMainWindow",windowName:"MintyMainWindow",startHidden:false,startHeight:0,allowResize:false,showMaximize:false,allowMove:false,showChrome:false,limitToViewport:false,elementTitle:K.substitute(A.get("str_window_title_main"),{str_cfg_branding_messenger:J.getGenericAppName()}),allowDisable:true,ariaRole:"application",requires:["mintymainwindow"],iframeLocation:"folderpane",cssClass:"mintymainwindow"},"ContactMenuWindow":{showChrome:false,startHidden:true,startWidth:280,startHeight:184,requires:["contactmenuwindow"],contentClass:"Messenger.ContactMenuWindow"},"OptionsWindow":{allowResize:false,allowMove:true,showClose:true,allowDisable:true,showMaximize:false,showMinimize:false,centerOnShow:true,modal:false,startWidth:600,startHeight:500,elementTitle:K.substitute(A.get("str_window_title_options"),{str_cfg_branding_messenger:J.getGenericAppName()}),title:K.substitute(A.get("str_nav_opt_msg_title"),{str_cfg_branding_messenger:J.getGenericAppName()}),cssClass:"yim_dialog optionswindow",ariaRole:"application",requires:["optionswindow"],contentClass:"Messenger.OptionsWindow"},"SignoutWindow":{allowMove:true,allowResize:false,startHidden:false,showMaximize:false,showMinimize:false,showClose:true,centerOnShow:true,modal:true,startWidth:510,startHeight:B.UA.ie===7?197:178,limit_to_viewport:true,title:K.substitute(A.get("str_menu_sign_out_messenger"),{str_cfg_branding_messenger:J.getGenericAppName()}),elementTitle:K.substitute(A.get("str_window_title_signout"),{str_cfg_branding_messenger:J.getGenericAppName()}),cssClass:"yim_dialog signoutwindow",destroyOnHide:true,ariaRole:"application",requires:["signoutwindow"],contentClass:"Messenger.SignOutWindow"},"DialogWindow":{allowResize:false,allowMove:true,showChrome:true,startWidth:420,minWidth:420,startHeight:130,showMaximize:false,showMinimize:false,showClose:true,centerOnShow:true,startHidden:true,modal:true,cssClass:"dialogwindow yim_dialog",elementTitle:K.substitute(A.get("str_window_title_alert"),{str_cfg_branding_messenger:J.getGenericAppName()}),title:A.get("str_conv_dialog_alert"),ariaRole:"application",requires:["dialogwindow"],contentClass:"Messenger.DialogWindow"}};B.extend(M,B.Base,{initializer:function(){this._openWindows={};this._listeners=[];this._titleToggleState={};this._destroyListeners={};this._listeners.push(B.Global.on(L.SYNC_WINDOW_SIZE,this.syncWindowSize,this));this._openModalWindows=[];this._listeners.push(B.Global.on(L.MODAL_WINDOW_OPENED,B.bind(this._modalWindowOpened,this)));this._listeners.push(B.Global.on(L.MODAL_WINDOW_CLOSED,B.bind(this._modalWindowClosed,this)));this._listeners.push(B.Global.on(L.YTOGO_WINDOW_SHOWN,B.bind(this._windowShown,this)));this._listeners.push(B.Global.on(L.YTOGO_WINDOW_HIDDEN,B.bind(this._windowHidden,this)));this._listeners.push(B.Global.on(L.YTOGO_WINDOW_RESIZED,B.bind(this._windowResized,this)));this._listeners.push(B.Global.on(L.SET_WINDOW_FOCUS,B.bind(this._windowSetFocus,this)));this._listeners.push(B.Global.on(L.WINDOW_FOCUSED,this._setWindowFocus,this,true));this._listeners.push(B.Global.on(L.WINDOW_BLURRED,this._setWindowFocus,this,false));this._listeners.push(B.Global.on(L.SHOW_WINDOW,B.bind(this.showWindow,this)));this._listeners.push(B.Global.on(L.HIDE_WINDOW,B.bind(this.hideWindow,this)));this._listeners.push(B.Global.on(L.WAIT_WINDOW,B.bind(this.setWindowWaitState,this)));this._pendingBlurTimers={};if(B.UA.ie){window.attachEvent("onunload",B.bind(this._destroyPoppedOutWindows,this));}else{window.addEventListener("unload",B.bind(this._destroyPoppedOutWindows,this),false);}},destructor:function(){B.each(this._listeners,function(N){N.detach();});B.each(this._pendingBlurTimers,function(N){N.cancel();});this.destroyAllWindows();},addWindowDefinition:function(O,N){M.WINDOW_DEFINITIONS[O]=N;},getWindowDefinition:function(N){return M.WINDOW_DEFINITIONS[N];},_destroyPoppedOutWindows:function(){B.each(this._openWindows,function(O){if(O.get("windowType")=="browserWindow"){try{O.destroy();}catch(N){}}});},_modalWindowOpened:function(N){if(this._openModalWindows.length===0){B.each(this._openWindows,function(O,P){if(P!=N){O.disableWindow();}});this._openModalWindows.push(N);}else{if(this._openModalWindows[this._openModalWindows.length-1]!=N){this._openModalWindows.push(N);}}},_modalWindowClosed:function(){this._openModalWindows.pop();if(this._openModalWindows.length===0){B.each(this._openWindows,function(O){O.enableWindow();});}else{var N=this.getWindow(this._openModalWindows[this._openModalWindows.length-1]);N.bringToFront();N.enableWindow();}},_windowShown:function(N){var O=this.getWindow(N);if(O&&!O.get("modal")&&this._openModalWindows.length>0){G.MakeTopMostDiv(this._openModalWindows[this._openModalWindows.length-1]);}},_windowHidden:function(O){var T=this.getWindow(O),R,N,Q,U,S,P;if(T){if(T._childWindows){while(T._childWindows.length){U=this.getWindow(T._childWindows.pop());if(U){U.hide();}}}if(T._parentWindow){S=this.getWindow(T._parentWindow);if(S&&S._childWindows){for(P=0;P<S._childWindows.length;P++){if(S._childWindows[P]==O){S._childWindows.splice(P,1);break;}}}}R=T.get("srcWindow");if(R){N=this.getWindow(R);if(N&&!N.get("disabled")){N.focus();}}Q=T.__winType__;if(Q&&M.WINDOW_DEFINITIONS[Q].destroyOnHide){this.destroyWindow(O);}}},_windowSetFocus:function(N){var O=this.getWindow(N);if(O&&O.get("visible")&&!O.get("disabled")){O.focus();}},_windowResized:function(N){var P=this.getWindow(N),O;if(P){O=P.get("contentObject");if(O&&O.onResize){O.onResize();}}},showWindow:function(U,Q,O){var S=this.getWindow(U),T={},P=this,V,N,R;
if(O&&O.srcWindow){N=this.getWindow(O.srcWindow);if(N){R=N.get("windowType");if(R!="mailTab"){T.windowType=R;if(S&&S.get("windowType")!=T.windowType){this.destroyWindow(U);S=null;}}}}if(!S){if(Q){T.startPosition={left:Q.left||0,top:Q.top||0};T.startHidden=true;V=function(){S=P.getWindow(U);S.show(O);};}else{T.startHidden=false;}this.createWindow({windowType:U,initParms:T,callback:V,initData:O});}else{if(Q){G.MoveTo(U,Q.left||0,Q.top||0);}S.show(O);}},hideWindow:function(N){var O=this.getWindow(N);O&&O.hide();},setWindowWaitState:function(O,P){var N=this.getWindow(O);if(N){if(P){N.startWaiting();}else{N.stopWaiting();}}},createWindow:function(X){var R=X.windowType,Y=X.windowId,V=X.initParms,O=X.domWin,Z=X.callback,a=X.skipLoad,U,S=this,N;U=M.WINDOW_DEFINITIONS[R]||{};U=B.mix(U,V||{},true);U.initData=X.initData;if(!Y){Y=R;}if(this._openWindows[Y]){throw new Error("Duplicate createWindow calls for window with type = "+R+" and ID = "+Y);}U.windowName=Y;var Q="",W=[],P,T;if(A.isRTL()){Q="rtl/";W=[launchData.phonehomeData.comboBase+launchData.phonehomeData.root+"yimapp/build/assets/css/"+Q+"cssfix-min.css"];}if(A.isBIDI()){if(A.detectDirection&&B.Intl.detectDirection(U.title)=="rtl"){U.title+="&rlm;";}else{U.title+="&lrm;";}}T=J.get("themeInfo");if(T){if(T.css){W.push(T.css);}}U.cssFiles=W;this._openWindows[Y]=new B.Messenger.OuiBaseWindow(U);this._openWindows[Y].render(Z,O);this._openWindows[Y].__winType__=R;this._destroyListeners[Y]=this._openWindows[Y].after("destroy",B.bind(function(){this._windowDestroyed(Y);},this));},loadModule:function(P,O,Q){var N=this._openWindows[O];if(N){N.loadModule(P,Q);}},destroyWindow:function(O){var N=this._openWindows[O];if(N){N.destroy();}},_windowDestroyed:function(N){delete this._openWindows[N];if(this._titleToggleState[N]){if(this._titleToggleState[N].timerHandle){this._titleToggleState[N].timerHandle.cancel();}delete this._titleToggleState[N];}this._destroyListeners[N].detach();delete this._destroyListeners[N];},destroyAllWindows:function(){for(var N in this._openWindows){if(this._openWindows.hasOwnProperty(N)){this.destroyWindow(N);}}setTimeout(function(){G.Unload("messenger");},0);},getWindow:function(N){return this._openWindows[N];},syncWindowSize:function(V){var O=this.getWindow(V),T=O.getDOMWindow(),S=B.one(T.document.body),U,R,Q,X,P=O.get("minWidth")||O.get("startWidth"),N=0,W=O.get("minHeight")||0;if(O.get("windowType")=="mailTab"){return;}if(O.get("showChrome")){U=S.one("#iowaWindow-content-inner");R=S.one("#iowaWindow-content");Q=S.one(".dialog-buttons");if(!P){P=U.get("scrollWidth")-R.get("offsetWidth")+S.get("scrollWidth");}if(V==="yimapp_dialogwindow"){X=S.one("#checkBoxDiv");if(X){if(X.hasClass("hidden")){X=null;}else{X.addClass("hidden");}}if(Q){Q.addClass("hidden");}U.setStyle("position","static");N=U.get("scrollHeight")-R.get("offsetHeight")+S.get("scrollHeight");U.setStyle("position","absolute");if(X){N+=42;X.removeClass("hidden");}if(Q){N+=34;Q.removeClass("hidden");}}else{if(Q){N=Q.get("offsetTop")+Q.get("offsetHeight")+S.one("#titleBar").get("offsetHeight")+16;}else{U.setStyle("position","static");N=U.get("scrollHeight")-R.get("offsetHeight")+S.get("scrollHeight");U.setStyle("position","absolute");}}}else{U.setStyle("position","static");if(!P){P=S.get("scrollWidth");}N=S.get("scrollHeight");U.setStyle("position","absolute");}if(N<W){N=W;}if(O.get("windowType")=="browserWindow"){if(typeof(T.outerHeight)=="undefined"){D=60;}else{if((T.outerHeight-T.innerHeight)>D){D=T.outerHeight-T.innerHeight;}}N+=D;T.resizeTo(P,N);}else{G.SetSize(V,P,N);}},alert:function(Q,U,P,V,R,S){var O=this.getWindow(C.DIALOG_WINDOW);if(!O){this.createWindow({windowType:C.DIALOG_WINDOW,callback:B.bind(function(){this.alert(Q,U,P,V,R,S);},this)});}else{O.get("contentObject").alert(Q,U,P,V,R,S);function T(c){var W=c.left,b=c.top,Y=c.width,a=420,X,Z;X=W+((Y-a)/2);if(X<0){X=0;}Z=b+20;G.MoveTo(C.DIALOG_WINDOW,X,Z);O.show();}var N=B.Messenger.ConversationManager?B.Messenger.ConversationManager.getActiveWindow():null;if(N&&N.get("visible")&&!N.get("minimized")){G.GetPosAndSize(N.get("windowName"),B.bind(T,this));}else{G.MoveToCenter(C.DIALOG_WINDOW,420,130);O.show();}}},confirm:function(X,U,W,Q,V,R,S,O){var P=this.getWindow(C.DIALOG_WINDOW);if(!P){this.createWindow({windowType:C.DIALOG_WINDOW,callback:B.bind(function(){this.confirm(X,U,W,Q,V,R,S,O);},this)});}else{P.get("contentObject").confirm(X,U,W,Q,V,R,S,O);function T(e){var Y=e.left,d=e.top,a=e.width,c=420,Z,b;Z=Y+((a-c)/2);if(Z<0){Z=0;}b=d+20;G.MoveTo(C.DIALOG_WINDOW,Z,b);P.show();}var N=B.Messenger.ConversationManager?B.Messenger.ConversationManager.getActiveWindow():null;if(N&&N.get("visible")&&!N.get("minimized")){N._childWindows=N._childWindows||[];N._childWindows.push(C.DIALOG_WINDOW);P._parentWindow=N.get("windowName");G.GetPosAndSize(N.get("windowName"),B.bind(T,this));}else{G.MoveToCenter(C.DIALOG_WINDOW,420,130);P.show();}}},addWindowTitleToggle:function(O,S){if(window.openmail){var N=this.getWindow(O),R,P,Q=N.get("windowType");if(Q=="iframe"){E.toggleBrowserTitle(S);}else{if(Q=="mailTab"){E.toggleBrowserTitle(S);}if(!this._titleToggleState[O]){this._titleToggleState[O]={strings:[N.get("title")],timerHandle:null,currentIndex:0};}R=this._titleToggleState[O];R.strings.push(S);if(!R.timerHandle){if(Q=="mailTab"){openmail.Application.setTabCloseMessage({id:O,msg:A.get("str_conv_tab_close_confirm")});}R.timerHandle=B.later(1000,this,function(){if(N){R.currentIndex++;if(R.currentIndex>=R.strings.length){R.currentIndex=0;}if(Q=="mailTab"){G.SetTitle(this.getWindow(O).get("windowName"),{style:R.currentIndex?{backgroundColor:B.UA.ie?"#E0E0E0":"rgba(255, 255, 255, 0.5)",backgroundImage:B.UA.gecko?"-moz-linear-gradient(rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.0))":(B.UA.webkit?"-webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(255, 255, 255, 1)), color-stop(100%, rgba(255, 255, 255, 0)))":"none"),filter:"progid:DXImageTransform.Microsoft.Gradient(startColorStr=#F0F0F0, endColorStr=#D0D0D0)"}:{backgroundColor:"",backgroundImage:"",filter:""}});
}else{N.set("title",R.strings[R.currentIndex]);}}else{R.timerHandle.cancel();R.timerHandle=null;}},null,true);}}}},removeWindowTitleToggle:function(O){if(window.openmail){var N=this.getWindow(O),R,Q,P=N.get("windowType");if(P=="iframe"){E.toggleBrowserTitle(false);}else{if(P=="mailTab"){E.toggleBrowserTitle(false);}R=this._titleToggleState[O];if(R&&R.timerHandle){R.timerHandle.cancel();R.timerHandle=null;if(P=="mailTab"){openmail.Application.setTabCloseMessage({id:O,msg:""});G.SetTitle(N.get("windowName"),{style:{backgroundColor:"",backgroundImage:"",filter:""}});}else{N.set("title",R.strings[0]);}delete this._titleToggleState[O];}}}},_setWindowFocus:function(U,S){var N=this.getWindow(U),T,P,Q,R,O;if(!N){if(this._pendingBlurTimers[U]){this._pendingBlurTimers[U].cancel();delete this._pendingBlurTimers[U];}return;}O=N.getDOMWindow();if(!O||!O.document||!O.document.body){return;}T=B.one(O.document.body);Q=T.hasAttribute("data-focused");if(Q!==S){if(!S){if(!this._pendingBlurTimers[U]){this._pendingBlurTimers[U]=B.later(2000,this,function(){this._setWindowFocus(U,false);});return;}else{delete this._pendingBlurTimers[U];T.removeAttribute("data-focused");}}else{if(N.get("disabled")&&this._openModalWindows.length){R=this.getWindow(this._openModalWindows[this._openModalWindows.length-1]);R.bringToFront();R.focus();}else{P=this.getWindowInFocus();T.setAttribute("data-focused",true);if(P&&P!=U){this._setWindowFocus(P,false);}}}B.Global.fire(L.WINDOW_FOCUS_CHANGE,U,S);}else{if(S&&this._pendingBlurTimers[U]){this._pendingBlurTimers[U].cancel();delete this._pendingBlurTimers[U];}}},isMessengerInFocus:function(){return this.getWindowInFocus()?true:false;},isWindowInFocus:function(P){var N=this.getWindow(P).getDOMWindow(),O;if(N&&N.document){O=B.one(N.document.body);return O.hasAttribute("data-focused");}return false;},getWindowInFocus:function(){var R=null,P,N,O,Q;for(P in this._openWindows){if(this._openWindows.hasOwnProperty(P)){N=this._openWindows[P];O=N.getDOMWindow();if(O&&O.document){Q=B.one(O.document.body);if(Q.hasAttribute("data-focused")){if(!N.get("visible")){Q.removeAttribute("data-focused");}else{R=P;break;}}}}}return R;}});return new M();})();}B.namespace("Messenger").WindowManager=H.WindowManager;},"@VERSION@",{requires:["oui-basewindow","om-window-api"]});YUI.add("mim-application",function(D){if(!YUI.namespace("Messenger").Application){var B=window.launchData,A=D.Messenger.Events;function C(E){C.superclass.constructor.apply(this,arguments);}C.ATTRS={};D.extend(C,D.Base,{initializer:function(E){YUI.namespace("Messenger").Metrics={appInit:B.bootInit};},startMim:function(){var I=D.Messenger.GlobalConfig,G=I.get("lastActive"),E=(new Date()).getTime(),H=30*24*60*60*1000;D.Messenger.DelayLoader.start();D.Messenger.SessionManager.start();D.Messenger.ContactsManager.start();log("Application start method invoked");if(B.MINTY_CL_WINDOW){this._createContactList();}else{B.clCreateCallback=D.bind(this._createContactList,this);}D.Global.on(A.AUDIO_ALERT_NEWMESSAGE,this.playAudioNotification,this);function F(){I.set("lastActive",(new Date()).getTime());}D.Global.on(A.MESSAGE_SENT,F);D.Global.on(A.EXPLICIT_LOGIN,F);if(G=="never"){F();}else{if((E-G)>H){D.Global.fire(A.PRESENCE_PREF_UPDATED,9999);}}},_createContactList:function(){D.Messenger.WindowManager.createWindow({windowType:"MintyMainWindow",domWin:B.MINTY_CL_WINDOW,callback:function(){log("Contact list creation callback invoked");D.later(1000,null,function(){D.Global.fire(A.APP_INIT_COMPLETE);});D.later(5000,null,function(){D.Global.fire(A.DELAY_LOAD_EVENT);});D.later(15000,null,function(){var E={},F=B.urlParams.ymsgrdelay||0;E.t1=B.timers.getParametersCallback-F;E.t2=B.timers.yuiLoaded-F;E.t3=B.timers.serversConnected-F;E.t4=B.timers.appCodeLoaded-F;E.t_done=B.timers.loadedEvent-F;callInternal("event.fire",{event:"mim.perfdata",args:{timers:E}});});}});},playAudioNotification:function(){var I=null,H=D.one("body"),F,N,E=D.Messenger.CommonUtils.getHtml5AudioSupport(),G,M={},O=B.phonehomeData.base_url,L='<audio id="messageReceivedAudioTag" hidden="hidden"><source src="{mp3Source}" type="audio/mp3"/><source src="{wavSource}" type="audio/wav"/></audio>';if(E.audioObjectSupported&&E.audioPlaySupported&&(E.wavSupported||E.mp3Supported)){I=D.one("#messageReceivedAudioTag");if(!I){I=D.Node.create(D.substitute(L,{mp3Source:O+"yimapp/build/assets/receiveim.mp3",wavSource:O+"yimapp/build/assets/receiveim.wav"}));H.append(I);}D.Node.getDOMNode(I).play();}else{if(!this._flashPlayer){if(window.openmail){var K=D.Messenger.WindowManager.getWindow("MintyMainWindow");F=D.one(K._win.document.body);}else{F=H;}N=F.one("#flashplayerContainer");if(!N){if(!D.SWF){D.use("swf",function(P){P.Global.fire(A.AUDIO_ALERT_NEWMESSAGE);});return;}N=D.Node.create("<div id='flashplayerContainer' style='height:0px;width:0px'></div>");F.append(N);G=O+"yimapp/build/assets/audionotifier.swf";M.version="9";M.useExpressInstall=false;M.fixedAttributes={allowFullScreen:"true",scale:"noscale",allowScriptAccess:"always",allowNetworking:"all"};M.flashVars={};M.flashVars.autoplay="messagereceived";try{this._flashPlayer=new D.SWF(D.Node.getDOMNode(F.one("#flashplayerContainer")),G,M);}catch(J){}}}else{this._playFlashAudioNotification();}}},_playFlashAudioNotification:function(E){E=E||0;if(E>10){return;}try{D.Node.getDOMNode(bodyNode.one("#"+this._flashPlayer._id)).playNotificationMessageSound();}catch(F){D.later(250,this,this._playFlashAudioNotification,[++E]);}}});YUI.Messenger.Application=new C();}D.namespace("Messenger").Application=YUI.Messenger.Application;},"@VERSION@",{requires:["base-base","windowmanager","omapi"]});YUI.add('lang/mintymainwindow_en-US', function(Y){Y.namespace('Messenger.Templates').mintymainwindow={baseTemplate: "<div id=\"IowaWindowDiv\">	<!-- CONTENT DIV --></div><div id=\"bottomMarker\"></div>  <!-- Used for resizing -->"};}, '@VERSION@' ,{requires:[]});YUI.add("widget-base",function(b){var g=b.Lang,r=b.Node,e=b.ClassNameManager,w=e.getClassName,M,s=b.cached(function(L){return L.substring(0,1).toUpperCase()+L.substring(1);}),F="content",P="visible",K="hidden",y="disabled",B="focused",d="width",A="height",N="boundingBox",v="contentBox",k="parentNode",m="ownerDocument",x="auto",j="srcNode",I="body",H="tabIndex",q="id",i="render",J="rendered",n="destroyed",a="strings",o="<div></div>",z="Change",p="loading",E="_uiSet",D="",G=function(){},u=true,O=false,t,l={},f=[P,y,A,d,B],C=b.UA.webkit,h={};function c(Q){var T=this,L,S,R=T.constructor;T._strs={};T._cssPrefix=R.CSS_PREFIX||w(R.NAME.toLowerCase());c.superclass.constructor.apply(T,arguments);S=T.get(i);if(S){if(S!==u){L=S;}T.render(L);}}c.NAME="widget";t=c.UI_SRC="ui";c.ATTRS=l;l[q]={valueFn:"_guid",writeOnce:u};l[J]={value:O,readOnly:u};l[N]={value:null,setter:"_setBB",writeOnce:u};l[v]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:u};l[H]={value:null,validator:"_validTabIndex"};l[B]={value:O,readOnly:u};l[y]={value:O};l[P]={value:u};l[A]={value:D};l[d]={value:D};l[a]={value:{},setter:"_strSetter",getter:"_strGetter"};l[i]={value:O,writeOnce:u};c.CSS_PREFIX=w(c.NAME.toLowerCase());c.getClassName=function(){return w.apply(e,[c.CSS_PREFIX].concat(b.Array(arguments),true));};M=c.getClassName;c.getByNode=function(L){var R,Q=M();L=r.one(L);if(L){L=L.ancestor("."+Q,true);if(L){R=h[b.stamp(L,u)];}}return R||null;};b.extend(c,b.Base,{getClassName:function(){return w.apply(e,[this._cssPrefix].concat(b.Array(arguments),true));},initializer:function(L){h[b.stamp(this.get(N))]=this;if(this._applyParser){this._applyParser(L);}},destructor:function(){var Q=this.get(N),L=this.get(v),R=b.stamp(Q,u);if(R in h){delete h[R];}if(this.UI_EVENTS){this._destroyUIEvents();}this._unbindUI(Q);if(L){L.remove(u);}Q.remove(u);},render:function(L){if(!this.get(n)&&!this.get(J)){this.publish(i,{queuable:O,fireOnce:u,defaultTargetOnly:u,defaultFn:this._defRenderFn});this.fire(i,{parentNode:(L)?r.one(L):null});}return this;},_defRenderFn:function(L){this._parentNode=L.parentNode;this.renderer();this._set(J,u);this._removeLoadingClassNames();},renderer:function(){var L=this;L._renderUI();L.renderUI();L._bindUI();L.bindUI();L._syncUI();L.syncUI();},bindUI:G,renderUI:G,syncUI:G,hide:function(){return this.set(P,O);},show:function(){return this.set(P,u);},focus:function(){return this._set(B,u);},blur:function(){return this._set(B,O);},enable:function(){return this.set(y,O);},disable:function(){return this.set(y,u);},_uiSizeCB:function(L){this.get(v).toggleClass(M(F,"expanded"),L);},_renderBox:function(L){var T=this,Q=T.get(v),R=T.get(N),V=T.get(j),S=T.DEF_PARENT_NODE,U=(V&&V.get(m))||R.get(m)||Q.get(m);if(V&&!V.compareTo(Q)&&!Q.inDoc(U)){V.replace(Q);}if(!R.compareTo(Q.get(k))&&!R.compareTo(Q)){if(Q.inDoc(U)){Q.replace(R);}R.appendChild(Q);}L=L||(S&&r.one(S));if(L){L.appendChild(R);}else{if(!R.inDoc(U)){r.one(I).insert(R,0);}}},_setBB:function(L){return this._setBox(this.get(q),L,this.BOUNDING_TEMPLATE);},_setCB:function(L){return(this.CONTENT_TEMPLATE===null)?this.get(N):this._setBox(null,L,this.CONTENT_TEMPLATE);},_defaultCB:function(L){return this.get(j)||null;},_setBox:function(R,Q,L){Q=r.one(Q)||r.create(L);if(!Q.get(q)){Q.set(q,R||b.guid());}return Q;},_renderUI:function(){this._renderBoxClassNames();this._renderBox(this._parentNode);},_renderBoxClassNames:function(){var S=this._getClasses(),L,Q=this.get(N),R;Q.addClass(M());for(R=S.length-3;R>=0;R--){L=S[R];Q.addClass(L.CSS_PREFIX||w(L.NAME.toLowerCase()));}this.get(v).addClass(this.getClassName(F));},_removeLoadingClassNames:function(){var R=this.get(N),L=this.get(v),Q=this.getClassName(p),S=M(p);R.removeClass(S).removeClass(Q);L.removeClass(S).removeClass(Q);},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND);this._bindDOM();},_unbindUI:function(L){this._unbindDOM(L);},_bindDOM:function(){var L=this.get(N).get(m);this._hDocFocus=L.on("focus",this._onDocFocus,this);if(C){this._hDocMouseDown=L.on("mousedown",this._onDocMouseDown,this);}},_unbindDOM:function(L){if(this._hDocFocus){this._hDocFocus.detach();}if(C&&this._hDocMouseDown){this._hDocMouseDown.detach();}},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC);},_uiSetHeight:function(L){this._uiSetDim(A,L);this._uiSizeCB((L!==D&&L!==x));},_uiSetWidth:function(L){this._uiSetDim(d,L);},_uiSetDim:function(L,Q){this.get(N).setStyle(L,g.isNumber(Q)?Q+this.DEF_UNIT:Q);},_uiSetVisible:function(L){this.get(N).toggleClass(this.getClassName(K),!L);},_uiSetDisabled:function(L){this.get(N).toggleClass(this.getClassName(y),L);},_uiSetFocused:function(R,Q){var L=this.get(N);L.toggleClass(this.getClassName(B),R);if(Q!==t){if(R){L.focus();}else{L.blur();}}},_uiSetTabIndex:function(Q){var L=this.get(N);if(g.isNumber(Q)){L.set(H,Q);}else{L.removeAttribute(H);}},_onDocMouseDown:function(L){if(this._domFocus){this._onDocFocus(L);}},_onDocFocus:function(L){this._domFocus=this.get(N).contains(L.target);this._set(B,this._domFocus,{src:t});},toString:function(){return this.name+"["+this.get(q)+"]";},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:o,BOUNDING_TEMPLATE:o,_guid:function(){return b.guid();},_validTabIndex:function(L){return(g.isNumber(L)||g.isNull(L));},_bindAttrUI:function(Q){var R,L=Q.length;for(R=0;R<L;R++){this.after(Q[R]+z,this._setAttrUI);}},_syncAttrUI:function(R){var S,Q=R.length,L;for(S=0;S<Q;S++){L=R[S];this[E+s(L)](this.get(L));}},_setAttrUI:function(L){this[E+s(L.attrName)](L.newVal,L.src);},_strSetter:function(L){return b.merge(this.get(a),L);},getString:function(L){return this.get(a)[L];},getStrings:function(){return this.get(a);},_UI_ATTRS:{BIND:f,SYNC:f.concat(H)}});b.Widget=c;},"@VERSION@",{requires:["attribute","event-focus","base-base","base-pluginhost","node-base","node-style","node-event-delegate","classnamemanager"]});YUI.add("widget-uievents",function(g){var f="boundingBox",e=g.Widget,d="render",a=g.Lang,c=":",b=g.Widget._uievts=g.Widget._uievts||{};g.mix(e.prototype,{_destroyUIEvents:function(){var h=g.stamp(this,true);
g.each(b,function(j,i){if(j.instances[h]){delete j.instances[h];if(g.Object.isEmpty(j.instances)){j.handle.detach();if(b[i]){delete b[i];}}}});},UI_EVENTS:g.Node.DOM_EVENTS,_getUIEventNode:function(){return this.get(f);},_createUIEvent:function(i){var l=this._getUIEventNode(),h=(g.stamp(l)+i),k=b[h],j;if(!k){j=l.delegate(i,function(m){var n=e.getByNode(this);n.fire(m.type,{domEvent:m});},"."+g.Widget.getClassName());b[h]=k={instances:{},handle:j};}k.instances[g.stamp(this)]=1;},_getUIEvent:function(j){if(a.isString(j)){var k=this.parseType(j)[1],h,i;if(k){h=k.indexOf(c);if(h>-1){k=k.substring(h+c.length);}if(this.UI_EVENTS[k]){i=k;}}return i;}},_initUIEvent:function(i){var j=this._getUIEvent(i),h=this._uiEvtsInitQueue||{};if(j&&!h[j]){this._uiEvtsInitQueue=h[j]=1;this.after(d,function(){this._createUIEvent(j);delete this._uiEvtsInitQueue[j];});}},on:function(h){this._initUIEvent(h);return e.superclass.on.apply(this,arguments);},publish:function(i,h){var j=this._getUIEvent(i);if(j&&h&&h.defaultFn){this._initUIEvent(j);}return e.superclass.publish.apply(this,arguments);}},true);},"@VERSION@",{requires:["widget-base","node-event-delegate"]});YUI.add("widget-htmlparser",function(f){var e=f.Widget,c=f.Node,d=f.Lang,a="srcNode",b="contentBox";e.HTML_PARSER={};e._buildCfg={aggregates:["HTML_PARSER"]};e.ATTRS[a]={value:null,setter:c.one,getter:"_getSrcNode",writeOnce:true};f.mix(e.prototype,{_getSrcNode:function(g){return g||this.get(b);},_applyParsedConfig:function(i,g,h){return(h)?f.mix(g,h,false):g;},_applyParser:function(g){var i=this,j=i.get(a),h=i._getHtmlParser(),l,k;if(h&&j){f.Object.each(h,function(n,m,p){k=null;if(d.isFunction(n)){k=n.call(i,j);}else{if(d.isArray(n)){k=j.all(n[0]);if(k.isEmpty()){k=null;}}else{k=j.one(n);}}if(k!==null&&k!==undefined){l=l||{};l[m]=k;}});}g=i._applyParsedConfig(j,g,l);},_getHtmlParser:function(){var h=this._getClasses(),k={},g,j;for(g=h.length-1;g>=0;g--){j=h[g].HTML_PARSER;if(j){f.mix(k,j,true);}}return k;}});},"@VERSION@",{requires:["widget-base"]});YUI.add("widget-skin",function(e){var d="boundingBox",b="contentBox",a="skin",c=e.ClassNameManager.getClassName;e.Widget.prototype.getSkinName=function(){var f=this.get(b)||this.get(d),h=new RegExp("\\b"+c(a)+"-(\\S+)"),g;if(f){f.ancestor(function(i){g=i.get("className").match(h);return g;});}return(g)?g[1]:null;};},"@VERSION@",{requires:["widget-base"]});YUI.add("widget",function(a){},"@VERSION@",{use:["widget-base","widget-uievents","widget-htmlparser","widget-skin"]});YUI.add("keyhandler",function(A){var I=YUI.namespace("Messenger"),J=YUI.Messenger.Events;if(!I.KeyHandler){var E=false;function B(K){openmail.Mail.sendKeyEvent(K);}function H(K){if(K.halt){K.halt();}else{if(K.stopPropagation){K.stopPropagation();K.preventDefault();}else{K.returnCode=false;K.cancelBubble=true;}}}function C(K){switch(A.UA.os){case"macintosh":if(A.UA.gecko>0){if(K.altKey&&(K.keyCode==37||K.keyCode==39)){return;}}else{if((K.ctrlKey||K.metaKey||K.altKey)&&(K.keyCode==37||K.keyCode==39)){return;}}break;case"windows":if(K.ctrlKey&&(K.keyCode==37||K.keyCode==39)){return;}break;}if((K.ctrlKey||K.metaKey||K.altKey)&&(K.keyCode==219||K.keyCode==221||K.keyCode==37||K.keyCode==39)){H(K);}}function F(){E=false;}function D(){E=true;}function G(O){var M,P,N,L=true,K={BACKBUTTON:8,I:73,T:84};if(E){return;}M=O.target;P=M.tagName||M.get("tagName");N=(P=="INPUT")?M.type||M.get("type"):"";if(P=="TEXTAREA"||P=="IFRAME"||(P=="INPUT"&&(N=="text"||N=="passwd"))){return true;}if(O.ctrlKey||O.metaKey||O.altKey||O.shiftKey){if(O.shiftKey||!((O.ctrlKey||O.metaKey)&&(O.keyCode==65||O.keyCode==67||O.keyCode==86))){B(O);}C(O);}else{switch(O.keyCode){case K.BACKBUTTON:L=false;H(O);break;case K.I:L=false;A.Global.fire(J.OPEN_CONV_PICKER);H(O);break;case K.T:L=false;if(A.Messenger.GlobalConfig.get("smsEnabled")){A.Global.fire(J.OPEN_SMS_CONV_PICKER);}H(O);break;}if(L){B(O);}}}I.KeyHandler={handleKeyEvent:G,disable:D,enable:F,blockNavigationKeys:C};}A.namespace("Messenger").KeyHandler=I.KeyHandler;},"@VERSION@",{requires:["event"]});YUI.add("basewindow",function(C){var H=C.Node,A=C.Messenger.Intl,L=C.Messenger.Events,G=C.Messenger.SessionManager,E=C.Messenger.GlobalConfig,B=C.Messenger.WindowManager,N=C.Messenger.Templates,I,F,K=window.launchData,J=C.Messenger.CommonUtils,D=YUI.namespace("Messenger.Metrics");function M(O){M.superclass.constructor.apply(this,arguments);}M.NAME="yimapp-basewindow";M.ATTRS={windowName:{value:""},templateName:{},bringToFrontOnFocus:{value:true},makePrimaryOnClick:{value:true},disableRightClick:{value:true},hideOnLogout:{value:true},autosize:{value:false},visible:{value:true},disabled:{value:false},waiting:{value:false},minimized:{value:false},replacementParms:{value:null},isDialog:{value:false},focusNode:{},newBrowserWindow:{value:false},bodyClass:{value:null}};C.extend(M,C.Base,{initializer:function(){this._evtListeners=[];this.set("windowName",C.config.win.windowName);this._evtListeners.push(E.on("themeInfoChange",C.bind(this.onWindowThemeChange,this)));this._evtListeners.push(C.Global.on(L.MPOP_STATE_CHANGE,this.onMpopStateChange,this));this._evtListeners.push(C.Global.on(L.CONNECTION_UPDATE,this.onConnectionUpdated,this));this._evtListeners.push(C.Global.on(L.WINDOW_FOCUS_CHANGE,function(R,S){var Q=this.get("windowName"),P=B.getWindow(Q);if(S&&R===Q&&this.get("bringToFrontOnFocus")){P.bringToFront();}},this));F=C.config.win;I=F.document;var O=this.get("bodyClass");if(O){I.body.className+=" "+O;}},destructor:function(){C.each(this._evtListeners,function(O){O.detach();});this._firstFocusableElement=null;this._lastFocusableElement=null;},render:function(P,T){var X=this.get("templateName")||this.get("windowName").toLowerCase(),U=N[X]&&N[X].baseTemplate?N[X].baseTemplate:null;if(this._rendered){return;}this._rendered=true;if(U){var R=this.get("replacementParms")||{},S;R.str_cfg_branding_messenger=E.getGenericAppName();R.str_cfg_branding=E.getAppName();S=C.Node.create(J.substitute(U,R));P.append(S);}var Q=C.one("#closeButton");if(Q){Q.setAttribute("title",A.get("str_close"));Q.setAttribute("aria-label",A.get("str_close"));Q.setAttribute("role","button");}var O=C.one("#popOutButton");if(O){O.setAttribute("title",A.get("str_window_btn_popout"));O.setAttribute("aria-label",A.get("str_window_btn_popout"));O.setAttribute("role","button");}var V=C.one("#popInButton");if(V){var W=J.substitute(A.get("str_window_btn_popin"),{str_cfg_branding_messenger:E.getGenericAppName()});V.setAttribute("title",W);V.setAttribute("aria-label",W);V.setAttribute("role","button");}this.initializeWindow(S,T);},initializeWindow:function(S,O){var P=this.get("windowName"),R=B.getWindow(P),Q=C.one(I.body);if(R.get("windowType")=="browserWindow"){this.set("newBrowserWindow",true);}this._evtListeners.push(C.on("focus",function(T){C.Global.fire(L.WINDOW_FOCUSED,P);},C.config.win,this));this._evtListeners.push(C.on("blur",function(T){C.Global.fire(L.WINDOW_BLURRED,P);},C.config.win,this));this._evtListeners.push(C.on("click",function(T){if(T.shiftKey&&(T.ctrlKey||T.metaKey)){if(K){var V={"AppVersion":K.phonehomeData.ver_curr,"themeData":K.themeinfo,"supportedLang":K.langSupported,"smsSupported":K.smsSupported},U={};U.config=V;U.startupLog=K.startupLog;U.perfLog=K.rollingLog;B.alert("<textarea rows=15 cols=70>"+C.JSON.stringify(U)+"</textarea>",null,"Yahoo! Messenger Config",null);}T.halt();}},C.config.doc,this));if(window.openmail){if(C.UA.ie>0){this._evtListeners.push(C.one("body").on("keydown",function(T){C.Messenger.KeyHandler.handleKeyEvent(T);}));}else{this._evtListeners.push(C.on("keydown",function(T){C.Messenger.KeyHandler.handleKeyEvent(T);}));}}if(this.get("disableRightClick")){Q.on("contextmenu",C.bind(this._disableRightClick,this));}this._evtListeners.push(C.on("mousedown",this.onMouseDown,C.config.doc,this));if(C.UA.ie>0){Q.addClass("IE");if(C.UA.ie==7&&navigator.userAgent.indexOf("Trident/")>0){Q.addClass("IE8");Q.addClass("IE8Compat");}else{Q.addClass("IE"+C.UA.ie);}}else{if(C.UA.gecko>0){Q.addClass("FF");}else{if(C.UA.webkit>0){Q.addClass("Webkit");}}}if(A.isCJK()){Q.addClass("CJK");}if(A.isRTL()){Q.addClass("RTL");}if(K){Q.addClass(K.intl);}if(K&&K.cobrand&&K.cobrand!=="null"){Q.addClass(K.cobrand);}Q.addClass("ymessenger");this.set("minimized",R.get("minimized"));this.set("visible",R.get("visible"));this.onInit(S,O);if(this.get("isDialog")){this._evtListeners.push(C.on("keydown",function(T){if(T.keyCode==27){B.getWindow(this.get("windowName")).hide();T.halt();}},C.config.doc,this));this._findFocusableElements();if(this._firstFocusableElement&&this._lastFocusableElement){this._evtListeners.push(this._firstFocusableElement.on("keydown",function(T){if(T.keyCode===9&&T.shiftKey){this._lastFocusableElement.focus();T.halt();}},this));this._evtListeners.push(this._lastFocusableElement.on("keydown",function(T){if(T.keyCode===9&&!T.shiftKey){this._firstFocusableElement.focus();T.halt();}},this));}}if(this.get("visible")){this.onShow(O);if(!this.get("minimized")){C.later(0,this,this.focus);}}if(this.get("minimized")){this.onMinimize();this.setMinimizeButtonLabel(true);}else{this.onRestore();this.setMinimizeButtonLabel(false);}if(this.get("autosize")){C.Global.fire(L.SYNC_WINDOW_SIZE,P);}},onWindowThemeChange:function(P){var O=P.prevVal.css,Q=P.newVal.css,R;if(O===Q){return;}this.getOuiWindow().loadFiles([Q],"css",function(){R=C.one("head").all("link");C.some(R,function(S){if(S.getAttribute("href")==O){S.remove();return true;}return false;});},F);},onConnectionUpdated:function(O){if(this.get("visible")&&this.get("hideOnLogout")&&!O.isOnline){B.getWindow(this.get("windowName")).hide();}},onWindowHide:function(){if(this.get("visible")){this.set("visible",false);this.onHide();}},onWindowShow:function(O){if(!this.get("visible")){this.set("visible",true);if(this.get("autosize")){C.Global.fire(L.SYNC_WINDOW_SIZE,this.get("windowName"));}if(this.getOuiWindow().get("windowType")=="iframe"&&!this.get("minimized")&&E.get("mpopEndPointState")=="primary"){C.later(0,this,this.focus);}}this.onShow(O);},onWindowMinimized:function(O){if(!this.get("minimized")){this.set("minimized",true);
this.onMinimize(O);this.setMinimizeButtonLabel(true);}},onWindowRestored:function(){if(this.get("minimized")){this.set("minimized",false);this.onRestore();this.setMinimizeButtonLabel(false);}},onWindowDisabled:function(){this.set("disabled",true);this.blur();},onWindowEnabled:function(){this.set("disabled",false);},onStartWaiting:function(){this.set("waiting",true);},onStopWaiting:function(){this.set("waiting",false);},focus:function(){var Q=this.get("focusNode"),O;if(!Q){return;}if(Q._node){Q=Q._node;}else{if(typeof(Q)=="string"){Q=C.one(Q);if(Q&&Q._node){Q=Q._node;this.set("focusNode",Q);}}}O=Q.ownerDocument;if(O.activeElement==Q&&Q.blur){Q.blur();}if(!this._focusAttempts){this._focusAttempts=0;}if(this.get("visible")&&Q.focus){try{if(C.UA.gecko){C.config.win.focus();}Q.focus();}catch(P){}if(O.activeElement!=Q){if(this._focusAttempts<10){C.later(100,this,this.focus);this._focusAttempts++;return;}else{}}this._focusAttempts=0;}},blur:function(){},closeOnDormant:function(){B.getWindow(this.get("windowName")).hide();},onMpopStateChange:function(O){if(!G.isPrimary()){this.closeOnDormant();}},getOuiWindow:function(){return B.getWindow(this.get("windowName"));},getDOMWindow:function(){return B.getWindow(this.get("windowName")).getDOMWindow();},setWindowTitle:function(O){B.getWindow(this.get("windowName")).set("title",O);},setMinimizeButtonLabel:function(Q){var P,O=C.one("#minMaxButton");if(O){if(Q){P=A.get("str_window_btn_restore")||"Restore";}else{P=A.get("str_window_btn_minimize")||"Minimize";}O.setAttribute("title",P);O.setAttribute("aria-label",P);O.setAttribute("role","button");}},_findFocusableElements:function(){var O=C.one("#titleBar"),T=C.one(".dialog-buttons"),R,S,Q,P;if(O){S=O.all("a");for(P=0;P<S.size();P++){Q=S.item(P);if(Q.getComputedStyle("visibility")=="visible"&&Q.getComputedStyle("display")!="none"&&Q.get("offsetHeight")>0){this._firstFocusableElement=Q;break;}}}if(T){S=T.all("a");for(P=(S.size()-1);P>-1;P--){Q=S.item(P);if(Q.getComputedStyle("visibility")=="visible"&&Q.getComputedStyle("display")!="none"&&Q.get("offsetHeight")>0){this._lastFocusableElement=Q;break;}}}if(!this._firstFocusableElement||!this._lastFocusableElement){R=C.one("#iowaWindow-content");S=R.all("input");if(!this._firstFocusableElement){for(P=0;P<S.size();P++){Q=S.item(P);if(Q.getComputedStyle("visibility")=="visible"&&Q.getComputedStyle("display")!="none"&&Q.get("offsetHeight")>0){this._firstFocusableElement=Q;break;}}}if(!this._lastFocusableElement){for(P=(S.size()-1);P>-1;P--){Q=S.item(P);if(Q.getComputedStyle("visibility")=="visible"&&Q.getComputedStyle("display")!="none"&&Q.get("offsetHeight")>0){this._lastFocusableElement=Q;break;}}}}},_disableRightClick:function(P){if(P.target){var R=P.target.get("tagName"),O,Q,T=C.config.win;if(T.getSelection){O=T.getSelection();Q=O&&!O.isCollapsed;}else{if(T.document.getSelection){O=T.document.getSelection();Q=O&&!O.isCollapsed;}else{if(T.document.selection){O=T.document.selection.createRange().text;Q=O&&O!=="";}}}if(Q){return;}switch(R){case"TEXTAREA":case"IFRAME":case"INPUT":break;case"A":var S=P.target.getAttribute("href");if(!S||S==""||S=="#"||S.indexOf("javascript:")==0){P.halt();}break;default:P.halt();}}},onInit:function(P,O){},onMinimize:function(O){},onMouseDown:function(O){C.Messenger.WindowManager.hideWindow("ContactMenuWindow");if(this.get("makePrimaryOnClick")){C.Messenger.SessionManager.becomePrimary();}},onRestore:function(){},onShow:function(O){},onHide:function(){},onClose:function(){},onResize:function(){},onBeforeClose:function(){return false;}});C.namespace("Messenger").BaseWindow=M;},"@VERSION@",{skinnable:true,requires:["base","node","event","windowmanager","commonutils","keyhandler"]});YUI.add('lang/contactlist_en-US', function(Y){Y.namespace('Messenger.Templates').contactlist={topContactsButton: "<div id=\"tc_toggle\" class=\"{{tc_class}} hidden\"><a class=\"toTc\" title=\"Most frequent instant message contacts\">Show Top Contacts</a><a class=\"toRegular\" title=\"All online contacts\">Show Online Contacts</a></div>"};}, '@VERSION@' ,{requires:[]});YUI.add('lang/contactgroup_en-US', function(Y){Y.namespace('Messenger.Templates').contactgroup={buttonTemplate: "<span class=\"btn small left right {{btn_class}}\" title=\"{{btn_title}}\"><input id=\"{{btn_id}}\" class=\"{{css_class}}\" type=\"button\" value=\"{{input_value}}\" data-action=\"contact-new\"/></span>", baseTemplate: "<div class=\"items items-nav items-nav-msgr-contacts {{isCollapsed}} {{isExpanded}}\" data-action=\"collapsable\"><h2 role=\"toolbar\" id=\"{{id}}\" aria-label=\"{{title}}\" class=\"legend\"><span role=\"button\" tabindex=\"0\" aria-controls=\"{{list_id}}\" aria-expanded=\"{{aria_expanded}}\" class=\"label\" title=\"{{title_attr}}\">{{count}} {{title}}</span><span class=\"rht\">{{buttons}}</span></h2><ul id={{list_id}} role=\"listbox\" class=\"{{imageSize}}\">       {{contacts}}    </ul><span class=\"emptyGrpMsg hidden\"></span></div>"};}, '@VERSION@' ,{requires:[]});YUI.add('lang/contact_en-US', function(Y){Y.namespace('Messenger.Templates').contact={contactTemplate: "<li role=\"presentation\" id=\"{{contact_id}}\" class=\"ymsg-{{isMobile_else}}{{isMobile}} {{stealth_mode}} btn-contact {{isSelected}} {{fbclass}}\" data-user=\"{{user}}\" data-network=\"{{network}}\" data-action=\"contact-list\" title=\"{{yid_attr}}\">{{global_spearmint_view}} <div class=\"fb_img_logo {{isFB}}\"></div>    {{avatar}}<a role=\"option\" {{tab_index}} aria-describedby=\"{{vitality_id}}\" href=\"{{url}}\" title=\"{{yid_attr}}\" {{nameBIDIDirection}}>{{name}}<em>{{yid}}</em></a><span id=\"{{vitality_id}}\" class=\"vitality\" title=\"{{messageTitle}}\" {{messageBIDIDirection}}>{{message}}</span>{{score}}</li>"};}, '@VERSION@' ,{requires:[]});YUI.add("anim-base",function(B){var C="running",N="startTime",L="elapsedTime",J="start",I="tween",M="end",D="node",K="paused",O="reverse",H="iterationCount",A=Number;var F={},E;B.Anim=function(){B.Anim.superclass.constructor.apply(this,arguments);B.Anim._instances[B.stamp(this)]=this;};B.Anim.NAME="anim";B.Anim._instances={};B.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i;B.Anim.DEFAULT_UNIT="px";B.Anim.DEFAULT_EASING=function(Q,P,S,R){return S*Q/R+P;};B.Anim._intervalTime=20;B.Anim.behaviors={left:{get:function(Q,P){return Q._getOffset(P);}}};B.Anim.behaviors.top=B.Anim.behaviors.left;B.Anim.DEFAULT_SETTER=function(S,T,V,W,Y,R,U,X){var Q=S._node,P=U(Y,A(V),A(W)-A(V),R);if(T in Q._node.style||T in B.DOM.CUSTOM_STYLES){X=X||"";Q.setStyle(T,P+X);}else{if(Q._node.attributes[T]){Q.setAttribute(T,P);}else{Q.set(T,P);}}};B.Anim.DEFAULT_GETTER=function(R,P){var Q=R._node,S="";if(P in Q._node.style||P in B.DOM.CUSTOM_STYLES){S=Q.getComputedStyle(P);}else{if(Q._node.attributes[P]){S=Q.getAttribute(P);}else{S=Q.get(P);}}return S;};B.Anim.ATTRS={node:{setter:function(P){P=B.one(P);this._node=P;if(!P){}return P;}},duration:{value:1},easing:{value:B.Anim.DEFAULT_EASING,setter:function(P){if(typeof P==="string"&&B.Easing){return B.Easing[P];}}},from:{},to:{},startTime:{value:0,readOnly:true},elapsedTime:{value:0,readOnly:true},running:{getter:function(){return !!F[B.stamp(this)];},value:false,readOnly:true},iterations:{value:1},iterationCount:{value:0,readOnly:true},direction:{value:"normal"},paused:{readOnly:true,value:false},reverse:{value:false}};B.Anim.run=function(){var Q=B.Anim._instances;for(var P in Q){if(Q[P].run){Q[P].run();}}};B.Anim.pause=function(){for(var P in F){if(F[P].pause){F[P].pause();}}B.Anim._stopTimer();};B.Anim.stop=function(){for(var P in F){if(F[P].stop){F[P].stop();}}B.Anim._stopTimer();};B.Anim._startTimer=function(){if(!E){E=setInterval(B.Anim._runFrame,B.Anim._intervalTime);}};B.Anim._stopTimer=function(){clearInterval(E);E=0;};B.Anim._runFrame=function(){var P=true;for(var Q in F){if(F[Q]._runFrame){P=false;F[Q]._runFrame();}}if(P){B.Anim._stopTimer();}};B.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var G={run:function(){if(this.get(K)){this._resume();}else{if(!this.get(C)){this._start();}}return this;},pause:function(){if(this.get(C)){this._pause();}return this;},stop:function(P){if(this.get(C)||this.get(K)){this._end(P);}return this;},_added:false,_start:function(){this._set(N,new Date()-this.get(L));this._actualFrames=0;if(!this.get(K)){this._initAnimAttr();}F[B.stamp(this)]=this;B.Anim._startTimer();this.fire(J);},_pause:function(){this._set(N,null);this._set(K,true);delete F[B.stamp(this)];this.fire("pause");},_resume:function(){this._set(K,false);F[B.stamp(this)]=this;this._set(N,new Date()-this.get(L));B.Anim._startTimer();this.fire("resume");},_end:function(P){var Q=this.get("duration")*1000;if(P){this._runAttrs(Q,Q,this.get(O));}this._set(N,null);this._set(L,0);this._set(K,false);delete F[B.stamp(this)];this.fire(M,{elapsed:this.get(L)});},_runFrame:function(){var T=this._runtimeAttr.duration,R=new Date()-this.get(N),Q=this.get(O),P=(R>=T),S,U;this._runAttrs(R,T,Q);this._actualFrames+=1;this._set(L,R);this.fire(I);if(P){this._lastFrame();}},_runAttrs:function(Z,Y,V){var W=this._runtimeAttr,R=B.Anim.behaviors,X=W.easing,P=Y,T=false,Q,S,U;if(Z>=Y){T=true;}if(V){Z=Y-Z;P=0;}for(U in W){if(W[U].to){Q=W[U];S=(U in R&&"set" in R[U])?R[U].set:B.Anim.DEFAULT_SETTER;if(!T){S(this,U,Q.from,Q.to,Z,Y,X,Q.unit);}else{S(this,U,Q.from,Q.to,P,Y,X,Q.unit);}}}},_lastFrame:function(){var P=this.get("iterations"),Q=this.get(H);Q+=1;if(P==="infinite"||Q<P){if(this.get("direction")==="alternate"){this.set(O,!this.get(O));}this.fire("iteration");}else{Q=0;this._end();}this._set(N,new Date());this._set(H,Q);},_initAnimAttr:function(){var W=this.get("from")||{},V=this.get("to")||{},P={duration:this.get("duration")*1000,easing:this.get("easing")},R=B.Anim.behaviors,U=this.get(D),T,S,Q;B.each(V,function(a,Y){if(typeof a==="function"){a=a.call(this,U);}S=W[Y];if(S===undefined){S=(Y in R&&"get" in R[Y])?R[Y].get(this,Y):B.Anim.DEFAULT_GETTER(this,Y);}else{if(typeof S==="function"){S=S.call(this,U);}}var X=B.Anim.RE_UNITS.exec(S);var Z=B.Anim.RE_UNITS.exec(a);S=X?X[1]:S;Q=Z?Z[1]:a;T=Z?Z[2]:X?X[2]:"";if(!T&&B.Anim.RE_DEFAULT_UNIT.test(Y)){T=B.Anim.DEFAULT_UNIT;}if(!S||!Q){B.error('invalid "from" or "to" for "'+Y+'"',"Anim");return;}P[Y]={from:S,to:Q,unit:T};},this);this._runtimeAttr=P;},_getOffset:function(Q){var S=this._node,T=S.getComputedStyle(Q),R=(Q==="left")?"getX":"getY",U=(Q==="left")?"setX":"setY";if(T==="auto"){var P=S.getStyle("position");if(P==="absolute"||P==="fixed"){T=S[R]();S[U](T);}else{T=0;}}return T;},destructor:function(){delete B.Anim._instances[B.stamp(this)];}};B.extend(B.Anim,B.Base,G);},"@VERSION@",{requires:["base-base","node-style"]});YUI.add("anim-color",function(B){var A=Number;B.Anim.behaviors.color={set:function(F,D,I,H,C,G,E){I=B.Color.re_RGB.exec(B.Color.toRGB(I));H=B.Color.re_RGB.exec(B.Color.toRGB(H));if(!I||I.length<3||!H||H.length<3){B.error("invalid from or to passed to color behavior");}F._node.setStyle(D,"rgb("+[Math.floor(E(C,A(I[1]),A(H[1])-A(I[1]),G)),Math.floor(E(C,A(I[2]),A(H[2])-A(I[2]),G)),Math.floor(E(C,A(I[3]),A(H[3])-A(I[3]),G))].join(", ")+")");},get:function(D,C){var E=D._node.getComputedStyle(C);E=(E==="transparent")?"rgb(255, 255, 255)":E;return E;}};B.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(C,D){B.Anim.behaviors[C]=B.Anim.behaviors.color;});},"@VERSION@",{requires:["anim-base"]});YUI.add("anim-curve",function(A){A.Anim.behaviors.curve={set:function(F,C,I,H,B,G,E){I=I.slice.call(I);H=H.slice.call(H);var D=E(B,0,100,G)/100;H.unshift(I);F._node.setXY(A.Anim.getBezier(H,D));},get:function(C,B){return C._node.getXY();}};A.Anim.getBezier=function(F,E){var G=F.length;var D=[];for(var C=0;C<G;++C){D[C]=[F[C][0],F[C][1]];
}for(var B=1;B<G;++B){for(C=0;C<G-B;++C){D[C][0]=(1-E)*D[C][0]+E*D[parseInt(C+1,10)][0];D[C][1]=(1-E)*D[C][1]+E*D[parseInt(C+1,10)][1];}}return[D[0][0],D[0][1]];};},"@VERSION@",{requires:["anim-xy"]});YUI.add("anim-easing",function(B){var A={easeNone:function(D,C,F,E){return F*D/E+C;},easeIn:function(D,C,F,E){return F*(D/=E)*D+C;},easeOut:function(D,C,F,E){return -F*(D/=E)*(D-2)+C;},easeBoth:function(D,C,F,E){if((D/=E/2)<1){return F/2*D*D+C;}return -F/2*((--D)*(D-2)-1)+C;},easeInStrong:function(D,C,F,E){return F*(D/=E)*D*D*D+C;},easeOutStrong:function(D,C,F,E){return -F*((D=D/E-1)*D*D*D-1)+C;},easeBothStrong:function(D,C,F,E){if((D/=E/2)<1){return F/2*D*D*D*D+C;}return -F/2*((D-=2)*D*D*D-2)+C;},elasticIn:function(E,C,I,H,D,G){var F;if(E===0){return C;}if((E/=H)===1){return C+I;}if(!G){G=H*0.3;}if(!D||D<Math.abs(I)){D=I;F=G/4;}else{F=G/(2*Math.PI)*Math.asin(I/D);}return -(D*Math.pow(2,10*(E-=1))*Math.sin((E*H-F)*(2*Math.PI)/G))+C;},elasticOut:function(E,C,I,H,D,G){var F;if(E===0){return C;}if((E/=H)===1){return C+I;}if(!G){G=H*0.3;}if(!D||D<Math.abs(I)){D=I;F=G/4;}else{F=G/(2*Math.PI)*Math.asin(I/D);}return D*Math.pow(2,-10*E)*Math.sin((E*H-F)*(2*Math.PI)/G)+I+C;},elasticBoth:function(E,C,I,H,D,G){var F;if(E===0){return C;}if((E/=H/2)===2){return C+I;}if(!G){G=H*(0.3*1.5);}if(!D||D<Math.abs(I)){D=I;F=G/4;}else{F=G/(2*Math.PI)*Math.asin(I/D);}if(E<1){return -0.5*(D*Math.pow(2,10*(E-=1))*Math.sin((E*H-F)*(2*Math.PI)/G))+C;}return D*Math.pow(2,-10*(E-=1))*Math.sin((E*H-F)*(2*Math.PI)/G)*0.5+I+C;},backIn:function(D,C,G,F,E){if(E===undefined){E=1.70158;}if(D===F){D-=0.001;}return G*(D/=F)*D*((E+1)*D-E)+C;},backOut:function(D,C,G,F,E){if(typeof E==="undefined"){E=1.70158;}return G*((D=D/F-1)*D*((E+1)*D+E)+1)+C;},backBoth:function(D,C,G,F,E){if(typeof E==="undefined"){E=1.70158;}if((D/=F/2)<1){return G/2*(D*D*(((E*=(1.525))+1)*D-E))+C;}return G/2*((D-=2)*D*(((E*=(1.525))+1)*D+E)+2)+C;},bounceIn:function(D,C,F,E){return F-B.Easing.bounceOut(E-D,0,F,E)+C;},bounceOut:function(D,C,F,E){if((D/=E)<(1/2.75)){return F*(7.5625*D*D)+C;}else{if(D<(2/2.75)){return F*(7.5625*(D-=(1.5/2.75))*D+0.75)+C;}else{if(D<(2.5/2.75)){return F*(7.5625*(D-=(2.25/2.75))*D+0.9375)+C;}}}return F*(7.5625*(D-=(2.625/2.75))*D+0.984375)+C;},bounceBoth:function(D,C,F,E){if(D<E/2){return B.Easing.bounceIn(D*2,0,F,E)*0.5+C;}return B.Easing.bounceOut(D*2-E,0,F,E)*0.5+F*0.5+C;}};B.Easing=A;},"@VERSION@",{requires:["anim-base"]});YUI.add("anim-node-plugin",function(B){var A=function(C){C=(C)?B.merge(C):{};C.node=C.host;A.superclass.constructor.apply(this,arguments);};A.NAME="nodefx";A.NS="fx";B.extend(A,B.Anim);B.namespace("Plugin");B.Plugin.NodeFX=A;},"@VERSION@",{requires:["node-pluginhost","anim-base"]});YUI.add("anim-scroll",function(B){var A=Number;B.Anim.behaviors.scroll={set:function(F,G,I,J,K,E,H){var D=F._node,C=([H(K,A(I[0]),A(J[0])-A(I[0]),E),H(K,A(I[1]),A(J[1])-A(I[1]),E)]);if(C[0]){D.set("scrollLeft",C[0]);}if(C[1]){D.set("scrollTop",C[1]);}},get:function(D){var C=D._node;return[C.get("scrollLeft"),C.get("scrollTop")];}};},"@VERSION@",{requires:["anim-base"]});YUI.add("anim-xy",function(B){var A=Number;B.Anim.behaviors.xy={set:function(F,D,I,H,C,G,E){F._node.setXY([E(C,A(I[0]),A(H[0])-A(I[0]),G),E(C,A(I[1]),A(H[1])-A(I[1]),G)]);},get:function(C){return C._node.getXY();}};},"@VERSION@",{requires:["anim-base","node-screen"]});YUI.add("anim",function(A){},"@VERSION@",{use:["anim-base","anim-color","anim-curve","anim-easing","anim-node-plugin","anim-scroll","anim-xy"],skinnable:false});YUI.add("common-ui-intl-bidi",function(A){A.mix(A.namespace("Intl"),{_rtlChars:"[\uD83A\uD83B][\uDC00-\uDFFF]|[\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05FF\u0604\u0605\u0608\u060B\u060D\u061B-\u064A\u065F\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070E\u0710\u0712-\u072F\u074B-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u082E-\u08FF\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD40-\uFDCF\uFDF0-\uFDFC\uFDFE\uFDFF\uFE70-\uFEFE]|\uD803[\uDC00-\uDE5F\uDE7F-\uDFFF]|\uD802[\uDC00-\uDD1E\uDD20-\uDE00\uDE04\uDE07-\uDE0B\uDE10-\uDE37\uDE3B-\uDE3E\uDE40-\uDF38\uDF40-\uDFFF]",_neutralChars:"[\uDB40-\uDB43][\uDC00-\uDFFF]|\uD802[\uDD1F\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDF39-\uDF3F]|\uD804[\uDC80\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA]|\uD803[\uDE60-\uDE7E]|\uD800[\uDD01\uDD40-\uDD8A\uDD90-\uDD9B\uDDFD]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDD00-\uDD0A]|[\u0000-\u0040\u005B-\u0060\u007B-\u00A9\u00AB-\u00B4\u00B6-\u00B9\u00BB-\u00BF\u00D7\u00F7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0600-\u0603\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065E\u0660-\u066C\u0670\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0900-\u0902\u093C\u0941-\u0948\u094D\u0951-\u0955\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0CF1\u0CF2\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F90-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135F\u1390-\u1399\u1400\u1680\u169B\u169C\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180E\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1DC0-\u1DE6\u1DFD-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u200D\u2010-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20B8\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189\u2190-\u2335\u237B-\u2394\u2396-\u23E8\u2400-\u2426\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u26CD\u26CF-\u26E1\u26E3\u26E8-\u26FF\u2701-\u2704\u2706-\u2709\u270C-\u2727\u2729-\u274B\u274D\u274F-\u2752\u2756-\u275E\u2761-\u2794\u2798-\u27AF\u27B1-\u27BE\u27C0-\u27CA\u27CC\u27D0-\u27FF\u2900-\u2B4C\u2B50-\u2B59\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2DE0-\u2E31\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u302A-\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E3\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA673\uA67C-\uA67F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82B\uA838\uA839\uA874-\uA877\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uABE5\uABE8\uABED\uFB1E\uFB29\uFD3E\uFD3F\uFDD0-\uFDEF\uFDFD\uFE00-\uFE19\uFE20-\uFE26\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF0-\uFFFF]|\uD835[\uDEDB\uDF15\uDF4F\uDF89\uDFC3\uDFCE-\uDFFF]|\uD834[\uDD67-\uDD69\uDD73-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE00-\uDE45\uDF00-\uDF56]",_initializeBidiPatterns:function(){this._rtlPattern=new RegExp("^(?:"+this._neutralChars+")*(?:"+this._rtlChars+")");this._neturalPattern=new RegExp("^(?:"+this._neutralChars+")*$");},setBidiChars:function(B,C){if(B!==undefined){this._rtlChars=B;}if(C!==undefined){this._neutralChars=C;}this._initializeBidiPatterns();},detectDirection:function(C,B){if(this._rtlPattern.test(C)){return"rtl";}else{if(B==="ltr"){return"ltr";}else{if(this._neturalPattern.test(C)){if(B==="rtl"){return"rtl";}else{return"";}}else{return"ltr";}}}}});A.Intl._initializeBidiPatterns();A.mix(A.namespace("Intl"),{bidiDirection:A.Intl.detectDirection});},"1.0.0");YUI.add("contact",function(G){var B=G.Messenger.CommonUtils,F=G.Messenger.Intl,A=G.Messenger.Events,C=G.Messenger.GlobalConstants,D=G.Messenger.ContactsManager;function E(H){this._attrs={};this.init(H);}E.NAME="yim-contact";E.DISPLAY_IMAGE_NONE=launchData.isSecure?C.DEFAULT_IMAGE_SSL:C.DEFAULT_IMAGE;E.DISPLAYIMAGE_HTML='<img id="{{imageid}}" src="{{displaySource}}" width="{{pixels|16|32}}" height="{{pixels|16|32}}"/>';E.ATTRS={isMobile:{value:false},iconSize:{value:null},status:{value:-1},previousState:{value:null},name:{value:""},nodeId:{value:null},score:{value:0}};E.updateStealthState=function(I){var H=I.getAttribute("data-user"),J=I.getAttribute("data-network");if(!D.isContactVisible(H,J)){I.addClass("stealth");I.setStyle("opacity",0.6);}else{I.removeClass("stealth");I.setStyle("opacity",1);}};E.prototype={set:function(H,I){this._attrs[H]=I;},get:function(H){if(H in this._attrs){return this._attrs[H];}else{if(H in E.ATTRS){return E.ATTRS[H].value;}}},init:function(H){this._contactObject=H;this.set("status",this._contactObject.presence.state);this.set("name",B.unescapeHtml(this._contactObject.displayname));this._lname=this._contactObject.displayname.toLowerCase();if(G.Messenger.GlobalConfig.get("topContactsEnabled")){this.set("score",G.Messenger.ContactScoring.getUserScore([this.getUserId(),this.getNetwork()].join("~")));}this._domId=null;this._domString=null;},destroy:function(J,I){if(!I&&J&&this._domId){var H=G.one("#"+this._domId);this._showGoOfflineTransition(H,true);}else{if(this._onlineAnim){if(this._onlineAnimListener){this._onlineAnimListener.detach();this._onlineAnimListener=null;}this._onlineAnim.stop();this._onlineAnim.destroy();this._onlineAnim=null;}if(this._offlineAnim){if(this._offlineAnimListener){this._offlineAnimListener.detach();this._offlineAnimListener=null;}this._offlineAnim.stop();this._offlineAnim.destroy();this._offlineAnim=null;}if(!I){this.destroyDOMNode();}else{this._domId=null;this._domString=null;}}},isRendered:function(){return !(!this._domId);},getDOMNode:function(I){var H;if(!this._domId){H=this._createDOMNode();}else{H=G.one("#"+this._domId);if(!H){H=this._createDOMNode(true);}}if(I){if(this.getStatus()!=-1&&(this._contactObject.priorstate===null||this._contactObject.priorstate==-1)){this._showGoOnlineTransition(H);}else{if(this.getStatus()==-1&&this._contactObject.priorstate&&this._contactObject.priorstate!=-1){this._showGoOfflineTransition(H);}}}return H;},destroyDOMNode:function(){if(this._domId){var H=G.one("#"+this._domId);if(H){H.remove();H.destroy();G.Global.fire(A.CONTACTLIST_RESIZED);}else{}this._domId=null;this._domString=null;G.Global.fire(A.CONTACT_DESTROYED,this.getContactID());}},update:function(J,I){var K,H=this._contactObject.priorstate;if(this._contactObject.user!==J.user||this._contactObject.network!==J.network){return;}this._contactObject=J;this.set("status",this._contactObject.presence.state);this.set("name",this._contactObject.displayname);this._lname=this._contactObject.displayname.toLowerCase();if(this._domId){K=G.one("#"+this._domId);if(K){this._updateDOMNode(K,I);if(I){if(H==-1&&this.get("status")!=-1){this._showGoOnlineTransition(K);}else{if(this.get("status")==-1&&H&&H!=-1){this._showGoOfflineTransition(K);}}}}else{}}},_updateDOMNode:function(M,L){var K=M.one(".vitality"),N=M.one("a"),I=this.get("isMobile")?null:this._getStatusClass(this._contactObject.presence.state),H;if(K){K.setAttribute("title",this._getStatusMessage(false));K.set("innerHTML",this._getStatusMessage(true));}if(N){N.setAttribute("title",B.escapeHtml(this.get("name")));N.set("innerHTML",B.escapeHtml(this.get("name")));}if(I){H=M.getAttribute("class").split(" ");for(var J=0;J<H.length;J++){if(H[J].indexOf("ymsg-")===0){M.removeClass(H[J]);}}M.addClass(["ymsg-",I].join(""));}if(G.Messenger.ContactsManager.isContactVisible(this._contactObject.user,this._contactObject.network)){M.removeClass("stealth");if(!L){M.setStyle("opacity",1);}}else{M.addClass("stealth");if(!L){M.setStyle("opacity",0.6);}}},getName:function(){return this.get("name");},getStatus:function(){return this.get("status");},getUserId:function(){return this._contactObject.user;},getNetwork:function(){return this._contactObject.network;},getContact:function(){return this._contactObject;},getContactID:function(){return[this.getUserId(),this.getNetwork()].join("~");},getNodeID:function(){var H=this.get("nodeId");if(!H){H="contact-"+this._contactObject.hash;this.set("nodeId",H);}return this.get("nodeId");},getNodeImageID:function(){return(this.getNodeID()+"_img");},getNodeImageHeight:function(){return this.get("iconSize")||"32";},getNodeImageWidth:function(){return this.get("iconSize")||"32";},updateDisplayImage:function(){var H=G.one("#"+this._domId),I,J;this._contactObject=D.getContact(this._contactObject.user,this._contactObject.network);if(H){I=H.one("img");if(I){J=D.getContactDisplayImage(this._contactObject,this.get("iconSize")||32);I.setAttribute("src",J);}}},_createDOMNode:function(I){var H;if(I||!this._domString){H=G.Node.create(this.getDOMString());}else{H=G.Node.create(this._domString);}E.updateStealthState(H);return H;},getDOMString:function(){var L={name:B.escapeHtml(this.get("name")),contact_id:this.getNodeID(),vitality_id:(this.getNodeID()+"-vitality"),tab_index:window.openmail?'tabindex="-1"':"",isMobile_else:this.get("isMobile")?"":this._getStatusClass(this._contactObject.presence.state),message:this._getStatusMessage(true),messageTitle:this._getStatusMessage(false),url:"javascript:;",stealth_mode:G.Messenger.ContactsManager.isContactVisible(this._contactObject.user,this._contactObject.network)?"":"stealth",isMobile:this.get("isMobile")?"mobile":"",user:this.getUserId(),network:this.getNetwork(),fbclass:this.getNetwork()=="facebook"?"fbcontact":"",yid_attr:B.escapeHtml(this.get("name"))},N,I;if(F.isBIDI()){if(F.isRTL()){if(L.name!=""){if(G.Intl.bidiDirection(L.name)=="ltr"){L.name+="&lrm;";L.nameBIDIDirection="style='direction:ltr; text-align: right;'";}}if(L.message!=""&&G.Intl.bidiDirection(L.message)=="ltr"){L.message+="&lrm;";
L.messageBIDIDirection="style='direction:ltr; text-align: right;'";}}else{if(L.name!=""){if(G.Intl.bidiDirection(L.name)=="rtl"){L.name+="&rlm;";L.nameBIDIDirection="style='direction:rtl; text-align: left;'";}}if(L.message!=""&&G.Intl.bidiDirection(L.message)=="rtl"){L.message+="&rlm;";L.messageBIDIDirection="style='direction:rtl; text-align: left;'";}}}var H=window.launchData;if(H&&H.urlParams&&H.urlParams.ymsgrtopdebug&&this.getNetwork()!="facebook"){var M=G.Messenger.ContactScoring.getUserScore([this.getUserId(),this.getNetwork()].join("~")),K=M!==-1?M.toFixed(2):"0",J='<span title="'+M+'" class="tc_score">'+K+"</span>";L.score=J;G.later(20000,this,function(){var P,O;if(this._domId){P=G.one("#"+this._domId);if(P){O=P.one(".tc_score");O._node.innerHTML=G.Messenger.ContactScoring.getUserScore([this.getUserId(),this.getNetwork()].join("~")).toFixed(2);}}},null,true);}if(this._contactObject.network!="facebook"){I=this.getUserId();if(I!=L.yid_attr){L.yid_attr+=" ("+I+")";}}N=window.openmail?E.DISPLAY_IMAGE_NONE:D.getContactDisplayImage(this._contactObject,this.get("iconSize")||32);L.avatar=B.substitute(E.DISPLAYIMAGE_HTML,{"imageid":this.getNodeImageID(),"displaySource":B.substitute(N,{"pixels|32|48":this.get("iconSize")||"32"}),"pixels|16|32":this.get("iconSize")||"32"});this._domId=L.contact_id;if(this.getNetwork()=="facebook"){L.isFB="";if(G.UA.gecko>0&&G.UA.gecko<8){L.isFB="ff";}}else{L.isFB="hidden";}this._domString=B.substitute(G.Messenger.Templates.contact.contactTemplate,L);return this._domString;},_getStatusClass:function(I){var H="";switch(parseInt(I,10)){case -1:H="offline";break;case 0:H="available";break;case 2:H="busy";break;case 999:H="away";break;default:H="busy";break;}return H;},_getStatusMessage:function(K){var H=this._contactObject;var J=H.presence;var I=(K?J.anchoredMessage:J.message)||"";if(window.openmail&&K){I=I.replace(/class='link'/gi,'class="link" tabindex="-1"');}if(!H.authorized){I=F.get("str_cont_list_status_pending_add_request");}return I;},getDisplayImageUrl:function(){return D.getContactDisplayImage(this._contactObject,this.get("iconSize")||"32");},_showGoOnlineTransition:function(K){if(this._onlineAnim){return;}if(this._offlineAnim){if(this._offlineAnimListener){this._offlineAnimListener.detach();this._offlineAnimListener=null;}try{this._offlineAnim.stop();}catch(J){}this._offlineAnim.destroy();this._offlineAnim=null;}var I=+(K.getStyle("opacity"));if(I===1){I=0;K.setStyle("opacity",0);}var H=G.Messenger.ContactsManager.isContactVisible(this._contactObject.user,this._contactObject.network)?1:0.6;this._onlineAnim=new G.Anim({node:K,from:{opacity:I},to:{opacity:H},duration:1.5});this._onlineAnimListener=this._onlineAnim.on("end",G.bind(function(){this._onlineAnim.destroy();this._onlineAnim=null;this._onlineAnimListener.detach();this._onlineAnimListener=null;},this));this._onlineAnim.run();},_showGoOfflineTransition:function(J,H){if(this._offlineAnim){return;}if(this._onlineAnim){if(this._onlineAnimListener){this._onlineAnimListener.detach();this._onlineAnimListener=null;}try{this._onlineAnim.stop();}catch(I){}this._onlineAnim.destroy();this._onlineAnim=null;}this._offlineAnim=new G.Anim({node:J,to:{opacity:0},duration:1});this._offlineAnimListener=this._offlineAnim.on("end",G.bind(function(){this._offlineAnim.destroy();this._offlineAnim=null;this._offlineAnimListener.detach();this._offlineAnimListener=null;if(H){this.destroyDOMNode();}},this));this._offlineAnim.run();}};G.namespace("Messenger").Contact=E;},"@VERSION@",{skinnable:true,requires:["anim","contactsmanager","substitute","widget","classnamemanager","common-ui-intl-bidi"]});YUI.add("contactgroup",function(C){var H=C.Messenger.CommonUtils,G=H.logRocketStats,E=YUI.namespace("Messenger.Metrics"),I=C.Messenger.Events,A=C.Messenger.Intl,D=C.Messenger.Contact,F=C.Messenger.GlobalConfig;function B(J){B.superclass.constructor.apply(this,arguments);}B.NAME="yim-contact-group";B.PRESENCE_ORDER={"0":1,"999":2,"2":3,"-1":4};B.MAX_FIRST_PASS=100;B.RERENDER_CUTOFF_LIMIT=25;B.FIRST_PASS_RENDER_LIMIT=70;B.SINGLE_PASS_RENDER_LIMIT=100;B.ATTRS={showOffline:{value:false},showIfEmpty:{value:false},emptyGroupMessage:{value:""},name:{value:""},id:{value:0},sortBy:{value:"presenceAndName"},isMobile:{value:false},startCollapsed:{value:false},showTransitions:{value:false},buttons:{value:[]}};C.extend(B,C.Base,{initializer:function(J){this._sorted=false;this._renderReady=false;if(J.contacts&&(this.get("showOffline")||C.Command.exec("yim:isPresenceAvailable"))){this._contacts=[];for(var K=0;K<J.contacts.length;K++){this._contacts[K]=new C.Messenger.Contact(J.contacts[K]);}this._sortContacts();this._renderReady=true;}else{this._contacts=[];this._contactMapping={};}this._renderingInProgress=false;this._contactsRendered=false;this._domNode=null;this._pendingDeletes={};this._groupId=this._generateGroupId(this.get("id"));this._groupName=this.get("name");this._pendingTimers={};this._eventHandles=[];this._eventHandles.push(this.on("showOfflineChange",function(L){if(L.newVal||!C.Messenger.GlobalConfig.get("showPresenceTransitions")){this.set("showTransitions",false);}else{this.set("showTransitions",true);}}));this._eventHandles.push(this.after("emptyGroupMessageChange",function(){if(this._domNode&&this.size()==0){var M=this.get("emptyGroupMessage"),L=this._domNode.one(".emptyGrpMsg");if(M){L.setContent(M);L.removeClass("hidden");}else{L.addClass("hidden");}}},this));this._eventHandles.push(C.Global.on(I.CONTACT_DESTROYED,C.bind(this._contactDestroyed,this)));},destructor:function(){this._inDestructor=true;this.destroyAllContacts();if(this._domNode){this._domNode.purge(true);this._domNode.remove();this._domNode.destroy(true);this._domNode=null;}C.each(this._pendingTimers,function(K,J){if(K&&K.cancel){K.cancel();K=null;}});this._pendingTimers=null;C.each(this._eventHandles,function(K,J){if(K&&K.detach){K.detach();K=null;}});this._eventHandles=null;},isRendered:function(){return !(!this._domNode);},isCollapsed:function(){return(this._domNode&&this._domNode.hasClass("collapsed"));},isHidden:function(){return(this._domNode&&this._domNode.hasClass("hidden"));},getDOMNode:function(){if(!this._domNode){var O={id:this._groupId,list_id:(this._groupId+"-list"),title:this._groupName,title_attr:this._groupName,imageSize:"lg",count:""},P=this.get("buttons"),N,M,L,K,J;if(this.get("startCollapsed")){O.isCollapsed="collapsed";O.aria_expanded="false";}else{O.isExpanded="expanded";O.aria_expanded="true";}this._domNode=C.Node.create(H.substitute(C.Messenger.Templates.contactgroup.baseTemplate,O));L=this._domNode.one("span.rht");for(N=0;N<P.length;N++){M=C.Node.create(H.substitute(C.Messenger.Templates.contactgroup.buttonTemplate,P[N]));M.on("click",P[N].callback);L.append(M);}if(!this.get("showIfEmpty")){this._domNode.addClass("hidden");}else{K=this.get("emptyGroupMessage");if(K){J=this._domNode.one(".emptyGrpMsg");J.setContent(K);J.removeClass("hidden");}}if(this._renderReady){this._renderAllContacts();}}return this._domNode;},getContacts:function(){return this._contacts;},size:function(){return this._contacts.length;},addContacts:function(S,P,M){var O,J="addContacts",N=0,L=S.length<5&&this.get("showTransitions");if(M){delete this._pendingTimers[M];}if(this._renderingInProgress){do{O=[J,N].join("-");N++;}while(this._pendingTimers[O]);this._pendingTimers[O]=C.later(100,this,this.addContacts,[S,0,O]);return;}var R=0,K=(new Date()).getTime(),T=0,Q=P?S.length-P:S.length;if(this._contactsRendered&&!P&&S.length>B.RERENDER_CUTOFF_LIMIT&&this._contacts.length<B.MAX_FIRST_PASS){this._rerenderAllContacts();return;}if(!this._contactsRendered){for(N=0;N<S.length;N++){this._addContact(S[N],L);}if(this._domNode&&this._renderReady){this._renderAllContacts();}}else{for(P=P||0;P<S.length&&T<B.SINGLE_PASS_RENDER_LIMIT;P++){this._addContact(S[P],L);T=(new Date()).getTime()-K;R++;}C.Global.fire(I.CONTACTLIST_RESIZED);if(P<S.length){O=[J,K,P].join("-");this._pendingTimers[O]=C.later(0,this,this.addContacts,[S,P,O]);}}},updateGroupName:function(J){this.set("name",J);this._groupName=J;if(this._domNode){this._domNode.one("h2 span.label").set("title",J).set("innerHTML",J);}},_addContact:function(R,Q){var S=0,K,M,U=this.get("sortBy"),L,T,J,O,N=[R.user,R.network].join("~"),P=false;if(!this.get("showOffline")&&R.presence.state==-1){return;}if(R.network=="facebook"&&!R.displayname){return;}if(this._pendingDeletes[N]){O=this._pendingDeletes[N];delete this._pendingDeletes[N];P=true;}else{O=new C.Messenger.Contact(R);}if(this._sorted){if(U==="score"){K=this._sortByScore;}else{if(U==="name"){K=this._sortByName;}else{if(U==="userId"){K=this._sortByUserId;}else{K=this._sortByPresenceAndName;}}}M=this._doBinarySearch(O,K);if(M.found){return;}S=M.index;this._contacts.splice(S,0,O);if(P){this._updateContact(R,false,Q);return;}if(this._contactsRendered){L=this._domNode.one("ul");O.set("isMobile",this.get("isMobile"));T=O.getDOMNode(Q);if(S===0){L.prepend(T);}else{if(S<this._contacts.length-1){J=this._contacts[S+1];if(J.isRendered()){L.insertBefore(T,J.getDOMNode());}else{L.append(T);}}else{L.append(T);}}if(this._domNode.hasClass("hidden")){this._domNode.removeClass("hidden");}}}else{if(typeof(this._contactMapping[O.getContactID()])=="undefined"){this._contactMapping[O.getContactID()]=this._contacts.length;this._contacts.push(O);this._renderReady=true;}}if(this._contacts.length===1){this._domNode.one(".emptyGrpMsg").addClass("hidden");}},removeContact:function(L,K,M){var O,J="removeContact",N=0;if(M){delete this._pendingTimers[M];}if(this._renderingInProgress){do{O=[J,N].join("-");N++;}while(this._pendingTimers[O]);this._pendingTimers[O]=C.later(100,this,this.removeContact,[L,K,O]);
return;}var Q=C.Command.exec("yim:getContact",L,K),R,P=[L,K].join("~");if(!this._sorted){this._sortContacts();}R=this._findContact(Q);if(R>-1){this._pendingDeletes[P]=this._contacts[R];this._contacts[R].destroy(this.get("showTransitions"));this._contacts.splice(R,1);this._hideIfEmpty();}else{}},updateDisplayImage:function(K,J){var P,N="updateDisplayImage",M=0;if(J){delete this._pendingTimers[J];}if(this._renderingInProgress){do{P=[N,M].join("-");M++;}while(this._pendingTimers[P]);this._pendingTimers[P]=C.later(100,this,this.updateDisplayImage,[K,P]);return;}if(!this._contactsRendered){return;}var L=this._findContact(K),O=L>-1?this._contacts[L]:null;if(!O){this._addContact(K,this.get("showTransitions"));return;}O.updateDisplayImage();},updateContacts:function(S,P,M){var O,J="updateContacts",N=0,L=S.length<5&&this.get("showTransitions");if(M){delete this._pendingTimers[M];}if(this._renderingInProgress){do{O=[J,N].join("-");N++;}while(this._pendingTimers[O]);this._pendingTimers[O]=C.later(100,this,this.updateContacts,[S,P,O]);return;}var K=(new Date()).getTime(),R=0,T=0,Q=P?S.length-P:S.length;if(this._contactsRendered&&!P&&S.length>B.RERENDER_CUTOFF_LIMIT&&this._contacts.length<B.MAX_FIRST_PASS){this._rerenderAllContacts();return;}for(P=P||0;P<S.length&&T<B.SINGLE_PASS_RENDER_LIMIT;P++){this._updateContact(S[P],true,L);T=(new Date()).getTime()-K;R++;}if(this._contactsRendered){C.Global.fire(I.CONTACTLIST_RESIZED);}else{if(this._domNode&&this._renderReady){this._renderAllContacts();}}if(P<S.length){O=[J,K,P].join("-");this._pendingTimers[O]=C.later(0,this,this.updateContacts,[S,P,O]);}},_updateContact:function(J,L,M){if(!this._contactsRendered&&!this._renderReady&&J.presence.state>-1){this._renderReady=true;}var K=this._findContact(J),N=K>-1?this._contacts[K]:null,O=this.get("sortBy");if(!N){this._addContact(J,M);return;}if(this._contactsRendered&&!this.get("showOffline")&&J.presence.state==-1){this._pendingDeletes[N.getContactID()]=N;N.destroy(M);this._hideIfEmpty();if(!L){C.Global.fire(I.CONTACTLIST_RESIZED);}this._contacts.splice(K,1);}else{if(this._sorted&&this._contacts.length>1&&(O==="name"&&N.getName()!==J.displayname)||(O==="presenceAndName"&&(N.getName()!==J.displayname||N.getStatus()!==J.presence.state))){this._reorderContact(K);}else{N.update(J,M);}}},_renderAllContacts:function(K,R,N){var P,J="_renderAllContacts",O=0;this._renderingInProgress=true;if(N){delete this._pendingTimers[N];}if(!this._sorted){this._sortContacts();P=[J,"sort"].join("-");this._pendingTimers[P]=C.later(0,this,this._renderAllContacts,[null,0,P]);return;}if(typeof E.buddyListLoadStart=="undefined"){E.buddyListLoadStart=new Date().getTime();}var Q=this.get("showOffline"),V=this.get("isMobile"),S=!R,M=S?B.FIRST_PASS_RENDER_LIMIT:B.SINGLE_PASS_RENDER_LIMIT,U="",W=0,L=(new Date()).getTime(),Z,Y,T,X=this._contacts.length;if(S){}else{}if(X>0){this._domNode.one(".emptyGrpMsg").addClass("hidden");}K=K||this._domNode.one("ul");this._contactsRendered=true;for(R=R||0;R<X;R++){Z=new Date()-L;if(Z>M||(S&&W>B.MAX_FIRST_PASS)){break;}T=this._contacts[R];if(Q||T.getStatus()>-1){if(V){T.set("isMobile",true);}if(S){U+=T.getDOMString();}else{K.append(this._contacts[R].getDOMNode());}if(this._domNode.hasClass("hidden")){this._domNode.removeClass("hidden");}W++;}}if(S){K.set("innerHTML",U);}C.Global.fire(I.CONTACTLIST_RESIZED);if(!E.firstContactsRendered){E.firstContactsRendered=new Date().getTime();if(F.get("useTopContacts")){G({key:"firstTopContactsRendered",value:(E.firstContactsRendered-E.appInit)});G({key:"loginWithTopContacts",value:""});}else{G({key:"firstOnlineContactsRendered",value:(E.firstContactsRendered-E.appInit)});G({key:"loginWithOnlineContacts",value:""});}}if(R<this._contacts.length){P=[J,L,R].join("-");this._pendingTimers[P]=C.later(0,this,this._renderAllContacts,[K,R,P]);}else{this._renderingInProgress=false;K.all("li").each(function(a){D.updateStealthState(a);},this);if(typeof E.buddyListLoaded=="undefined"){E.buddyListLoaded=new Date().getTime();}if(C.Messenger.GlobalConfig.get("showPresenceTransitions")&&!this.get("showOffline")){this._eventHandles.push(C.Global.on(I.CONNECTION_UPDATE,C.bind(function(a){if(a&&!this.get("showOffline")){C.later(3000,this,function(){this.set("showTransitions",true);});}else{this.set("showTransitions",false);}},this)));if(C.Command.exec("yim:isOnline")){C.later(3000,this,function(){this.set("showTransitions",true);});}}}},destroyAllContacts:function(M){var J,N,L,K;while(this._contacts.length>0){J=this._contacts.shift();J.destroy(false,M);}for(N in this._pendingDeletes){if(this._pendingDeletes.hasOwnProperty(N)){this._pendingDeletes[N].destroy(false,M);delete this._pendingDeletes[N];}}this._contactsRendered=false;this._renderReady=false;this._sorted=false;C.each(this._pendingTimers,function(P,O){if(P&&P.cancel){P.cancel();P=null;}});this._pendingTimers={};L=this.get("emptyGroupMessage");if(L){K=this._domNode.one(".emptyGrpMsg");K.setContent(L);K.removeClass("hidden");}},_contactDestroyed:function(J){if(!this._pendingDeletes[J]){if(!this._inDestructor){}return;}delete this._pendingDeletes[J];},_rerenderAllContacts:function(){var L=this._domNode.one("ul"),O=C.Command.exec("yim:getContacts"),K,M,J=O.length,N=this.get("showOffline");this.destroyAllContacts(true);this._sorted=false;this._contactsRendered=false;for(M=0;M<J;M++){K=O[M];if(N||K.presence.state>-1){if(C.Command.exec("yim:isContactInGroup",this._groupId,K)){this._contacts.push(new C.Messenger.Contact(K));}}}this._renderAllContacts(L);},_reorderContact:function(K){var L=this._contacts.splice(K,1)[0],J=L.getContact();if(L){L.destroy(false);L=null;}this._addContact(J,false);},_findContact:function(K){var P=this.get("sortBy"),J,M,L=[K.user,K.network].join("~"),O,N;if(this._sorted){N=new C.Messenger.Contact(K);if(P==="name"){J=this._doBinarySearch(N,this._sortByName);}else{if(P==="userId"){J=this._doBinarySearch(N,this._sortByUserId);}else{if(P==="score"){J=this._doBinarySearch(N,this._sortByScore);}else{if(K.priorstate){N.set("previousState",K.priorstate);
}J=this._doBinarySearch(N,this._sortByPresenceAndName);}}}if(!J.found){for(M=0;M<this._contacts.length;M++){if(this._contacts[M].getUserId()===K.user&&this._contacts[M].getNetwork()===K.network){O=M;break;}}}else{O=J.index;}N.destroy();}else{O=this._contactMapping[L]!==undefined?this._contactMapping[L]:-1;}if(O===-1){}return O;},_doBinarySearch:function(O,P){var J=0,N=this._contacts.length-1,M,L=false,K=0;if(!this._sorted){this._sortContacts();}while(J<=N){K=Math.floor((J+N)/2);M=P(this._contacts[K],O);if(M<0){J=K+1;continue;}if(M>0){N=K-1;continue;}L=true;break;}if(!L&&M<0){K++;}return{index:K,found:L};},_sortByUserId:function(L,K){var J=L.getUserId(),N=K.getUserId(),M=(J>N)?1:(J===N)?0:-1;return M;},_sortByName:function(L,K){var J=L._lname,N=K._lname,M=(J>N)?1:(J===N)?0:-1;return M;},_sortByPresenceAndName:function(M,K){var J=B.PRESENCE_ORDER[M.getStatus()]+M._lname,L=K.get("previousState")===null?K.getStatus():K.get("previousState"),O=B.PRESENCE_ORDER[L]+K._lname,N=(J>O)?1:(J===O)?0:-1;return N;},_sortByScore:function(L,K){var J=K.get("score")||0,M=L.get("score")||0;if(J===M){J=L.getContactID();M=K.getContactID();}return(J>M)?1:(J===M)?0:-1;},_sortContacts:function(){if(this._sorted){return;}var J=this.get("sortBy");if(J==="score"){this._contacts.sort(this._sortByScore);}else{if(J==="name"){this._contacts.sort(this._sortByName);}else{if(J==="userId"){this._contacts.sort(this._sortByUserId);}else{if(J==="presenceAndName"){this._contacts.sort(this._sortByPresenceAndName);}}}}this._contactMapping={};this._sorted=true;},_buildContactMapping:function(){for(var J=0;J<this._contacts.length;J++){this._contactMapping[this._contacts[J].getContactID()]=J;}},_generateGroupId:function(J){return escape(J);},_hideIfEmpty:function(){var L=this._domNode.one("ul"),M=!L.hasChildNodes(),K,J;if(!this.get("showIfEmpty")){var L=this._domNode.one("ul");if(M){this._domNode.addClass("hidden");}else{if(this._domNode.hasClass("hidden")){this._domNode.removeClass("hidden");}}}else{if(M){K=this.get("emptyGroupMessage");if(K){J=this._domNode.one(".emptyGrpMsg");J.setContent(K);J.removeClass("hidden");}}else{this._domNode.one(".emptyGrpMsg").addClass("hidden");}}}});C.namespace("Messenger").ContactGroup=B;},"@VERSION@",{requires:["node","contact","commonutils","event-custom","command"]});YUI.add("contactscoring",function(H){var A=YUI.namespace("Messenger"),B=A.Events,G=window.launchData.userPrefs,F=H.Messenger.ContactsManager,D=H.Messenger.OMAPI,C=H.Messenger.SessionManager,E=H.Messenger.GlobalConfig;if(!A.ContactScoring){A.ContactScoring=(function(){function I(J){I.superclass.constructor.apply(this,arguments);}I.NAME="yim-contactscoring";I.ATTRS={};I.OM_KEY="mimContactScoringData";I.MIN_SCORE_THRESHOLD=5;I.POINT_MAPPING={};I.POINT_MAPPING[B.CONVERSATION_INITIATED]=1;I.POINT_MAPPING[B.ADD_CONTACT_SENT]=2;I.POINT_MAPPING[B.MESSAGE_SENT]=0.5;I.POINT_MAPPING[B.MESSAGE_RECEIVED]=0.1;I.POINT_MAPPING["online"]=0.001;I.SCORING_DATA={lastUpdated:null,mailScoreLastUpdated:null,contacts:[]};I.MSGR_SCORE_TOTAL_CAP=15;I.MSGR_SCORE_NEW_CAP=25;I.MSGR_SCORE_NEW_CONTRIB=5;I.MAIL_SCORE_CONTRIB=5;I.DECAY_MULTIPLIER=0.99;I.DECAY_INTERVAL=1*24*3600*1000;I.MAIL_SCORE_REFRESH_INTERVAL=30*24*3600*1000;I.TOP_CONTACT_MIN_COUNT=10;I.TOP_CONTACT_MAX_COUNT=15;I.TOP_CONTACT_SCORE_CUTOFF=0.5;I.PERSIST_INTERVAL=2*60*1000;I.PERSIST_THRESHOLD=15;H.extend(I,H.Base,{initializer:function(){this._dirty=false;this._listeners=[];this._messengerScores={};this._topcontactOrder=[];this._scoresLoaded=false;this._maxSessionScore=0;this._topContacts=null;this._topContactMap={};this._activitySinceStore=0;if(E.get("topContactsEnabled")){if(!E.get("useTopContacts")){H.Global.once(B.APP_INIT_COMPLETE,H.bind(function(){H.later(2000,this,this.startScoring);},this));}else{this.startScoring();}}this._settingListener=E.on("topContactsEnabledChange",function(J){if(J.newVal){this.startScoring();}else{this.stopScoring();}},this);},destructor:function(){this._detachListeners();if(this._listeners){delete this._listeners;}if(this._messengerScores){delete this._messengerScores;}if(this._topcontactOrder){delete this._topcontactOrder;}if(this._settingListener){this._settingListener.detach();this._settingListener=null;}if(this._buddyLoadListener){this._buddyLoadListener.detach();this._buddyLoadListener=null;}if(this._skipABTimer){this._skipABTimer.cancel();this._skipABTimer=null;}if(this._loadABListener){this._loadABListener.detach();this._loadABListener=null;}},startScoring:function(){if(!this._scoresLoaded){this._loadScores();}if(!this._listeners.length){this._listeners.push(H.Global.on(B.CONVERSATION_INITIATED,this._processActivityEvent,this,B.CONVERSATION_INITIATED));this._listeners.push(H.Global.on(B.MESSAGE_RECEIVED,this._processActivityEvent,this,B.MESSAGE_RECEIVED));this._listeners.push(H.Global.on(B.MESSAGE_SENT,this._processActivityEvent,this,B.MESSAGE_SENT));this._listeners.push(H.Global.on(B.CONTACT_DELETED,this._handleContactDeleted,this));}if(!this._persistTimer){this._persistTimer=H.later(I.PERSIST_INTERVAL,this,this._persistScores,null,true);}},stopScoring:function(){this._detachListeners();},resetState:function(){this.stopScoring();this.initializer();},getUserScore:function(J){if(this._messengerScores[J]){var K=this._maxSessionScore>I.MSGR_SCORE_NEW_CONTRIB?I.MSGR_SCORE_NEW_CONTRIB/this._maxSessionScore:1;return this._messengerScores[J].prev_msgr_score+this._messengerScores[J].msgr_score*K+this._messengerScores[J].mail_score;}else{return 0;}},getTopContacts:function(J){if(this._topContacts){J(this._topContacts);}else{this.once("topcontactsready",function(){J(this._topContacts);});}},_processActivityEvent:function(K,L){var J=K.userId;if(!J&&K.user&&K.network){J=[K.user,K.network].join("~");}if(J&&!C.isSelfUser(K.user)&&F.isUserInContactList(K.user,K.network)&&K.network!="sms"&&K.network!="facebook"){this._dirty=true;if(!this._messengerScores[J]){this._messengerScores[J]={};this._messengerScores[J].msgr_score=0;this._messengerScores[J].mail_score=0;this._messengerScores[J].prev_msgr_score=0;}if(L!=B.MESSAGE_RECEIVED||!K.fromSelf){if(this._messengerScores[J].msgr_score<I.MSGR_SCORE_NEW_CAP){this._messengerScores[J].msgr_score+=I.POINT_MAPPING[L];if(this._messengerScores[J].msgr_score>this._maxSessionScore){this._maxSessionScore=this._messengerScores[J].msgr_score;}this._activitySinceStore+=I.POINT_MAPPING[L];if(this._activitySinceStore>I.PERSIST_THRESHOLD){this._persistScores(true);}}}}},_handleContactDeleted:function(K){var N,J,L,O=[K.user,K.network].join("~"),M=false;if(this._topContacts){for(N=0,J=this._topContacts.length;N<J;N++){L=this._topContacts[N];if(L.userId==O){delete this._topContactMap[L.userId];this._topContacts.splice(N,1);M=true;break;}}}if(this._messengerScores[O]){delete this._messengerScores[O];}if(M){this._dirty=true;H.later(0,this,this._persistScores);}},_detachListeners:function(){while(this._listeners.length){this._listeners.pop().detach();}if(this._persistTimer){this._persistTimer.cancel();this._persistTimer=null;}},_persistScores:function(V){if(this._dirty&&window.openmail){var O={},U=I.SCORING_DATA,N,S=this._maxSessionScore,P,J,L,K=0,T,M,R,Q,W=E.get("hideAddressBookContacts");if(V){this._skip=true;}else{if(this._skip){this._skip=false;return;}}this._activitySinceStore=0;U.contacts=[];N=F.getContacts();for(P=0;P<N.length;P++){if(W&&N[P].type==="addressbook"){continue;}if(N[P].presence&&N[P].presence.state>-1){this._processActivityEvent(N[P],"online");}}J=(S>I.MSGR_SCORE_NEW_CONTRIB)?(I.MSGR_SCORE_NEW_CONTRIB/S):1;for(T in this._messengerScores){if(this._messengerScores.hasOwnProperty(T)){M=this._messengerScores[T];L=J*M.msgr_score+M.prev_msgr_score;Q=this._topcontactOrder[T];U.contacts.push({"userId":T,"msgr_score":L,"mail_score":M.mail_score,"prev_msgr_score":M.prev_msgr_score,"position":Q});if(L>K){K=L;}}}J=(K>I.MSGR_SCORE_TOTAL_CAP)?(I.MSGR_SCORE_TOTAL_CAP/K):1;for(P=0;P<U.contacts.length;P++){U.contacts[P].msgr_score*=J;U.contacts[P].score=U.contacts[P].msgr_score+U.contacts[P].mail_score;}U.contacts.sort(this._stableContactSortFunc);for(P=0;P<U.contacts.length;P++){this._topcontactOrder[U.contacts[P].userId]=P;delete U.contacts[P]["position"];}if(U.contacts.length>50){U.contacts.splice(50);}this._topContacts=U.contacts.slice(0,I.TOP_CONTACT_MIN_COUNT);if(this._topContacts.length){R=I.TOP_CONTACT_SCORE_CUTOFF*this._topContacts[this._topContacts.length-1].msgr_score;
R=R>1?R:1;for(P=I.TOP_CONTACT_MIN_COUNT;P<I.TOP_CONTACT_MAX_COUNT&&P<U.contacts.length;P++){if(U.contacts[P].msgr_score>I.TOP_CONTACT_SCORE_CUTOFF){this._topContacts.push(U.contacts[P]);}else{break;}}}this.fire("topcontactsready");U.lastUpdated=(new Date()).getTime();if(U.contacts[0].score>I.MIN_SCORE_THRESHOLD){U.scoreThresholdReached=true;}O.keys={};O.keys[I.OM_KEY]=U;D.setData(O);this._dirty=false;}},_stableContactSortFunc:function(K,J){var L=H.Lang,N=L.isUndefined(K.score)?0:K.score,M=L.isUndefined(J.score)?0:J.score;if(N==M){return K.position-J.position;}else{return M-N;}},_loadScores:function(Q){var K=G&&G[I.OM_KEY],X=E.get("hideAddressBookContacts");if(!F.get("ABDataReceived")&&!Q){this._loadABListener=F.on("ABDataReceivedChange",function(Z){if(Z.newVal){this._skipABTimer.cancel();this._skipABTimer=null;this._loadABListener.detach();this._loadABListener=null;this._loadScores(true);}},this);this._skipABTimer=H.later(3000,this,function(){this._loadABListener.detach();this._loadABListener=null;this._skipABTimer=null;this._loadScores(true);});return;}this._topContacts=[];if(G&&G[I.OM_KEY]&&typeof(G[I.OM_KEY])!="object"){try{var L=G[I.OM_KEY];G[I.OM_KEY]=null;G[I.OM_KEY]=H.JSON.parse(L);}catch(N){}}if(G&&G[I.OM_KEY]){I.SCORING_DATA=G[I.OM_KEY];var J=(new Date()).getTime(),V=I.SCORING_DATA,Y=J-V.lastUpdated,P=Y>I.DECAY_INTERVAL?Math.pow(I.DECAY_MULTIPLIER,Math.floor(Y/I.DECAY_INTERVAL)):1,U,O,T,W,R,M,S;for(O=0;O<V.contacts.length;O++){M=V.contacts[O];S=M.userId;U=M.msgr_score||0;U*=P;this._messengerScores[S]={};this._messengerScores[S].msgr_score=0;this._messengerScores[S].prev_msgr_score=U>0?U:0;this._messengerScores[S].mail_score=M.mail_score||0;this._topcontactOrder[S]=O;}for(O=0;O<V.contacts.length&&this._topContacts.length<I.TOP_CONTACT_MAX_COUNT;O++){T=V.contacts[O].userId.split("~");if(C.isSelfUser(T[0])){continue;}W=F.getContact(T[0],T[1]);if(W&&W.type!="temporary"&&!this._topContactMap[V.contacts[O].userId]){if(this._topContacts.length==I.TOP_CONTACT_MIN_COUNT){R=I.TOP_CONTACT_SCORE_CUTOFF*this._topContacts[this._topContacts.length-1].msgr_score;R=R>1?R:1;}if(this._topContacts.length>=I.TOP_CONTACT_MIN_COUNT&&V.contacts[O].prev_msgr_score<R){break;}this._topContactMap[V.contacts[O].userId]=true;this._topContacts.push(V.contacts[O]);}}if(!V.mailScoreLastUpdated||(J-I.SCORING_DATA.mailScoreLastUpdated)>I.MAIL_SCORE_REFRESH_INTERVAL||this._topContacts.length<I.TOP_CONTACT_MIN_COUNT){this._loadABData();}else{this.fire("topcontactsready");}}else{this._loadABData(true);}log("Top Contacts data loaded");},refreshTopContacts:function(){var J=F.getContacts(),M,L,O=0,Q,N,S,R=E.get("hideAddressBookContacts");function K(U,T){var Y=typeof(U.sc_score)!="undefined"?U.sc_score:0,X=typeof(T.sc_score)!="undefined"?T.sc_score:0,W,V;if(Y==X){W=U.displayname.toLowerCase();V=T.displayname.toLowerCase();if(W>V){return 1;}else{if(V>W){return -1;}}return 0;}else{return X-Y;}}this._topContacts=[];this._topContactMap={};this._messengerScores={};this._topcontactOrder={};if(J&&J.length){J.sort(K);if(J[0].sc_score&&J[0].sc_score>I.MAIL_SCORE_CONTRIB){N=I.MAIL_SCORE_CONTRIB/J[0].sc_score;}for(M=0;M<J.length&&O<50;M++){if(J[M].network=="yahoo"){if(J[M].user&&!C.isSelfUser(J[M].user)){if(R&&J[M].type==="addressbook"){continue;}S=J[M].sc_score||0;Q=[J[M].user,J[M].network].join("~");this._topcontactOrder[Q]=M;this._messengerScores[Q]={};this._messengerScores[Q].msgr_score=0;this._messengerScores[Q].prev_msgr_score=0;this._messengerScores[Q].score=S;this._messengerScores[Q].mail_score=N?N*S:S;O++;if(this._topContacts.length<I.TOP_CONTACT_MIN_COUNT&&!this._topContactMap[Q]){this._topContactMap[Q]=true;var P=this._messengerScores[Q];P.userId=Q;this._topContacts.push(P);}}}}I.SCORING_DATA.mailScoreLastUpdated=(new Date()).getTime();}this.fire("topcontactsready");this._dirty=true;this._persistScores(false);return;},_loadABData:function(Q){var J=F.getContacts(),M,L,O=0,R,N,T,S=E.get("hideAddressBookContacts");function K(V,U){var Z=typeof(V.sc_score)!="undefined"?V.sc_score:0,Y=typeof(U.sc_score)!="undefined"?U.sc_score:0,X,W;if(Z==Y){X=V.displayname.toLowerCase();W=U.displayname.toLowerCase();if(X>W){return 1;}else{if(W>X){return -1;}}return 0;}else{return Y-Z;}}if(J&&J.length){J.sort(K);if(J[0].sc_score&&J[0].sc_score>I.MAIL_SCORE_CONTRIB){N=I.MAIL_SCORE_CONTRIB/J[0].sc_score;}for(M=0;M<J.length&&O<50;M++){if(J[M].network=="yahoo"){if(J[M].user&&!C.isSelfUser(J[M].user)){if(S&&J[M].type==="addressbook"){continue;}T=J[M].sc_score||0;R=[J[M].user,J[M].network].join("~");this._topcontactOrder[R]=M;if(!this._messengerScores[R]){this._messengerScores[R]={};this._messengerScores[R].msgr_score=0;this._messengerScores[R].prev_msgr_score=0;this._messengerScores[R].score=T;}this._messengerScores[R].mail_score=N?N*T:T;O++;if(this._topContacts.length<I.TOP_CONTACT_MIN_COUNT&&!this._topContactMap[R]){this._topContactMap[R]=true;var P=this._messengerScores[R];P.userId=R;this._topContacts.push(P);}}}}I.SCORING_DATA.mailScoreLastUpdated=(new Date()).getTime();}this.fire("topcontactsready");if(Q){this._dirty=true;this._persistScores(false);}}});return new I();})();}H.namespace("Messenger").ContactScoring=A.ContactScoring;},"@VERSION@",{requires:["events","globalconfig","omapi","contactsmanager"]});YUI.add("contactlist",function(D){D.Node.DOM_EVENTS.beforedeactivate=1;var B=D.Messenger.Intl,N=YUI.namespace("Messenger").Events,M=launchData.userPrefs,L=D.Messenger.CommonUtils,J=L.logRocketStats,G=YUI.namespace("Messenger.Metrics"),H=D.Messenger.GlobalConfig,A=D.Messenger.ContactScoring,I=D.Messenger.SessionManager,C=D.Messenger.ContactsManager,O=D.Messenger.Templates.contactlist,F=D.Messenger.Contact,E=D.Messenger.WindowAPI;function K(P){K.superclass.constructor.apply(this,arguments);}K.NAME="yim-contact-list";K.MINTY_PADDING_MINIMIZED=18;K.MINTY_PADDING=6;K.CONTACT_DOM_HEIGHT=40;K.CONTACT_IMAGE_TOLERANCE=2;K.LOADTIMER=null;K.FIXED_TOP_HEIGHT=160;K.FACEBOOK_GROUP_NAME=B.get("str_cont_list_facebook_group_name");K.DEFAULT_GROUP_NAME=B.get("str_cont_list_default_group_name");K.FACEBOOK_GROUP_ID=B.get("str_cont_list_facebook_group_id");K.DEFAULT_MOBILE_GROUP_ID=B.get("str_cont_list_default_mobile_group_id");K.DEFAULT_MOBILE_GROUP_NAME=B.get("str_cont_list_default_mobile_group_name");K.DEFAULT_GROUP_ID=B.get("str_cont_list_default_group_id");K.TOP_CONTACT_GROUP_NAME=B.get("str_cont_list_top_contacts_group_name");K.RESIZE_MIN_DELAY=200;K.IMAGELOAD_MIN_DELAY=1000;K.ATTRS={showEmptyGroups:{value:true},groupSortOrder:{value:"ascending",setter:function(P){return P==="descending"?P:"ascending";}},showOffline:{value:H.get("showOfflineContacts")},showMobileContacts:{value:false},loggedInUserVisible:{value:true},showGroups:{value:true},actionEvent:{value:"dblclick"},selectionEvent:{value:"click"},sortBy:{value:"presenceAndName"},boundingBox:{value:null}};D.extend(K,D.Base,{initializer:function(){this._groups={};this._sortedGroupIds=[];this._eventListeners=[];this._initialTop=null;this._topContacts=null;this._tcMapping={};if(window.openmail){callInternal("setListener",{event:"tab.changed"},D.bind(this._resizeContactList,this));callInternal("setListener",{event:"browser.resize"},D.bind(this.loadDisplayImages,this));openmail.Application.setListener({event:"folderpane.scroll"},D.bind(this.loadDisplayImages,this));}},destructor:function(){while(this._eventListeners.length){var P=this._eventListeners.shift();if(P){P.detach();}}this._destroyAllContacts();if(this._resizeTimer){this._resizeTimer.cancel();}if(K.LOADTIMER){K.LOADTIMER.cancel();}},render:function(P){var R=H.get("contactListImageSize"),Q=D.Node.create('<div class="yui3-yim-contact-list images_'+R+'"></div>');log("ContactList render method invoked");P.append(Q);this.set("boundingBox",Q);if(window.openmail){this._createDefaultGroup();}this._createFacebookGroup();this._renderGroups();this._resizeContactList();if(window.openmail){launchData.timers.loadedEvent=(new Date()).getTime();callInternal("event.fire",{event:"mim.changestate",args:{state:"loaded"}});log("T4 Beacon Fired");}this._attachEvents();},_attachEvents:function(){this._eventListeners.push(D.Global.on(N.NETWORK_ERROR,D.bind(this.onNetworkError,this)));this._eventListeners.push(D.Global.on(N.NETWORK_ERROR_RESOLVED,D.bind(this.onNetworkFixed,this)));var P=I.isOnline();this._connectionUpdated({isOnline:P});this._eventListeners.push(D.Global.on(N.CONNECTION_UPDATE,D.bind(this._connectionUpdated,this)));this._eventListeners.push(D.Global.on(N.LOGOUT_FACEBOOK,D.bind(this._destroyFacebook,this)));this._eventListeners.push(D.Global.on(N.CONTACTLIST_RESIZED,D.bind(this._resizeContactList,this)));var Q=this.get("boundingBox");function R(U,S){var T;if((T=U.all(".vitality a"))){T.set("tabIndex",S);}}if(!window.openmail){this._eventListeners.push(D.delegate(this.get("actionEvent"),this.handleActionEvent,Q,"li",this));this._eventListeners.push(D.delegate(this.get("selectionEvent"),this.handleSelectionEvent,Q,"li",this));this._eventListeners.push(D.delegate("keydown",this.handleKeyboardInput,Q,"li",this));}else{this.set("actionEvent","click");this._eventListeners.push(D.delegate(this.get("actionEvent"),this.handleActionEvent,Q,"li",this));this._eventListeners.push(Q.delegate("keydown",function(S){if(S.keyCode===13){S.halt();this.toggleGroupExpand(S);}},"h2 span.label",this));this._eventListeners.push(Q.delegate("mousedown",function(S){if(S.button===1&&!S.ctrlKey){if(D.UA.ie){D.one(document.activeElement).once("beforedeactivate",function(T){T.preventDefault();});}else{S.preventDefault();}}},"h2 span[role=button], h2 input"));this._eventListeners.push(D.Global.on(N.CONTACTLIST_RESIZED,function(){Q.all(".items-nav-msgr-contacts").each(function(U){var T=U.one("ul[role=listbox]"),S;if((S=T.one("a[role=option]"))){S.set("tabIndex",0);}});}));this._eventListeners.push(D.Global.on(N.SIGNOUT_CANCELLED,D.bind(function(){this._toggleOnlineButton(this._groups[K.DEFAULT_GROUP_ID].getDOMNode().one(".rht .btn.signin-btn"),"online");},this)));this._eventListeners.push(Q.delegate("keydown",function(V){var U=V.target,T,S;if(V.keyCode==38||V.keyCode==40){V.halt();T=U.ancestor("li")[V.keyCode==40?"next":"previous"]();if(T){U.set("tabIndex",-1);R(U.ancestor("li"),-1);S=T.one("a[role=option]");S.set("tabIndex",0);R(T,0);S.focus();}}},"a[role=option]",this));}this._eventListeners.push(D.delegate("click",this.toggleGroupExpand,Q,"h2 span.label",this));this._eventListeners.push(D.delegate("contextmenu",this.handleRightClickEvent,Q,"li",this));this._eventListeners.push(H.after("contactListImageSizeChange",D.bind(function(S){var U="images_"+S.prevVal,V="images_"+S.newVal,T=this.get("boundingBox");T.removeClass(U);T.addClass(V);this._resizeContactList();},this)));this._eventListeners.push(H.after("showOfflineContactsChange",function(S){var U=S.newVal,T,V;this.set("showOffline",U);if(!H.get("useTopContacts")){for(T in this._groups){if(this._groups.hasOwnProperty(T)&&T!=K.FACEBOOK_GROUP_ID){V=this._groups[T];V.set("showOffline",U);V.destroyAllContacts();}}this.addContacts(C.getContacts(!this.get("showOffline")));}},this));this._eventListeners.push(H.after("hideAddressBookContactsChange",function(S){for(var T in this._groups){if(this._groups.hasOwnProperty(T)&&T!=K.FACEBOOK_GROUP_ID){var U=this._groups[T];U.destroyAllContacts();}}A.refreshTopContacts();
if(!H.get("useTopContacts")){this.addContacts(C.getContacts(!this.get("showOffline")));}else{A._topContactsLoaded=false;A.getTopContacts(D.bind(function(V){this._setTopContacts(V);if(A.constructor.TOP_CONTACT_MIN_COUNT<=V.length){D.one("#tc_toggle").removeClass("hidden");}else{this._switchTopContacts();}},this));}},this));this._addContactEventListeners();},_addContactEventListeners:function(){this._eventListeners.push(D.Global.on(N.CONTACTS_ADDED,D.bind(this.addContacts,this)));this._eventListeners.push(D.Global.on(N.CONTACTS_UPDATED,D.bind(this.onIncomingStatus,this)));var P=D.Messenger.SessionManager.get("presenceState");this.set("loggedInUserVisible",(P!=-1));this._eventListeners.push(D.Global.on(N.SELF_PRESENCE_CHANGED,D.bind(this._loggedInUserPresenceUpdated,this)));this._eventListeners.push(D.Global.on(N.VISIBILITY_CHANGED,D.bind(this._updatedVisibility,this)));this._eventListeners.push(D.Global.on(N.CONTACT_IMAGE_UPDATED,this._updateDisplayImage,this));this._eventListeners.push(D.Global.on(N.CONTACT_AUTHORIZE_RESPONSE,D.bind(this._onContactAuthorizeResponse,this)));this._eventListeners.push(D.Global.on(N.CONTACT_REMOVED_FROM_GROUP,D.bind(this.removeContactFromGroup,this)));this._eventListeners.push(D.Global.on(N.CONTACT_MOVED,this._boundContactMoved));},handleToggleTc:function(P){this._switchTopContacts();if(H.get("useTopContacts")){J({key:"switchToTopContacts",value:""});}else{J({key:"switchToOnlineContacts",value:""});}return false;},_switchTopContacts:function(){this._groups[K.DEFAULT_GROUP_ID].destroyAllContacts(false);if(H.get("useTopContacts")){H.set("useTopContacts",false);this._groups[K.DEFAULT_GROUP_ID].set("showOffline",this.get("showOffline"));this._groups[K.DEFAULT_GROUP_ID].set("sortBy","name");this._groups[K.DEFAULT_GROUP_ID].updateGroupName(K.DEFAULT_GROUP_NAME);this._groups[K.DEFAULT_GROUP_ID].set("emptyGroupMessage",B.get("str_cont_list_default_group_offline"));this._tcMapping={};this._topContactsLoaded=false;this.addContacts(C.getContacts(!this.get("showOffline")));}else{H.set("useTopContacts",true);this._groups[K.DEFAULT_GROUP_ID].updateGroupName(K.TOP_CONTACT_GROUP_NAME);this._groups[K.DEFAULT_GROUP_ID].set("showOffline",true);this._groups[K.DEFAULT_GROUP_ID].set("sortBy","score");this._groups[K.DEFAULT_GROUP_ID].set("emptyGroupMessage","");A.getTopContacts(D.bind(this._setTopContacts,this));}D.one("#tc_toggle").toggleClass("tc_tc").toggleClass("tc_regular");},_setTopContacts:function(P){var R=[];this._topContacts=P;for(var Q=0;Q<this._topContacts.length;Q++){this._tcMapping[this._topContacts[Q].userId]=true;var S=this._topContacts[Q].userId.split("~");R.push(C.getContact(S[0],S[1]));}this.addContacts(R);this._topContactsLoaded=true;},recordLoadStats:function(){G.ClResponsive=new Date().getTime();var P=(G.ClResponsive-G.appInit);J({key:"loginTime",value:P});if(window.openmail){callInternal("event.fire",{state:"launch"});}},addContacts:function(d){var a,e,Y,S={},Q={},V,Z=this.get("showOffline"),R=this.get("showEmptyGroups"),c=this.get("sortBy"),U=false,b,P;if(!I.isOnline()){return;}for(var X=0;X<d.length;X++){a=d[X];P=[a.user,a.network].join("~");if(a.network=="sms"&&!this.get("showMobileContacts")){continue;}if(a.presence.state==-1&&!(Z||H.get("useTopContacts"))){continue;}if(H.get("useTopContacts")&&a.network!="facebook"&&!this._tcMapping[P]){continue;}if(H.get("hideAddressBookContacts")&&a.type=="addressbook"){continue;}Y=C.getContactGroups(a);for(var T=0;T<Y.length;T++){V=Y[T];if(this._groups[V]){if(!Q[V]){Q[V]=[];}Q[V].push(a);}else{U=true;if(!S[V]){S[V]=[];}S[V].push(a);}}}if(U){for(V in S){if(S.hasOwnProperty(V)){d=S[V];b=(M&&M.expandGroups===0)?true:false;if(window.openmail){if(V===K.DEFAULT_MOBILE_GROUP_ID){this._groups[V]=new D.Messenger.ContactGroup({sortBy:c,showOffline:true,showIfEmpty:false,id:V,name:K.DEFAULT_MOBILE_GROUP_NAME,isMobile:true,startCollapsed:b});}else{this._groups[V]=new D.Messenger.ContactGroup({sortBy:c,showOffline:Z,showIfEmpty:R,id:V,name:V,startCollapsed:b});}}else{this._groups[V]=new D.Messenger.ContactGroup({sortBy:c,showOffline:Z,showIfEmpty:R,id:V,name:V,startCollapsed:b});}this._groups[V].addContacts(d);if(window.openmail){this._eventListeners.push(this._groups[V].on("yim:contactGroupResized",this._resizeContactList,this));}this._sortedGroupIds.push(V);}}this._sortGroupIds();this._renderGroups();}for(V in Q){if(Q.hasOwnProperty(V)){this._groups[V].addContacts(Q[V]);}}if(window.openmail){if(H.get("topContactsEnabled")){var W=D.one("#tc_toggle");if(H.get("useTopContacts")||C.getIMContactCount()>=A.constructor.TOP_CONTACT_MIN_COUNT){W.removeClass("hidden");}else{W.addClass("hidden");}}}this._resizeContactList();},removeContactFromGroup:function(Q){var P=Q.user,R=Q.network,S=Q.group;if(this._groups[S]){this._groups[S].removeContact(P,R);}},_createFacebookGroup:function(){if(H.get("fbEnabled")&&!this._groups[K.FACEBOOK_GROUP_ID]){var T=(M&&M.fbgroupExpandPref===0)?true:false,S=[],P=I.isOnlineFacebook()?"in":"out";this._sortedGroupIds.push(K.FACEBOOK_GROUP_ID);S.push({btn_class:"signin-btn",btn_title:B.get("str_cont_list_facebook_group_name"),btn_id:"btn-signin-facebook",css_class:"icon ymsgr_fbsignin "+P,input_value:"",callback:D.bind(this._toggleFacebookPresence,this)});this._groups[K.FACEBOOK_GROUP_ID]=new D.Messenger.ContactGroup({sortBy:this.get("sortBy"),showOffline:false,showIfEmpty:this.get("showEmptyGroups"),id:K.FACEBOOK_GROUP_ID,name:K.FACEBOOK_GROUP_NAME,startCollapsed:T,buttons:S});this._eventListeners.push(this._groups[K.FACEBOOK_GROUP_ID].on("yim:contactGroupResized",this._resizeContactList,this));this._eventListeners.push(D.Global.on(N.LOGIN_FACEBOOK,function(){this._toggleOnlineButton(this._groups[K.FACEBOOK_GROUP_ID].getDOMNode().one(".rht .btn.signin-btn"),"online");this._groups[K.FACEBOOK_GROUP_ID].set("emptyGroupMessage","");},this));if(!I.isOnlineFacebook()){var R=B.get("str_label_sign_in_facebookchat"),Q=L.substitute(B.get("str_cont_list_facebook_sign_out_msg"),{bttn_img:"<span class='ymsgr_fbsignin out'>"+R+"</span>"});
this._groups[K.FACEBOOK_GROUP_ID].set("emptyGroupMessage",Q);}else{this._groups[K.FACEBOOK_GROUP_ID].set("emptyGroupMessage",B.get("str_cont_list_default_group_offline"));}}},_createDefaultGroup:function(){var T=this.get("showOffline"),P=this.get("showEmptyGroups"),W=this.get("sortBy"),U=(M&&M.expandGroups===0)?true:false,S=I.isOnline()?"in":"out",Q=H.get("useTopContacts");var R=K.DEFAULT_GROUP_ID,X,V=[];if(Q){X=K.TOP_CONTACT_GROUP_NAME;}else{X=K.DEFAULT_GROUP_NAME;}this._sortedGroupIds.push(R);if(launchData.cobrand=="nokia"){V.push({btn_class:"msgr-options",btn_title:L.substitute(B.get("str_menu_messenger_options"),{str_cfg_branding_messenger:H.getGenericAppName()}),btn_id:"btn-options-messenger",css_class:"icon edit msgr-options-btn",input_value:"",callback:function(){D.Global.fire(N.SHOW_WINDOW,"OptionsWindow");}});}V.push({btn_class:"signin-btn",btn_title:L.substitute(B.get("str_menu_sign_in_messenger"),{str_cfg_branding_messenger:H.getGenericAppName()}),btn_id:"btn-signin-messenger",css_class:"icon ymsgr_fbsignin "+S,input_value:"",callback:D.bind(this._toggleMessengerPresence,this)});this._groups[R]=new D.Messenger.ContactGroup({showAdd:true,sortBy:Q?"score":W,showOffline:Q?true:T,showIfEmpty:P,name:X,id:R,startCollapsed:U,buttons:V,emptyGroupMessage:Q?"":B.get("str_cont_list_default_group_offline")});},_toggleOnlineButton:function(R,U){var T=R.one("input"),Q=T._node.id.indexOf("facebook")>-1;T.removeClass("loading");T.removeClass("in");T.removeClass("out");switch(U){case"offline":var P=!Q?L.substitute(B.get("str_menu_sign_in_messenger"),{str_cfg_branding_messenger:H.getGenericAppName()}):B.get("str_menu_sign_in_facebookchat");T.addClass("out");T.set("value",P);R.setAttribute("title",P);break;case"online":var S=!Q?L.substitute(B.get("str_menu_sign_out_messenger"),{str_cfg_branding_messenger:H.getGenericAppName()}):B.get("str_menu_sign_out_facebookchat");T.addClass("in");T.set("value",S);R.setAttribute("title",S);break;case"loading":T.addClass("loading");break;default:}},_toggleMessengerPresence:function(){D.Messenger.SessionManager.toggleMessengerPresence();this._toggleOnlineButton(this._groups[K.DEFAULT_GROUP_ID].getDOMNode().one(".rht .btn.signin-btn"),"loading");},_toggleFacebookPresence:function(){D.Messenger.SessionManager.toggleFacebookPresence();this._toggleOnlineButton(this._groups[K.FACEBOOK_GROUP_ID].getDOMNode().one(".rht .btn.signin-btn"),"loading");},moveContact:function(S,R,T,P,Q){},getGroups:function(){return this._groups;},getSortedGroups:function(){var Q=[],P;for(P=0;P<this._sortedGroupIds.length;P++){Q.push(this._groups[this._sortedGroupIds[P]]);}return Q;},getNumGroups:function(){return this._sortedGroupIds.length;},getGroupNames:function(){var R,P=[],Q,S;for(R=0;R<this._sortedGroupIds.length;R++){Q=this._sortedGroupIds[R];S=this._groups[Q].get("name");P.push(S);}return P;},loadDisplayImages:function(){if(this._imgLoadPending){return;}if(this._isAllGroupsCollapsed()||H.get("contactListImageSize")=="none"||this.get("boundingBox").all("li").size()===0){return;}this._imgLoadPending=true;if(!this._previousImageLoad){this._loadImages();return;}else{var P=(new Date()).getTime()-this._previousImageLoad;if(P<K.IMAGELOAD_MIN_DELAY){this._imageLoadTimer=D.later(K.IMAGELOAD_MIN_DELAY-P,this,function(){this._imageLoadTimer=null;this._loadImages();});}else{this._loadImages();}}},_loadImages:function(){var P=D.config.win.windowName;E.GetPosAndSize(P,D.bind(function(Q){if(!Q){return;}E.GetViewport(D.bind(function(U){this._imgLoadPending=false;if(!U){return;}var Y=this.getAllSortedVisibleContacts(),X=Y[0]||null,R,V,S,W=Q.top-U.y0;if(D.Lang.isNull(this._initialTop)){this._initialTop=W;}if(X){var T=D.one("#"+X.getNodeID());if(T){K.CONTACT_DOM_HEIGHT=T.get("region").height;}}if(K.CONTACT_DOM_HEIGHT<=0){return;}S=U.dy-W;if(D.Lang.isNumber(S)&&D.Lang.isNumber(K.CONTACT_DOM_HEIGHT)){V=S/K.CONTACT_DOM_HEIGHT;R=0;}else{R=0;V=Y.length;}if((Q.top-K.FIXED_TOP_HEIGHT)<0){var Z=(this._initialTop-K.FIXED_TOP_HEIGHT)/K.CONTACT_DOM_HEIGHT;R=(this._initialTop-W)/K.CONTACT_DOM_HEIGHT;R-=(Z+4);}this._fetchVisibleImages(R,V,Y);},this));},this));},_fetchVisibleImages:function(W,R,P){this._previousImageLoad=(new Date()).getTime();W=Math.floor(W-K.CONTACT_IMAGE_TOLERANCE);R=Math.ceil(R+K.CONTACT_IMAGE_TOLERANCE);R=R<P.length?R:P.length;for(var T=W;T<R;T++){var S=P[T],Q,V,U=null;if(S){U=D.one("#"+S.getNodeImageID());if(U){V=U.get("src");Q=S.getDisplayImageUrl();if(Q&&(!V||Q!=V)){U.set("src",Q);}}}}},getAllSortedVisibleContacts:function(){var Q=this.getSortedGroups(),P=[];D.each(Q,function(S,R,T){if(S&&!S.isCollapsed()){P=P.concat(S.getContacts());}});return P;},onIncomingStatus:function(W){var Y={},Z=[],V;for(var T=0;T<W.length;T++){var U=W[T],P=C.getContactGroups(U),X,S,Q=[U.user,U.network].join("~");if(H.get("useTopContacts")&&U.network!="facebook"&&!this._tcMapping[Q]){continue;}if(H.get("hideAddressBookContacts")&&U.type=="addressbook"){continue;}for(var R=0;R<P.length;R++){S=P[R];if(!this._groups[S]){Z.push(U);break;}else{if(!Y[S]){Y[S]={};}Y[S][Q]=U;}}}if(Z.length>0){this.addContacts(Z);}for(S in Y){if(Y.hasOwnProperty(S)){X=Y[S];V=[];for(Q in X){if(X.hasOwnProperty(Q)){V.push(X[Q]);}}this._groups[S].updateContacts(V);}}this._resizeContactList();},handleActionEvent:function(P){if(!window.openmail&&this.convPicker){this.convPicker.clearSelection();}if(P.shiftKey&&(P.ctrlKey||P.metaKey)){return;}if(P.target.hasClass("link")){D.Global.fire(N.CLOSE_CONTACT_MENU);return false;}P.halt();var Q=P.currentTarget.getAttribute("data-user"),R=P.currentTarget.getAttribute("data-network"),S="im";if(!G.openConvWindowStart){G.openConvWindowStart=new Date().getTime();}if(G.openConvWindowStart&&G.openConvWindowEnd&&!G.openConvWindowStartAgain){G.openConvWindowStartAgain=new Date().getTime();}if(P.currentTarget.hasClass("ymsg-mobile")){S="sms";}D.Global.fire(N.SHOW_CONVERSATION,{user:Q,network:R,openedBySelf:true,mode:S});P.currentTarget.removeClass("selected");},handleSelectionEvent:function(P){P.halt();if(!window.openmail&&this.convPicker){this.convPicker.clearSelection();
}var R=P.ctrlKey||P.metaKey,Q=this.get("boundingBox");D.Global.fire(N.CLOSE_CONTACT_MENU);if(R){if(P.currentTarget.hasClass("selected")){P.currentTarget.removeClass("selected");}else{P.currentTarget.addClass("selected");}}else{Q.all("ul li.selected").removeClass("selected");P.currentTarget.addClass("selected");this.set("currentSelection",P.currentTarget);if(P.target&&P.target.hasClass("link")){window.open(P.target.get("href"),"_blank");}}P.currentTarget.one("a").focus();},handleRightClickEvent:function(P){var Q=this.get("boundingBox"),R=P.currentTarget.getAttribute("data-user"),T=P.currentTarget.getAttribute("data-network");P.halt();Q.all("ul li.selected").removeClass("selected");var S=P.currentTarget.ancestor("ul li.btn-contact",true);S.one("a").blur();S.ancestor(".items-nav ul",true).all("li").removeClass("contact-menu");S.addClass("contact-menu");D.Global.once(N.CONTACT_MENU_CLOSED,D.bind(function(){this.removeClass("contact-menu");this.removeClass("selected");},P.currentTarget));var U=function(X){var V=X.left+P.clientX,W=X.top+P.clientY;D.Messenger.WindowManager.showWindow("ContactMenuWindow",{left:V,top:W},{user:R,network:T});};E.GetPosAndSize(D.config.win.windowName,U);},handleKeyboardInput:function(U){var S=this.get("boundingBox"),T=U.currentTarget,P,R,Q;U.halt();D.Global.fire(N.CLOSE_CONTACT_MENU);if(U.keyCode===38||U.keyCode===40){S.all("ul li.selected").removeClass("selected");R=S.all("div.expanded ul li");if(T){Q=R.indexOf(T);if(U.keyCode===40){if(Q===R.size()-1){P=R.item(0);}else{P=R.item(Q+1);}}else{if(Q===0){P=R.item(R.size()-1);}else{P=R.item(Q-1);}}if(P){this.set("currentSelection",P);P.addClass("selected");P.scrollIntoView();P.one("a").focus();}}}else{if(U.keyCode===13){this.handleActionEvent(U);}}},toggleGroupExpand:function(U){var V=U.currentTarget.get("parentNode"),Q=unescape(V.get("id")),T=V.get("parentNode"),S=T.one(".label"),P=null,R;if(T.hasClass("expanded")){P=0;T.removeClass("expanded");T.addClass("collapsed");T.all("li").removeClass("selected");S.set("aria-expanded",false);R="collapsed";}else{if(T.hasClass("collapsed")){P=1;T.removeClass("collapsed");T.addClass("expanded");T.all("li").removeClass("selected");S.set("aria-expanded",true);R="expanded";}}this.set("currentSelection",null);this._resizeContactList(true);D.Global.fire(N.GROUP_COLLAPSE_CHANGE,{groupId:Q,state:R});},_loggedInUserPresenceUpdated:function(R){var S=this.get("loggedInUserVisible"),P=this.get("boundingBox"),Q=(R.state!=-1);if(S!==Q){this.set("loggedInUserVisible",Q);P.all("ul li").each(function(T){F.updateStealthState(T);},this);}},_updatedVisibility:function(S){var T=[S.user,S.network].join("~"),P=S.visible,Q=this.get("boundingBox"),R=Q.all("ul li");if(R.size()>0){R.each(function(W){var U=W.getAttribute("data-user"),V=W.getAttribute("data-network");if(U+"~"+V===T){if(P){W.removeClass("stealth");W.setStyle("opacity",1);}else{W.addClass("stealth");W.setStyle("opacity",0.6);}}},this);}},_connectionUpdated:function(U){var P=D.one("#tc_toggle"),Q,S,R,T;this._enableMainWindow();if(!U.isOnline){if(this._groups[K.DEFAULT_GROUP_ID]){T=L.substitute(B.get("str_label_sign_in_messenger"),{str_cfg_branding_messenger:H.getGenericAppName()});R=L.substitute(B.get("str_cont_list_default_group_sign_out_msg"),{bttn_img:"<span class='ymsgr_fbsignin out'>"+T+"</span>",str_cfg_branding_messenger:H.getGenericAppName()});this._groups[K.DEFAULT_GROUP_ID].set("emptyGroupMessage",R);}if(this._groups[K.FACEBOOK_GROUP_ID]){T=B.get("str_label_sign_in_facebookchat");R=L.substitute(B.get("str_cont_list_facebook_sign_out_msg"),{bttn_img:"<span class='ymsgr_fbsignin out'>"+T+"</span>"});this._groups[K.FACEBOOK_GROUP_ID].set("emptyGroupMessage",R);}this._destroyAllContacts(!window.openmail);if(window.openmail){for(Q in this._groups){S=this._groups[Q].getDOMNode().one(".rht .btn.signin-btn");if(S){this._toggleOnlineButton(S,"offline");}}if(P){P.addClass("hidden");}}}else{if(window.openmail){this._toggleOnlineButton(this._groups[K.DEFAULT_GROUP_ID].getDOMNode().one(".rht .btn.signin-btn"),"online");if(P){P.removeClass("hidden");}if(this._groups[K.DEFAULT_GROUP_ID]){this._groups[K.DEFAULT_GROUP_ID].set("emptyGroupMessage",B.get("str_cont_list_default_group_offline"));}if(H.get("useTopContacts")){A.getTopContacts(D.bind(function(V){this._setTopContacts(V);if(V.length>=A.constructor.TOP_CONTACT_MIN_COUNT){D.one("#tc_toggle").removeClass("hidden");}else{this._switchTopContacts();}},this));this.addContacts(C.getFacebookContacts());}else{if(C.isPresenceAvailable()||this.get("showOffline")){this.addContacts(C.getContacts(!this.get("showOffline")));}}}}},_updateDisplayImage:function(Q){var P=Q.groups,S,T=[Q.user,Q.network].join("~");if(H.get("useTopContacts")&&Q.network!="facebook"&&!this._tcMapping[T]){return;}if(H.get("hideAddressBookContacts")&&Q.type=="addressbook"){return;}if(window.openmail){if(Q.network==="facebook"){S=K.FACEBOOK_GROUP_ID;}else{S=K.DEFAULT_GROUP_ID;}if(this._groups[S]){this._groups[S].updateDisplayImage(Q);}}else{for(var R=0;R<P.length;R++){S=P[R];if(this._groups[S]){this._groups[S].updateDisplayImage(Q);}}}},_onContactAuthorizeResponse:function(T){var Q=T.sender,S=T.network||"yahoo",P=C.getContact(Q,S);if(P){if(T.authResponse==="deny"){for(var R=0;R<P.groups.length;R++){this.removeContactFromGroup(Q,S,P.groups[R]);}}}},_destroyAllContacts:function(Q){for(var P in this._groups){if(this._groups.hasOwnProperty(P)){this._groups[P].destroyAllContacts();if(Q){this._groups[P].destroy();}}}if(Q){this._groups={};this._sortedGroupIds=[];}this._resizeContactList();},_destroyFacebook:function(){var R=this._groups[K.FACEBOOK_GROUP_ID];if(R){var Q=B.get("str_label_sign_in_facebookchat"),P=L.substitute(B.get("str_cont_list_facebook_sign_out_msg"),{bttn_img:"<span class='ymsgr_fbsignin out'>"+Q+"</span>"});R.set("emptyGroupMessage",P);this.removeAllContactsForGroup(K.FACEBOOK_GROUP_ID);this._toggleOnlineButton(this._groups[K.FACEBOOK_GROUP_ID].getDOMNode().one(".rht .btn.signin-btn"),"offline");this._resizeContactList();}},removeAllContactsForGroup:function(P){if(!P){return;
}var R=this._groups[P],Q;if(R){R.destroyAllContacts();}else{}},_renderGroups:function(){var T,R,Q,S,P=false;for(R=0,Q=this._sortedGroupIds.length;R<Q;R++){T=this._groups[this._sortedGroupIds[R]];if(this._renderGroup(T,R)){P=true;}}if(P){S=this.get("boundingBox").all(".items-nav-msgr-contacts");if(S&&S.size()>0){S.removeClass("last-group");S.item(S.size()-1).addClass("last-group");}}return P;},_renderGroup:function(U,R,T){var Q=this.get("boundingBox"),P;if(!U.isRendered()){P=U.getDOMNode();if(R!==undefined){Q.insert(P,R);}else{Q.append(P);}if(H.get("topContactsEnabled")&&U.get("id")===K.DEFAULT_GROUP_ID){var S=H.get("useTopContacts")?"tc_tc":"tc_regular";P.append(D.Node.create(L.substitute(O.topContactsButton,{tc_class:S})));this._eventListeners.push(P.one("#tc_toggle").on("click",D.bind(this.handleToggleTc,this)));}return true;}return false;},_sortGroupIds:function(){var R=this.get("groupSortOrder"),Q=window.openmail?K.DEFAULT_MOBILE_GROUP_ID:"",S=K.FACEBOOK_GROUP_ID;function P(V,U){var T,W;if(V===Q||V===S){return 1;}else{if(U===Q||U===S){return -1;}}if(R==="ascending"){T=V.toLowerCase();W=U.toLowerCase();}else{T=U.toLowerCase();W=V.toLowerCase();}return((T<W)?-1:((T>W)?1:0));}this._sortedGroupIds.sort(P);},_resizeContactList:function(){var Q,P;if(window.openmail){if(!this._resizeTimer){if(!this._previousResize){P=D.Messenger.WindowManager.getWindow(D.config.win.windowName);if(P&&!P.get("cssLoaded")){this._resizeTimer=P.after("cssLoadedChange",D.bind(function(){this._resizeTimer.detach();this._resizeTimer=null;this._doResize();},this));}else{this._doResize();}return;}else{Q=(new Date()).getTime()-this._previousResize;if(Q<K.RESIZE_MIN_DELAY){this._resizeTimer=D.later(K.RESIZE_MIN_DELAY-Q,this,function(){this._resizeTimer=null;this._doResize();});}else{this._doResize();}}}}},_doResize:function(){var R=window.openmail,P,Q=this._isAllGroupsCollapsed();this._previousResize=(new Date()).getTime();if(D.config.doc.getElementById("bottomMarker")!==null){P=D.config.doc.getElementById("bottomMarker").offsetTop;}if(P==0&&!this._isAllGroupsHidden()){return;}if(R&&P!==this._lastHeightSet){E.SetSize(D.config.win.windowName,null,P);this._lastHeightSet=P;}if(K.LOADTIMER){K.LOADTIMER.cancel();K.LOADTIMER=null;}D.later(50,this,this.loadDisplayImages);},_getGroupCount:function(){return this._sortedGroupIds.length||0;},_isAllGroupsCollapsed:function(){for(var Q=0,P=this._sortedGroupIds.length;Q<P;Q++){if(!this._groups[this._sortedGroupIds[Q]].isCollapsed()){return false;}}return true;},_isAllGroupsHidden:function(){for(var Q=0,P=this._sortedGroupIds.length;Q<P;Q++){if(!this._groups[this._sortedGroupIds[Q]].isHidden()){return false;}}return true;},onNetworkError:function(P){this._disableMainWindow();},onNetworkFixed:function(P){this._enableMainWindow();},_enableMainWindow:function(){var P;P=D.Messenger.WindowManager.getWindow(D.config.win.windowName);if(P){P.enableWindow();}this.get("boundingBox").removeClass("disconnected");},_disableMainWindow:function(){var P;P=D.Messenger.WindowManager.getWindow(D.config.win.windowName);if(P){P.disableWindow(true);}this.get("boundingBox").addClass("disconnected");}});D.namespace("Messenger").ContactList=K;},"@VERSION@",{skinnable:true,requires:["yim-intl","base-base","node","contactgroup","contactscoring"]});YUI.add("mintymainwindow",function(E){var B=E.Messenger.CommonUtils,D=E.Messenger.Intl,C=E.Messenger.GlobalConfig;function A(F){A.superclass.constructor.apply(this,arguments);}A.NAME="MintyMainWindow";A.ATTRS={showChrome:{value:false},startHeight:{value:0},allowResize:{value:false},allowMove:{value:false},limitToViewport:{value:false},title:{value:B.substitute(D.get("str_window_title_main"),{str_cfg_branding_messenger:C.getGenericAppName()})},ariaRole:{value:"application"},iframeLocation:{value:"folderpane"},windowName:{value:"MintyMainWindow"},hideOnLogout:{value:false},disableRightClick:{value:false}};E.extend(A,E.Messenger.BaseWindow,{closeOnDormant:function(){},onInit:function(F){var H=E.one("#IowaWindowDiv"),G;this._contactList=new E.Messenger.ContactList({actionEvent:"dblclick",sortBy:"name",showEmptyGroups:"true"});this._contactList.render(H);G=this._contactList.get("boundingBox");G.addClass("list-view");G.set("id","list-view");G.setAttribute("aria-live","assertive");},destructor:function(){this._contactList.destroy();}});E.Messenger.MintyMainWindow=A;},"@VERSION@",{requires:["basewindow","contactlist","yim-intl"]});