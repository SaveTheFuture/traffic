YUI.add("widget-stdmod",function(b){var f=b.Lang,q=b.Node,x=b.UA,e=b.Widget,d="",J="hd",G="bd",j="ft",D="header",M="body",K="footer",N="fillHeight",m="stdmod",u="Node",I="Content",C="firstChild",h="childNodes",n="ownerDocument",v="contentBox",z="height",F="offsetHeight",y="auto",l="headerContentChange",B="bodyContentChange",o="footerContentChange",r="fillHeightChange",t="heightChange",O="contentUpdate",w="renderUI",E="bindUI",g="syncUI",H="_applyParsedConfig",s=b.Widget.UI_SRC;function P(L){this._stdModNode=this.get(v);b.before(this._renderUIStdMod,this,w);b.before(this._bindUIStdMod,this,E);b.before(this._syncUIStdMod,this,g);}P.HEADER=D;P.BODY=M;P.FOOTER=K;P.AFTER="after";P.BEFORE="before";P.REPLACE="replace";var k=P.HEADER,A=P.BODY,p=P.FOOTER,a=k+I,c=p+I,i=A+I;P.ATTRS={headerContent:{value:null},footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:P.BODY,validator:function(L){return this._validateFillHeight(L);}}};P.HTML_PARSER={headerContent:function(L){return this._parseStdModHTML(k);},bodyContent:function(L){return this._parseStdModHTML(A);},footerContent:function(L){return this._parseStdModHTML(p);}};P.SECTION_CLASS_NAMES={header:e.getClassName(J),body:e.getClassName(G),footer:e.getClassName(j)};P.TEMPLATES={header:'<div class="'+P.SECTION_CLASS_NAMES[k]+'"></div>',body:'<div class="'+P.SECTION_CLASS_NAMES[A]+'"></div>',footer:'<div class="'+P.SECTION_CLASS_NAMES[p]+'"></div>'};P.prototype={_syncUIStdMod:function(){var L=this._stdModParsed;if(!L||!L[a]){this._uiSetStdMod(k,this.get(a));}if(!L||!L[i]){this._uiSetStdMod(A,this.get(i));}if(!L||!L[c]){this._uiSetStdMod(p,this.get(c));}this._uiSetFillHeight(this.get(N));},_renderUIStdMod:function(){this._stdModNode.addClass(e.getClassName(m));this._renderStdModSections();},_renderStdModSections:function(){if(f.isValue(this.get(a))){this._renderStdMod(k);}if(f.isValue(this.get(i))){this._renderStdMod(A);}if(f.isValue(this.get(c))){this._renderStdMod(p);}},_bindUIStdMod:function(){this.after(l,this._afterHeaderChange);this.after(B,this._afterBodyChange);this.after(o,this._afterFooterChange);this.after(r,this._afterFillHeightChange);this.after(t,this._fillHeight);this.after(O,this._fillHeight);},_afterHeaderChange:function(L){if(L.src!==s){this._uiSetStdMod(k,L.newVal,L.stdModPosition);}},_afterBodyChange:function(L){if(L.src!==s){this._uiSetStdMod(A,L.newVal,L.stdModPosition);}},_afterFooterChange:function(L){if(L.src!==s){this._uiSetStdMod(p,L.newVal,L.stdModPosition);}},_afterFillHeightChange:function(L){this._uiSetFillHeight(L.newVal);},_validateFillHeight:function(L){return !L||L==P.BODY||L==P.HEADER||L==P.FOOTER;},_uiSetFillHeight:function(R){var Q=this.getStdModNode(R);var L=this._currFillNode;if(L&&Q!==L){L.setStyle(z,d);}if(Q){this._currFillNode=Q;}this._fillHeight();},_fillHeight:function(){if(this.get(N)){var L=this.get(z);if(L!=d&&L!=y){this.fillHeight(this._currFillNode);}}},_uiSetStdMod:function(S,R,L){if(f.isValue(R)){var Q=this.getStdModNode(S)||this._renderStdMod(S);this._addStdModContent(Q,R,L);this.set(S+I,this._getStdModContent(S),{src:s});}else{this._eraseStdMod(S);}this.fire(O);},_renderStdMod:function(R){var L=this.get(v),Q=this._findStdModSection(R);if(!Q){Q=this._getStdModTemplate(R);}this._insertStdModSection(L,R,Q);this[R+u]=Q;return this[R+u];},_eraseStdMod:function(Q){var L=this.getStdModNode(Q);if(L){L.remove(true);delete this[Q+u];}},_insertStdModSection:function(L,S,R){var Q=L.get(C);if(S===p||!Q){L.appendChild(R);}else{if(S===k){L.insertBefore(R,Q);}else{var T=this[p+u];if(T){L.insertBefore(R,T);}else{L.appendChild(R);}}}},_getStdModTemplate:function(L){return q.create(P.TEMPLATES[L],this._stdModNode.get(n));},_addStdModContent:function(R,Q,L){switch(L){case P.BEFORE:L=0;break;case P.AFTER:L=undefined;break;default:L=P.REPLACE;}R.insert(Q,L);},_getPreciseHeight:function(R){var L=(R)?R.get(F):0,S="getBoundingClientRect";if(R&&R.hasMethod(S)){var Q=R.invoke(S);if(Q){L=Q.bottom-Q.top;}}return L;},_findStdModSection:function(L){return this.get(v).one("> ."+P.SECTION_CLASS_NAMES[L]);},_parseStdModHTML:function(Q){var L=this._findStdModSection(Q);if(L){if(!this._stdModParsed){this._stdModParsed={};b.before(this._applyStdModParsedConfig,this,H);}this._stdModParsed[Q+I]=1;return L.get("innerHTML");}return null;},_applyStdModParsedConfig:function(S,L,R){var Q=this._stdModParsed;if(Q){Q[a]=!(a in L)&&(a in Q);Q[i]=!(i in L)&&(i in Q);Q[c]=!(c in L)&&(c in Q);}},_getStdModContent:function(L){return(this[L+u])?this[L+u].get(h):null;},setStdModContent:function(R,Q,L){this.set(R+I,Q,{stdModPosition:L});},getStdModNode:function(L){return this[L+u]||null;},fillHeight:function(Q){if(Q){var V=this.get(v),W=[this.headerNode,this.bodyNode,this.footerNode],L,X,Y=0,T=0,S=false;for(var U=0,R=W.length;U<R;U++){L=W[U];if(L){if(L!==Q){Y+=this._getPreciseHeight(L);}else{S=true;}}}if(S){if(x.ie||x.opera){Q.set(F,0);}X=V.get(F)-parseInt(V.getComputedStyle("paddingTop"),10)-parseInt(V.getComputedStyle("paddingBottom"),10)-parseInt(V.getComputedStyle("borderBottomWidth"),10)-parseInt(V.getComputedStyle("borderTopWidth"),10);if(f.isNumber(X)){T=X-Y;if(T>=0){Q.set(F,T);}}}}}};b.WidgetStdMod=P;},"@VERSION@",{requires:["base-build","widget"]});YUI.add("widget-position",function(A){var I=A.Lang,L=A.Widget,N="xy",J="position",G="positioned",K="boundingBox",H="relative",M="renderUI",F="bindUI",D="syncUI",C=L.UI_SRC,E="xyChange";function B(O){this._posNode=this.get(K);A.after(this._renderUIPosition,this,M);A.after(this._syncUIPosition,this,D);A.after(this._bindUIPosition,this,F);}B.ATTRS={x:{setter:function(O){this._setX(O);},getter:function(){return this._getX();},lazyAdd:false},y:{setter:function(O){this._setY(O);},getter:function(){return this._getY();},lazyAdd:false},xy:{value:[0,0],validator:function(O){return this._validateXY(O);}}};B.POSITIONED_CLASS_NAME=L.getClassName(G);B.prototype={_renderUIPosition:function(){this._posNode.addClass(B.POSITIONED_CLASS_NAME);},_syncUIPosition:function(){var O=this._posNode;if(O.getStyle(J)===H){this.syncXY();}this._uiSetXY(this.get(N));},_bindUIPosition:function(){this.after(E,this._afterXYChange);},move:function(){var O=arguments,P=(I.isArray(O[0]))?O[0]:[O[0],O[1]];this.set(N,P);},syncXY:function(){this.set(N,this._posNode.getXY(),{src:C});},_validateXY:function(O){return(I.isArray(O)&&I.isNumber(O[0])&&I.isNumber(O[1]));},_setX:function(O){this.set(N,[O,this.get(N)[1]]);},_setY:function(O){this.set(N,[this.get(N)[0],O]);},_getX:function(){return this.get(N)[0];},_getY:function(){return this.get(N)[1];},_afterXYChange:function(O){if(O.src!=C){this._uiSetXY(O.newVal);}},_uiSetXY:function(O){this._posNode.setXY(O);}};A.WidgetPosition=B;},"@VERSION@",{requires:["base-build","node-screen","widget"]});YUI.add("widget-position-align",function(A){var H=A.Lang,D="align",F="bindUI",B="syncUI",E="offsetWidth",I="offsetHeight",K="viewportRegion",G="region",J="alignChange";function C(L){if(!this._posNode){A.error("WidgetPosition needs to be added to the Widget, before WidgetPositionAlign is added");}A.after(this._syncUIPosAlign,this,B);A.after(this._bindUIPosAlign,this,F);}C.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:false,value:false}};C.TL="tl";C.TR="tr";C.BL="bl";C.BR="br";C.TC="tc";C.RC="rc";C.BC="bc";C.LC="lc";C.CC="cc";C.prototype={_syncUIPosAlign:function(){var L=this.get(D);if(L){this._uiSetAlign(L.node,L.points);}},_bindUIPosAlign:function(){this.after(J,this._afterAlignChange);},_setAlignCenter:function(L){if(L){this.set(D,{node:L===true?null:L,points:[C.CC,C.CC]});}return L;},_afterAlignChange:function(L){if(L.newVal){this._uiSetAlign(L.newVal.node,L.newVal.points);}},_uiSetAlign:function(O,N){if(!H.isArray(N)||N.length!=2){A.error("align: Invalid Points Arguments");return;}var M=this._getRegion(O),L,P,Q;if(M){L=N[0];P=N[1];switch(P){case C.TL:Q=[M.left,M.top];break;case C.TR:Q=[M.right,M.top];break;case C.BL:Q=[M.left,M.bottom];break;case C.BR:Q=[M.right,M.bottom];break;case C.TC:Q=[M.left+Math.floor(M.width/2),M.top];break;case C.BC:Q=[M.left+Math.floor(M.width/2),M.bottom];break;case C.LC:Q=[M.left,M.top+Math.floor(M.height/2)];break;case C.RC:Q=[M.right,M.top+Math.floor(M.height/2),L];break;case C.CC:Q=[M.left+Math.floor(M.width/2),M.top+Math.floor(M.height/2),L];break;default:break;}if(Q){this._doAlign(L,Q[0],Q[1]);}}},_doAlign:function(M,L,P){var O=this._posNode,N;switch(M){case C.TL:N=[L,P];break;case C.TR:N=[L-O.get(E),P];break;case C.BL:N=[L,P-O.get(I)];break;case C.BR:N=[L-O.get(E),P-O.get(I)];break;case C.TC:N=[L-(O.get(E)/2),P];break;case C.BC:N=[L-(O.get(E)/2),P-O.get(I)];break;case C.LC:N=[L,P-(O.get(I)/2)];break;case C.RC:N=[(L-O.get(E)),P-(O.get(I)/2)];break;case C.CC:N=[L-(O.get(E)/2),P-(O.get(I)/2)];break;default:break;}if(N){this.move(N);}},_getRegion:function(M){var L;if(!M){L=this._posNode.get(K);}else{M=A.Node.one(M);if(M){L=M.get(G);}}return L;},align:function(M,L){this.set(D,{node:M,points:L});},centered:function(L){this.align(L,[C.CC,C.CC]);}};A.WidgetPositionAlign=C;},"@VERSION@",{requires:["widget-position"]});YUI.add("widget-stack",function(E){var N=E.Lang,T=E.UA,d=E.Node,F=E.Widget,c="zIndex",P="shim",a="visible",e="boundingBox",W="renderUI",G="bindUI",S="syncUI",Q="offsetWidth",D="offsetHeight",M="parentNode",A="firstChild",X="ownerDocument",H="width",V="height",K="px",O="shimdeferred",f="shimresize",Z="visibleChange",C="widthChange",J="heightChange",b="shimChange",B="zIndexChange",I="contentUpdate",R="stacked";function U(L){this._stackNode=this.get(e);this._stackHandles={};E.after(this._renderUIStack,this,W);E.after(this._syncUIStack,this,S);E.after(this._bindUIStack,this,G);}U.ATTRS={shim:{value:(T.ie==6)},zIndex:{value:0,setter:function(L){return this._setZIndex(L);}}};U.HTML_PARSER={zIndex:function(L){return L.getStyle(c);}};U.SHIM_CLASS_NAME=F.getClassName(P);U.STACKED_CLASS_NAME=F.getClassName(R);U.SHIM_TEMPLATE='<iframe class="'+U.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>';U.prototype={_syncUIStack:function(){this._uiSetShim(this.get(P));this._uiSetZIndex(this.get(c));},_bindUIStack:function(){this.after(b,this._afterShimChange);this.after(B,this._afterZIndexChange);},_renderUIStack:function(){this._stackNode.addClass(U.STACKED_CLASS_NAME);},_setZIndex:function(L){if(N.isString(L)){L=parseInt(L,10);}if(!N.isNumber(L)){L=0;}return L;},_afterShimChange:function(L){this._uiSetShim(L.newVal);},_afterZIndexChange:function(L){this._uiSetZIndex(L.newVal);},_uiSetZIndex:function(L){this._stackNode.setStyle(c,L);},_uiSetShim:function(L){if(L){if(this.get(a)){this._renderShim();}else{this._renderShimDeferred();}}else{this._destroyShim();}},_renderShimDeferred:function(){this._stackHandles[O]=this._stackHandles[O]||[];var Y=this._stackHandles[O],L=function(g){if(g.newVal){this._renderShim();}};Y.push(this.on(Z,L));},_addShimResizeHandlers:function(){this._stackHandles[f]=this._stackHandles[f]||[];var Y=this.sizeShim,L=this._stackHandles[f];this.sizeShim();L.push(this.after(Z,Y));L.push(this.after(C,Y));L.push(this.after(J,Y));L.push(this.after(I,Y));},_detachStackHandles:function(L){var Y=this._stackHandles[L],g;if(Y&&Y.length>0){while((g=Y.pop())){g.detach();}}},_renderShim:function(){var L=this._shimNode,Y=this._stackNode;if(!L){L=this._shimNode=this._getShimTemplate();Y.insertBefore(L,Y.get(A));if(T.ie==6){this._addShimResizeHandlers();}this._detachStackHandles(O);}},_destroyShim:function(){if(this._shimNode){this._shimNode.get(M).removeChild(this._shimNode);this._shimNode=null;this._detachStackHandles(O);this._detachStackHandles(f);}},sizeShim:function(){var Y=this._shimNode,L=this._stackNode;if(Y&&T.ie===6&&this.get(a)){Y.setStyle(H,L.get(Q)+K);Y.setStyle(V,L.get(D)+K);}},_getShimTemplate:function(){return d.create(U.SHIM_TEMPLATE,this._stackNode.get(X));}};E.WidgetStack=U;},"@VERSION@",{requires:["base-build","widget"]});YUI.add("widget-position-constrain",function(C){var F="constrain",D="constrain|xyChange",B="constrainChange",N="preventOverlap",E="align",O="",G="bindUI",I="xy",A="x",M="y",J=C.Node,P="viewportRegion",L="region",K;function H(Q){if(!this._posNode){C.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added");}C.after(this._bindUIPosConstrained,this,G);}H.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:false}};K=H._PREVENT_OVERLAP={x:{"tltr":1,"blbr":1,"brbl":1,"trtl":1},y:{"trbr":1,"tlbl":1,"bltl":1,"brtr":1}};H.prototype={getConstrainedXY:function(T,S){S=S||this.get(F);var R=this._getRegion((S===true)?null:S),Q=this._posNode.get(L);return[this._constrain(T[0],A,Q,R),this._constrain(T[1],M,Q,R)];},constrain:function(U,R){var T,Q,S=R||this.get(F);if(S){T=U||this.get(I);Q=this.getConstrainedXY(T,S);if(Q[0]!==T[0]||Q[1]!==T[1]){this.set(I,Q,{constrained:true});}}},_setConstrain:function(Q){return(Q===true)?Q:J.one(Q);},_constrain:function(Q,R,Y,S){if(S){if(this.get(N)){Q=this._preventOverlap(Q,R,Y,S);}var V=(R==A),X=(V)?S.width:S.height,U=(V)?Y.width:Y.height,T=(V)?S.left:S.top,W=(V)?S.right-U:S.bottom-U;if(Q<T||Q>W){if(U<X){if(Q<T){Q=T;}else{if(Q>W){Q=W;}}}else{Q=T;}}}return Q;},_preventOverlap:function(R,S,b,T){var W=this.get(E),a=(S===A),Y,V,U,X,Z,Q;if(W&&W.points&&K[S][W.points.join(O)]){V=this._getRegion(W.node);if(V){Y=(a)?b.width:b.height;U=(a)?V.left:V.top;X=(a)?V.right:V.bottom;Z=(a)?V.left-T.left:V.top-T.top;Q=(a)?T.right-V.right:T.bottom-V.bottom;}if(R>U){if(Q<Y&&Z>Y){R=U-Y;}}else{if(Z<Y&&Q>Y){R=X;}}}return R;},_bindUIPosConstrained:function(){this.after(B,this._afterConstrainChange);this._enableConstraints(this.get(F));},_afterConstrainChange:function(Q){this._enableConstraints(Q.newVal);},_enableConstraints:function(Q){if(Q){this.constrain();this._cxyHandle=this._cxyHandle||this.on(D,this._constrainOnXYChange);}else{if(this._cxyHandle){this._cxyHandle.detach();this._cxyHandle=null;}}},_constrainOnXYChange:function(Q){if(!Q.constrained){Q.newVal=this.getConstrainedXY(Q.newVal);}},_getRegion:function(Q){var R;if(!Q){R=this._posNode.get(P);}else{Q=J.one(Q);if(Q){R=Q.get(L);}}return R;}};C.WidgetPositionConstrain=H;},"@VERSION@",{requires:["widget-position"]});YUI.add("overlay",function(A){A.Overlay=A.Base.create("overlay",A.Widget,[A.WidgetStdMod,A.WidgetPosition,A.WidgetStack,A.WidgetPositionAlign,A.WidgetPositionConstrain]);},"@VERSION@",{requires:["widget","widget-stdmod","widget-position","widget-stack","widget-position-align","widget-position-constrain"]});YUI.add("comms-ui-dialog-base",function(G){var E=G.Node,C=E.one,F,D;function A(H){var I=H.get("id");if(!I){I=G.stamp(H);H.set("id",I);}return I;}function B(Q){Q=Q||{};Q.visible=Q.visible||0;Q.zIndex=Q.zIndex||4000;var P=this,T=Q.contentBox||null,U=Q.template||null,J=Q.cssPrefix||null,H=Q.focusedNode||null,L=Q.clearMask||false,S=Q.hideMask||false,R=Q.restoreFocusNode,I=Q.suppressRestoreFocus||false,K=Q.suppressActive,N=Q.maskId||null,M=Q.noScroll||false,O=Q.disableEsc||false;this._evt=[];if(!T&&U){P.CONTENT_TEMPLATE=U;}B.superclass.constructor.apply(this,arguments);if(!D&&K){if(F){D=F;F.set("visible",false);}else{K=false;}}P.addAttrs({cssPrefix:{value:J,readOnly:true},focusedNode:{value:H},clearMask:{value:L},hideMask:{value:S},restoreFocusNode:{valueFn:function(){var V=R;if(!((V instanceof G.Node)||G.Lang.isNull(V))){V=document.activeElement;}return V;}},suppressRestoreFocus:{value:I},suppressActive:{value:K,readOnly:true},maskId:{value:N},noScroll:{value:M},disableEsc:{value:O}});}B.NAME="dialog";B.CSS_PREFIX="yui3-overlay";B.ATTRS={role:{value:"dialog"}};G.extend(B,G.Overlay,{maskEl:null,prevMaskElId:null,centerEl:null,_haltShow:false,initializer:function(){this.set("visible",false);this.on("render",this.onBeforeRender);},destructor:function(){var I,J=this.get("restoreFocusNode"),L=this.get("suppressRestoreFocus"),H=this.get("contentBox").get("id");this.get("boundingBox").purge(true);if(this.get("centered")){this.centerEl&&this.centerEl.remove(true);}else{this.get("boundingBox").remove(true);}if(this.get("noScroll")){G.one("body").setStyle("overflow","visible");}for(I in this._evt){G.detach(this._evt[I]);}if(!this._haltShow){if(D&&this.get("suppressActive")){D.set("visible",true);D=null;this.prevMaskElId&&this.maskEl&&this.maskEl.set("id",this.prevMaskElId);this.prevMaskElId=null;}else{if(this.get("maskId")){this.maskEl.remove(true);}else{this.maskEl&&this.maskEl.setStyle("display","none");}F=null;if(!L){try{if(!(G.Lang.isNull(J)||J.tagName=="IFRAME")){J.focus();}}catch(K){}}G.fire("dialog:hide",H);}}else{this._haltShow=false;}},renderUI:function(){var O=this.get("cssPrefix"),J=this.get("contentBox"),N=this.get("role"),H,M,L,I,K;J.set("role",N);if(O){H=["#"+J.get("id")," .",O].join("");L=G.one(H+"-hd");I=G.one(H+"-bd");K=G.one(H+"-ft");if(L){J.set("aria-labelledby",A(L));if((M=L.one(".close"))){M.set("role","presentation");}if(!L.hasClass("yui3-widget-hd")){L.addClass("yui3-widget-hd");}}if(I){if(N==="alertdialog"||N==="dialog"){J.set("aria-describedby",A(I));}if(!I.hasClass("yui3-widget-bd")){I.addClass("yui3-widget-bd");}}if(K){if(!K.hasClass("yui3-widget-ft")){K.addClass("yui3-widget-ft");}}}J.setStyle("display","block");J.set("tabIndex",0);J.all(".btn a").each(function(Q,P){Q.set("role","button");});},show:function(){if(!F){B.superclass.show.call(this);!this.get("suppressActive")&&G.fire("dialog:show",this);if(this.get("noScroll")){G.one("body").setStyle("overflow","hidden");}}else{this._haltShow=true;this.destroy();}},bindUI:function(){var M=G.all(".yui3-overlay-content .btn a"),H=M.size()-1,K=G.one(".yui3-overlay-content"),N=this.get("focusedNode"),J;if(this.get("centered")){this.after("renderedChange",this.center);}this._evt.push(this.after("visibleChange",function(){var P={display:"none"},O=this.get("contentBox");if(this.get("visible")){O&&O.setStyle("display","block");P.display=this.get("hideMask")?"none":"block";F=this;}else{O&&O.setStyle("display","none");F=null;}this.maskEl&&this.maskEl.setStyles(P);if(F){L(true);}}));function L(P){if(!F){return;}if(!(N instanceof G.Node)){P&&G.UA.gecko&&K.focus();N=K.one(N);}try{if(N){N.focus();}else{K.focus();}}catch(O){}}this._evt.push(K.on("blur",function(){J=true;}));this._evt.push(K.on("focus",function(P){var O="#"+K.get("id");if(J&&!P.target.ancestor(O,true)){L();}J=false;}));function I(Q){var O,P=Q.target;switch(Q.keyCode){case 8:case 46:return;break;case 9:if(H>-1){if(Q.shiftKey){if(K==P){Q.halt();M.item(H).focus();}}else{if(M.item(H)==P){Q.halt();K.focus();}}}break;case 27:if(!this.get("disableEsc")){this.fire("dialog:action",{dataAction:"cancel"});Q.preventDefault();}break;case 32:if(P.getAttribute("role")=="button"){Q.preventDefault();G.use("node-event-simulate",function(){P.simulate("click");});}break;case 37:case 39:if((H>0)&&(O=M.indexOf(P))>-1){if(Q.keyCode==37){M.item((O==0)?H:O-1).focus();}else{M.item((O==H)?0:O+1).focus();}}break;}Q.stopPropagation();}K.on("keydown",I,this);},onBeforeRender:function(N){var O=this.get("zIndex"),H=this.get("hideMask"),K=this.get("clearMask"),P=this.getClassName((K?"clearmask":"mask")),I="position:fixed;top:50%;left:50%;height:1px;",J,L=this.get("maskId"),M,Q;if(L){this.maskEl=C("#"+L);}if(!this.maskEl){if(!L){L=G.guid();}if(!(this.maskEl=G.one("."+P))&&!H){M=['<DIV id="',L,'" class="',P,'" style="z-index:',(O-2),'"></DIV>'].join(""),C("body").prepend(M);this.maskEl=C("#"+L);}else{if(this.maskEl){this.prevMaskElId=this.maskEl.get("id");this.maskEl.set("id",L);this.maskEl.setStyle("zIndex",O-2);}}}if(this.get("centered")){J=G.guid();Q=['<DIV id="',J,'" style="',I,"z-index:",(O-1),'"></DIV>'].join("");C("body").prepend(Q);this.centerEl=G.one("#"+J);N.parentNode=this.centerEl;this.get("boundingBox").setStyle("position","relative");}},center:function(){var I,J,H=this.get("boundingBox");I=-(H.get("offsetWidth")/2)+"px";J=-(H.get("offsetHeight")/2)+"px";H.setStyles({"marginLeft":I,"top":J,"left":0});}});G.namespace("comms.ui");G.comms.ui.Dialog=B;},"0.0.1",{requires:["overlay"]});YUI.add("_shared_module_offscreen_bin_modal_close_icon",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal_close_icon={base:'<span class="close" data-action="cancel" title="{{str_btn_close}}"></span>'};},"1.0.0");YUI.add("_shared_module_offscreen_bin_modal",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal={base:'<div id="modalOverlay" class="modal {{modal_classes}}"> <h2 class="modal-hd"> {{modal_header}} {{_shared_module_offscreen_bin_modal_close_icon}} </h2> <div class="frontpanel"> <div class="modal-bd">{{modal_body}}</div> <div class="modal-ft">{{modal_ft}}</div> </div> {{modal_back_panel}}</div>',modal_back_panel:'<div class="backpanel back hidden"> <div class="modal-bd">{{modal_body_back}}</div> <div class="modal-ft">{{modal_ft_back}}</div> </div> '};},"1.0.0",{requires:["_shared_module_offscreen_bin_modal_close_icon"]});YUI.add("_shared_module_offscreen_bin_modal_btn_ok",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal_btn_ok={base:'<span id="okayModalOverlay" class="btn left right default"><a href="#" data-action="ok">{{str_ok}}</a></span> '};},"1.0.0");YUI.add("common-ui-dialog-helper",function(C){var A=C.common.Utils.substitute,B=C.ui.Templates,D="alertdialog";C.namespace("common.ui");C.common.ui.DialogHelper=new function(){var G={modal_header:function(L){return L.hd;},modal_body:function(L){return L.bd;},modal_ft:function(L){return A(L.ft,0,0,0,strings);},_shared_module_offscreen_bin_modal_btn_ok:function(L){return L.ok;},_shared_module_offscreen_bin_modal_btn_cancel:function(L){return L.cancel;},_shared_module_offscreen_bin_modal_close_icon:function(L){return(L.hideClose)?"":A(B._shared_module_offscreen_bin_modal_close_icon.base,0,0,0,strings);},global_path_img:function(){return NeoConfig.globalPathImg+"/u/assets/img";},antivirus_logo_path_img:function(){return NeoConfig.avLogoUrl;}};function K(M,N,L){M.ft=B._shared_module_offscreen_bin_modal_btn_ok.base||"";M.role=D;if(N&&N.ok&&N.ok.text){M.ft=A(M.ft,0,0,0,{str_ok:N.ok.text});}E(M,N,L);}function J(M,N,L){C.use("_shared_module_offscreen_bin_modal_btn_cancel",function(){var O={cancel:B._shared_module_offscreen_bin_modal_btn_cancel.base};M.ft=A(B._shared_module_offscreen_bin_modal_btn_cancel.base,O,G,0,strings);M.focusedNode='.modal-ft [data-action="cancel"]';M.role=D;E(M,N,L);});}function F(M,N,L){C.use("_shared_module_offscreen_bin_modal_btns_ok_cancel",function(){var O={ok:B._shared_module_offscreen_bin_modal_btn_ok.base,cancel:B._shared_module_offscreen_bin_modal_btn_cancel.base};if(N&&N.ok&&N.ok.text){O.ok=A(O.ok,0,0,0,{str_ok:N.ok.text});}M.ft=A(B._shared_module_offscreen_bin_modal_btns_ok_cancel.base,O,G,0,strings);M.role=D;E(M,N,L);});}function I(M,N,L){M.ft=A(M.ft,0,G,0,strings);E(M,N,L);}function E(M,N,L){M=M||{};if(!M.template){var P=M.rawTemplate||B._shared_module_offscreen_bin_modal.base;M.template=A(P,M,G,0,strings);}M.centered=true;M.cssPrefix="modal";M.focusedNode=M.focusedNode||".yui3-widget-ft span.default a";function O(Q){Q.get("contentBox").set("aria-live","polite");Q.show();if(L){L(Q);}}H(M,N,O);}function H(M,O,L){var N=new C.comms.ui.Dialog(M);O=O||{};N.render();N.get("contentBox").on("click",function(R){var S=C.common.Utils.getDataAction(R),Q=S.action,P=S.node;if(Q){if(!M.allowDefault){R.preventDefault();}if(NeoConfig.intl==="jp"){N.set("adAction",(Q=="ok"?"disableRetriggerOnOk":"disableRetriggerOnHide"));}N.fire("dialog:action",{dataAction:Q,item:P});}});N.after("dialog:action",function(S){var Q=S.dataAction,P;if(Q){P=O[Q];try{if(!P||!P.stopDestroy){N.destroy();}P&&P.handler&&P.handler.call(this,S,N);}catch(R){}}});if(L){L(N);}}C.mix(this,{alert:K,cancelDialog:J,confirm:F,create:H,custom:I,createCommon:E});};},"1.0.0",{requires:["common-utils","modal_css","comms-ui-dialog-base","_shared_module_offscreen_bin_modal","_shared_module_offscreen_bin_modal_btn_ok"]});YUI.add("mail-errormap",function(C){C.namespace("mail.Errormap");var R=C.common.Utils,M=C.Lang,I=C.common.net.Error,Q=R.substitute,J="_{{method}}",B="_{{status}}",P=J+B,S="{{subcode}}",L={"ComposeError":[14,"ComposeError"],"ComposeErrorMessage":[14,"ComposeError"],"ComposeErrorServiceError":[14,"ComposeError"],"ComposeErrorUnknown":[14,"ComposeError"],"ComposeErrorAttachment":[14,"ComposeAttachFailed"],"ComposeErrorBadMIME":[14,"BadMime"],"ComposeErrorBadRecipient":[0,"BadRecipient"],"ComposeErrorBadFrom":[0,"BadFrom"],"ExceededMaxTo":[0,"MaxToAddressesExceeded"],"ExceededMaxCc":[0,"MaxCCAddressesExceeded"],"ExceededMaxBcc":[0,"MaxBCCAddressesExceeded"],"ExceededMaxRecipients":[0,"MaxTotalAddressesExceeded"],"ExceededMaxHourlyMessages":[0,"HourlyLimitExceeded"],"ExceededMaxDailyMessages":[0,"DailyLimitExceeded"],"InvalidFromAddress":[0,"BadFrom"],"InvalidRecipientAddress":[0,"BadRecipient"],"NicknameExpansionFailed":[0,"NicknameExpansionFailed"],"EmptyFolderFailed":[14,"EmptyFolderFailed"],"FolderEmptyFailed":[14,"EmptyFolderFailed"],"FolderCreateFailed":[14,"FolderCreateFailed"],"FolderFetchFailed":[14,"FolderFetchFailed"],"FolderIdDoesntExist":[14,"FolderIdDoesntExist"],"FolderIdIsSystemFolder":[0,"FolderIdIsSystemFolder"],"FolderListFetchFailed":[2,"FolderListFetchFailed"],"FolderNameExists":[0,"FolderAlreadyExists"],"FolderNameNotAllowed":[0,"folder_name_is_reserved"],"FolderNameIllegalCharacter":[0,"FolderNameIllegalCharacter"],"FolderNameIllegalCharset":[14,"FolderNameIllegalCharacter"],"FolderNameTooLong":[0,"folder_name_too_long"],"FolderRemoveFailed":[14,"FolderRemoveFailed"],"FolderRenameFailed":[14,"FolderRenameFailed"],"GetMessageFailed":[6,"GetMessageFailed"],"BadCharset":[6,"download_message_viewing_error"],"HumanVerificationRequired":[0,"HumanVerificationRequired"],"AccountVerificationRequired":[0,"AccountVerificationRequired"],"CannotSendThisMessage":[14,"CannotSendThisMessage"],"InputTooEarly":[14,"HumanVerificationFailed"],"InvalidYID":[14,"HumanVerificationFailed"],"MaxAttempts":[12,"HumanVerificationFailed"],"TimedOut":[14,"HumanVerificationFailed"],"WrongInput":[14,"HumanVerificationFailed"],"WrongUser":[14,"HumanVerificationFailed"],"ListMessagesFailed":[2,"ListMessagesFailed"],"MailboxOpenFailed.Busy":[5,"MailboxBusy"],"MailboxOpenFailed":[2,"MailboxOpenFailed"],"MessageDeleteFailed":[2,"MessageDeleteFailed"],"MessageFetchFailed":[4,"MessageFetchFailed"],"MessageIdsNotFound":[4,"MessageIdsNotFound"],"MessageNotFound":[4,"MessageNotFound"],"MessageSaveFailed":[2,"MessageSaveFailed"],"MessageSelectionNotFound":[4,"MessageSelectionNotFound"],"MissingApplicationID":[14,"MissingApplicationID"],"MissingCredentials":[14,"MissingCredentials",null,[]],"NoRecipientsSpecified":[0,"MissingRecipients"],"NoSenderSpecified":[0,"NoSenderSpecified"],"ResetSpamFilterFailed":[2,"ResetSpamFilterFailed"],"SaveMessageFailed":[2,"SaveMessageFailed"],"SendMessageFailed":[14,"SendMessageFailed"],"MetaDataFetchFailed":[2,"ServerError"],"MetaDataSaveFailed":[2,"ServerError"],"UserOpenFailed":[1,"ServerError"],"ServerError":[14,"ServerError"],"SetUserDataFailed":[1,"SetUserDataFailed"],"SpamReportingFailed":[14,"SpamReportingFailed"],"SpamTrainingFailed":[14,"SpamTrainingFailed"],"TooManyCallsBatched":[14,"TooManyCallsBatched"],"TooManyFolders":[0,"TooManyFolders"],"TooManyMessagesRequested":[14,"TooManyMessagesRequested"],"UserOverQuota":[19,strings["str_cfg_tog_hasUnlimitedStorage"]?"UserTempSuspended":"UserOverQuota"],"UserAbuseDetected":[19,"UserTempSuspended"],"UserPreferenceFetchFailed":[2,"UserPreferenceFetchFailed"],"UserSuspended":[19,"UserSuspended"],"MessageTooLarge":[0,"MessageToLarge"],"ParentalControlsNoAttachments":[0,"ypcUploadDisallowed"],"ExceededAttachmentLimit":[0,"uploadNumFiles"],"SendMessageAttachmentFailed":[14,"SendAttachmentFailed"],"MessageTooLargeSomeRecipients":[0,"MessageTooLargeForSomeRecipients"],"SendMessageFailedSomeRecipients":[14,"SendMessageFailedForSomeRecipients"],"UserDataFetchFailed":[1,"UserDataFetchFailed"],"FarmNameNotFound":[1,"FarmNameNotFound"],"GetMessageInvalidId":[4,"GetMessageInvalidId"],"GetDisplayMessageFailed":[6,"GetDisplayMessageFailed"],"GetPartContentFailed":[6,"GetDisplayMessageFailed"],"ComposeFailed":[14,"ComposeFailed"],"MetaDataMissingPath":[2,"MetaDataMissingPath"],"SetMetaData":[2,"BadRequest"],"MoveMessagesInvalidId":[4,"MoveMessagesInvalidId"],"MetaDataTooLarge":[2,"ServerError"],"InputInvalid":[8,"ServerError"],"InvalidRequest":[8,"BadRequest",null,["UE_ALERT_TAE8_{{code}}_{{method}}","UE_ALERT_TAE8_{{code}}_{{method}}_{{message}}"]],"SearchProgramFailed":[20,"error_searching_messages"],"ListMessagesFailed.SearchMessages":[2,"error_searching_messages"],"FeatureUnavailable":[11,"INTERNAL MESSAGE:\nThe underlying version of Cascade on this box doesn't support the API that was requested\nMethod : \n","ServerErrorFeatureUnavailable"+J],"999":[19],"BatchItemError":[],"OperationNotAllowedCurrently":[24,"OperationNotAllowedCurrently"],"ServiceTemporarilyUnavailable":[21]},D={"999":[19],"2":[18,"Offline","OfflineTitle",["E_HTTP"+B,"E_HTTP"+P]],"conn":[18,"Connect",null,["E_HTTPConnect","E_HTTPConnect"+P]],"Malformed-unk":[14,null,null,["E_RespParseUnk","E_RespParse"+P]],"Malformed-mail":[14,null,null,["E_RespParseMail","E_RespParse"+P]],"HTMLResponse-unk":[14,null,null,["E_RespHTMLUnk","E_RespHTML"+S+P]],"HTMLResponse-mail":[14,null,null,["E_RespHTMLMail","E_RespHTML"+S+P]],"NoResponse-unk":[14,null,null,["E_RespEmptyUnk","E_RespEmpty"+P]],"NoResponse-mail":[14,null,null,["E_RespEmptyMail","E_RespEmpty"+P]],"MalformedFault":[14,null,null,["E_RespFault","E_RespFault"+J]],"timeout":[18,"Timeout",null,["E_Timeout"+J]],"invalidwssid":[14,null,null,["E_InvalidWssid"]],"loginfail":[14]};function K(Y,W,T,b,U){var X,Z=Y.detail,d,c,V="E_ServerBatch_"+U.join("_"),a=F(Y,W,T,true,U);R.assert(Z);if(W==200){for(X=0;X<Z.length;X++){d=Z[X];c=d.detail.idx;a=a.concat(F(d,W,U[c],b));a.push([V,c,d.code].join("_"));}}return a;}function F(e,k,Z,U,h){function a(q){var o,p,r,s=e.message||"";
if(q){o=[];r={code:V,method:Z,status:k,subcode:e.subcode,message:s.replace(/\s/g,"").replace(/\./g,"")};for(p=0;p<q.length;p++){o[p]=Q(q[p],r,null,null,strings);}}return o;}var V=e.code,d,j,n,W,g,b,Y,c,l,m,f=Z+(h?"_"+h.join("_"):"");V=/^[^-]+/.exec(V);V=V&&V[0];g=I.isHttp(V);b=!g&&N(e,null,L);Y=!b&&N(e,null,D);c=b||Y;l=a(c&&c[3])||[];if(k==500){n="E_Server500_"+f;l.push(n,n+"_"+V);}if(!c){if(g){n="E_HTTP";l.push(n,n+"_"+k,[n,f,k].join("_"));}else{n="E_ServerUnknown_"+f;l.push(n,n+"_"+V);}}if(!U){W=c&&c[0];W=W!==undefined?W:(g?18:14);n="UE_ALERT_TAE"+W;l.push(n,n+"_"+(g?k:V));if(W==4){function i(o){if(o!="Inbox"&&o!="Sent"&&o!="Draft"&&o!="Trash"&&o!="%40S%40Search"&&o!="%40B%40Bulk"&&o!="%40C%40Chats"&&o!="@S@Search"&&o!="@B@Bulk"&&o!="@C@Chats"){return"userfid";}return o;}var T,X;if(e.detail&&e.detail.request&&(m=e.detail.request.postdata)){if(f=="MoveMessages"){j=m.match(/"sourceFid":"(.*?)"/);j=(j&&j[1])||"?";d=m.match(/"destinationFid":"(.*?)"/);d=(d&&d[1])||"?";T=i(j)+"-"+i(d);}else{T=m.match(/"fid":"(.*?)"/);if(T&&T[1]){T=i(T[1]);}else{T="?";}}}else{T="?";}l.push(n+"_"+(g?k:V)+"_"+f+"_"+T);}}l.push("E_"+f,"E_"+f+"_"+(g?k:V));return l;}function O(U){var T=U&&(U.match(/Client\.([\w\W]+)$/)||U.match(/Server\.([\w\W]+)$/));return(T&&T[1])||U;}function G(U){var V,T=new RegExp(I.base+"([\\w\\W]+)$");return((V=U.match(T))&&V[1])||U;}function E(V,U,T){return U&&(M.isNumber(T)?V[U]&&V[U][T]:V[U]);}function N(Y,a,Z){var X,W=Y.code,U,V,b,T=I.isHttp(W);V=(Z&&[Z])||(T?[D]:[L,D]);U=T?G(W):O(W);for(X=0;X<V.length;X++){if((b=E(V[X],U,a))!==undefined){return b;}}}function H(T){return T.code=="BatchItemError"&&T.detail;}function A(X){var V,W="",T,Y,U;if(U=H(X.fault)){V=[];for(T=0;T<U.length;T++){W=A({fault:U[T]},1);W&&V.push(W);}W=V.join("; ");}else{Y=N(X.fault,1);W=Y&&strings["str_error_"+Y];}return W;}C.mix(C.mail.Errormap,{getTAE:function(W){var V,T,U=W.fault;U=((V=H(U))&&V[0])||U;return((T=N(U,0))!==undefined)?T:(I.isHttp(U.code)?18:14);},getMessage:A,getTitle:function(V){var U,W,T=V.fault;T=((U=H(T))&&U[0])||T;W=N(T,2);return W&&strings["str_error_"+W];},getStats:function(W,U){var T=W.fault,V=H(T)?K:F;return V(T,W.status,W.callback.method,U,W.callback.batchop);},getTAEStats:function(T,U){var V=["UE_ALERT_TAE"+T];U&&V.push(V[0]+"_"+U);return V;}});},"1.0.0",{requires:["json-stringify","common-net-error"]});YUI.add("_shared_module_offscreen_bin_modal_launch_error_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_modal_launch_error_rollup={base:'<p>{{str_rough_errlaunch_message}}</p><ul> <li><a href="{{link_goto_latest}}" class="more">{{str_rough_try_again_now}}</a></li> <li><a href="{{link_goto_tae_help}}" class="more" target="_blank">{{str_rough_visit_help_page}}</a></li> </ul> <br/><span>{{str_rough_errlaunch_troubleshoot}}</span>'};},"1.0.0");YUI.add("mail-error",function(C){C.namespace("mail.Error");var J=C.common.net.Error,L=C.common.Utils,B=C.mail.Errormap,H=L.rocketstats,G=C.JSON.stringify;function F(Q,O){function W(){var Y=U.detail,Z,a="";for(Z=0;Z<Y.length;Z++){a+=" "+[R[Y[Z].detail.idx],Y[Z].code].join(":");}return a;}function S(){var a,Y,Z=Q.request;if(/SaveMessage/.test(N)||/SendMessage/.test(N)){Y=Z.postdata;Z.postdata="<filtered>";a=G(Z);Z.postdata=Y;}return a||G(Z);}var U=O.fault,P=U.code,V=O.callback,R=V.batchop,T=P=="BatchItemError",N=V.method+(R?" ["+R.join(";")+"]":""),X={method:N,fault:T?W():P,tae:B.getTAE(O),message:B.getMessage(O)||U.message||"",request:S(),http:[O.status,O.statusText].join(" "),headers:O.allHeadersText||"",response:O.responseText||"",duration:Q.end?(Q.end-Q.start):"X",yid:NeoConfig.loginId||""};return X;}function E(Q){var P,N;if(strings["str_tog_TAESupported"]){N=strings["str_cfg_url_TAEHelpPages"]+"mltamtae"+Q.tae+".html";}else{N=strings["str_cfg_url_contact_customer_care"];}P={link_goto_latest:"launch?reason=ignore&rs=1",launch_error_code:Q.tae,link_goto_tae_help:N};var O=L.substitute(C.ui.Templates._shared_module_offscreen_bin_modal_launch_error_rollup.base,P,null,null,strings);J.show(null,O,strings["str_error_MailErrorTitle"],{modal_classes:"lg"});}function D(N){var O,P;if(N){P=N.length||0;for(O=0;O<P;O++){H.stat("mailnet",N[O]);}}return N;}function I(S,Q,P,O){function R(T){try{S.stats=T;S.detail=Q.fault.message||"";L.netError(G(S));}catch(U){}}var N=!P&&B.getStats(Q,O);D(N);R(N);}function M(N,O){N&&D(B.getTAEStats(N,O));}function A(g,T,U){function X(e){return(N.search(e)!==-1)||((Y+"")==e);}L.assert(U.fault);try{var R=U.fault,Y=U.status,N=R.code,a=N=="BatchItemError",Q,Z,f=U.callback||{},O=f.method,W=F(T,U),P=/xhrsend/.test(N),b,V=[401],S;if(a){R=R.detail[0];N=R.code;}b=J.suppress(f.suppressCodes,V.concat(f.exceptCodes||[]),X),S=J.suppress(f.suppressLogs,f.exceptLogs,X);function c(e,i,h){g.callDefault(e,i,h);}L.assert(f.service=="mail");if(Y==500||a){if(/SessionIdReissue/.test(N)){c(402);}else{if(/Credentials/.test(N)){c(401,{stat:N+"_"+O});}else{if(/ClientRedirect/.test(N)){Q=L.substitute(strings["str_error_reload_account_migrated"],null,null,strings);if(/HostCorrection/.test(N)){c(401,{msg:Q,url:"http://mail.yahoo.com",stat:N+"_"+O});}else{c(310,{msg:Q,stat:N+"_"+O});}}else{if(/999/.test(N)){c(999,R.detail&&R.detail.token);}else{if(!b){E(W);}}}}}}else{if(!b){Z={};Z.message=W.message;Z.title=B.getTitle(U);c(null,Z,P);}}if(!g.retry){I(W,U,P||S,b);}}catch(d){L.assert(0,"mail:controller:error - "+d.message);}if(!g.isdone()){g.done();}}function K(P){var N,O="";H.stat("mailnet","FetchExternalAccount"+status);L.netError("FetchExternalAccount Error"+G(P));for(N=0;N<P.length;N++){O+=L.substitute(strings["str_error_extFetch_"+P[N].status],P[N]);O+="<br/><br/>";}J.showConfirm(function(){C.fire("openOptions",C.mix(this,{params:{section:"accounts"}}));},0,O);}C.mix(C.mail.Error,{handle:A,extFetchError:K,_showTae:E,statTAE:M});},"1.0.0",{requires:["common-net-error","mail-errormap","rocket-stats","json-stringify","_shared_module_offscreen_bin_modal_launch_error_rollup"]});