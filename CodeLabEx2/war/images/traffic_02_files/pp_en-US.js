YUI.add("comms-ui-nodefocus-base",function(A){function B(C){B.superclass.constructor.apply(this,arguments);}A.extend(B,A.Plugin.Base,{initializer:function(D){var E=this,F,I,K,H=E.get("host"),C=A.comms.ui,J=C.NodeFocus;if(J){H.plug(J,D);}else{K=[D.keys.next,D.keys.previous];function G(L){F.detach();I.detach();A.use("comms-ui-nodefocus",function(){H.unplug(C.NodeFocusBase);H.plug(C.NodeFocus,D);H.nodeFocus.onKeyDown(L);});}F=A.on("key",G,H,"down:"+K.join(","),E);I=A.on("nodeFocus:load",G,E);}}});B.NAME="NodeFocusBase";B.NS="nodeFocusBase";A.on("keydown",function(C){C.keyCode==9&&A.fire("nodeFocus:load",C);});A.namespace("comms.ui").NodeFocusBase=B;},"1.0.0",{requires:["plugin","node","event-key"]});
YUI.add("comms-ui-nodefocus",function(F){var A="host",C="key",D="tabIndex",B="activeDescendant";function E(G){E.superclass.constructor.apply(this,arguments);}E.ATTRS={keys:{value:{next:null,previous:null}},activeDescendant:{},descendants:{value:null,getter:function(){return this._descendants;}}};F.extend(E,F.Plugin.Base,{_descendants:null,_descendantsCss:"",_circular:false,_evt:[],initializer:function(H){var I=this,G=I.get(A);if(G){G.set(D,-1);I._descendantsCss=H.descendants;I._circular=H.circular;I.refresh();I.bindUI();}},destructor:function(){var G=this._evt;if(G){F.Array.each(G,function(H){H.detach();});this._evt=null;}},refresh:function(){var K=this,G=K.get(A),I,J=[],H=G.all(K._descendantsCss);H.each(function(N,L){var M=N.getStyle("display")!=="none"&&!N.hasClass("disabled")&&!N.hasClass("hidden");if((!I&&M&&N.get(D)===0)||(document.activeElement==F.Node.getDOMNode(N))){I=1;K.set(B,L);}else{N.set(D,-1);}if(M){J.push(N);}});K._descendants=J;if(!I){K.set(B,0);K._descendants[0]&&K._descendants[0].set(D,0);}},bindUI:function(){var I=this,G=I.get(A),H=[I.get("keys.next"),prevKey=I.get("keys.previous")];if(G){I._evt.push(F.on(C,I.onKeyDown,G,"down:"+H.join(","),I));I._evt.push(G.on("click",function(L){var K=L.target,N=I._descendants,M=I.get(B),J=M;if(K.test(I._descendantsCss)){F.Array.each(N,function(P,O){if(P==K){M=O;}});I.changeActive(J,M);}}));I._evt.push(G.on("refresh",I.refresh,I));}},onKeyDown:function(J){var I=this,M=I.get(B),O=M,G=I._circular,H=I._descendants,K=H.length-1,L=I.get("keys.next"),N=I.get("keys.previous");if(J.keyCode==L){M=(G&&O==K)?0:O+1;if(M>K){M=K;}}else{if(J.keyCode==N){M=(G&&O<=0)?K:O-1;if(M<=0){M=0;}}}if(M!=O){I.changeActive(O,M);H[M]&&H[M].focus();}J.halt();},changeActive:function(G,I){var K=this,J=K._descendants,H=J[G];H&&H.set(D,-1);H=J[I];H&&H.set(D,0);K.set(B,I);}});E.NAME="NodeFocus";E.NS="nodeFocus";F.namespace("comms.ui").NodeFocus=E;},"1.0.0",{requires:["plugin","node","event-key"]});
YUI.add("pp-album",function(C){C.namespace("PhotoPreview");var M=C.PhotoPreview,D=C.Array,N=C.Lang,J=C.Object,S=M.CONFIG.fetchImageMetadata,R=null,T=undefined,I=M.range,Q=M.Wait,K=function(A,O,V){var L=A,U=L._itemCallbacks[V];if(U){delete L._itemCallbacks[V];D.each(U,function(W){if(O===R){}else{if(!O){}}W(O);});}},P=function(O,A,V,U){var Y=O,W=Y._itemCache,L=J.keys(U),Z=D.filter(I(A,A+V),function(a){return !(a in U);}),X;J.each(U,function(a,b){if(!(b in W)||W[b]===T||W[b]===R){W[b]=a;}});D.each(L,function(b){var a=W[b];C.later(0,null,K,[O,a,b]);});if(Z.length>0){D.each(Z,function(b){var a=W[b];if(b in W&&a===T){W[b]=R;}else{}C.later(0,null,K,[O,R,b]);});X=D.filter(J.keys(W),function(a){return W[a];});Y._size=X.length>0?parseInt(Math.max.apply(null,X),10)+1:0;}},F=function(A,O){var L=A;D.each(O,function(U){delete L._itemCache[U];C.later(0,null,K,[A,R,U]);});},G=function(A){return D.reduce(J.keys(A),{nphotos:0,nvideos:0,errorOffsets:[],pendingOffsets:[]},function(L,U){var O=A[U];if(O){if(O.getItemVideo()){L.nvideos++;}else{L.nphotos++;}return L;}if(O===R){L.errorOffsets.push(U);return L;}if(O===T){L.pendingOffsets.push(U);return L;}return L;});},H=function(A,O,V){var L=A,U;L._nphotos=O.nphotos;L._nvideos=O.nvideos;U=L.getCachedCounts();if(N.isFunction(V)){V(U);}},E=function(L,U){var O=L,A=O.getApiClient();if(N.isFunction(A.getCounts)){A.getCounts(O.getApiId(),O.getDeclaredSize(),function(V){H(O,V,U);},function(){if(N.isFunction(U)){U(null);}});}else{if(N.isFunction(U)){U(null);}}},B=function(U,W,O,b,c,X,f,a,d,L,Z,A,Y,V){var e=this;e._apiClient=U;e._apiId=W;e._id=O;e._viewUrl=b;e._title=c||null;e._declaredSize=X;e._size=N.isNumber(f)?f:X;e._itemCache=a||{};e._itemCallbacks={};e._reportAbuseURL=d;e._owner=L||null;e._nphotos=N.isUndefined(Z)?e._size:Z;e._nvideos=N.isUndefined(A)?0:A;e._uploader=Y;e._subset=V;};C.mix(B.prototype,{getApiClient:function(){return this._apiClient;},getApiId:function(){return this._apiId;},getId:function(){return this._id;},getViewUrl:function(){return this._viewUrl;},getTitle:function(){return this._title;},getDeclaredSize:function(){return this._declaredSize;},getSize:function(){return this._size;},getVideoSize:function(){return this._nvideos;},getPhotoSize:function(){return this._nphotos;},getUploader:function(){return this._uploader;},getItemCache:function(){return this._itemCache;},getReportAbuseURL:function(){return this._reportAbuseURL;},getItem:function(Y,V){var e=this,f=e.getSize(),L=e.getItemCache(),n=L[Y],k=e._itemCallbacks,U,m,O,b,p,W,Z,c,j,A,d,l,X,a,o,h,g;if(!n&&Y in L){if(n===R){if(N.isFunction(V)){V(n);}return;}if(n===T){if(N.isFunction(V)){k[Y].push(V);}return;}if(N.isFunction(V)){V(n);}return;}if(n){if(N.isFunction(V)){V(n);}Y=Math.min(Y,f);O=Math.min(Y+S,f);U=D.find(I(Y,O),function(i){return !(i in L);});if(U===null){return;}}else{U=Math.min(Y,f);}O=Math.min(U+S,f);m=O-U;b=e.getViewUrl();p=b?[b,": "].join(""):"";W=[p,"offset=",Y," albumSize=",e.getSize()," declaredSize=",e.getDeclaredSize()," start=",U," end=",O].join("");if(!m){if(N.isFunction(V)){V(R);}return;}Z=I(U,O);D.each(Z,function(i){L[i]=T;if(!(i in k)){k[i]=[];}});if(!n){if(N.isFunction(V)){k[Y].push(V);}}d=e.getSubset();if(d){X=J.keys(d);o=X.length;for(l=0;l<o;l++){if((U>=X[l])&&(U<X[l+1]||N.isUndefined(X[l+1]))){a=parseInt(X[l],10);break;}}A=d[a];h=U-a;g=a+A.getSize();if((U+m)>=g){m=g-U;}c=A.getApiId();U=h;}else{c=e.getApiId();}j=e.getId();e.getApiClient().getItems(c,j,U,m,function(q){var i={};if(A){for(var r in q){if(r){i[r*1+a]=q[r];}}q=i;}P(e,U,m,q);},function(){F(e,Z);});},getSubset:function(){return this._subset;},getCachedOwner:function(){var A=this;return A._owner;},getOwner:function(U){var L=this,A,O;if(L._owner){if(N.isFunction(U)){U(L._owner);}}else{O=L.getSubset();if(O){L.getApiClient().getOwners(O,L,function(V){L._owner=null;if(N.isFunction(U)){U(V);}},function(){if(N.isFunction(U)){U(null);}});}else{L.getApiClient().getOwner(L.getApiId(),L,function(V){L._owner=V;if(N.isFunction(U)){U(V);}},function(){if(N.isFunction(U)){U(null);}});}}},getCachedCounts:function(){var L=this,A=L._nphotos,O=L._nvideos;if(N.isNumber(A)&&N.isNumber(O)){return{nphotos:A,nvideos:O};}return null;},getCounts:function(Y,V){var a=this,Z=a.getCachedCounts(),U,O,X,L,W,A;if(Z){if(N.isFunction(Y)){Y(Z);}return;}U=a.getItemCache();if(a.getSize()!==J.size(U)){E(a,Y);return;}O=G(U);if(O.errorOffsets.length){E(a,Y);return;}X=O.pendingOffsets;if(!X.length){H(a,{nphotos:O.nphotos,nvideos:O.nvideos},Y);return;}if(V){E(a,Y);return;}L=new Q("getCounts",function(b){a.getCounts(Y,true);});W=D.map(X,function(b){return L.createCondition("offset"+b);});A=a._itemCallbacks;D.each(X,function(b){A[b].push(function(c){if(c){W[b].success();}else{W[b].failure();}});});}},true);B.PENDING_ITEM=T;B.ERROR_ITEM=R;M.Album=B;},"@VERSION@",{requires:["pp-globals","pp-utils","pp-wait","array-extras","json-stringify"]});
YUI.add("pp-imageloader",function(A){A.namespace("PhotoPreview.ImageLoader");var F=A.PhotoPreview,C=F.ImageLoader,G=A.Lang,E=2844000,D=function(J){var K=E;E=J;return K;},B=0,I=function(J){var K=B;B=J;return K;},H=function(L,Y,W,U,X,S,K){var P,O,Q=A.Node.create("<img>"),N,M=function(a,Z){P.cancel();if(O){O.cancel();}Q.on("load",null);Q.on("error",null);Q.on("abort",null);if(G.isFunction(a)){a(Q,Z);}if(!K){Q.purge().remove();}P=null;Q=null;},R=function(){var Z=(+new Date)-N;if(S.success){}M(Y,Z);},V=function(){if(S.error){}M(W);},T=function(){if(S.abort){}M(U);},J=function(){if(S.timeout){}M(X);};U=U||W;X=X||U;S=A.merge({success:false,error:true,abort:true,timeout:true},S||{});P=A.later(E,null,J);Q.on("load",R);Q.on("error",V);Q.on("abort",T);if(A.UA.ie>=9){Q.setStyle("visibility","hidden");document.body.appendChild(Q._node);}N=+new Date;if(B){O=A.later(B,Q,Q.set,["src",L]);}else{Q.set("src",L);}};A.mix(C,{setDelay:I,setTimeout:D,getImage:H});},"@VERSION@",{requires:["pp-utils","array-extras","json-stringify"]});
YUI.add("pp-intl",function(B){B.namespace("PhotoPreview");var K=B.PhotoPreview,C=B.Array,M=B.Lang,N=B.Intl,O,E=K.handleError,G=function(){var A;if(!O){A=K.OMPARAMS.user.lang;O=N.lookupBestLang(A,B.config.win.PhotoPreview.Env.CONFIG.langs);}return O;},F=function(I,A){return("lang/"+A+((I)?"_"+I:""));},D=function(){var L=C(arguments),I=L,A=G(),P=C.map(I,function(Q){return F(A,Q);});return P.concat(I);},H=function(){var L=C(arguments),P=L.pop(),R=L.pop(),I=L,A=G(),Q=C.map(I,function(S){return F(A,S);});B.use.apply(B,Q.concat(I).concat([function(T){try{if(M.isFunction(R)){R(T);}}catch(S){E(P,S);}}]));},J=function(I,A){var P=G(),L;if(P.length===0){}else{if(!N.setLang(I,P)){}}L=N.get(I,null,P);return function(Q){var R=L[Q];if(!R){}return R||Q;};};K.getBestLang=G;K.getLangPackName=F;K.createGettext=J;K.useLocalizedModule=H;K.getLocalizedModule=D;},"@VERSION@",{requires:["pp-utils","intl","json-stringify"]});
YUI.add("pp-item",function(B){B.namespace("PhotoPreview");var J=B.PhotoPreview,C=B.Array,K=B.Lang,H=J.Ymail,E=J.createLogger("item"),G=function(P,L){var A=P.getWidth();return A&&A>=L;},O=function(P,L){var A=P.getHeight();return A&&A>=L;},I=function(S,Q,L){var R=0,A=S.length,P;if(Q>=L){C.some(S,function(U,T){R=T;return G(U,Q);});P=C.find(S.slice(R,A),function(T){return O(T,L);});}else{C.some(S,function(U,T){R=T;return O(U,L);});P=C.find(S.slice(R,A),function(T){return G(T,Q);});}if(!P){P=S[R];}return P;},M=function(S,Q,L){var R=0,A=S.length,P;if(Q>=L){C.some(S,function(U,T){A=T+1;return O(U,L);});P=C.find(S.slice(R,A),function(T){return G(T,Q);});}else{C.some(S,function(U,T){A=T+1;return G(U,Q);});P=C.find(S.slice(R,A),function(T){return O(T,L);});}if(!P){P=S[A-1];}return P;},F=function(A,L){return[A,"image",L].join("");},D=function(A,U,P,S,T,R,Q){var L=this;L._apiId=A;L._id=U;L._viewUrl=P;L._title=S||null;L._itemImages=T;L._itemVideo=R||null;L._uploader=Q||null;},N=function(P,L){var A=this;A._duration=K.isNumber(P)?P:null;A._apiData=L||null;};B.mix(D.prototype,{getApiId:function(){var A=this;return A._apiId;},getId:function(){var A=this;return A._id;},getViewUrl:function(){var A=this;return A._viewUrl;},getTitle:function(){var A=this;return A._title;},getItemImages:function(){var A=this;return A._itemImages;},getItemVideo:function(){var A=this;return A._itemVideo;},setItemVideo:function(L){var A=this;A._itemVideo=L;},getUploader:function(){return this._uploader;},getFillImage:function(R,A,U){var P=this,L=P.getApiId(),T=P.getItemImages(),S=T[0],Q;if(S){if(H.apiIdIsYmail(L)){H.getFillImage(P,R,A,U);}else{if(S.getWidth()){Q=I(T,R,A);if(K.isFunction(U)){U(Q);}}else{if(K.isFunction(U)){U(null);}}}}else{if(!H.apiIdIsYmail(L)||L.type===H.TYPE.PHOTO){}if(K.isFunction(U)){U(null);}}},getFitImage:function(R,A,U){var Q=this,L=Q.getApiId(),T=Q.getItemImages(),S=T[0],P;if(S){if(H.apiIdIsYmail(L)){H.getFitImage(Q,R,A,U);}else{if(S.getWidth()){P=M(T,R,A);if(K.isFunction(U)){U(P);}}else{if(K.isFunction(U)){U(null);}}}}else{if(K.isFunction(U)){U(null);}}}},true);B.mix(N.prototype,{getDuration:function(){var A=this;return A._duration;},getApiData:function(){var A=this;return A._apiData;}},true);B.mix(D,{getFitImage:M,createId:F,Video:N});J.Item=D;},"@VERSION@",{requires:["pp-ymaillib","pp-utils","json-stringify","array-extras"]});
YUI.add("pp-itemimage",function(D){D.namespace("PhotoPreview");var B=D.PhotoPreview,A=D.Lang,C=B.createLogger("itemimage"),E=function(I,F,J,H){var G=this;G._width=A.isNumber(I)?I:null;G._height=A.isNumber(F)?F:null;G._source=A.isString(J)?J:null;G._type=A.isString(H)?H:null;};D.mix(E.prototype,{getWidth:function(){return this._width;},getHeight:function(){return this._height;},getSource:function(){return this._source;},getType:function(){return this._type;},setType:function(F){this._type=F;},getNode:function(){return this._node;},setNode:function(F){this._node=F;},clone:function(){var F=this;return new E(F._width,F._height,F._source,F._type);},load:function(H,K,G,L,J,F){var I=this;H=H||I._source;if(I._source===H&&I._width&&I._height){if(A.isFunction(K)){K(false);}return;}I._source=H;I._width=null;I._height=null;I._node=null;D.use("pp-imageloader",function(N){try{B.ImageLoader.getImage(H,function(P,O){I._width=P.get("width");I._height=P.get("height");I._node=P;if(A.isFunction(K)){K(true,O);}},G,L,J,null,F);}catch(M){B.handleError(C,M);}});}},true);B.ItemImage=E;},"@VERSION@",{requires:["pp-utils"]});
YUI.add("pp-json",function(C){C.namespace("PhotoPreview.Json");var B=C.PhotoPreview,S=C.Array,I=C.Lang,G=C.Object,D=B.Ymail,m=B.Album,U=B.Owner,X=B.Item,b=B.ItemImage,a=X.Video,h=function(A){return{key:A,validate:I.isString,validateName:"L.isString"};},n=function(A){return{key:A,validate:function(L){return I.isNull(L)||I.isString(L);},validateName:"L.isString*"};},J=function(A){return{key:A,validate:function(L){return I.isObject(L,true)&&!I.isArray(L);},validateName:"L.isObject*"};},E=function(A){return{key:A,validate:function(L){return I.isNull(L)||I.isObject(L,true)&&!I.isArray(L);},validateName:"L.isObject**"};},W=function(A){return{key:A,validate:I.isNumber,validateName:"L.isNumber"};},d=function(A){return{key:A,validate:function(L){return I.isNull(L)||I.isNumber(L);},validateName:"L.isNumber*"};},K=function(A){return{key:A,validate:I.isArray,validateName:"L.isArray"};},H=function(A){return !D.apiIdIsYmail(A.apiId);},Q,T,R,F,f,N,o,e,l,p,c,M,q,V,g,Z=function(L,A){var O=[];if(I.isObject(L[A])&&!I.isArray(L[A])){G.each(L[A],function(r,Y,s){if(I.isNumber(parseInt(Y,10))){O[parseInt(Y,10)]=r;}});L[A]=O;}},j=function(L){var O=L.getItemCache(),Y=S.reduce(G.keys(O),{},function(r,t){var s=O[t];if(s!==m.ERROR_ITEM&&s!==m.PENDING_ITEM){r[t]=F(s);}return r;}),A=Q(L.getCachedOwner());return{apiId:L.getApiId(),id:L.getId(),viewUrl:L.getViewUrl(),title:L.getTitle(),declaredSize:L.getDeclaredSize(),size:L.getSize(),itemCache:Y,reportAbuseURL:L.getReportAbuseURL(),owner:A,nphotos:L._nphotos,nvideos:L._nvideos,uploader:L._uploader,subset:L.getSubset()};},P=function(A){Z(A.apiId,"attMetas");},i=[J("apiId"),h("id"),n("viewUrl"),n("title"),W("declaredSize"),W("size"),J("itemCache"),n("reportAbuseURL"),E("owner"),d("nphotos"),d("nvideos")],k=function(Y){var L,O,A;P(Y);if(!V("Album",Y,i)){return null;}if(!I.isObject(B[Y.apiId.apiClientName])){return null;}L={};O=G.some(Y.itemCache,function(s,t){var r=o(s);if(r){L[t]=r;return false;}return true;});if(O){return null;}if(H(Y)&&!V(Y.apiId.apiClientName+"Album",Y,[h("viewUrl"),h("reportAbuseURL")])){return null;}A=R(Y.owner);return new m(B[Y.apiId.apiClientName].APICLIENT,Y.apiId,Y.id,Y.viewUrl,Y.title,Y.declaredSize,Y.size,L,Y.reportAbuseURL,A,Y.nphotos,Y.nvideos,Y.uploader,Y.subset);};Q=function(A){if(!A){return null;}return{name:A.getName(),thumbnailUrl:A.getThumbnailUrl(),viewUrl:A.getViewUrl()};};T=S.map(["name","thumbnailUrl","viewUrl"],function(A){return n(A);});R=function(A){if(!A){return null;}if(!V("Owner",A,T)){return null;}return new U(A.name,A.thumbnailUrl,A.viewUrl);};F=function(L){var Y=S.map(L.getItemImages(),e),O=L.getItemVideo(),A=O?{duration:O.getDuration(),apiData:O.getApiData()}:null;return{apiId:L.getApiId(),id:L.getId(),viewUrl:L.getViewUrl(),title:L.getTitle(),itemImages:Y,itemVideo:A};};f=function(A){Z(A,"itemImages");};N=[J("apiId"),h("id"),n("viewUrl"),n("title"),K("itemImages"),E("itemVideo")];o=function(O){var Y,L,A;f(O);if(!V("Item",O,N)){return null;}if(H(O)&&!V(O.apiId.apiClientName+"Item",O,[h("viewUrl")])){return null;}Y=[];L=S.some(O.itemImages,function(s){var r=p(O,s);if(r){Y.push(r);return false;}return true;});if(L){return null;}A=O.itemVideo?q(O.itemVideo):null;return new X(O.apiId,O.id,O.viewUrl,O.title,Y,A);};e=function(A){return{width:A.getWidth(),height:A.getHeight(),source:A.getSource(),type:A.getType()};};l=[d("width"),d("height"),n("source")];p=function(A,L){if(!V("ItemImage",L,l)){return null;}if(H(A)&&!V(A.apiId.apiClientName+"ItemImage",L,[W("width"),W("height")])){return null;}return new b(L.width,L.height,L.source,L.type);};c=function(A){return{duration:A.getDuration(),apiData:A.getApiData()};};M=[d("duration"),E("apiData")];q=function(A){if(!V("ItemVideo",A,M)){return null;}return new a(A.duration,A.apiData);};V=function(L,Y,A){var O=S.some(A,function(r){return !g(L,Y,r);});if(O){return false;}return true;};g=function(O,r,L){var A=L.key,Y=L.validate;if(!I.isObject(r)||I.isArray(r)){return false;}if(!(A in r)){return false;}if(!Y(r[A])){return false;}return true;};C.mix(B.Json,{fromAlbum:j,createAlbum:k});},"@VERSION@",{requires:["pp-utils","pp-album","pp-owner","pp-item","pp-itemimage","pp-ymaillib","array-extras","json-stringify"]});
YUI.add("pp-jsonp",function(B){B.namespace("PhotoPreview.jsonp");var J=B.PhotoPreview,D=B.Array,K=B.Lang,I=B.Object,H=J.createLogger("jsonp"),E=J.handleError,C=20000,G=function(A){var L=D.map(D(A),function(O){return["jsonp",O].join(":");});J.rocketstats.post(L);},M=function(O,A,L){L=L||"";},N=function(){},F=function(L,Y,U,A){A=A||{};var Z=0,R=3,W,X,T,O,V=A.timeout||C,P=function(a,b){if(Z<R){(W||N)();}else{(X||N)(U,a,null,b);}},Q={on:{success:function(a){try{var c=(+new Date())-O;(X||N)(Y,a,c);}catch(b){G(["success:fail"]);T();E(H,b,L);}},failure:function(a){M("fail:yget",L);G(["fail:"+Z,"fail:yget"]);P(a,"failure");},timeout:function(a){M("fail:timeout",L);G(["timeout:"+Z,"fail:timeout"]);P(a,"timeout");}},timeout:V};W=function(){Z++;G(["request"]);O=+new Date();B.jsonp(L,Q);};X=function(a,b,d,c){T();if(K.isFunction(a)){a(b,d,c);}};T=function(){var a=(Q&&Q.on)||{};a.success=a.failure=null;W=null;X=null;};try{(W||N)();}catch(S){T();E(H,S,L);}};B.mix(J.jsonp,{send:F});},"@VERSION@",{requires:["pp-globals","pp-utils","pp-rocketstats","jsonp","array-extras"]});
YUI.add("pp-openmail",function(D){D.namespace("PhotoPreview.openmail");var J=D.PhotoPreview,E=J.openmail,F=D.Array,K=D.Lang,I=D.Object,H=J.createLogger("openmail"),G=J.handleError,C=function(A){return function(){try{if(K.isFunction(A)){A.apply(null,F(arguments));}}catch(L){G(H,L);}};},M=function(P,A,L){var N=L.length,O;if(P){if(K.isFunction(L[N-1])){O=L.concat();O[N-1]="function()";}else{O=L;}}return P;},B=function(){try{var L=F(arguments),A=L.shift(),N=L.length,Q=L[N-1],O;if(K.isFunction(Q)){L[N-1]=C(Q);}O=J.OMAPI.Application[A].apply(null,L);return M(O,A,L);}catch(P){G(H,P);}};D.mix(E,D.merge({getParameters:function(A){return B("getParameters",function(L){var N,O;if(L.user&&L.user.lang){N=L.user.lang;if(!K.isObject(N)){}else{if(!K.isArray(N)){O=I.keys(N).sort(F.numericSort);L.user.lang=F.map(O,function(P){return N[P];});}}}if(K.isFunction(A)){A(L);}});},setListeners:function(A){I.each(A,function(N,L){E.setListener({event:L},N);});},callInternalAPI:function(L,A,N){E.callWebService({url:"apps://",method:"GET",parameters:{cmd:L,args:A||{}}},N);}},F.reduce(["setListener","callWebService","openView","closeView"],{},function(L,A){L[A]=function(){return B.apply(null,[A].concat(F(arguments)));};return L;})));},"@VERSION@",{requires:["pp-globals","pp-utils","json-stringify"]});
YUI.add("pp-owner",function(C){C.namespace("PhotoPreview");var A=C.PhotoPreview,B=function(D,G,F){var E=this;E._name=D;E._thumbnailUrl=G;E._viewUrl=F;};C.mix(B.prototype,{getName:function(){return this._name;},getThumbnailUrl:function(){return this._thumbnailUrl;},getViewUrl:function(){return this._viewUrl;}},true);A.Owner=B;},"@VERSION@");
YUI.add("pp-rocketstats",function(F){F.namespace("PhotoPreview.rocketstats");var C=F.PhotoPreview,B=F.Array,D=C.rocketstats,E=function(J,H){J=F.Lang.isString(J)?[J]:J;H=F.Lang.isString(H)||F.Lang.isNumber(H)?[H]:H||[];var I,G=J?J.length:0,A=[];for(I=0;I<G;I++){A.push({key:("Flixy:"+J[I]),value:H[I]});}B.each(A,function(L){var K={key:L.key};if(L.value>=0){K.value=L.value;}C.OMAPI.Application.callWebService({url:"apps://",method:"GET",parameters:{cmd:"rs",args:K}});});};F.mix(D,{post:E});},"@VERSION@",{requires:["pp-utils","array-extras"]});
YUI.add("pp-ui-utils",function(B){B.namespace("PhotoPreview.uiutil");var P=B.PhotoPreview,W=P.uiutil,F=B.Lang,D=B.Object,U=B.Array,Q=P.Flickr,N=P.Picasa,S=P.Ymail,X=P.YouTube,Z=P.Hulu,E=P.createLogger("ui-utils"),G=function(L,A){var O;if(!L){return false;}O=false;D.each(A,function(d,Y){if(F.isString(d)&&d.length>0){if(Y==="href"){L.addClass("pp_link");L.set("target","blank");}L.set(Y,d);O=true;}});return O;},R=function(L,f){if(L.search(/\u202E|\u202D/)>0){var Y=P.OMPARAMS.user,g=Y.bidi,O,d,e,h=Y.isRTL?"right":"left",A=L.lastIndexOf(".");if(A==-1){if(g){B.use("comms-intl-bidi",function(j,i){L=['<span dir="',j.Intl.detectDirection(L),'">',L,"</span>"].join("");f(L);});}}else{O=L.substring(0,A);d=L.substring(A);L=['<div dir="ltr" style="float: ',h,';"><div style="float: left;">',O,'</div><div style="float: left;"',(g)?'dir="{filenameDir}"':"",">",d,"</div></div>"].join("");if(g){B.use("comms-intl-bidi",function(j,i){e=j.Intl.detectDirection(O);L=L.replace("{filenameDir}",e);f(L);});}}if(!g){f(L);}}else{f(L);}},M=function(){var A=P.createGettext("pp-mediabar",E),L={};if(Q){L[Q.NAME]={defaultAlbumTitle:A("TEXT_UNTITLE_FLICKR"),css_class:"pp_flickr"};}if(N){L[N.NAME]={defaultAlbumTitle:A("TEXT_UNTITLE_PICASA"),css_class:"pp_picasa"};}if(S){L[S.NAME]={defaultAlbumTitle:A("TEXT_UNTITLE_YAHOO"),css_class:"pp_ymail"};}if(X){L[X.NAME]={defaultAlbumTitle:A("TEXT_TITLE_VIDEOS"),css_class:"pp_youtube"};}if(Z){L[Z.NAME]={defaultAlbumTitle:A("TEXT_TITLE_VIDEOS"),css_class:"pp_hulu"};}return L;},T,b=function(Y,L,e){var O=L.getSubset(),d,k,j,A=L.getApiClient();if(O&&!F.isUndefined(e)){k=D.keys(O);for(d=0;d<k.length;d++){j=k[d];if(e>=j&&(e<k[d+1]||F.isUndefined(k[d+1]))){L=O[j];break;}}}if(Y&&!S.apiIdIsYmail(L.getApiId())){var m=Y.one(".pp_provider_logo"),h={href:L.getViewUrl()},l,g,f;if(!T){T=M();}l=T[A.getName()];g=L.getTitle()||l.defaultAlbumTitle;f=g.length>50;if(f){h.title=g;h.text=g.substr(0,47)+"...";}else{h.text=g;}if(m){(m.one("b")||m).addClass(l.css_class);}G(Y.one(".pp_text"),h);}},H=function(A,L){A.currentTarget.addClass(L);},c=function(A,L){A.currentTarget.removeClass(L);},C=(function(){var L={},A=0;return function(Y,O){var d=A++;O=O||150;return function(){if(L[d]){L[d].cancel();}L[d]=B.later(O,this,function(){Y();});};};})(),K=function(A){return A.get("offsetWidth")-parseInt(A.getStyle("paddingLeft"),10)-parseInt(A.getStyle("paddingRight"),10);},I=function(A){return A.get("offsetHeight")-parseInt(A.getStyle("paddingTop"),10)-parseInt(A.getStyle("paddingBottom"),10);},V=function(A){return A.get("offsetWidth")+parseInt(A.getStyle("marginLeft"),10)+parseInt(A.getStyle("marginRight"),10);},J=function(A){return A.get("offsetWidth")+parseInt(A.getStyle("marginTop"),10)+parseInt(A.getStyle("marginBottom"),10);},a=(function(){var L=P.createGettext("pp-ymailclient",E),O=[[L("TEXT_SIZE_GB"),1073741824,2],[L("TEXT_SIZE_MB"),1048576,1],[L("TEXT_SIZE_KB"),1024,0],[L("TEXT_SIZE_B"),0,0]],A=O.length,Y=L("TEXT_DECIMAL_SEPARATOR")=="."?false:L("TEXT_DECIMAL_SEPARATOR");return function(d,g){var f=""+d,h=[],e;if(d<1024){return L("TEXT_SIZE_LT_KB");}U.some(O,function(j,k){e=(k<A-1?(O[k+1][1]||2)/2:1)-1;if(d+e>=j[1]){d=(d/(j[1]||1)).toFixed(j[2],10);if(Y){d=d.replace(".",Y);}h=[g?"<strong>":"",d,g?"</strong>":"",j[0]];f=h.join("").replace(/\.0+ /," ");return true;}});return f;};})();B.mix(W,{setNodeAttrs:G,initProviderInfo:b,onIdle:C,getContentBoxWidth:K,getContentBoxHeight:I,getMarginBoxWidth:V,getMarginBoxHeight:J,fileSizeConvert:a,formatFilename:R});},"@VERSION@",{requires:["pp-utils","pp-ymaillib","node"]});
YUI.add("pp-wait",function(C){C.namespace("PhotoPreview");var A=C.PhotoPreview,B=C.Object,D;A.Wait=function(G,F){var E=this;E.name=G;E.pending={};E.completed={};E.createCondition=function(H){return new D(H,E);};E.notify=function(){F(E);};};D=function(G,H){var F=this,E;H.pending[G]=true;E=function(I){if(G in H.pending){delete H.pending[G];H.completed[G]=I;if(B.size(H.pending)===0){H.notify();}}};F.success=function(){E(true);};F.failure=function(){E(false);};};},"@VERSION@",{requires:["pp-utils"]});
YUI.add("pp-ymailclient",function(E){E.namespace("PhotoPreview.Ymail");var D=E.PhotoPreview,Q=E.Array,N=E.Lang,J=E.Object,V=E.substitute,I=D.Ymail,M=D.createLogger("ymailclient"),z=D.createGettext("pp-ymailclient",M),l="pp-ymailclient",h=I.NAME,S=I.TYPE,C=D.CONFIG.fetchImageMetadata,P=D.range,a=D.urlHost,u=D.urlQueryParams,x=D.handleError,y=D.yql,t=D.Album,U=D.Item,c=D.ItemImage,i=U.createId,G={},o={FILL:{name:"fill",accept:function(Y,A,O,L){return Y>=O&&A>=L;}},FIT:{name:"fit",accept:function(Y,A,O,L){return Y<=O&&A<=L;}}},n=o.FILL,K=o.FIT,b={},F={pdf:"pdf",ppt:"ppt",xls:"xls",doc:"doc",archive:"archive",image:"image",music:"music",video:"video",csv:"csv",other:"other"},m={"pdf":{"pdf":"pdf"},"ppt":{"ppt":"vnd.ms-powerpoint","pot":"vnd.ms-powerpoint","pptx":"vnd.openxmlformats-officedocument.presentationml.presentation","potx":"vnd.openxmlformats-officedocument.presentationml.template"},"xls":{"xls":"vnd.ms-excel","xlt":"vnd.ms-excel","xlsx":"vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsb":"vnd.ms-excel.sheet.binary.macroenabled.12","xlsm":"vnd.ms-excel.sheet.macroenabled.12","xltx":"vnd.openxmlformats-officedocument.spreadsheetml.template"},"doc":{"doc":"msword","dot":"msword","docx":"vnd.openxmlformats-officedocument.wordprocessingml.document","dotx":"vnd.openxmlformats-officedocument.wordprocessingml.template","rtf":"rtf"},"archive":{"zip":"zip","cpio":"x-cpio","tar":"x-tar","jar":"java-archive","cab":"vnd.ms-cab-compressed","Z":"x-compress","gz":"x-gzip","bz2":"x-bzip","7z":"x-7z-compressed"}},T=(function(){var A={types:{application:{},text:{"csv":F.csv},image:F.image,audio:F.music,video:F.video},extensions:{}};J.each(m,function(O,L,AB){var AA=A.types.application,Y=A.extensions;J.each(O,function(AC,AD,AE){AA[AC]=F[L];Y[AD]=AC;});});return A;})(),g=function(A,O){var L=["ymailImage",A].join(":");D.rocketstats.post(L,O);},p=function(AA){var AF=AA.attachmentUrl,Y=u(AF),AB=AA.partId||Y.pid,O=AA.tnefId||Y.tnef,L=AA.filename||Y.file_name,AH=AA.filesize,AD=AA.subtype,AC,A,AG,AE;if(AD=="octet-stream"){A=L.lastIndexOf(".");if(A>=0){AG=L.substring(A+1);}AD=T["extensions"][AG];}AC=AA.type+"/"+AD;if(Y.fid&&Y.mid&&AB&&L&&N.isNumber(AH)){if(AA.type==="image"){AE=S.PHOTO;}else{AE=T["types"][AA.type];if(!N.isString(AE)){if(AE&&AE[AD]){AE=AE[AD];}else{AE=F["other"];}}}return{apiClientName:h,apiClientModule:l,type:AE,origtype:AA.type,subtype:AD,contenttype:AC,fid:Y.fid,mid:Y.mid,pid:AB,tnefId:O,filename:L,filesize:AH,url:AA.attachmentUrl};}return null;},w=function(O,AA,L){var A=p(O),Y,AB;if(A){Y=i(L,AA);AB=A.type===S.PHOTO?[new c(null,null,O.thumbnailUrl,"thumb"),new c(null,null,O.attachmentUrl,"original")]:[];return new U(A,Y,null,N.trim(O.filename)||A.filename||V(A.type===S.PHOTO?z("IMAGE_NAME_PREFIX"):z("ATTACHMENT_NAME_PREFIX"),{index:AA+1}),AB);}return null;},q=function(L,AD,AB,AC,AE,Y,AA,A){var O=(N.isNumber(AA)&&N.isNumber(A))?AA+A:AE;return new t(L,AD,AB,null,AC,O,AE,Y,null,null,AA,A);},R=function(AE,AD,L,AB){var AC=AE.attMetas,A=AC.length,Y,O,AA;if(A===0){return null;}Y=L+AB;O=P(Math.max(0,Math.min(A,L)),Math.max(0,Math.min(A,Y)));if(O.length===0||L<0||L>=A||Y<0){}AA=Q.reduce(O,{},function(AF,AI){var AG=AC[AI],AH=w(AG,AI,AD);if(AH){AF[AI]=AH;}return AF;});return AA;},k={getName:function(){return h;},getOwner:function(O,A,Y,L){if(N.isFunction(L)){L();}},getItems:function(AA,O,AC,A,AB,L){var Y=R(AA,O,AC,A);if(Y){if(N.isFunction(AB)){AB(Y);}}else{if(N.isFunction(L)){L();}}}},X=function(A,AA){var L=D.getRuntime().getAttachmentMetas(AA),O=L.length,Y;if(O>0){Y=AA.length;if(O!==Y){}}else{}return{apiClientName:h,apiClientModule:l,type:S.ALBUM,id:A,attMetas:L};},s=function(AB,AD,AF,O,AG,AE){var AI=X(AD,AB),AA=R(AI,AD,0,C),AC,AH,Y,A,L;if(AA){AC=AI.attMetas;AH=AC.length;if(O){Y=O;A=0;}else{Y=null;A=null;}L=q(k,AI,AD,AF,AH,AA,Y,A);if(N.isFunction(AG)){AG(L);}}else{if(N.isFunction(AE)){AE();}}},j=function(AA,O,A,Y,L){s(AA,O,z("ALL_ATTACHMENTS"),A,Y,L);},Z=function(L,O,A){return function(){var Y="thumbProxyFail:"+L.replace(/ /g,"");g(Y);if(N.isFunction(A)){A();}};},e=function(O,AA,A){var L,Y;if(O in G){L=G[O];if(N.isObject(L)){if(N.isFunction(AA)){AA(L);}return;}if(N.isFunction(A)){A();}return;}Y=['select * from json where url ="',"http://",O,"/settings",'"'].join("");y.query(Y,function(AF){var AC,AD,AB,AE;if(AF.query&&AF.query.results&&AF.query.results.settings&&N.isObject(AF.query.results.settings.resize)){AC=AF.query.results.settings.resize;AD=parseInt(AC.w,10);AB=parseInt(AC.h,10);AE=parseInt(AC.minbytes,10);if(N.isNumber(AD)&&N.isNumber(AB)&&N.isNumber(AE)){L={width:AD,height:AB,minsize:AE};G[O]=L;g("thumbProxySuccess");if(N.isFunction(AA)){AA(L);}}else{G[O]=null;Z("bad resize",Y,A).apply(null,Q(arguments));}}else{G[O]=null;Z("bad data",Y,A).apply(null,Q(arguments));}},Z("failed",Y,A));},f=function(L,O,A,AA,Y){if(L===K){}},v=function(){},H=function(AL,AK,AV,AJ,O,AC){var AU=AV.getWidth(),AM=AV.getHeight(),AS=AL/AU,AT=AK/AM,AI=[AS,AT].sort(Q.numericSort),AG=AJ[1].clone(),AB,AP,AQ,AD,Y,AN,A,L,AA,AR,AH,AF,AO,AE;Q.some(AI,function(AW){AB=Math.floor(AW*AU);AP=Math.floor(AW*AM);return O.accept(AB,AP,AL,AK);});if(AG.getWidth()===AB&&AG.getHeight()===AP){f(O,AL,AK,AG,AJ);if(N.isFunction(AC)){AC(AG);}return;}AQ=AV.getSource();AG.setType("thumb");AD=AQ.indexOf("?")>=0?"&":"?";Y=[AQ,AD,"w=",AB,"&h=",AP].join("");AN=0;A=3;AE=function(){AA=null;AR=null;AH=null;AF=null;AO=null;AE=null;};L=function(AW){return function(){g("sized:"+AW);if(AN<A){(AO||v)();}else{g("sized:fail:"+AN);(AE||v)();if(N.isFunction(AC)){AC(null);}}};};AA=function(AW,AY){try{if(AW){g("sized:ok:"+AN);g("sizedTime",AY);}else{g("sized:ok:notdownloaded:"+AN);}f(O,AL,AK,AG,AJ);(AE||v)();if(N.isFunction(AC)){AC(AG);}}catch(AX){(AE||v)();x(M,AX);}};AR=L("error");AH=L("abort");AF=L("timeout");AO=function(){try{var AW;AN++;g("sized:request:"+AN);AW=AN<A?Y+"&httperr=1":Y;AG.load(AW,AA,AR,AH,AF,true);}catch(AX){(AE||v)();x(M,AX);}};L=null;AO();},B=function(AF,AB,Y,AA,AE){var L=AF.getItemImages(),A=L[0],O=A.getSource(),AD=L[L.length-1],AC;if(O){if(!(A.getWidth()&&A.getHeight())){g("thumb:request");
}AC=function(){var AG=a(O);e(AG,function(AJ){var AI=AF.getApiId(),AK=AI.filesize>=AJ.minsize,AH=n.accept(AJ.width,AJ.height,AB,Y);if(AK&&AH){H(AB,Y,A,L,AA,function(AN){var AM=AN&&AN.getWidth(),AL=AN&&AN.getHeight();AN=(AM==58&&AL==58)?null:AN;AE(AN||AD);});}else{if(!AK){g("full:smallfilesize");}else{g("full:smallfill");}if(N.isFunction(AE)){AE(AD);}}},function(){g("full:nosettings");if(N.isFunction(AE)){AE(AD);}});};A.load(null,function(AH,AJ){var AK=A.getWidth(),AG=A.getHeight(),AI;if(AH){g("thumbTime",AJ);g("thumb:ok");}if(AH||n.accept(AK,AG,AB,Y)||(AK<150&&AG<100&&(AK!=58&&AG!=58)&&(AF.getApiId().contenttype!="image/gif"))){f(AA,AB,Y,A,L);if(N.isFunction(AE)){AE(A);}return;}AC();},function(){g("thumb:error");if(AA.name=="fit"){AC();}else{if(N.isFunction(AE)){AE(null);}}},function(){g("thumb:abort");if(N.isFunction(AE)){AE(null);}},function(){g("thumb:timeout");if(N.isFunction(AE)){AE(null);}});}else{g("full:nothumb");if(N.isFunction(AE)){AE(AD);}}},d=function(O,L,A,Y){B(O,L,A,n,Y);},r=function(O,L,A,Y){B(O,L,A,K,Y);},W=function(L,A){if(!(L in b)){D.getRuntime().getAttachmentHandlerInfo({"content_type":[L]},null,function(O){b[L]=O||null;A&&A(b[L]);});}else{A&&A(b[L]);}};E.mix(I,{createAllAttachmentsAlbum:j,APICLIENT:k,getFillImage:d,getFitImage:r,getAttachmentHandler:W});},"@VERSION@",{requires:["pp-ymaillib","pp-utils","pp-runtime","pp-album","pp-item","pp-itemimage","pp-intl","pp-rocketstats","pp-yql","substitute","array-extras"],lang:["ar-JO","ar-JO-x-nokia","bg-BG","bn-BD","bn-BD-x-nokia","bn-IN","cs-CZ","da-DK","da-DK-x-nokia","de-AT","de-CH","de-DE","de-DE-x-nokia","el-GR","el-GR-x-nokia","en-035","en-035-x-nokia","en-AU","en-AU-x-nokia","en-CA","en-CA-x-nokia","en-CA-x-rogers","en-GB","en-GB-x-bt","en-GB-x-nokia","en-IE","en-IE-x-nokia","en-IN","en-IN-x-nokia","en-JO","en-JO-x-nokia","en-MY","en-NZ","en-NZ-x-nokia","en-NZ-x-tnz","en-PH","en-PH-x-nokia","en-SG","en-SG-x-nokia","en-US","en-US-x-ftr","en-US-x-nokia","en-US-x-sbc","en-US-x-verizon","en-ZA","es-AR","es-AR-x-nokia","es-CL","es-CL-x-nokia","es-CO","es-CO-x-nokia","es-ES","es-ES-x-nokia","es-MX","es-MX-x-nokia","es-PE","es-PE-x-nokia","es-US","es-US-x-nokia","es-VE","es-VE-x-nokia","et-EE","fi-FI","fi-FI-x-nokia","fil-PH","fil-PH-x-nokia","fr-BE","fr-CA","fr-CA-x-nokia","fr-CA-x-rogers","fr-CH","fr-FR","fr-FR-x-nokia","gu-IN","he-IL","hi-IN","hi-IN-x-nokia","hr-HR","hu-HU","id-ID","id-ID-x-nokia","it-CH","it-IT","it-IT-x-nokia","ja-JP","kn-IN","ko-KR","ko-KR-x-nokia","lt-LT","lv-LV","ml-IN","mr-IN","ms-MY","ms-MY-x-nokia","ms-MY-x-temp","nb-NO","nb-NO-x-nokia","nl-BE","nl-NL","nl-NL-x-nokia","pl-PL","pl-PL-x-nokia","pt-BR","pt-BR-x-nokia","pt-PT","pt-PT-x-nokia","ro-RO","ro-RO-x-nokia","ru-RU","ru-RU-x-nokia","sk-SK","sl-SI","sr-Cyrl-RS","sv-SE","sv-SE-x-nokia","ta-IN","ta-IN-x-nokia","te-IN","th-TH","th-TH-x-nokia","tr-TR","tr-TR-x-nokia","uk-UA","ur-PK","ur-PK-x-nokia","vi-VN","vi-VN-x-nokia","zh-Hans-CN","zh-Hans-CN-x-alibaba","zh-Hans-CN-x-nokia","zh-Hans-CN-x-yahoocn","zh-Hant-HK","zh-Hant-HK-x-nokia","zh-Hant-TW","zh-Hant-TW-x-nokia","zh-Hant-US"]});
YUI.add("pp-ymaillib",function(E){E.namespace("PhotoPreview.Ymail");var C=E.PhotoPreview,B=C.Ymail,D="Ymail",F={ALBUM:"ALBUM",PHOTO:"PHOTO",OTHER:"OTHER"},A=function(G){return G.apiClientName===D;};E.mix(B,{NAME:D,TYPE:F,apiIdIsYmail:A});},"@VERSION@");
YUI.add("pp-yql",function(C){C.namespace("PhotoPreview.yql");var N=C.PhotoPreview,D=C.Array,P=C.Lang,K=C.Object,H=N.createLogger("yql"),E=N.handleError,I=C.JSON.stringify,F={env:"store://rxqadVJtd2gGcazy6QMEeU"},B=10000,G=function(A){var L=D.map(D(A),function(O){return["yql",O].join(":");});N.rocketstats.post(L);},J=function(A){return["(",D.map(K.keys(A),function(L){var O=A[L];if(P.isArray(O)){return[L," in (",D.map(O,function(S){return I(S.toString());}).join(","),")"].join("");}return[L,I(O.toString())].join("=");}).join(" and "),")"].join("");},Q=function(O,A,L){L=L||"";},R=function(){},M=function(U,a,X,A){A=A||{};var c=0,T=3,b,Z,W,L,Y=A.timeout||B,O=function(d,e){if(c<T){(b||R)();}else{(Z||R)(X,d,null,e);}},S={on:{success:function(d){try{if(d.error){Q("fail:error",U,"data.error="+I(d.error));G(["fail:"+c,"fail:error"]);O(d,"dataError");}else{if(d.query){var g=(+new Date())-L;G("ok:"+c);(Z||R)(a,d,g);}else{Q("fail:failure",U,"data.keys="+I(K.keys(d)));G(["fail:"+c,"fail:failure"]);O(d,"other");}}}catch(f){W();E(H,f,U);}},failure:function(d){Q("fail:yget",U);G(["fail:"+c,"fail:yget"]);O(d,"failure");},timeout:function(d){Q("fail:timeout",U);G(["timeout:"+c,"fail:timeout"]);O(d,"timeout");}},timeout:Y};b=function(){c++;G(["request"]);L=+new Date();(new C.YQLRequest(U,S,F,{base:"://yql.yahooapis.com/v1/public/yql?",proto:N.PROTOCOL}).send());};Z=function(d,e,g,f){W();if(P.isFunction(d)){d(e,g,f);}};W=function(){var d=(S&&S.on)||{};d.success=d.failure=null;b=null;Z=null;};try{(b||R)();}catch(V){W();E(H,V,U);}};C.mix(N.yql,{whereClause:J,query:M});},"@VERSION@",{requires:["pp-globals","pp-utils","pp-rocketstats","yql","array-extras","json-stringify"]});
YUI.add("lang/pp-ymailclient_en-US",function(A){A.Intl.add("pp-ymailclient","en-US",{"ALL_ATTACHMENTS":"Attached files","SINGLE_ATTACHMENT":"Attached file","IMAGE_NAME_PREFIX":"Image {index}","ATTACHMENT_NAME_PREFIX":"Attachment {index}","TEXT_SIZE_GB":"GB","TEXT_SIZE_MB":"MB","TEXT_SIZE_KB":"KB","TEXT_SIZE_B":"B","TEXT_SIZE_LT_KB":"< 1 KB","TEXT_DECIMAL_SEPARATOR":"."});},"@VERSION@");
YUI.add("lang/pp-slideshow_en-US",function(A){A.Intl.add("pp-slideshow","en-US",{"HIDE_INFO":"Hide Info","SHOW_INFO":"Show Info","DROPDOWN_INDEXING":"{current} of {total}","SLIDESHOW_DIALOG_TITLE":"Slideshow","TOOLTIP_PLAY":"Play Slideshow","TOOLTIP_PAUSE":"Pause Slideshow","TOOLTIP_NEXT":"Show Next Image","TOOLTIP_PREVIOUS":"Show Previous Image","TOOLTIP_SHOW_ALBUM":"View Album","TOOLTIP_SHOW_SLIDESHOW":"View Slideshow","TOOLTIP_DOWNLOAD":"Download","TOOLTIP_FULLSCREEN":"View in Full Screen","TOOLTIP_EXIT_FULLSCREEN":"Exit Full Screen","TOOLTIP_CLOSE":"Close Slideshow","TOOLTIP_RETURN_TO_YMAIL":"Return to Yahoo! Mail","TOOLTIP_CLOSE_AND_RETURN_TO_YMAIL":"Close Slideshow and Return to Yahoo! Mail","TEXT_ALBUM_OWNER":"By {name}","FLASH_INSTALL_MSG":'Please download and install the latest<br>Adobe&reg Flash&reg Player to watch this video.<br><a target="_blank" href="{adobe_flash_url}">Click here to begin</a>'});},"@VERSION@");
YUI.add("lang/pp-mediabar_en-US",function(A){A.Intl.add("pp-mediabar","en-US",{"TEXT_APP_NAME":"Photo Preview","TEXT_UNTITLE_PICASA":"Picasa Web Album","TEXT_UNTITLE_FLICKR":"Flickr Set","TEXT_UNTITLE_YAHOO":"Yahoo! Mail Attachment","TEXT_UNTITLE_YOUTUBE":"YouTube Videos","HTML_ZERO_PHOTOS":"<b>0</b> photos","HTML_ONE_PHOTO":"<b>1</b> photo","HTML_ONE_PHOTO_ONE_VIDEO":"<b>1</b> photo, <b>1</b> video","HTML_ONE_PHOTO_MANY_VIDEOS":"<b>1</b> photo, <b>{nvideos}</b> videos","HTML_MANY_PHOTOS":"<b>{nphotos}</b> photos","HTML_MANY_PHOTOS_ONE_VIDEO":"<b>{nphotos}</b> photos, <b>1</b> video","HTML_MANY_PHOTOS_MANY_VIDEOS":"<b>{nphotos}</b> photos, <b>{nvideos}</b> videos","HTML_ONE_VIDEO":"<b>1</b> video","HTML_MANY_VIDEOS":"<b>{nvideos}</b> videos","HTML_ZERO_ITEMS":"<b>0</b> items","HTML_ONE_ITEM":"<b>1</b> item","HTML_MANY_ITEMS":"<b>{nitems}</b> items","HTML_ZERO_ATTACHMENTS":"<b>0</b> attachments","HTML_ONE_ATTACHMENT":"<b>1</b> attachment","HTML_MANY_ATTACHMENTS":"<b>{nitems}</b> attachments","BUTTON_VIEW_SLIDESHOW":"View Slideshow","BUTTON_DOWNLOAD_ALL":"Download All","BUTTON_DOWNLOAD":"Download","TOOLTIP_DOWNLOAD_FILENAME":"Click to Download {filename} {size}","TOOLTIP_CLICK_TO_VIEW_SLIDESHOW":"Click to View in Slideshow","TOOLTIP_CLICK_TO_VIEW_APP":"View with {appname}","TOOLTIP_ENABLE_IMAGES_TO_VIEW_SLIDESHOW":"Show Images to enable Slideshow","TOOLTIP_NAV_PREVIOUS":"Previous","TOOLTIP_NAV_NEXT":"Next","TOOLTIP_DOWNLOAD_ALL":"Download All","TOOLTIP_VIEW_SLIDESHOW":"View Slideshow","TEXT_REPORT_ABUSE":"Report Abuse","TEXT_ALBUM_OWNER":"By {name}","TEXT_CAPTION_PREFIX":"Item {index}","BUTTON_WATCH_ALL":"Watch All","BUTTON_WATCH":"Watch","TEXT_TITLE_VIDEOS":"Videos","TEXT_VIEW_ONLINE":"View Online"});},"@VERSION@");
YUI.add("lang/pp-photopreview_en-US",function(A){A.Intl.add("pp-photopreview","en-US",{"LOADING":"Loading ...","SHARED_PHOTOS":"Shared Photos or Videos"});},"@VERSION@");
YUI.add("lang/pp-ymailclient",function(A){A.Intl.add("pp-ymailclient","",{"ALL_ATTACHMENTS":"Attached files","SINGLE_ATTACHMENT":"Attached file","IMAGE_NAME_PREFIX":"Image {index}","ATTACHMENT_NAME_PREFIX":"Attachment {index}","TEXT_SIZE_GB":"GB","TEXT_SIZE_MB":"MB","TEXT_SIZE_KB":"KB","TEXT_SIZE_B":"B","TEXT_SIZE_LT_KB":"< 1 KB","TEXT_DECIMAL_SEPARATOR":"."});},"@VERSION@");
YUI.add("lang/pp-slideshow",function(A){A.Intl.add("pp-slideshow","",{"HIDE_INFO":"Hide Info","SHOW_INFO":"Show Info","DROPDOWN_INDEXING":"{current} of {total}","SLIDESHOW_DIALOG_TITLE":"Slideshow","TOOLTIP_PLAY":"Play Slideshow","TOOLTIP_PAUSE":"Pause Slideshow","TOOLTIP_NEXT":"Show Next Image","TOOLTIP_PREVIOUS":"Show Previous Image","TOOLTIP_SHOW_ALBUM":"View Album","TOOLTIP_SHOW_SLIDESHOW":"View Slideshow","TOOLTIP_DOWNLOAD":"Download","TOOLTIP_FULLSCREEN":"View in Full Screen","TOOLTIP_EXIT_FULLSCREEN":"Exit Full Screen","TOOLTIP_CLOSE":"Close Slideshow","TOOLTIP_RETURN_TO_YMAIL":"Return to Yahoo! Mail","TOOLTIP_CLOSE_AND_RETURN_TO_YMAIL":"Close Slideshow and Return to Yahoo! Mail","TEXT_ALBUM_OWNER":"By {name}","FLASH_INSTALL_MSG":'Please download and install the latest<br>Adobe&reg Flash&reg Player to watch this video.<br><a target="_blank" href="{adobe_flash_url}">Click here to begin</a>'});},"@VERSION@");
YUI.add("lang/pp-mediabar",function(A){A.Intl.add("pp-mediabar","",{"TEXT_APP_NAME":"Photo Preview","TEXT_UNTITLE_PICASA":"Picasa Web Album","TEXT_UNTITLE_FLICKR":"Flickr Set","TEXT_UNTITLE_YAHOO":"Yahoo! Mail Attachment","TEXT_UNTITLE_YOUTUBE":"YouTube Videos","HTML_ZERO_PHOTOS":"<b>0</b> photos","HTML_ONE_PHOTO":"<b>1</b> photo","HTML_ONE_PHOTO_ONE_VIDEO":"<b>1</b> photo, <b>1</b> video","HTML_ONE_PHOTO_MANY_VIDEOS":"<b>1</b> photo, <b>{nvideos}</b> videos","HTML_MANY_PHOTOS":"<b>{nphotos}</b> photos","HTML_MANY_PHOTOS_ONE_VIDEO":"<b>{nphotos}</b> photos, <b>1</b> video","HTML_MANY_PHOTOS_MANY_VIDEOS":"<b>{nphotos}</b> photos, <b>{nvideos}</b> videos","HTML_ONE_VIDEO":"<b>1</b> video","HTML_MANY_VIDEOS":"<b>{nvideos}</b> videos","HTML_ZERO_ITEMS":"<b>0</b> items","HTML_ONE_ITEM":"<b>1</b> item","HTML_MANY_ITEMS":"<b>{nitems}</b> items","HTML_ZERO_ATTACHMENTS":"<b>0</b> attachments","HTML_ONE_ATTACHMENT":"<b>1</b> attachment","HTML_MANY_ATTACHMENTS":"<b>{nitems}</b> attachments","BUTTON_VIEW_SLIDESHOW":"View Slideshow","BUTTON_DOWNLOAD_ALL":"Download All","BUTTON_DOWNLOAD":"Download","TOOLTIP_DOWNLOAD_FILENAME":"Click to Download {filename} {size}","TOOLTIP_CLICK_TO_VIEW_SLIDESHOW":"Click to View in Slideshow","TOOLTIP_CLICK_TO_VIEW_APP":"View with {appname}","TOOLTIP_ENABLE_IMAGES_TO_VIEW_SLIDESHOW":"Show Images to enable Slideshow","TOOLTIP_NAV_PREVIOUS":"Previous","TOOLTIP_NAV_NEXT":"Next","TOOLTIP_DOWNLOAD_ALL":"Download All","TOOLTIP_VIEW_SLIDESHOW":"View Slideshow","TEXT_REPORT_ABUSE":"Report Abuse","TEXT_ALBUM_OWNER":"By {name}","TEXT_CAPTION_PREFIX":"Item {index}","BUTTON_WATCH_ALL":"Watch All","BUTTON_WATCH":"Watch","TEXT_TITLE_VIDEOS":"Videos","TEXT_VIEW_ONLINE":"View Online"});},"@VERSION@");
YUI.add("lang/pp-photopreview",function(A){A.Intl.add("pp-photopreview","",{"LOADING":"Loading ...","SHARED_PHOTOS":"Shared Photos or Videos"});},"@VERSION@");
