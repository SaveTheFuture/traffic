YUI.add("qr-listener",function(A){var B=A.qr.lib.OMAPI,F=A.qr.lib.Utils,I=A.qr.strings,D=F.getStatLogger("Listener");function C(M){var N=M.sourceFolderid||M.folderid,J=N==="Draft"||N==="Sent"||N==="%40C%40Chats",L=M.folderid!=="%40S%40Search"||M.sourceFolderid,K=A.Array.some(M.attachment,function(O){return O.type=="text"&&O.subtype=="calendar";});return !J&&L&&!K;}function H(J){J.email=F.escapeHtml(F.unescapeHtml(J.email));J.name=F.escapeHtml(F.unescapeHtml(J.name));}function G(J){if(A.Lang.isArray(J)){A.Array.each(J,H);}else{if(A.Lang.isObject(J)){H(J);}}}function E(J){if(!J){return;}J.subject=F.escapeHtml(F.unescapeHtml(J.subject));G(J.from);G(J.replyto);G(J.to);G(J.cc);}A.namespace("qr.Listener").main=function(K,J){try{E(K.messageObject);if(C(K.messageObject)){A.qr.MessagePane.main(K,J);D("modified");}else{D("notmodified");}}catch(L){D("main:error:"+L.message);}};},"@VERSION@",{requires:["json","qr-lib-omapi","qr-lib-utils"]});
YUI.add("qr-common-utils",function(E){E.namespace("common.Utils");var B=E.common.Utils,D=E.Object,C=E.Lang,A=C.trim;E.mix(B,{substitute:function(M,L,H,G,F,J,I){var K=/\{\{([^{}]*)\}\}/g;if(typeof M!=="string"){return;}if(I){M=I.str||M;L=I.obj||L;H=I.formatters||H;G=I.args||G;F=I.strings||F;J=I.templates||J;}return M.replace(K,function(P,O){var R,N,Q,S=E.common.Utils.substitute;if(H&&(R=(I&&I.formatters)?I.formatters[O]:H[O])){N=C.isFunction(R)?R(L,G,I):R;if(N===true&&J&&O in J){return S(J[O].base||J[O],L,H,G,F,J,I);}return N||"";}else{if(L&&O in L){Q=L[O];return typeof Q==="string"&&Q.match(K)?S(Q,L,H,G,F,J,I):Q;}else{if(F&&O in F){Q=F[O];return Q.match(K)?S(Q,L,H,G,F,J,I):Q;}else{if(false&&J&&O in J){return S(J[O].base||J[O],L,H,G,F,J,I);}else{if(O.indexOf("str_cfg_")===0){return P;}return"";}}}}});},isValidEmail:function(G){var K,J,F,H;var I=/^([^@ ;:()\[\],<>\\]+@[^@ ;:()\[\],<>\\]+\.[^@ ;:()\[\],<>\\]+)/;if(!I.test(G)){return false;}H=G.split("@");K=H[0];J=H[1];if(!J||!K){return false;}H=J.split(".");F=H[1];if(!F){return false;}return G;}});},"1.0.0");YUI.add("_shared_module_offscreen_bin_quick_reply_modal_account_blocked_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_quick_reply_modal_account_blocked_rollup={base:"{{qr_blocked_modal_hd}} {{qr_blocked_modal_bd}}",qr_blocked_modal_hd:"{{str_comp_account_blocked}}",message_blocked:"<strong>{{str_comp_captcha_msg}}</strong> <p>{{str_comp_captcha_msg_suspicious_activity}}</p> <p>{{str_comp_captcha_msg_contact_cust_care}}</p> <p>{{str_comp_captcha_apology}}</p>",account_blocked:"<strong>{{str_comp_captcha_account}}</strong> <p>{{str_comp_captcha_account_suspicious_activity}}</p> <p>{{str_comp_captcha_account_contact_cust_care}}</p> <p>{{str_comp_captcha_apology}}</p>",qr_blocked_modal_bd:'<div class="qr-modal-error-icon"> </div> <div class="qr-modal-error-body">{{message_blocked}}{{account_blocked}} </div>'};},"1.0.0");YUI.add("_shared_module_quick_reply_quick_reply_pane_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_quick_reply_quick_reply_pane_rollup={base:"{{qr_reply}}{{qr_donotreply}}{{qr_reply_invite}}{{qr_follow}}{{qr_link}}{{qr_approve}}{{qr_success}}{{qr_error}}{{qr_busy}}",qr_multiple_names:'{{str_quickreply_to}} <select name="sendTo"> <option value="{{qr_name}}">{{qr_name}}</option> <option value="{{str_quickreply_all_recipients}}">{{str_quickreply_all}}</option> </select> ',qr_multiple_names_else:"{{str_quickreply_to_name}} ",qr_ygroup_else:"{{qr_multiple_names}} {{qr_multiple_names_else}} ",qr_ygroup:'{{str_quickreply_to}} <select name="sendTo"> <option value="{{qr_author}}">{{qr_author}}</option> <option value="{{qr_ygroup_name}}">{{qr_ygroup_name}}</option> </select> ',qr_ygroup1:"{{str_quickreply_to_group}}",qr_ygroup_else1:"{{str_quickreply_to_name}}",qr_facebook_else:'<label for="qr_reply_fld" class="offscreen">{{str_quickreply_to}}</label> <div id="qr_reply_text"> {{qr_ygroup_else}} {{qr_ygroup}} </div> <textarea id="qr_reply_fld" class="qr_reply_field" spellcheck="false" data-action="expandQR">{{qr_ygroup1}}{{qr_ygroup_else1}}</textarea> <div role="button" tabindex="0" title="{{str_quickreply_close_bar}}" id="qr_close" data-action="toggleQR"> </div> <span id="qr_send" class="btn left right"><a role="button" id="btn-abandon-message" data-action="sendQR" title="{{str_quickreply_send_quickreply}}" href="#">{{str_quickreply_send}}</a></span> ',qr_twitter_else:"{{qr_facebook_else}}",qr_twitter:'<div id="qr_twitter"> <label for="qr_reply_fld" class="offscreen">{{str_quickreply_twitter}}</label> <div id="qr_reply_text">{{str_quickreply_twitter}}</div><div class="qr-counter"></div> <textarea id="qr_reply_fld" class="qr_reply_field" spellcheck="false" data-action="expandQR">{{str_quickreply_to_name}}</textarea> <div role="button" tabindex="0" title="{{str_quickreply_close_bar}}" id="qr_close" data-action="toggleQR"> </div> <span id="qr_send" class="btn left right"><a role="button" data-action="sendQR" title="{{str_quickreply_send_quickreply}}" href="#">{{str_quickreply_send}}</a></span> </div> ',qr_fbcomment:"{{str_quickreply_fb_comment}} ",qr_fbcomment_else:"{{str_quickreply_fb_message}} ",qr_fbcomment1:"{{str_quickreply_fb_comment_short}}",qr_fbcomment_else1:"{{str_quickreply_fb_message_short}}",qr_facebook:'<div id="qr_reply_text"> {{qr_fbcomment}} {{qr_fbcomment_else}}</div> <textarea id="qr_reply_fld" class="qr_reply_field" spellcheck="false" data-action="expandQR">{{qr_fbcomment1}}{{qr_fbcomment_else1}}</textarea> <div role="button" tabindex="0" title="{{str_quickreply_close_bar}}" id="qr_close" data-action="toggleQR"> </div> <span id="qr_send" class="btn left right"><a role="button" data-action="sendQR" title="{{str_quickreply_send_reply_on_fb}}" href="#">{{str_quickreply_send}}</a></span> ',qr_reply:"{{qr_twitter_else}} {{qr_twitter}} {{qr_facebook}}",qr_donotreply:'<div id="qr_donotreply_text">{{str_quickreply_donotreply_message}}</div> <div role="button" tabindex="0" title="{{str_quickreply_close_bar}}" id="qr_close" data-action="toggleQR"> </div>',qr_reply_invite:'<span id="qr_attending" class="btn left right"><a role="button" data-action="sendQR" title="{{str_quickreply_attending_reply}}" href="#">{{str_quickreply_attending}}</a></span> <span id="qr_not_attending" class="btn left right"><a role="button" data-action="sendQR" title="{{str_quickreply_not_attending_reply}}" href="#">{{str_quickreply_not_attending}}</a></span> <span id="qr_maybe_attending" class="btn left right"><a role="button" data-action="sendQR" title="{{str_quickreply_maybe_attending}}" href="#">{{str_quickreply_maybe_attending}}</a></span> <div role="button" tabindex="0" title="{{str_quickreply_close_bar}}" id="qr_close" data-action="toggleQR"> </div>',qr_twitter1:'<span id="qr_follow" class="btn left right"><a role="button" data-action="sendQR" title="{{str_quickreply_follow}}" href="#" value="1">{{str_quickreply_follow}}</a></span> <span id="qr_send_direct" class="btn left right"><a role="button" data-action="sendQR" title="{{str_quickreply_send_direct_message}}" href="#" value="0">{{str_quickreply_send_direct_message}}</a></span> ',qr_facebook1:'<span id="qr_send_direct" class="btn left right"><a role="button" data-action="sendQR" title="{{str_quickreply_send_direct_message}}" href="#" value="0">{{str_quickreply_send_direct_message}}</a></span> ',qr_follow:'{{qr_twitter1}} {{qr_facebook1}} <div role="button" tabindex="0" title="{{str_quickreply_close_bar}}" id="qr_close" data-action="toggleQR"> </div>',qr_twitter2:'<div class="qr-partner-icon partner-twitter"></div> <label class="qr-info-label">{{str_quickreply_reply_tweets}}</label> <span id="qr_Link_twitter" class="btn left right"><a role="button" data-action="" title="{{str_quickreply_link_to_twitter}}" href="#">{{str_quickreply_link_to_twitter}}</a></span> ',qr_facebook2:'<div class="qr-partner-icon partner-facebook"></div> <label class="qr-info-label">{{str_quickreply_reply_facebook}}</label> <span id="qr_Link_facebook" class="btn left right"><a role="button" data-action="" title="{{str_quickreply_link_to_facebook}}" href="#">{{str_quickreply_link_to_facebook}}</a></span> ',qr_link:'{{qr_twitter2}} {{qr_facebook2}} <div role="button" tabindex="0" title="{{str_quickreply_close_bar}}" id="qr_close" data-action="toggleQR"> </div>',qr_approve:'<span id="qr_approve" class="btn left right"><a role="button" data-action="sendQR" title="{{str_quickreply_approve}}" href="#" value="1">{{str_quickreply_approve}}</a></span> <span id="qr_reject" class="btn left right"><a role="button" data-action="sendQR" title="{{str_quickreply_reject}}" href="#" value="0">{{str_quickreply_reject}}</a></span> <div role="button" tabindex="0" title="{{str_quickreply_close_bar}}" id="qr_close" data-action="toggleQR"> </div>',qr_facebook3:"{{str_quickreply_fb_comment_posted}}",qr_ygroup2:"{{str_quickreply_msg_sent_group}} ",qr_multiple_recipients_else:"{{str_quickreply_msg_sent_one_recipient}} ",qr_two_recipients:"{{str_quickreply_msg_sent_two_recipients}} ",qr_two_recipients_else:"{{str_quickreply_msg_sent_more_recipients}} ",qr_multiple_recipients:"{{qr_two_recipients}} {{qr_two_recipients_else}} ",qr_ygroup_else2:"{{qr_multiple_recipients_else}} {{qr_multiple_recipients}} ",qr_facebook_else1:"{{qr_ygroup2}} {{qr_ygroup_else2}} ",qr_twitter3:"{{str_quickreply_msg_sent_one_recipient}} ",qr_messagesent:"{{qr_facebook3}} {{qr_facebook_else1}} {{qr_twitter3}} ",qr_approved:"{{str_quickreply_you_approved}}",qr_approved_else:"{{str_quickreply_you_rejected}}",qr_approvalsent:"{{qr_approved}} {{qr_approved_else}} ",qr_invitesent:"{{str_quickreply_you_replied_to_event}}",qr_twitter4:"{{str_quickreply_you_are_now_following}}",qr_facebook4:"Some analog to following on Facebook?? ",qr_following:"{{qr_twitter4}} {{qr_facebook4}} ",qr_success:'<span id="qr-success-icon"> </span><span class="qr-info-label"> {{qr_messagesent}} {{qr_approvalsent}} {{qr_invitesent}} {{qr_following}} </span>',qr_retry:'<label class="qr-info-label">{{str_quickreply_not_sent_retry}}</label> <span id="qr_retry" class="btn left right"><a role="button" data-action="sendQR" title="{{str_quickreply_retry}}" href="#">{{str_quickreply_try_again}}</a></span> ',qr_blocked:'<label class="qr-info-label">{{str_quickreply_blocked}} <a role="button" href="#" id="btn-account-blocked" class="more" data-action="modal">{{str_opt_general_help_learn_more}}</a> </label> ',qr_notsent:'<label class="qr-info-label">{{str_quickreply_your_message_not_sent}} <a role="button" href="#" id="btn-msg-not-sent" class="more" data-action="modal">{{str_opt_general_help_learn_more}}</a> </label> ',qr_error_twitter:'<label class="qr-info-label">{{message}}</label> ',qr_error:'<span id="qr-error-icon"> </span><label class="qr-info-label"> {{qr_retry}} {{qr_blocked}} {{qr_notsent}} {{qr_error_twitter}}',qr_busy:'<span id="qr-busy-icon"> </span> <label class="qr-info-label">{{str_quickreply_sending}}</label>'};
},"1.0.0");YUI.add("_shared_module_quick_reply_quick_reply_wrapper_rollup",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_quick_reply_quick_reply_wrapper_rollup={base:'<div id="quick-reply" style="display: none" class="shaded"> <div class="whiteline"></div> <div id="quick-reply-box"></div> <div id="quick-reply-status" aria-live="polite"></div> </div>'};},"1.0.0");YUI.add("qr-resources",function(){},"1.0.0",{requires:["qr-common-utils","_shared_module_offscreen_bin_quick_reply_modal_account_blocked_rollup","_shared_module_quick_reply_quick_reply_pane_rollup","_shared_module_quick_reply_quick_reply_wrapper_rollup"]});
YUI.add("qr-lib-textarea-input",function(D){var C=D.qr.lib.Utils,B=C.getLogger("qr.lib.TextInput");function A(E,G){E="on"+E;var F=E in G;if(!F){if(!G.setAttribute){G=document.createElement("div");}if(G.setAttribute&&G.removeAttribute){G.setAttribute(E,"");F=D.Lang.isFunction(G[E]);if(!D.Lang.isUndefined(G[E])){G[E]=undefined;}G.removeAttribute(E);}}G=null;return F;}D.namespace("qr.lib").TextInput=function(F,G){this.el=F;function E(){D.fire("textinput:input",F);}if(G.bidi){B("Enabling bidi support");D.use("common-ui-bidi-textentry",function(H){F.plug(H.Plugin.BidiTextEntry);});}if(D.UA.gecko>0&&/windows/.test(D.UA.os)&&C.hasTallUnicodeCharacters(F.get("text"))){F.addClass("qr_shortline");}(function(){var J=false,H=F&&F._node;if(!H){return;}function I(){if(!J){J=true;setTimeout(function(){J=false;E();},0);}}if(A("input",H)){H.addEventListener("input",I,false);if(D.UA.ie){D.on("keypress",I,F);D.on("keydown",I,F);D.on("contextmenu",I,F);}}else{if(H.attachEvent){H.attachEvent("onpropertychange",I);}else{D.on("keypress",I,F);D.on("drop",I,F);D.on("textInput",I,F);H.addEventListener("cut",I,false);H.addEventListener("paste",I,false);}}})();};},"@VERSION@",{requires:[]});
YUI.add("qr-lib-reply",function(C){var A="#qr_send",B=".qr_reply_field";C.namespace("qr.lib").Reply=function(E,D){this.stat=D.stat;this.sendBtn=E.one(A);this.textarea=E.one(B);this.wrapper=E;(new C.qr.lib.TextInput(this.textarea,{bidi:D.bidi}));this.initUI();};C.qr.lib.Reply.prototype={initUI:function(){C.on("textinput:input",this.handleInput,this);this.wrapper.delegate("keydown",function(D){if((D.metaKey||D.ctrlKey)&&D.charCode==13){C.fire("cmdSend",this.getReplyMessage());this.stat("enter:sent");}},B,this);this.wrapper.delegate("click",function(D){if(D.currentTarget.hasClass("disabled")){return;}this.cancelBlurAction=true;C.fire("cmdSend",this.getReplyMessage());this.stat("send:clicked");},A,this);},handleInput:function(F){var D=this.getReplyMessage(),E=C.Lang.trim(D)==="";if(E&&!this.sendBtn.hasClass("disabled")){this.sendBtn.addClass("disabled");}else{if(!E&&this.sendBtn.hasClass("disabled")){this.sendBtn.removeClass("disabled");}}},getReplyMessage:function(){return this.textarea.get("value");},setReplyMessage:function(E,D){if(this.textarea){this.textarea.set("value",E||"").setAttribute("spellcheck",!!D?"true":"false");}},focusTextarea:function(){this.textarea.focus();}};},"@VERSION@",{requires:[]});
YUI.add("qr-view",function(B){var G=B.common.Utils,C=B.qr.lib.OMAPI,J=B.qr.strings,F=G.substitute,H=B.ui.Templates,E=H._shared_module_quick_reply_quick_reply_pane_rollup,I=H._shared_module_quick_reply_quick_reply_wrapper_rollup,D={};function A(K,L){this.container=B.one((K&&K._node&&K._node.childNodes&&K._node.childNodes.length)?K:"body");this.wrapper=null;this.statusDiv=null;this.replyDiv=null;this.messageContainer=this.container.one(A.DOM_MESSAGE);this.flags={};this.formatters={};this.stat=L||null;this.rendered=false;}B.mix(A,{DOM_MESSAGE:".message",DOM_WRAPPER:"#quick-reply",DOM_REPLY:"#quick-reply-box",DOM_STATUS:"#quick-reply-status",DOM_SENDBTN:"#qr_send",DOM_REPLY_TEXTAREA:".qr_reply_field",QR_REPLY:"qr_reply",QR_DONOTREPLY:"qr_donotreply",QR_INVITE:"qr_reply_invite",QR_FOLLOW:"qr_follow",QR_LINK:"qr_link",QR_APPROVE:"qr_approve",QR_SUCCESS:"qr_success",QR_ERROR:"qr_error",QR_BUSY:"qr_busy",QR_MODAL_CAPTCHA_BLOCKED:"_shared_module_offscreen_bin_quick_reply_modal_account_blocked_rollup"});A.prototype={template:E,initView:function(M){var L,K=this;L=F(I.base,{},K.formatters,null,J);K.wrapper=B.Node.create(L);if(!K.wrapper){B.log("undefined quick-reply wrapper");return;}if(B.qr.ENV.OMParams.user.bidi){K.wrapper.setAttribute("dir","rtl");}this.messageContainer.addClass("showqr").removeClass("showqr-expanded");this.wrapper.addClass("showqr").removeClass("showqr-expanded");K.container.append(K.wrapper);K.statusDiv=this.wrapper.one(A.DOM_STATUS);K.replyDiv=this.wrapper.one(A.DOM_REPLY);K.on("click",function(){this.stat("close:clicked");B.fire("cmdHideReplyBar");},"#qr_close",this);K.actionable=M;if(!M){return;}},initUI:function(){this.reply=new B.qr.lib.Reply(this.wrapper,{bidi:B.qr.ENV.OMParams.user.bidi,stat:this.stat});this.toggler=new B.qr.lib.Toggler(this.reply,this.messageContainer,this.wrapper);B.on("cmdShowReply",this.showReply,this);this.on("click",function(){B.fire("cmdRetrySend");this.stat("retry:clicked");},"#qr_retry",this);this.on("click",function(L){var K=L&&L.target,M=K&&K.getAttribute("id");if(M==="btn-account-blocked"){B.fire("cmdLearnMoreAccountBlocked");this.stat("learnmore:clicked");}},"a[data-action=modal]",this);},on:function(M,N,K,L){B.delegate(M,N,this.wrapper,K,L);},showReply:function(){this.statusDiv.setStyle("display","none");this.replyDiv.setStyle("display","");},showStatus:function(){this.replyDiv.setStyle("display","none");this.statusDiv.setStyle("display","");},addFormatters:function(K){B.mix(this.formatters,K||{},true);},getMarkup:function(L,P,O,K,M,N){P=P||"base";if(!(P in L)){B.log("unknown template section: "+P,"error","QR");return"";}return F(L[P],O||{},K||this.formatters,M,J,L,N);},getModalMarkup:function(M,L,K){if(!(M in H)){B.log("unknown modal template: "+M,"error","QR");return"";}return this.getMarkup(H[M],L||"base",K);},getBlockedModal:function(L){var K=A.QR_MODAL_CAPTCHA_BLOCKED;return{hd:this.getModalMarkup(K,"qr_blocked_modal_hd",L),bd:this.getModalMarkup(K,"qr_blocked_modal_bd",L)};},render:function(M,L){var K=this.getMarkup(E,M,L);this.replyDiv.setContent(K);},renderTemplate:function(K,L){this.render(K,L);},renderStatus:function(M,L){var K=this.getMarkup(E,M,L);this.statusDiv.setContent(K);B.fire("cmdShowStatus");this.showStatus();},renderReply:function(K){this.render(A.QR_REPLY,K);},renderDoNotReply:function(K){this.render(A.QR_DONOTREPLY,K);},renderApprove:function(K){this.render(A.QR_APPROVE,K);},renderBusy:function(K){this.renderStatus(A.QR_BUSY,K);},renderSuccess:function(K){this.renderStatus(A.QR_SUCCESS,K);},renderLink:function(K){this.render(A.QR_LINK,K);},renderError:function(K){this.renderStatus(A.QR_ERROR,K);},renderModalBlocked:function(){var L=A.QR_MODAL_CAPTCHA_BLOCKED,K;function M(){C.internalAPI("alertDialog",D[L]);}if(!(L in D)){K=this.getBlockedModal();C.internalAPI("resolveStr",K,function(N){D[L]=N.data.value;M();});}else{M();}},getCounter:(function(){var K;return function(){if(!K){K=this.wrapper.one(".qr-counter");}return K;};})(),handleTextAboveLimit:function(){this.wrapper.one(A.DOM_SENDBTN).addClass("disabled");},handleTextBelowLimit:function(){this.wrapper.one(A.DOM_SENDBTN).removeClass("disabled");},handleTextApproachLimit:function(){this.getCounter().addClass("counter-softlimit");},updateCounterText:function(K){this.getCounter()._node.innerHTML=K;}};B.namespace("qr").View=A;},"@VERSION@",{requires:["event-delegate","qr-resources","event-focus"]});
YUI.add("qr-lib-mail",function(F){var C=/^reply|replyall|forward$/;function G(){}function B(I,H,J){if(!C.test(I)){throw new Error("sendMail: Invalid action");}F.qr.lib.OMAPI.internalAPI("mail."+I,H,function(L){var K={};if(!L.error){K.status=0;}else{K.status=L.error;}(J&&J(K));});}function E(L,H,K,J,I){return{to:L,origin:H,fid:K,text:J||"",opts:I};}function D(M,H,K,J,I,L){B("reply",E(M,H,K,J,I),L);}function A(H,K,J,I,L){B("replyall",E(null,H,K,J,I),L);}G.prototype={sendReply:D,sendReplyall:A};F.namespace("qr.lib").Mail=G;},"@VERSION@",{requires:["qr-lib-omapi"]});
YUI.add("qr-client-base",function(F){var D={REPLYTO_NOREPLY:/do-not-reply|noreply|donotreply|no-reply|-unsubscribe@yahoogroups\.com/i},E=F.qr.View,A=F.qr.lib.OMAPI,C=F.qr.lib.Utils;function B(G,H,I){this.message=H;this.type=G;this.replyStatus=null;this.retry={cache:null,count:0};this.stat=C.getStatLogger(G);this.actionable=this.isEnhanceTarget(this.message);this.view=new E(I,this.stat);}F.mix(B,{SUCCESS:0,ERR_MAIL_SEND:101,ERR_MAIL_SEND_VERIFICATION:102,ERR_MAIL_SEND_ACCOUNT:103,ERR_MAIL_SEND_MESSAGE:104});B.prototype={run:function(){this.initView();if(this.actionable){this.render();}else{this.renderDoNotReply();}this.initUI();this.stat("loaded");},initView:function(){var H=this,G=H.view;G.initView(this.actionable);G.addFormatters({qr_messagesent:true,qr_retry:function(){return H.replyStatus===B.ERR_MAIL_SEND;},qr_blocked:function(){return H.replyStatus===B.ERR_MAIL_SEND_ACCOUNT||H.replyStatus===B.ERR_MAIL_SEND_MESSAGE;},qr_notsent:function(){return H.replyStatus===B.ERR_MAIL_SEND_VERIFICATION;},message_blocked:function(){return H.replyStatus===B.ERR_MAIL_SEND_MESSAGE;},account_blocked:function(){return H.replyStatus===B.ERR_MAIL_SEND_ACCOUNT;}});},initUI:function(){if(this.useReplyInitUI!==false){this.view.initUI();}F.on("cmdHideReplyBar",this.handleHideReplyBar,this);if(!this.actionable){return;}F.on("cmdSend",this.handleSend,this);F.on("cmdRetrySend",this.handleRetrySend,this);F.on("cmdLearnMoreAccountBlocked",this.handleLearnMoreAccountBlocked,this);},isEnhanceTarget:function(H){var G=D.REPLYTO_NOREPLY.test(H.replyto[0].name)||D.REPLYTO_NOREPLY.test(H.replyto[0].email);return !G;},render:function(){var G={};this.view.renderReply(G);},renderDoNotReply:function(){var G={};this.view.renderDoNotReply(G);},handleHideReplyBar:function(){F.qr.ENV.Menu.toggleShowState(false);},handleSend:function(){},handleRetrySend:function(){if(!this.retry.cache){F.log("No retry cache yet");return;}++this.retry.count;F.log("retry... #"+this.retry.count);this.view.renderBusy();this[this.retry.cache.method].apply(this,this.retry.cache.args);},handleLearnMoreAccountBlocked:function(G){this.view.renderModalBlocked();},sendReply:function(G,M){var K=this.message.folderid,I={mid:this.message.messageid,fid:this.message.sourcefid||K},H,J={},L=this;this.retry.cache={method:"sendReply",args:[G,M]};this.view.renderBusy();H=new F.qr.lib.Mail();J.fields=["userUIPref.composeFontFamily","userUIPref.composeFontSize"];F.qr.lib.OMAPI.internalAPI("message.getUserDataFields",J,function(O){var N={};if(O.data&&O.data["userUIPref.composeFontFamily"]&&O.data["userUIPref.composeFontSize"]){N.fmt={fontFamily:O.data["userUIPref.composeFontFamily"],fontSize:O.data["userUIPref.composeFontSize"]};}if(M){H.sendReply(M,I,K,G,N,F.bind(L.handleReplyComplete,L));}else{H.sendReplyall(I,K,G,N,F.bind(L.handleReplyComplete,L));}});},handleReplyComplete:function(G){F.log("send callback: "+G.status);this.replyStatus=G.status;switch(G.status){case B.SUCCESS:this.retry.count=0;this.handleReplySuccess();break;case B.ERR_MAIL_SEND_VERIFICATION:F.fire("cmdShowReply");break;case B.ERR_MAIL_SEND:case B.ERR_MAIL_SEND_ACCOUNT:case B.ERR_MAIL_SEND_MESSAGE:this.handleReplyError();break;default:F.log("unknown reply status: "+G.status);this.replyStatus=B.ERR_MAIL_SEND;this.handleReplyError();}this.stat("send:completed:"+G.status);},handleReplySuccess:function(){this.view.renderSuccess();},handleReplyError:function(){this.view.renderError();}};F.namespace("qr.client").Base=B;},"@VERSION@",{requires:["qr-view","qr-lib-mail","qr-lib-omapi","qr-lib-utils"]});
YUI.add("qr-client-facebook",function(B){function A(){A.superclass.constructor.apply(this,arguments);var C=this;C.meta={is_comment:true};}B.extend(A,B.qr.client.Base,{initView:function(){A.superclass.initView.apply(this,arguments);var D=this,C=D.view,F=C.template,E;E={qr_facebook:true,qr_facebook2:true,qr_facebook3:true,qr_fbcomment:D.meta.is_comment,qr_fbcomment1:D.meta.is_comment,qr_fbcomment_else:!D.meta.is_comment,qr_fbcomment_else1:!D.meta.is_comment};C.addFormatters(E);},initUI:function(){A.superclass.initUI.apply(this,arguments);},handleSend:function(D){var C=this.message,E=C.replyto[0];this.sendReply(D,E);}});B.namespace("qr.client").Facebook=A;},"@VERSION@",{requires:["qr-client-base"]});
YUI.add("qr-client-groups",function(C){var B=C.qr.View,M=C.qr.strings,I=/-owner@yahoogroups\.com$/i,H=/^(.*?)(-owner)?@yahoogroups\.com$/i,L=/-accept-(\w+)@yahoogroups\.com$/i,F="",E="-reject-(\\w+)@yahoogroups\\.com",K=/-acceptsub-(\w+)@yahoogroups\.com$/i,J=/([A-Z0-9._%+\-]+)@/i,A="-acceptsub-",G="-rejectsub-";function D(){D.superclass.constructor.apply(this,arguments);var S=this,X=S.message,T=X.to[0],U=X.from,N=X.replyto[0],P=I.test(U.email),R=K.exec(N.email),O=R&&R[1],V=!R&&L.test(N.email),Q="",W;S.meta={authorName:P?(M.str_quickreply_group_owner):(U.name||U.email),groupName:H.exec(T.email)[1],replyToAuthor:U,replyToGroup:T,isSubscription:!!O,isModerated:V,isApproval:V||!!O};S.meta.defaultReplyTo=N.email===U.email?S.meta.authorName:S.meta.groupName;if(S.meta.isSubscription){W=J.exec(X.subject);W=W&&W[1];C.mix(S.meta,{acceptTo:{email:N.email,name:""},rejectTo:{email:N.email.replace(A,G),name:""},subscriberName:W||""});}if(V){F=new RegExp("mailto:("+S.meta.groupName+E+")","i");C.all('a[href^="mailto:"]').some(function(a){var Y=a.get("href"),Z=F.exec(Y);if(Z){Q=Z[1];return true;}});if(!Q){throw new Error("Could not find reject email in message moderation!");}C.mix(S.meta,{acceptTo:{email:N.email,name:""},rejectTo:{email:Q,name:""}});}}C.extend(D,C.qr.client.Base,{initView:function(){D.superclass.initView.apply(this,arguments);var O=this,N=O.view,P=N.template;P.str_quickreply_you_approved=O.meta.isSubscription?M.str_quickreply_you_approved:"{{str_quickreply_you_approved_message}}";P.str_quickreply_you_rejected=O.meta.isSubscription?M.str_quickreply_you_rejected:"{{str_quickreply_you_rejected_message}}";N.addFormatters({qr_group:true,qr_ygroup:true,qr_ygroup1:true,qr_ygroup2:true,qr_facebook_else:true,qr_facebook_else1:true,qr_twitter_else:true,qr_messagesent:!O.meta.isApproval,qr_approvalsent:O.meta.isApproval,qr_approved:function(){return !!O.approved;},qr_approved_else:function(){return !O.approved;},str_quickreply_you_approved:true,str_quickreply_you_rejected:true});},initUI:function(){D.superclass.initUI.apply(this,arguments);if(this.meta.isApproval){C.once("click",function(){this.handleApproveClick.apply(this,arguments);this.stat("approve:clicked");},"#qr_approve",this);C.once("click",function(){this.handleRejectClick.apply(this,arguments);this.stat("reject:clicked");},"#qr_reject",this);}},render:function(){if(this.meta.isApproval){this.renderApprove();}else{this.renderReply();}},renderReply:function(){var N,O={qr_author:this.meta.authorName,qr_ygroup_name:this.meta.groupName};this.view.renderReply(O);N=this.view.wrapper.one('select[name="sendTo"] option[value="'+this.meta.defaultReplyTo+'"]');if(N){N.set("selected","selected");}},renderApprove:function(){this.view.renderApprove();},handleReplySuccess:function(){var N=this.view,O=this.meta;if(O.isSubscription){N.renderSuccess({qr_name:O.subscriberName});}else{if(O.isModerated){N.renderSuccess();}else{N.renderSuccess({qr_ygroup_name:O.selectedTo.name||O.selectedTo.email});}}},handleSend:function(P){var Q,O=this.meta,N=this.view.wrapper.one("select[name=sendTo]");if(C.Lang.trim(P)===""){return;}N=N&&N.get("value");if(N===O.authorName){Q=O.replyToAuthor;}else{if(N===O.groupName){Q=O.replyToGroup;}else{C.log("quick-reply groups selected sendTo not found or invalid");return;}}O.selectedTo=Q;this.sendReply(P,Q);},handleApproveClick:function(){var O=this.meta.acceptTo,N="";this.approved=true;this.sendReply(N,O);},handleRejectClick:function(){var O=this.meta.rejectTo,N="";this.approved=false;this.sendReply(N,O);}});C.namespace("qr.client").Groups=D;},"@VERSION@",{requires:["qr-client-base"]});
YUI.add("qr-client-mail",function(A){function B(){B.superclass.constructor.apply(this,arguments);var D=this.message,G=D.from,E=D.replyto[0],F=(D.to.length+D.cc.length),C=null;if(F===2){C=D.to.length>1?D.to[1]:D.cc[0];}this.meta={authorName:E.name||E.email,recipientList:[].concat(D.to,D.cc),replyTo:E,multipleNames:(F>1),nRecipients:F};this.replyall=false;this.anonymous_recipient=false;}A.extend(B,A.qr.client.Base,{initView:function(){B.superclass.initView.apply(this,arguments);var D=this,C=D.view,E=C.template;C.addFormatters({qr_ygroup_else:true,qr_ygroup_else1:true,qr_ygroup_else2:true,qr_facebook_else:true,qr_facebook_else1:true,qr_twitter_else:true,qr_multiple_names:!!D.meta.multipleNames,qr_multiple_names_else:!D.meta.multipleNames,qr_multiple_recipients:function(){return D.replyall;},qr_multiple_recipients_else:function(){return !D.replyall;},qr_two_recipients:function(){return D.meta.nRecipients===2;},qr_two_recipients_else:function(){return D.meta.nRecipients!==2;},qr_anonymous_recipient:function(){return !!D.anonymous_recipient;},qr_anonymous_recipient_else:function(){return !D.anonymous_recipient;}});},initUI:function(){B.superclass.initUI.apply(this,arguments);},render:function(){this.view.renderReply({qr_name:this.meta.authorName});},handleSend:function(H){var G=this.meta,C=this.view,J=G.replyTo,F,E=false,D={},I=this;if(A.Lang.trim(H)===""){return;}if(G.multipleNames){F=C.wrapper.one("select[name=sendTo]");F=F&&F.get("value");if(F===G.authorName){E=false;}else{E=true;}}I.replyall=E;if(E){I.sendReply(H);}else{I.sendReply(H,J);}},handleReplySuccess:function(C){var E=this.meta,D={qr_name:E.authorName},F=this;if(this.replyall){if(E.nRecipients>2){D.qr_count=E.nRecipients-1;this.view.renderSuccess(D);}else{if(E.nRecipients===2){this.getUserAddresses(function(H){var G,I;F.anonymous_recipient=true;for(G=0;G<H.length;G++){I=H[G];if(E.recipientList[0].email===I){D.qr_name_2=E.recipientList[1].name||E.recipientList[1].email;F.anonymous_recipient=false;break;}else{if(E.recipientList[1].email===I){D.qr_name_2=E.recipientList[0].name||E.recipientList[0].email;F.anonymous_recipient=false;break;}}}F.view.renderSuccess(D);});}}}else{this.view.renderSuccess(D);}},getUserAddresses:function(C){var D={};D.fields=["userSendPref.defaultFromAddress","externalAccounts","disposableAddresses","aliases"];A.qr.lib.OMAPI.internalAPI("message.getUserDataFields",D,function(K){var J=(K.data.externalAccounts||{}).extAccount||[],F=(K.data.aliases||{}).alias||[],G=(K.data.disposableAddresses||{}).deaName||[],H=[K.data["userSendPref.defaultFromAddress"]],I,E;I=[].concat(J,F,G);for(E in I){if(I[E].address){H.push(I[E].address);}}C(H);});}});A.namespace("qr.client").Mail=B;},"@VERSION@",{requires:["qr-client-base"]});
YUI.add("qr-lib-auth",function(F){var B=F.qr.lib.OMAPI,E=F.qr.lib.Utils,D=E.getStatLogger("Auth"),C=E.getLogger("qr.lib.Auth"),A=1500;F.namespace("qr.lib").Auth={getAuthUrl:function(G,H){B.internalAPI("social.getAuthUrl",{service:G},function(I){var J;if(I&&I.data&&I.data.authorizeURL){J=I.data.authorizeURL;D("getAuthUrl Success");C("auth url:"+J);H(J);return;}if(I.error){D("getAuthUrl Error: "+I.error);C("getAuthUrl Error: "+I.error);}else{D("getAuthUrl Error: "+F.JSON.stringify(I));C("getAuthUrl Error: "+F.JSON.stringify(I));}H(null);});},authenticate:(function(){var G,H="location=0,status=0,width=800,height=550",I;return function(J,M){var K=this;try{G.focus();return;}catch(L){G=open("",null,H);}this.getAuthUrl(J,function(N){if(G.closed){D("AuthPopupClosedBeforeNavigate");G=null;return;}if(!N){G.close();G=null;M(null);return;}G.location=N;D("LoadAuthUrl");I=setInterval(function(){if(G.closed){clearInterval(I);G=null;K.isAuthenticated(J,true,function(O){D("AuthResult:"+O);M(O);});}},A);});};})(),isAuthenticated:function(G,H,I){B.internalAPI("social.status",{reload:H},function(J){if(J.error){D("IsAuthError:"+JSON.stringify(J));I(null);return;}var K=F.some(J.data,function(L){return L==G;});C("isAuthenticated."+G+"."+H+": "+K);I(K);});}};},"@VERSION@",{requires:["qr-lib-omapi","qr-lib-utils","json"]});
YUI.add("qr-lib-counter",function(B){var C=9007199254740992,A=function(){};B.namespace("qr.lib").Counter=function(F,G){var H=false,E=false,D=true;G.limit=G.limit||C;G.softLimit=G.softLimit||0;G.approachLimit=G.approachLimit||A;G.aboveLimit=G.aboveLimit||A;G.belowLimit=G.belowLimit||A;G.change=G.change||A;B.on("textinput:input",function(J){var I;I=J.get("value").length;if(!H&&(I>=G.softLimit)){G.approachLimit.call(G.scope);H=true;}if(!E&&(I>G.limit)){G.aboveLimit.call(G.scope);E=true;D=false;}else{if(!D&&(I<=G.limit)){G.belowLimit.call(G.scope);E=false;D=true;}}G.change.call(G.scope,I);},this);};},"@VERSION@",{requires:[]});
YUI.add("qr-lib-toggler",function(E){var A=E.qr.lib.OMAPI,D=E.qr.lib.Utils,C=D.getStatLogger("Toggler"),B=D.getLogger("qr.lib.Toggler");E.namespace("qr.lib").Toggler=function(F,H,G){this.reply=F;this.messageContainer=H;this.wrapper=G;this.expanded=false;E.on("cmdShowReply",this.expandView,this);E.on("cmdShowStatus",this.collapseView,this);E.on("cmdSend",function(){if(!this.expanded){this.reply.focusTextarea();}},this);this.wrapper.on("focus",this.onReplyBarFocus,this);this.wrapper.on("blur",this.onReplyBarBlur,this);E.delegate("mousedown",this.suggestCancelBlur,this.wrapper,"*",this);};E.qr.lib.Toggler.prototype={suggestCancelBlur:function(){this.cancelBlurAction=true;E.later(50,this,function(){this.cancelBlurAction=false;});},onReplyBarFocus:function(J){B("focus");var F=this,H,G,I=0;if(J&&J.target._node.id==="qr_close"){return;}if(!this.expanded){H=parseInt(this.wrapper.getStyle("height"),10);this.expandView();G=parseInt(this.wrapper.getStyle("height"),10);I=G-H;if(I){A.internalAPI("updateDocScroll",{deltaHeight:I});}this.minimizedReplyText=this.reply.getReplyMessage();this.reply.setReplyMessage("",true);this.suggestCancelBlur();C("textarea:focus");}},onReplyBarBlur:function(F){B("blur");if(!this.cancelBlurAction&&E.Lang.trim(this.reply.getReplyMessage())===""){this.collapseView();this.reply.setReplyMessage(this.minimizedReplyText);}this.cancelBlurAction=false;},collapseView:function(){B("collapse");this.toggleExpand(false);},expandView:function(){B("expand");this.toggleExpand(true);},toggleExpand:function(F){if(F){this.messageContainer.addClass("showqr-expanded").removeClass("showqr");this.wrapper.addClass("showqr-expanded").removeClass("showqr");}else{this.messageContainer.addClass("showqr").removeClass("showqr-expanded");this.wrapper.addClass("showqr").removeClass("showqr-expanded");}this.expanded=F;}};},"@VERSION@",{requires:[]});
YUI.add("qr-client-twitter-dm",function(A){var C=A.qr.lib.OMAPI,G=A.qr.lib.Utils,H=A.qr.lib.Auth,K=A.qr.strings,B={ERROR_DM_NOTFOLLOWING:/You cannot send messages to users who are not following you/,ERROR_DM_DUPLICATE:/You already said that/},J=140,F=G.getStatLogger("Twitter"),E=G.getLogger("qr.client.TwitterDM");function I(L,M,N){C.internalAPI("social.send",{service:"twitter",method:"POST",url:L,params:M},N);}function D(M,L,N){F("SendDirectMessage");I("http://api.twitter.com/1/direct_messages/new.json",{screen_name:M,text:L},N);}A.namespace("qr.client").TwitterDM=function(M,L){this.from=M;this.view=L;};A.qr.client.TwitterDM.prototype={show:function(){var M=false,L;E("Show");F("RenderDirectMessage");this.view.renderReply({qr_name:this.from.screen_name});this.reply=new A.qr.lib.Reply(this.view.wrapper,{bidi:A.qr.ENV.OMParams.user.bidi,stat:F});(new A.qr.lib.Toggler(this.reply,this.view.messageContainer,this.view.wrapper));(new A.qr.lib.Counter("#qr_reply_fld",{limit:J,softLimit:Math.floor(J*0.8),aboveLimit:this.view.handleTextAboveLimit,belowLimit:this.view.handleTextBelowLimit,approachLimit:function(){M=true;this.handleTextApproachLimit();},change:function(N){if(M){this.updateCounterText(J-N);}},scope:this.view}));A.on("cmdSend",this.handleSend,this);},handle403:function(L){var M;L=L||{};if(B.ERROR_DM_NOTFOLLOWING.test(L.error)){M=K.str_quickreply_twitter_error_not_following;}else{if(B.ERROR_DM_DUPLICATE.test(L.error)){M=K.str_quickreply_twitter_error_duplicate;}else{M=K.str_quickreply_twitter_message_refused;}}this.view.renderError({message:M});F("SendDirectMessage403Error:"+L.error);},handleSend:function(M){var L=this;E("Send DirectMessage clicked");D(L.from.screen_name,M,function(N){if(N.error){A.fire("twitter:autherror");F("AuthError:"+N.error);return;}switch(N.status){case"200":L.view.renderSuccess({qr_messagesent:true,qr_name:N.data.recipient.screen_name});break;case"401":C.internalAPI("social.revokeAuth",{service:"twitter"},function(){A.fire("twitter:autherror");});break;case"403":L.handle403(N.data);break;default:L.view.renderError({message:K.str_quickreply_your_message_not_sent});}F("SendDirectMessageStatus:"+N.status);});}};},"@VERSION@",{requires:["qr-client-base","qr-lib-omapi","qr-lib-utils","qr-lib-auth","qr-lib-counter"]});
YUI.add("qr-client-twitter",function(A){var C=A.qr.lib.OMAPI,H=A.qr.lib.Utils,I=A.qr.lib.Auth,L=A.qr.strings,B={TWITTER_EMAIL:/@postmaster\.twitter\.com$/,EMAIL_TYPE_DM:/https?:\/\/twitter\.com\/(.+)\?.*?\bnid=\d+\+dm_sender_profile\b/m,EMAIL_TYPE_FOLLOWING:/https?:\/\/twitter\.com\/.*?\bnid=\d+\+following_user\b/m,EMAIL_TYPE_FOLLOW_REQUEST:/https?:\/\/twitter\.com\/.*?\bnid=\d+\+friend_requests\b/m,EMAIL_TYPE_FAVORITE:/https?:\/\/twitter\.com\/.*?\bnid=\d+\+favorites\b/m,EMAIL_TYPE_RETWEET:/https?:\/\/twitter\.com\/.*?\bnid=\d+\+share_user\b/m,EMAIL_TYPE_REPLY_OR_MENTION:/https?:\/\/twitter\.com\/.*?\bnid=\d+\+reply\b/m,SENDER_SCREEN_NAME:/https?:\/\/twitter\.com\/(.+)\?.*\bnid=\d+\+(?:sender|dm_sender_profile)\b/m},G={DM:1},F=H.getStatLogger("Twitter"),E=H.getLogger("qr.client.Twitter");function D(N){var M=B.SENDER_SCREEN_NAME.exec(N.body.msgBody);return M?M[1]:null;}function J(N){var M=N.body.msgBody;if(B.EMAIL_TYPE_DM.test(M)){F("MessageTypeDirectMessage");return G.DM;}else{if(B.EMAIL_TYPE_FOLLOWING.test(M)){F("MessageTypeFollowing");}else{if(B.EMAIL_TYPE_FOLLOW_REQUEST.test(M)){F("MessageTypeFollowRequest");}else{if(B.EMAIL_TYPE_FAVORITE.test(M)){F("MessageTypeFavorite");}else{if(B.EMAIL_TYPE_RETWEET.test(M)){F("MessageTypeRetweet");}else{if(B.EMAIL_TYPE_REPLY_OR_MENTION.test(M)){F("MessageTypeReplyOrMention");}else{F("MessageTypeUnknown");}}}}}}}function K(N,O){var M=this;K.superclass.constructor.apply(this,arguments);this.messageType=J(O);this.from={screen_name:D(O)};E("Message from screen_name: @"+this.from.screen_name);}A.extend(K,A.qr.client.Base,{useReplyInitUI:false,initUI:function(){this.view.on("click",function(){this.handleLinkClick.apply(this,arguments);this.stat("link:clicked");},"#qr_Link_twitter",this);A.on("twitter:autherror",this.handleAuthError,this);},initView:function(){K.superclass.initView.apply(this,arguments);var N=this,M=N.view,P=M.template,O;O={qr_twitter:true,qr_twitter1:true,qr_twitter2:true,qr_twitter3:true,qr_twitter4:true,qr_follow:true,qr_link:true,qr_error_twitter:true};M.addFormatters(O);},render:function(){var M=this;I.isAuthenticated("twitter",false,function(N){if(N===null){F("RenderError");M.handleAuthError(true);return;}if(N){E("Account linked");if(M.messageType==G.DM){(new A.qr.client.TwitterDM(M.from,M.view)).show();}}else{E("Account not linked");M.view.renderLink();F("RenderLink");return;}});},isEnhanceTarget:function(S){var Q=B.TWITTER_EMAIL.test(S.from.email)&&B.EMAIL_TYPE_DM.test(S.body.msgBody);var P=A.Intl.lookupBestLang(A.qr.ENV.OMParams.user.lang,["en"]),M,N,O=A.qr.ENV.OMParams.user.guid,R=A.qr.ENV.experiment.twitter;try{M=H.inGuidBucket(A.qr.ENV.OMParams.user.guid,R.bucketNo,R.bucketCount)||(O=="LBSPTE5P7SEU6NYCCOF3FHSGII"||O=="G4LQ4V5JNGZUIBN22A4F27JNZM"||O=="BEDR7KZQGWHEA7NBJHJT7SZI7E");}catch(T){E("Error:Bucketizing");F("Error:Bucketizing");return false;}N=Q&&P&&M;if(N){F("MessageEnhanced");}E("isEnhanceTarget: "+N);return N;},handleLinkClick:function(){var M=this;E("Link clicked");I.authenticate("twitter",function(N){if(N===null){M.handleAuthError();}else{C.reprocessMessage();}});},handleRestartLinkClick:function(){C.reprocessMessage();},handleAuthError:function(M){var N=this;if(M){F("IsAuthenticatedError");N.view.renderError({message:L.str_quickreply_account_link_error,service:L.str_quickreply_service_twitter});return;}I.isAuthenticated("twitter",true,function(O){if(O===null){N.handleAuthError(true);}else{F("AuthLinkedStateError");N.view.renderError({message:L.str_quickreply_account_link_error,service:L.str_quickreply_service_twitter});}});}});A.namespace("qr.client").Twitter=K;},"@VERSION@",{requires:["qr-client-base","qr-lib-omapi","qr-lib-utils","qr-lib-auth","qr-lib-counter"]});
YUI.add("qr-messagepane",function(E){var B={FACEBOOK:"Facebook",TWITTER:"Twitter",GROUPS:"Groups",NORMALMAIL:"Mail"},C=E.qr.lib.Utils.getStatLogger("messagepane");function A(F){if(/@reply\.facebook\.com$/.test(F.replyto[0].email)){return B.FACEBOOK;}else{if(/@postmaster\.twitter\.com$/.test(F.replyto[0].email)){return B.TWITTER;}else{if(F.to.length&&/@yahoogroups\.com$/.test(F.to[0].email)){return B.GROUPS;}}}return B.NORMALMAIL;}function D(F,I,G){function J(K,M){var L=E.qr.client;if(!(K in L)){throw new TypeError("unknown Y.qr.client type: "+K);}return new L[K](K,M,G);}try{J(F,I).run();}catch(H){E.log("ERROR: "+H.message,"warn","QR");C("loadclient:error:"+H.message);}}E.namespace("qr.MessagePane").main=function(H,F){try{var G,L=H.messageObject,I=E.one(H.messageNode),J;G=A(L);J="qr-client-"+G.toLowerCase();E.log(" == QR client : "+J+", "+F.ENV.langModule,"log","QR");if(E.qr.client[G]){D(G,L,I);}else{E.use(J,function(M){D(G,L,I);});}}catch(K){E.log(K.message,"error","error");C("main:error:"+K.message);}};},"@VERSION@",{requires:["qr-lib-utils","qr-resources","qr-view","node"]});
