YUI.add("jsonp-super-cached",function(B){B.namespace("jsonpsupercached");if(!YUI.Env.JsonpSuperCached){YUI.Env.JsonpSuperCached={};}if(!YUI.Env.JsonpSuperCached.services){YUI.Env.JsonpSuperCached.services={};}var A=YUI.Env.JsonpSuperCached.services;B.jsonpsupercached.getData=function(F){var C={};var D=F.url||"";var J=F.serviceName||"service";var M=F.callbackName||"callback";var I=F.broadcast||false;var J="_"+J+"_"+M;var G=F.onSuccess||function(){};C.timeout=F.timeout;C.onTimeout=F.onTimeout||null;C.onFailure=F.onFailure||null;var L=(D.indexOf("?")===-1)?"?":"&";var H=D+L+M+"=YUI.Env.JsonpSuperCached."+J;var K=F.args||[];var E=F.context||null;B.jsonpsupercached.get=YUI.Env.JsonpSuperCached.get||B.Get;if(!A[H]){A[H]={dataAvailable:false,requestInProgress:false,callbacksQueue:[]};}var N=A[H];if(N.dataAvailable){G(N.data);}else{N.callbacksQueue.push(G);if(!N.requestInProgress){YUI.Env.JsonpSuperCached[J]=function(R){N.data=R;N.dataAvailable=true;scbs=N.callbacksQueue;for(var Q=0,O=scbs.length;Q<O;Q++){var P=scbs.pop();P.apply(E,[R].concat(K));}};N.requestInProgress=true;B.jsonpsupercached.get.script(H,C);}}};},"0.0.1");YUI.add("ucs-avatar",function(B){var A="http://l.yimg.com/a/i/identity2/profile_16a.png";B.namespace("ucs");B.ucs.Avatar=function(C){this.container=C;this.crumb=this.container.getAttribute("data-crumb");this.guid=this.container.getAttribute("data-guid");this.profile=this.container.getAttribute("data-prof");this.username=this.container.getAttribute("data-user");this.init();};B.ucs.Avatar.prototype={init:function(){this.container.removeClass("yucs-av-activate");this.img=B.Node.create('<img width="16" height="16" alt="'+this.username+" "+this.profile+'">');this._fetchData();},_fetchData:function(){var C='select imageUrl from social.profile.image where guid = "'+this.guid+'" and size="16x16";',D="http://ucs.query.yahoo.com/v1/console/yql?"+B.QueryString.stringify({q:C,format:"json",crumb:this.crumb,_maxage:900});B.jsonpsupercached.getData({url:D,serviceName:"avatar",onSuccess:B.bind(this._buildMarkup,this)});},_buildMarkup:function(D){var C;if(!D.query.results||D.query.results==="0"||!D.query.results.image){C=A;}else{C=D.query.results.image.imageUrl;}this.img.on("load",function(E){this.img.addClass("yucs-avatar");this.container.setContent(this.img);},this);this.img.setAttribute("src",C);}};},"1.0",{requires:["node","event","jsonp-super-cached","querystring-stringify"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-avatar",function(E){var D=E.one("#yUnivHead").one("span.yucs-avatar.yucs-av-activate"),C;if(D){C=new E.ucs.Avatar(D);}});})();YUI.add("jsonp-cached",function(B){B.namespace("jsonpcached");if(!YUI.Env.JsonpCached){YUI.Env.JsonpCached={};}if(!YUI.Env.JsonpCached.services){YUI.Env.JsonpCached.services={};}var A=YUI.Env.JsonpCached.services;B.jsonpcached.getData=function(F){var C={};var D=F.url||"";var J=F.serviceName||"service";var M=F.callbackName||"callback";var I=F.broadcast||false;var J=D.replace(/\W/g,"")+"_"+J+"_"+M;var G=F.onSuccess||function(){};C.timeout=F.timeout;C.onTimeout=F.onTimeout||null;C.onFailure=F.onFailure||null;var L=(D.indexOf("?")===-1)?"?":"&";var H=D+L+M+"=YUI.Env.JsonpCached."+J;var K=F.args||[];var E=F.context||null;B.jsonpcached.get=YUI.Env.JsonpCached.get||B.Get;if(!A[H]){A[H]={dataAvailable:false,requestInProgress:false,callbacksQueue:[]};}var N=A[H];if(N.dataAvailable){G(N.data);}else{N.callbacksQueue.push(G);if(!N.requestInProgress){YUI.Env.JsonpCached[J]=function(R){N.data=R;N.dataAvailable=true;scbs=N.callbacksQueue;for(var Q=0,O=scbs.length;Q<O;Q++){var P=scbs.pop();P.apply(E,[R].concat(K));}};N.requestInProgress=true;B.jsonpcached.get.script(H,C);}}};},"0.0.1");YUI.add("ucs-notifications-v2-bootstrap",function(B){B.namespace("ucs.Notifications");var o=false,Z=false,d=false,K,f=null,a=B.one("#yUnivHead").one(".yucs-notifications.yucs-notif-activate"),O=a.one(".yucs-notif-panel"),H=O.getAttribute("data-authstate"),j=a.one(".ynotif-notif-count"),L=O.getAttribute("data-polling-off"),h=a.one(".ynotif-notif-count-con"),E=a.one(".ynotif-ico-bell"),R=O.getAttribute("data-guid"),X=O.getAttribute("data-crumb"),Q=O.getAttribute("data-intl"),V=!(O.getAttribute("data-polling-no-restart")==="true"),e=O.getAttribute("data-yql-env"),C="http://l.yimg.com/kx/ucs/notif_v2/js/151/",m="http://l.yimg.com/kx/ucs/notif_v2/js/150/",g=null,W=null,P=null,k=null,n=null,T=parseFloat(O.getAttribute("data-polling-halt"))||10,U=parseFloat(O.getAttribute("data-polling-interval"))||2,N=O.getAttribute("data-ylt-bell");var S=function(r,p,q){W=B.later(p,this,function(){B.jsonpcached.getData({url:r,serviceName:"notifications_count"+new Date().getTime(),onSuccess:B.bind(J,this)});},null,q);};var M=function(){var q=B.Cookie.getSub("ucs","nt")||"",u="http://"+e+"ucs.query.yahoo.com/v1/console/yql?",s='select * from social.notifications.summary where guid = "'+R+'" and newCount="1"',r=60,p=U*60,t=u+B.QueryString.stringify({q:s,format:"json",crumb:X,_maxage:r,t:q});S(t,0,false);if(!L){S(t,p*1000,true);}};var J=function(p){var q;if(!(p.query&&p.query.results&&p.query.results.summaryInfo)){}else{q=p.query.results.summaryInfo.totalSinceLastSeen;g=q;if(q>0){if(!B.Lang.isNull(f)){if(q>f.model.getNotificationsCount()){f.view.resetNotificationsFetchState();}}if(q>99){q="99+";}j.set("innerHTML",q);h.removeClass("hide");}else{j.setAttribute("title","0");h.addClass("hide");}if(!B.Lang.isNull(f)){f.model.setNotificationsCount(q);}}};var c=function(){var p=new Image();p.height=0;p.width=0;p.src="http://geo.yahoo.com/t"+N;};var G=function(){c();if(!o){o=true;var p=m+"notifications_v2-min.js";B.Get.script(p,{onSuccess:function(){b("notif");if(K){K.detach();}},onEnd:function(){o=false;}});}};var i=function(){var r={"en-us":"en-US","en-ca":"en-US","en-in":"en-US","en-gb":"en-US","en-ie":"en-US","en-my":"en-US","en-ph":"en-US","en-sg":"en-US","en-za":"en-US","en-ae":"en-US","en-jo":"en-US"},p=C+"dict-"+r[Q.toLowerCase()]+"-min.js",q=new Date(),s={onSuccess:function(){b("dict");},onFail:function(){}};B.Get.script(p,s);};var D=function(){var q=document.getElementById("yUnivHead"),p=(q&&q.getAttribute("data-property")==="srp")?B:YUI();p.use("node","ucs-notifications-v2","ucs-dictionary",function(r){var s=r.one("#yUnivHead").all(".yucs-notif-activate.yucs-notifications");s.each(function(t){f=new r.ucs.NotificationsMenu({"node":t,"dict":r.ucs.dictionary.notif,"bindingVariables":r.ucs.bindingvariables,"notifCount":g,"authState":H,"locale":Q});f._accessShowMenu();});});};var b=function(p){if(p==="dict"){Z=true;}if(p==="notif"){d=true;}if(Z&&d){D();}};var I=function(){i();G();};var A=function(){n=B.later(T*60000,this,F,null,false);if(P){P.detach();}if(k){k.detach();}};var l=function(p){if(W){W.cancel();}if(n){n.cancel();A();}M();};var F=function(p){if(!p&&V){P=B.on("mousemove",l,B.config.win);k=B.on("keypress",l,B.config.win);}if(W){W.cancel();}};B.ucs.Notifications.Bootstrap={init:function(){if(H!=="signedout"){M();L=B.Lang.isString(L)&&L==="true";if(!L){if(B.UA.ie){B.on("focus",l,B.config.doc);B.on("blur",F,B.config.doc);}else{B.on("focus",l,B.config.win);B.on("blur",F,B.config.win);}A();}}if(location.href.match(/ucs_notif_popupsignin=1/)){I();}else{K=B.on("click",function(p){p.halt();I();},".ynotif-control");}}};B.ucs.Notifications.Bootstrap.init();},"1.0",{requires:["node","event","jsonp-cached","querystring-stringify","node-focusmanager","cookie","ucs-menu-utils"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("ucs-notifications-v2-bootstrap",function(C){});if(window.opener&&window.location.href.match(/ucs_notif_popupsignin=1/)){window.opener.location=window.location;window.close();}}());YUI.add("ucs-activate",function(A){A.namespace("ucs");A.ucs.Activate=function(B){this.el=B;this.el.removeClass("yucs-inactive");this.el.removeClass("yucs-wait");};},"1.0",{requires:["node"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-activate",function(E){var D=E.one("#yUnivHead").all("li.yucs-inactive");var C=E.one("#yUnivHead").all("li.yucs-wait");D.each(function(F){var G=new E.ucs.Activate(F);});C.each(function(F){var G=new E.ucs.Activate(F);});});})();